var QT=Object.defineProperty;var JT=(e,t,n)=>t in e?QT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>JT(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ld(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var x_={exports:{}},Fd={},A_={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu=Symbol.for("react.element"),tP=Symbol.for("react.portal"),nP=Symbol.for("react.fragment"),rP=Symbol.for("react.strict_mode"),iP=Symbol.for("react.profiler"),sP=Symbol.for("react.provider"),oP=Symbol.for("react.context"),aP=Symbol.for("react.forward_ref"),cP=Symbol.for("react.suspense"),uP=Symbol.for("react.memo"),lP=Symbol.for("react.lazy"),Xw=Symbol.iterator;function fP(e){return e===null||typeof e!="object"?null:(e=Xw&&e[Xw]||e["@@iterator"],typeof e=="function"?e:null)}var O_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,T_={};function Xa(e,t,n){this.props=e,this.context=t,this.refs=T_,this.updater=n||O_}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function P_(){}P_.prototype=Xa.prototype;function $m(e,t,n){this.props=e,this.context=t,this.refs=T_,this.updater=n||O_}var Bm=$m.prototype=new P_;Bm.constructor=$m;R_(Bm,Xa.prototype);Bm.isPureReactComponent=!0;var Zw=Array.isArray,k_=Object.prototype.hasOwnProperty,Um={current:null},C_={key:!0,ref:!0,__self:!0,__source:!0};function D_(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)k_.call(t,r)&&!C_.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Mu,type:e,key:s,ref:o,props:i,_owner:Um.current}}function dP(e,t){return{$$typeof:Mu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mu}function hP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qw=/\/+/g;function zh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hP(""+e.key):t.toString(36)}function df(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Mu:case tP:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+zh(o,0):r,Zw(i)?(n="",e!=null&&(n=e.replace(Qw,"$&/")+"/"),df(i,t,n,"",function(u){return u})):i!=null&&(Lm(i)&&(i=dP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Zw(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+zh(s,a);o+=df(s,t,n,c,i)}else if(c=fP(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+zh(s,a++),o+=df(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hl(e,t,n){if(e==null)return e;var r=[],i=0;return df(e,r,"","",function(s){return t.call(n,s,i++)}),r}function pP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cn={current:null},hf={transition:null},gP={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:hf,ReactCurrentOwner:Um};function N_(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:hl,forEach:function(e,t,n){hl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hl(e,function(){t++}),t},toArray:function(e){return hl(e,function(t){return t})||[]},only:function(e){if(!Lm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Xa;ge.Fragment=nP;ge.Profiler=iP;ge.PureComponent=$m;ge.StrictMode=rP;ge.Suspense=cP;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gP;ge.act=N_;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=R_({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Um.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)k_.call(t,c)&&!C_.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Mu,type:e.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(e){return e={$$typeof:oP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sP,_context:e},e.Consumer=e};ge.createElement=D_;ge.createFactory=function(e){var t=D_.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:aP,render:e}};ge.isValidElement=Lm;ge.lazy=function(e){return{$$typeof:lP,_payload:{_status:-1,_result:e},_init:pP}};ge.memo=function(e,t){return{$$typeof:uP,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=hf.transition;hf.transition={};try{e()}finally{hf.transition=t}};ge.unstable_act=N_;ge.useCallback=function(e,t){return cn.current.useCallback(e,t)};ge.useContext=function(e){return cn.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return cn.current.useDeferredValue(e)};ge.useEffect=function(e,t){return cn.current.useEffect(e,t)};ge.useId=function(){return cn.current.useId()};ge.useImperativeHandle=function(e,t,n){return cn.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return cn.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return cn.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return cn.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return cn.current.useReducer(e,t,n)};ge.useRef=function(e){return cn.current.useRef(e)};ge.useState=function(e){return cn.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return cn.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return cn.current.useTransition()};ge.version="18.3.1";A_.exports=ge;var Qt=A_.exports;const yP=Ld(Qt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP=Qt,wP=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),bP=Object.prototype.hasOwnProperty,EP=mP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_P={key:!0,ref:!0,__self:!0,__source:!0};function $_(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)bP.call(t,r)&&!_P.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:wP,type:e,key:s,ref:o,props:i,_owner:EP.current}}Fd.Fragment=vP;Fd.jsx=$_;Fd.jsxs=$_;x_.exports=Fd;var re=x_.exports,Og={},B_={exports:{}},Kn={},U_={exports:{}},L_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,A){var T=R.length;R.push(A);e:for(;0<T;){var M=T-1>>>1,z=R[M];if(0<i(z,A))R[M]=A,R[T]=z,T=M;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var A=R[0],T=R.pop();if(T!==A){R[0]=T;e:for(var M=0,z=R.length,Q=z>>>1;M<Q;){var K=2*(M+1)-1,G=R[K],te=K+1,ie=R[te];if(0>i(G,T))te<z&&0>i(ie,G)?(R[M]=ie,R[te]=T,M=te):(R[M]=G,R[K]=T,M=K);else if(te<z&&0>i(ie,T))R[M]=ie,R[te]=T,M=te;else break e}}return A}function i(R,A){var T=R.sortIndex-A.sortIndex;return T!==0?T:R.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],l=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=R)r(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(u)}}function I(R){if(g=!1,E(R),!p)if(n(c)!==null)p=!0,S(O);else{var A=n(u);A!==null&&P(I,A.startTime-R)}}function O(R,A){p=!1,g&&(g=!1,m(B),B=-1),h=!0;var T=d;try{for(E(A),f=n(c);f!==null&&(!(f.expirationTime>A)||R&&!V());){var M=f.callback;if(typeof M=="function"){f.callback=null,d=f.priorityLevel;var z=M(f.expirationTime<=A);A=e.unstable_now(),typeof z=="function"?f.callback=z:f===n(c)&&r(c),E(A)}else r(c);f=n(c)}if(f!==null)var Q=!0;else{var K=n(u);K!==null&&P(I,K.startTime-A),Q=!1}return Q}finally{f=null,d=T,h=!1}}var C=!1,N=null,B=-1,D=5,j=-1;function V(){return!(e.unstable_now()-j<D)}function F(){if(N!==null){var R=e.unstable_now();j=R;var A=!0;try{A=N(!0,R)}finally{A?$():(C=!1,N=null)}}else C=!1}var $;if(typeof _=="function")$=function(){_(F)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,w=L.port2;L.port1.onmessage=F,$=function(){w.postMessage(null)}}else $=function(){v(F,0)};function S(R){N=R,C||(C=!0,$())}function P(R,A){B=v(function(){R(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,S(O))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(d){case 1:case 2:case 3:var A=3;break;default:A=d}var T=d;d=A;try{return R()}finally{d=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,A){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var T=d;d=R;try{return A()}finally{d=T}},e.unstable_scheduleCallback=function(R,A,T){var M=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?M+T:M):T=M,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=T+z,R={id:l++,callback:A,priorityLevel:R,startTime:T,expirationTime:z,sortIndex:-1},T>M?(R.sortIndex=T,t(u,R),n(c)===null&&R===n(u)&&(g?(m(B),B=-1):g=!0,P(I,T-M))):(R.sortIndex=z,t(c,R),p||h||(p=!0,S(O))),R},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(R){var A=d;return function(){var T=d;d=A;try{return R.apply(this,arguments)}finally{d=T}}}})(L_);U_.exports=L_;var SP=U_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IP=Qt,Vn=SP;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F_=new Set,ou={};function Ro(e,t){Ba(e,t),Ba(e+"Capture",t)}function Ba(e,t){for(ou[e]=t,e=0;e<t.length;e++)F_.add(t[e])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,xP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jw={},e1={};function AP(e){return Rg.call(e1,e)?!0:Rg.call(Jw,e)?!1:xP.test(e)?e1[e]=!0:(Jw[e]=!0,!1)}function OP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RP(e,t,n,r){if(t===null||typeof t>"u"||OP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function un(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ft[e]=new un(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ft[t]=new un(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ft[e]=new un(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ft[e]=new un(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ft[e]=new un(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ft[e]=new un(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ft[e]=new un(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ft[e]=new un(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ft[e]=new un(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fm=/[\-:]([a-z])/g;function Mm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fm,Mm);Ft[t]=new un(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fm,Mm);Ft[t]=new un(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fm,Mm);Ft[t]=new un(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ft[e]=new un(e,1,!1,e.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ft[e]=new un(e,1,!1,e.toLowerCase(),null,!0,!0)});function jm(e,t,n,r){var i=Ft.hasOwnProperty(t)?Ft[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RP(t,n,i,r)&&(n=null),r||i===null?AP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ni=IP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),ra=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),zm=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),M_=Symbol.for("react.provider"),j_=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),kg=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),z_=Symbol.for("react.offscreen"),t1=Symbol.iterator;function ac(e){return e===null||typeof e!="object"?null:(e=t1&&e[t1]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Hh;function Nc(e){if(Hh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hh=t&&t[1]||""}return`
`+Hh+e}var qh=!1;function Vh(e,t){if(!e||qh)return"";qh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{qh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Nc(e):""}function TP(e){switch(e.tag){case 5:return Nc(e.type);case 16:return Nc("Lazy");case 13:return Nc("Suspense");case 19:return Nc("SuspenseList");case 0:case 2:case 15:return e=Vh(e.type,!1),e;case 11:return e=Vh(e.type.render,!1),e;case 1:return e=Vh(e.type,!0),e;default:return""}}function Cg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ia:return"Fragment";case ra:return"Portal";case Tg:return"Profiler";case zm:return"StrictMode";case Pg:return"Suspense";case kg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j_:return(e.displayName||"Context")+".Consumer";case M_:return(e._context.displayName||"Context")+".Provider";case Hm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qm:return t=e.displayName||null,t!==null?t:Cg(e.type)||"Memo";case Xi:t=e._payload,e=e._init;try{return Cg(e(t))}catch{}}return null}function PP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cg(t);case 8:return t===zm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _s(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function H_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kP(e){var t=H_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gl(e){e._valueTracker||(e._valueTracker=kP(e))}function q_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function jf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dg(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function n1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_s(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function V_(e,t){t=t.checked,t!=null&&jm(e,"checked",t,!1)}function Ng(e,t){V_(e,t);var n=_s(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$g(e,t.type,n):t.hasOwnProperty("defaultValue")&&$g(e,t.type,_s(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $g(e,t,n){(t!=="number"||jf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $c=Array.isArray;function va(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_s(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Bg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function i1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if($c(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_s(n)}}function K_(e,t){var n=_s(t.value),r=_s(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function s1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ug(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yl,G_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yl=yl||document.createElement("div"),yl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function au(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CP=["Webkit","ms","Moz","O"];Object.keys(qc).forEach(function(e){CP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qc[t]=qc[e]})});function Y_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qc.hasOwnProperty(e)&&qc[e]?(""+t).trim():t+"px"}function X_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Y_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var DP=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lg(e,t){if(t){if(DP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Fg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=null;function Vm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jg=null,ba=null,Ea=null;function o1(e){if(e=Hu(e)){if(typeof jg!="function")throw Error(X(280));var t=e.stateNode;t&&(t=qd(t),jg(e.stateNode,e.type,t))}}function Z_(e){ba?Ea?Ea.push(e):Ea=[e]:ba=e}function Q_(){if(ba){var e=ba,t=Ea;if(Ea=ba=null,o1(e),t)for(e=0;e<t.length;e++)o1(t[e])}}function J_(e,t){return e(t)}function eS(){}var Kh=!1;function tS(e,t,n){if(Kh)return e(t,n);Kh=!0;try{return J_(e,t,n)}finally{Kh=!1,(ba!==null||Ea!==null)&&(eS(),Q_())}}function cu(e,t){var n=e.stateNode;if(n===null)return null;var r=qd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var zg=!1;if(Ti)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){zg=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{zg=!1}function NP(e,t,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Vc=!1,zf=null,Hf=!1,Hg=null,$P={onError:function(e){Vc=!0,zf=e}};function BP(e,t,n,r,i,s,o,a,c){Vc=!1,zf=null,NP.apply($P,arguments)}function UP(e,t,n,r,i,s,o,a,c){if(BP.apply(this,arguments),Vc){if(Vc){var u=zf;Vc=!1,zf=null}else throw Error(X(198));Hf||(Hf=!0,Hg=u)}}function To(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function a1(e){if(To(e)!==e)throw Error(X(188))}function LP(e){var t=e.alternate;if(!t){if(t=To(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return a1(i),e;if(s===r)return a1(i),t;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function rS(e){return e=LP(e),e!==null?iS(e):null}function iS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iS(e);if(t!==null)return t;e=e.sibling}return null}var sS=Vn.unstable_scheduleCallback,c1=Vn.unstable_cancelCallback,FP=Vn.unstable_shouldYield,MP=Vn.unstable_requestPaint,at=Vn.unstable_now,jP=Vn.unstable_getCurrentPriorityLevel,Km=Vn.unstable_ImmediatePriority,oS=Vn.unstable_UserBlockingPriority,qf=Vn.unstable_NormalPriority,zP=Vn.unstable_LowPriority,aS=Vn.unstable_IdlePriority,Md=null,Xr=null;function HP(e){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Md,e,void 0,(e.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:KP,qP=Math.log,VP=Math.LN2;function KP(e){return e>>>=0,e===0?32:31-(qP(e)/VP|0)|0}var ml=64,wl=4194304;function Bc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bc(a):(s&=o,s!==0&&(r=Bc(s)))}else o=n&~i,o!==0?r=Bc(o):s!==0&&(r=Bc(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ir(t),i=1<<n,r|=e[n],t&=~i;return r}function WP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ir(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=WP(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function qg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cS(){var e=ml;return ml<<=1,!(ml&4194240)&&(ml=64),e}function Wh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ju(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ir(t),e[t]=n}function YP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ir(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Wm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ir(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ae=0;function uS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lS,Gm,fS,dS,hS,Vg=!1,vl=[],ls=null,fs=null,ds=null,uu=new Map,lu=new Map,ts=[],XP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u1(e,t){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(t.pointerId)}}function uc(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Hu(t),t!==null&&Gm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ZP(e,t,n,r,i){switch(t){case"focusin":return ls=uc(ls,e,t,n,r,i),!0;case"dragenter":return fs=uc(fs,e,t,n,r,i),!0;case"mouseover":return ds=uc(ds,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return uu.set(s,uc(uu.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,lu.set(s,uc(lu.get(s)||null,e,t,n,r,i)),!0}return!1}function pS(e){var t=eo(e.target);if(t!==null){var n=To(t);if(n!==null){if(t=n.tag,t===13){if(t=nS(n),t!==null){e.blockedOn=t,hS(e.priority,function(){fS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mg=r,n.target.dispatchEvent(r),Mg=null}else return t=Hu(n),t!==null&&Gm(t),e.blockedOn=n,!1;t.shift()}return!0}function l1(e,t,n){pf(e)&&n.delete(t)}function QP(){Vg=!1,ls!==null&&pf(ls)&&(ls=null),fs!==null&&pf(fs)&&(fs=null),ds!==null&&pf(ds)&&(ds=null),uu.forEach(l1),lu.forEach(l1)}function lc(e,t){e.blockedOn===t&&(e.blockedOn=null,Vg||(Vg=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,QP)))}function fu(e){function t(i){return lc(i,e)}if(0<vl.length){lc(vl[0],e);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ls!==null&&lc(ls,e),fs!==null&&lc(fs,e),ds!==null&&lc(ds,e),uu.forEach(t),lu.forEach(t),n=0;n<ts.length;n++)r=ts[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)pS(n),n.blockedOn===null&&ts.shift()}var _a=Ni.ReactCurrentBatchConfig,Kf=!0;function JP(e,t,n,r){var i=Ae,s=_a.transition;_a.transition=null;try{Ae=1,Ym(e,t,n,r)}finally{Ae=i,_a.transition=s}}function ek(e,t,n,r){var i=Ae,s=_a.transition;_a.transition=null;try{Ae=4,Ym(e,t,n,r)}finally{Ae=i,_a.transition=s}}function Ym(e,t,n,r){if(Kf){var i=Kg(e,t,n,r);if(i===null)rp(e,t,r,Wf,n),u1(e,r);else if(ZP(i,e,t,n,r))r.stopPropagation();else if(u1(e,r),t&4&&-1<XP.indexOf(e)){for(;i!==null;){var s=Hu(i);if(s!==null&&lS(s),s=Kg(e,t,n,r),s===null&&rp(e,t,r,Wf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rp(e,t,r,null,n)}}var Wf=null;function Kg(e,t,n,r){if(Wf=null,e=Vm(r),e=eo(e),e!==null)if(t=To(e),t===null)e=null;else if(n=t.tag,n===13){if(e=nS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wf=e,null}function gS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jP()){case Km:return 1;case oS:return 4;case qf:case zP:return 16;case aS:return 536870912;default:return 16}default:return 16}}var os=null,Xm=null,gf=null;function yS(){if(gf)return gf;var e,t=Xm,n=t.length,r,i="value"in os?os.value:os.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return gf=i.slice(e,1<r?1-r:void 0)}function yf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function f1(){return!1}function Wn(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bl:f1,this.isPropagationStopped=f1,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),t}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=Wn(Za),zu=Ze({},Za,{view:0,detail:0}),tk=Wn(zu),Gh,Yh,fc,jd=Ze({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fc&&(fc&&e.type==="mousemove"?(Gh=e.screenX-fc.screenX,Yh=e.screenY-fc.screenY):Yh=Gh=0,fc=e),Gh)},movementY:function(e){return"movementY"in e?e.movementY:Yh}}),d1=Wn(jd),nk=Ze({},jd,{dataTransfer:0}),rk=Wn(nk),ik=Ze({},zu,{relatedTarget:0}),Xh=Wn(ik),sk=Ze({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),ok=Wn(sk),ak=Ze({},Za,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ck=Wn(ak),uk=Ze({},Za,{data:0}),h1=Wn(uk),lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dk[e])?!!t[e]:!1}function Qm(){return hk}var pk=Ze({},zu,{key:function(e){if(e.key){var t=lk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qm,charCode:function(e){return e.type==="keypress"?yf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gk=Wn(pk),yk=Ze({},jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p1=Wn(yk),mk=Ze({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qm}),wk=Wn(mk),vk=Ze({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),bk=Wn(vk),Ek=Ze({},jd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_k=Wn(Ek),Sk=[9,13,27,32],Jm=Ti&&"CompositionEvent"in window,Kc=null;Ti&&"documentMode"in document&&(Kc=document.documentMode);var Ik=Ti&&"TextEvent"in window&&!Kc,mS=Ti&&(!Jm||Kc&&8<Kc&&11>=Kc),g1=" ",y1=!1;function wS(e,t){switch(e){case"keyup":return Sk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sa=!1;function xk(e,t){switch(e){case"compositionend":return vS(t);case"keypress":return t.which!==32?null:(y1=!0,g1);case"textInput":return e=t.data,e===g1&&y1?null:e;default:return null}}function Ak(e,t){if(sa)return e==="compositionend"||!Jm&&wS(e,t)?(e=yS(),gf=Xm=os=null,sa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mS&&t.locale!=="ko"?null:t.data;default:return null}}var Ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ok[e.type]:t==="textarea"}function bS(e,t,n,r){Z_(r),t=Gf(t,"onChange"),0<t.length&&(n=new Zm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wc=null,du=null;function Rk(e){kS(e,0)}function zd(e){var t=ca(e);if(q_(t))return e}function Tk(e,t){if(e==="change")return t}var ES=!1;if(Ti){var Zh;if(Ti){var Qh="oninput"in document;if(!Qh){var w1=document.createElement("div");w1.setAttribute("oninput","return;"),Qh=typeof w1.oninput=="function"}Zh=Qh}else Zh=!1;ES=Zh&&(!document.documentMode||9<document.documentMode)}function v1(){Wc&&(Wc.detachEvent("onpropertychange",_S),du=Wc=null)}function _S(e){if(e.propertyName==="value"&&zd(du)){var t=[];bS(t,du,e,Vm(e)),tS(Rk,t)}}function Pk(e,t,n){e==="focusin"?(v1(),Wc=t,du=n,Wc.attachEvent("onpropertychange",_S)):e==="focusout"&&v1()}function kk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zd(du)}function Ck(e,t){if(e==="click")return zd(t)}function Dk(e,t){if(e==="input"||e==="change")return zd(t)}function Nk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rr=typeof Object.is=="function"?Object.is:Nk;function hu(e,t){if(Rr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rg.call(t,i)||!Rr(e[i],t[i]))return!1}return!0}function b1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E1(e,t){var n=b1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b1(n)}}function SS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IS(){for(var e=window,t=jf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=jf(e.document)}return t}function e0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $k(e){var t=IS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&SS(n.ownerDocument.documentElement,n)){if(r!==null&&e0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=E1(n,s);var o=E1(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bk=Ti&&"documentMode"in document&&11>=document.documentMode,oa=null,Wg=null,Gc=null,Gg=!1;function _1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gg||oa==null||oa!==jf(r)||(r=oa,"selectionStart"in r&&e0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gc&&hu(Gc,r)||(Gc=r,r=Gf(Wg,"onSelect"),0<r.length&&(t=new Zm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=oa)))}function El(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var aa={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionend:El("Transition","TransitionEnd")},Jh={},xS={};Ti&&(xS=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function Hd(e){if(Jh[e])return Jh[e];if(!aa[e])return e;var t=aa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xS)return Jh[e]=t[n];return e}var AS=Hd("animationend"),OS=Hd("animationiteration"),RS=Hd("animationstart"),TS=Hd("transitionend"),PS=new Map,S1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(e,t){PS.set(e,t),Ro(t,[e])}for(var ep=0;ep<S1.length;ep++){var tp=S1[ep],Uk=tp.toLowerCase(),Lk=tp[0].toUpperCase()+tp.slice(1);Os(Uk,"on"+Lk)}Os(AS,"onAnimationEnd");Os(OS,"onAnimationIteration");Os(RS,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(TS,"onTransitionEnd");Ba("onMouseEnter",["mouseout","mouseover"]);Ba("onMouseLeave",["mouseout","mouseover"]);Ba("onPointerEnter",["pointerout","pointerover"]);Ba("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uc));function I1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,UP(r,t,void 0,e),e.currentTarget=null}function kS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;I1(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;I1(i,a,u),s=c}}}if(Hf)throw e=Hg,Hf=!1,Hg=null,e}function Me(e,t){var n=t[Jg];n===void 0&&(n=t[Jg]=new Set);var r=e+"__bubble";n.has(r)||(CS(t,e,2,!1),n.add(r))}function np(e,t,n){var r=0;t&&(r|=4),CS(n,e,r,t)}var _l="_reactListening"+Math.random().toString(36).slice(2);function pu(e){if(!e[_l]){e[_l]=!0,F_.forEach(function(n){n!=="selectionchange"&&(Fk.has(n)||np(n,!1,e),np(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_l]||(t[_l]=!0,np("selectionchange",!1,t))}}function CS(e,t,n,r){switch(gS(t)){case 1:var i=JP;break;case 4:i=ek;break;default:i=Ym}n=i.bind(null,t,n,e),i=void 0,!zg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function rp(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=eo(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}tS(function(){var u=s,l=Vm(n),f=[];e:{var d=PS.get(e);if(d!==void 0){var h=Zm,p=e;switch(e){case"keypress":if(yf(n)===0)break e;case"keydown":case"keyup":h=gk;break;case"focusin":p="focus",h=Xh;break;case"focusout":p="blur",h=Xh;break;case"beforeblur":case"afterblur":h=Xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=d1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=wk;break;case AS:case OS:case RS:h=ok;break;case TS:h=bk;break;case"scroll":h=tk;break;case"wheel":h=_k;break;case"copy":case"cut":case"paste":h=ck;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=p1}var g=(t&4)!==0,v=!g&&e==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var _=u,E;_!==null;){E=_;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,m!==null&&(I=cu(_,m),I!=null&&g.push(gu(_,I,E)))),v)break;_=_.return}0<g.length&&(d=new h(d,p,null,n,l),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Mg&&(p=n.relatedTarget||n.fromElement)&&(eo(p)||p[Pi]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?eo(p):null,p!==null&&(v=To(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=d1,I="onMouseLeave",m="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(g=p1,I="onPointerLeave",m="onPointerEnter",_="pointer"),v=h==null?d:ca(h),E=p==null?d:ca(p),d=new g(I,_+"leave",h,n,l),d.target=v,d.relatedTarget=E,I=null,eo(l)===u&&(g=new g(m,_+"enter",p,n,l),g.target=E,g.relatedTarget=v,I=g),v=I,h&&p)t:{for(g=h,m=p,_=0,E=g;E;E=Mo(E))_++;for(E=0,I=m;I;I=Mo(I))E++;for(;0<_-E;)g=Mo(g),_--;for(;0<E-_;)m=Mo(m),E--;for(;_--;){if(g===m||m!==null&&g===m.alternate)break t;g=Mo(g),m=Mo(m)}g=null}else g=null;h!==null&&x1(f,d,h,g,!1),p!==null&&v!==null&&x1(f,v,p,g,!0)}}e:{if(d=u?ca(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var O=Tk;else if(m1(d))if(ES)O=Dk;else{O=kk;var C=Pk}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(O=Ck);if(O&&(O=O(e,u))){bS(f,O,n,l);break e}C&&C(e,d,u),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&$g(d,"number",d.value)}switch(C=u?ca(u):window,e){case"focusin":(m1(C)||C.contentEditable==="true")&&(oa=C,Wg=u,Gc=null);break;case"focusout":Gc=Wg=oa=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,_1(f,n,l);break;case"selectionchange":if(Bk)break;case"keydown":case"keyup":_1(f,n,l)}var N;if(Jm)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else sa?wS(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(mS&&n.locale!=="ko"&&(sa||B!=="onCompositionStart"?B==="onCompositionEnd"&&sa&&(N=yS()):(os=l,Xm="value"in os?os.value:os.textContent,sa=!0)),C=Gf(u,B),0<C.length&&(B=new h1(B,e,null,n,l),f.push({event:B,listeners:C}),N?B.data=N:(N=vS(n),N!==null&&(B.data=N)))),(N=Ik?xk(e,n):Ak(e,n))&&(u=Gf(u,"onBeforeInput"),0<u.length&&(l=new h1("onBeforeInput","beforeinput",null,n,l),f.push({event:l,listeners:u}),l.data=N))}kS(f,t)})}function gu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gf(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cu(e,n),s!=null&&r.unshift(gu(e,s,i)),s=cu(e,t),s!=null&&r.push(gu(e,s,i))),e=e.return}return r}function Mo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function x1(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=cu(n,s),c!=null&&o.unshift(gu(n,c,a))):i||(c=cu(n,s),c!=null&&o.push(gu(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Mk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function A1(e){return(typeof e=="string"?e:""+e).replace(Mk,`
`).replace(jk,"")}function Sl(e,t,n){if(t=A1(t),A1(e)!==t&&n)throw Error(X(425))}function Yf(){}var Yg=null,Xg=null;function Zg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qg=typeof setTimeout=="function"?setTimeout:void 0,zk=typeof clearTimeout=="function"?clearTimeout:void 0,O1=typeof Promise=="function"?Promise:void 0,Hk=typeof queueMicrotask=="function"?queueMicrotask:typeof O1<"u"?function(e){return O1.resolve(null).then(e).catch(qk)}:Qg;function qk(e){setTimeout(function(){throw e})}function ip(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),fu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fu(t)}function hs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function R1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),qr="__reactFiber$"+Qa,yu="__reactProps$"+Qa,Pi="__reactContainer$"+Qa,Jg="__reactEvents$"+Qa,Vk="__reactListeners$"+Qa,Kk="__reactHandles$"+Qa;function eo(e){var t=e[qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pi]||n[qr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=R1(e);e!==null;){if(n=e[qr])return n;e=R1(e)}return t}e=n,n=e.parentNode}return null}function Hu(e){return e=e[qr]||e[Pi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ca(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function qd(e){return e[yu]||null}var ey=[],ua=-1;function Rs(e){return{current:e}}function ze(e){0>ua||(e.current=ey[ua],ey[ua]=null,ua--)}function Be(e,t){ua++,ey[ua]=e.current,e.current=t}var Ss={},en=Rs(Ss),In=Rs(!1),ho=Ss;function Ua(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xn(e){return e=e.childContextTypes,e!=null}function Xf(){ze(In),ze(en)}function T1(e,t,n){if(en.current!==Ss)throw Error(X(168));Be(en,t),Be(In,n)}function DS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(X(108,PP(e)||"Unknown",i));return Ze({},n,r)}function Zf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,ho=en.current,Be(en,e),Be(In,In.current),!0}function P1(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=DS(e,t,ho),r.__reactInternalMemoizedMergedChildContext=e,ze(In),ze(en),Be(en,e)):ze(In),Be(In,n)}var pi=null,Vd=!1,sp=!1;function NS(e){pi===null?pi=[e]:pi.push(e)}function Wk(e){Vd=!0,NS(e)}function Ts(){if(!sp&&pi!==null){sp=!0;var e=0,t=Ae;try{var n=pi;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}pi=null,Vd=!1}catch(i){throw pi!==null&&(pi=pi.slice(e+1)),sS(Km,Ts),i}finally{Ae=t,sp=!1}}return null}var la=[],fa=0,Qf=null,Jf=0,rr=[],ir=0,po=null,vi=1,bi="";function Ws(e,t){la[fa++]=Jf,la[fa++]=Qf,Qf=e,Jf=t}function $S(e,t,n){rr[ir++]=vi,rr[ir++]=bi,rr[ir++]=po,po=e;var r=vi;e=bi;var i=32-Ir(r)-1;r&=~(1<<i),n+=1;var s=32-Ir(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,vi=1<<32-Ir(t)+i|n<<i|r,bi=s+e}else vi=1<<s|n<<i|r,bi=e}function t0(e){e.return!==null&&(Ws(e,1),$S(e,1,0))}function n0(e){for(;e===Qf;)Qf=la[--fa],la[fa]=null,Jf=la[--fa],la[fa]=null;for(;e===po;)po=rr[--ir],rr[ir]=null,bi=rr[--ir],rr[ir]=null,vi=rr[--ir],rr[ir]=null}var qn=null,zn=null,Ke=!1,_r=null;function BS(e,t){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function k1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qn=e,zn=hs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qn=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=po!==null?{id:vi,overflow:bi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qn=e,zn=null,!0):!1;default:return!1}}function ty(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ny(e){if(Ke){var t=zn;if(t){var n=t;if(!k1(e,t)){if(ty(e))throw Error(X(418));t=hs(n.nextSibling);var r=qn;t&&k1(e,t)?BS(r,n):(e.flags=e.flags&-4097|2,Ke=!1,qn=e)}}else{if(ty(e))throw Error(X(418));e.flags=e.flags&-4097|2,Ke=!1,qn=e}}}function C1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qn=e}function Il(e){if(e!==qn)return!1;if(!Ke)return C1(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zg(e.type,e.memoizedProps)),t&&(t=zn)){if(ty(e))throw US(),Error(X(418));for(;t;)BS(e,t),t=hs(t.nextSibling)}if(C1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=hs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=qn?hs(e.stateNode.nextSibling):null;return!0}function US(){for(var e=zn;e;)e=hs(e.nextSibling)}function La(){zn=qn=null,Ke=!1}function r0(e){_r===null?_r=[e]:_r.push(e)}var Gk=Ni.ReactCurrentBatchConfig;function dc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function xl(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function D1(e){var t=e._init;return t(e._payload)}function LS(e){function t(m,_){if(e){var E=m.deletions;E===null?(m.deletions=[_],m.flags|=16):E.push(_)}}function n(m,_){if(!e)return null;for(;_!==null;)t(m,_),_=_.sibling;return null}function r(m,_){for(m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function i(m,_){return m=ms(m,_),m.index=0,m.sibling=null,m}function s(m,_,E){return m.index=E,e?(E=m.alternate,E!==null?(E=E.index,E<_?(m.flags|=2,_):E):(m.flags|=2,_)):(m.flags|=1048576,_)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,_,E,I){return _===null||_.tag!==6?(_=dp(E,m.mode,I),_.return=m,_):(_=i(_,E),_.return=m,_)}function c(m,_,E,I){var O=E.type;return O===ia?l(m,_,E.props.children,I,E.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xi&&D1(O)===_.type)?(I=i(_,E.props),I.ref=dc(m,_,E),I.return=m,I):(I=Sf(E.type,E.key,E.props,null,m.mode,I),I.ref=dc(m,_,E),I.return=m,I)}function u(m,_,E,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=hp(E,m.mode,I),_.return=m,_):(_=i(_,E.children||[]),_.return=m,_)}function l(m,_,E,I,O){return _===null||_.tag!==7?(_=uo(E,m.mode,I,O),_.return=m,_):(_=i(_,E),_.return=m,_)}function f(m,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=dp(""+_,m.mode,E),_.return=m,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pl:return E=Sf(_.type,_.key,_.props,null,m.mode,E),E.ref=dc(m,null,_),E.return=m,E;case ra:return _=hp(_,m.mode,E),_.return=m,_;case Xi:var I=_._init;return f(m,I(_._payload),E)}if($c(_)||ac(_))return _=uo(_,m.mode,E,null),_.return=m,_;xl(m,_)}return null}function d(m,_,E,I){var O=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(m,_,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pl:return E.key===O?c(m,_,E,I):null;case ra:return E.key===O?u(m,_,E,I):null;case Xi:return O=E._init,d(m,_,O(E._payload),I)}if($c(E)||ac(E))return O!==null?null:l(m,_,E,I,null);xl(m,E)}return null}function h(m,_,E,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return m=m.get(E)||null,a(_,m,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case pl:return m=m.get(I.key===null?E:I.key)||null,c(_,m,I,O);case ra:return m=m.get(I.key===null?E:I.key)||null,u(_,m,I,O);case Xi:var C=I._init;return h(m,_,E,C(I._payload),O)}if($c(I)||ac(I))return m=m.get(E)||null,l(_,m,I,O,null);xl(_,I)}return null}function p(m,_,E,I){for(var O=null,C=null,N=_,B=_=0,D=null;N!==null&&B<E.length;B++){N.index>B?(D=N,N=null):D=N.sibling;var j=d(m,N,E[B],I);if(j===null){N===null&&(N=D);break}e&&N&&j.alternate===null&&t(m,N),_=s(j,_,B),C===null?O=j:C.sibling=j,C=j,N=D}if(B===E.length)return n(m,N),Ke&&Ws(m,B),O;if(N===null){for(;B<E.length;B++)N=f(m,E[B],I),N!==null&&(_=s(N,_,B),C===null?O=N:C.sibling=N,C=N);return Ke&&Ws(m,B),O}for(N=r(m,N);B<E.length;B++)D=h(N,m,B,E[B],I),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?B:D.key),_=s(D,_,B),C===null?O=D:C.sibling=D,C=D);return e&&N.forEach(function(V){return t(m,V)}),Ke&&Ws(m,B),O}function g(m,_,E,I){var O=ac(E);if(typeof O!="function")throw Error(X(150));if(E=O.call(E),E==null)throw Error(X(151));for(var C=O=null,N=_,B=_=0,D=null,j=E.next();N!==null&&!j.done;B++,j=E.next()){N.index>B?(D=N,N=null):D=N.sibling;var V=d(m,N,j.value,I);if(V===null){N===null&&(N=D);break}e&&N&&V.alternate===null&&t(m,N),_=s(V,_,B),C===null?O=V:C.sibling=V,C=V,N=D}if(j.done)return n(m,N),Ke&&Ws(m,B),O;if(N===null){for(;!j.done;B++,j=E.next())j=f(m,j.value,I),j!==null&&(_=s(j,_,B),C===null?O=j:C.sibling=j,C=j);return Ke&&Ws(m,B),O}for(N=r(m,N);!j.done;B++,j=E.next())j=h(N,m,B,j.value,I),j!==null&&(e&&j.alternate!==null&&N.delete(j.key===null?B:j.key),_=s(j,_,B),C===null?O=j:C.sibling=j,C=j);return e&&N.forEach(function(F){return t(m,F)}),Ke&&Ws(m,B),O}function v(m,_,E,I){if(typeof E=="object"&&E!==null&&E.type===ia&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case pl:e:{for(var O=E.key,C=_;C!==null;){if(C.key===O){if(O=E.type,O===ia){if(C.tag===7){n(m,C.sibling),_=i(C,E.props.children),_.return=m,m=_;break e}}else if(C.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xi&&D1(O)===C.type){n(m,C.sibling),_=i(C,E.props),_.ref=dc(m,C,E),_.return=m,m=_;break e}n(m,C);break}else t(m,C);C=C.sibling}E.type===ia?(_=uo(E.props.children,m.mode,I,E.key),_.return=m,m=_):(I=Sf(E.type,E.key,E.props,null,m.mode,I),I.ref=dc(m,_,E),I.return=m,m=I)}return o(m);case ra:e:{for(C=E.key;_!==null;){if(_.key===C)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(m,_.sibling),_=i(_,E.children||[]),_.return=m,m=_;break e}else{n(m,_);break}else t(m,_);_=_.sibling}_=hp(E,m.mode,I),_.return=m,m=_}return o(m);case Xi:return C=E._init,v(m,_,C(E._payload),I)}if($c(E))return p(m,_,E,I);if(ac(E))return g(m,_,E,I);xl(m,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(m,_.sibling),_=i(_,E),_.return=m,m=_):(n(m,_),_=dp(E,m.mode,I),_.return=m,m=_),o(m)):n(m,_)}return v}var Fa=LS(!0),FS=LS(!1),ed=Rs(null),td=null,da=null,i0=null;function s0(){i0=da=td=null}function o0(e){var t=ed.current;ze(ed),e._currentValue=t}function ry(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){td=e,i0=da=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(En=!0),e.firstContext=null)}function cr(e){var t=e._currentValue;if(i0!==e)if(e={context:e,memoizedValue:t,next:null},da===null){if(td===null)throw Error(X(308));da=e,td.dependencies={lanes:0,firstContext:e}}else da=da.next=e;return t}var to=null;function a0(e){to===null?to=[e]:to.push(e)}function MS(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,a0(t)):(n.next=i.next,i.next=n),t.interleaved=n,ki(e,r)}function ki(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zi=!1;function c0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ii(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ps(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ki(e,n)}return i=r.interleaved,i===null?(t.next=t,a0(r)):(t.next=i.next,i.next=t),r.interleaved=t,ki(e,n)}function mf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wm(e,n)}}function N1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function nd(e,t,n,r){var i=e.updateQueue;Zi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var l=e.alternate;l!==null&&(l=l.updateQueue,a=l.lastBaseUpdate,a!==o&&(a===null?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,l=u=c=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ze({},f,d);break e;case 2:Zi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},l===null?(u=l=h,c=f):l=l.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);yo|=o,e.lanes=o,e.memoizedState=f}}function $1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var qu={},Zr=Rs(qu),mu=Rs(qu),wu=Rs(qu);function no(e){if(e===qu)throw Error(X(174));return e}function u0(e,t){switch(Be(wu,t),Be(mu,e),Be(Zr,qu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ug(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ug(t,e)}ze(Zr),Be(Zr,t)}function Ma(){ze(Zr),ze(mu),ze(wu)}function zS(e){no(wu.current);var t=no(Zr.current),n=Ug(t,e.type);t!==n&&(Be(mu,e),Be(Zr,n))}function l0(e){mu.current===e&&(ze(Zr),ze(mu))}var Ye=Rs(0);function rd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var op=[];function f0(){for(var e=0;e<op.length;e++)op[e]._workInProgressVersionPrimary=null;op.length=0}var wf=Ni.ReactCurrentDispatcher,ap=Ni.ReactCurrentBatchConfig,go=0,Xe=null,wt=null,At=null,id=!1,Yc=!1,vu=0,Yk=0;function Ht(){throw Error(X(321))}function d0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rr(e[n],t[n]))return!1;return!0}function h0(e,t,n,r,i,s){if(go=s,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wf.current=e===null||e.memoizedState===null?Jk:e8,e=n(r,i),Yc){s=0;do{if(Yc=!1,vu=0,25<=s)throw Error(X(301));s+=1,At=wt=null,t.updateQueue=null,wf.current=t8,e=n(r,i)}while(Yc)}if(wf.current=sd,t=wt!==null&&wt.next!==null,go=0,At=wt=Xe=null,id=!1,t)throw Error(X(300));return e}function p0(){var e=vu!==0;return vu=0,e}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Xe.memoizedState=At=e:At=At.next=e,At}function ur(){if(wt===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=At===null?Xe.memoizedState:At.next;if(t!==null)At=t,wt=e;else{if(e===null)throw Error(X(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},At===null?Xe.memoizedState=At=e:At=At.next=e}return At}function bu(e,t){return typeof t=="function"?t(e):t}function cp(e){var t=ur(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=wt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var l=u.lane;if((go&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Xe.lanes|=l,yo|=l}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,Rr(r,t.memoizedState)||(En=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Xe.lanes|=s,yo|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function up(e){var t=ur(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Rr(s,t.memoizedState)||(En=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function HS(){}function qS(e,t){var n=Xe,r=ur(),i=t(),s=!Rr(r.memoizedState,i);if(s&&(r.memoizedState=i,En=!0),r=r.queue,g0(WS.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Eu(9,KS.bind(null,n,r,i,t),void 0,null),Tt===null)throw Error(X(349));go&30||VS(n,t,i)}return i}function VS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function KS(e,t,n,r){t.value=n,t.getSnapshot=r,GS(t)&&YS(e)}function WS(e,t,n){return n(function(){GS(t)&&YS(e)})}function GS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rr(e,n)}catch{return!0}}function YS(e){var t=ki(e,1);t!==null&&xr(t,e,1,-1)}function B1(e){var t=Fr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:e},t.queue=e,e=e.dispatch=Qk.bind(null,Xe,e),[t.memoizedState,e]}function Eu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function XS(){return ur().memoizedState}function vf(e,t,n,r){var i=Fr();Xe.flags|=e,i.memoizedState=Eu(1|t,n,void 0,r===void 0?null:r)}function Kd(e,t,n,r){var i=ur();r=r===void 0?null:r;var s=void 0;if(wt!==null){var o=wt.memoizedState;if(s=o.destroy,r!==null&&d0(r,o.deps)){i.memoizedState=Eu(t,n,s,r);return}}Xe.flags|=e,i.memoizedState=Eu(1|t,n,s,r)}function U1(e,t){return vf(8390656,8,e,t)}function g0(e,t){return Kd(2048,8,e,t)}function ZS(e,t){return Kd(4,2,e,t)}function QS(e,t){return Kd(4,4,e,t)}function JS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eI(e,t,n){return n=n!=null?n.concat([e]):null,Kd(4,4,JS.bind(null,t,e),n)}function y0(){}function tI(e,t){var n=ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&d0(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function nI(e,t){var n=ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&d0(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rI(e,t,n){return go&21?(Rr(n,t)||(n=cS(),Xe.lanes|=n,yo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,En=!0),e.memoizedState=n)}function Xk(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=ap.transition;ap.transition={};try{e(!1),t()}finally{Ae=n,ap.transition=r}}function iI(){return ur().memoizedState}function Zk(e,t,n){var r=ys(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sI(e))oI(t,n);else if(n=MS(e,t,n,r),n!==null){var i=rn();xr(n,e,r,i),aI(n,t,r)}}function Qk(e,t,n){var r=ys(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sI(e))oI(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Rr(a,o)){var c=t.interleaved;c===null?(i.next=i,a0(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=MS(e,t,i,r),n!==null&&(i=rn(),xr(n,e,r,i),aI(n,t,r))}}function sI(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function oI(e,t){Yc=id=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aI(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wm(e,n)}}var sd={readContext:cr,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},Jk={readContext:cr,useCallback:function(e,t){return Fr().memoizedState=[e,t===void 0?null:t],e},useContext:cr,useEffect:U1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vf(4194308,4,JS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vf(4194308,4,e,t)},useInsertionEffect:function(e,t){return vf(4,2,e,t)},useMemo:function(e,t){var n=Fr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Zk.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=Fr();return e={current:e},t.memoizedState=e},useState:B1,useDebugValue:y0,useDeferredValue:function(e){return Fr().memoizedState=e},useTransition:function(){var e=B1(!1),t=e[0];return e=Xk.bind(null,e[1]),Fr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,i=Fr();if(Ke){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),Tt===null)throw Error(X(349));go&30||VS(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,U1(WS.bind(null,r,s,e),[e]),r.flags|=2048,Eu(9,KS.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Fr(),t=Tt.identifierPrefix;if(Ke){var n=bi,r=vi;n=(r&~(1<<32-Ir(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=vu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Yk++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},e8={readContext:cr,useCallback:tI,useContext:cr,useEffect:g0,useImperativeHandle:eI,useInsertionEffect:ZS,useLayoutEffect:QS,useMemo:nI,useReducer:cp,useRef:XS,useState:function(){return cp(bu)},useDebugValue:y0,useDeferredValue:function(e){var t=ur();return rI(t,wt.memoizedState,e)},useTransition:function(){var e=cp(bu)[0],t=ur().memoizedState;return[e,t]},useMutableSource:HS,useSyncExternalStore:qS,useId:iI,unstable_isNewReconciler:!1},t8={readContext:cr,useCallback:tI,useContext:cr,useEffect:g0,useImperativeHandle:eI,useInsertionEffect:ZS,useLayoutEffect:QS,useMemo:nI,useReducer:up,useRef:XS,useState:function(){return up(bu)},useDebugValue:y0,useDeferredValue:function(e){var t=ur();return wt===null?t.memoizedState=e:rI(t,wt.memoizedState,e)},useTransition:function(){var e=up(bu)[0],t=ur().memoizedState;return[e,t]},useMutableSource:HS,useSyncExternalStore:qS,useId:iI,unstable_isNewReconciler:!1};function vr(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function iy(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wd={isMounted:function(e){return(e=e._reactInternals)?To(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rn(),i=ys(e),s=Ii(r,i);s.payload=t,n!=null&&(s.callback=n),t=ps(e,s,i),t!==null&&(xr(t,e,i,r),mf(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rn(),i=ys(e),s=Ii(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ps(e,s,i),t!==null&&(xr(t,e,i,r),mf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rn(),r=ys(e),i=Ii(n,r);i.tag=2,t!=null&&(i.callback=t),t=ps(e,i,r),t!==null&&(xr(t,e,r,n),mf(t,e,r))}};function L1(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!hu(n,r)||!hu(i,s):!0}function cI(e,t,n){var r=!1,i=Ss,s=t.contextType;return typeof s=="object"&&s!==null?s=cr(s):(i=xn(t)?ho:en.current,r=t.contextTypes,s=(r=r!=null)?Ua(e,i):Ss),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function F1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wd.enqueueReplaceState(t,t.state,null)}function sy(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},c0(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=cr(s):(s=xn(t)?ho:en.current,i.context=Ua(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(iy(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Wd.enqueueReplaceState(i,i.state,null),nd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ja(e,t){try{var n="",r=t;do n+=TP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function lp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function oy(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var n8=typeof WeakMap=="function"?WeakMap:Map;function uI(e,t,n){n=Ii(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ad||(ad=!0,yy=r),oy(e,t)},n}function lI(e,t,n){n=Ii(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){oy(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){oy(e,t),typeof r!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function M1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new n8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=y8.bind(null,e,t,n),t.then(e,e))}function j1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function z1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ii(-1,1),t.tag=2,ps(n,t,1))),n.lanes|=1),e)}var r8=Ni.ReactCurrentOwner,En=!1;function tn(e,t,n,r){t.child=e===null?FS(t,null,n,r):Fa(t,e.child,n,r)}function H1(e,t,n,r,i){n=n.render;var s=t.ref;return Sa(t,i),r=h0(e,t,n,r,s,i),n=p0(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ci(e,t,i)):(Ke&&n&&t0(t),t.flags|=1,tn(e,t,r,i),t.child)}function q1(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!I0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,fI(e,t,s,r,i)):(e=Sf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hu,n(o,r)&&e.ref===t.ref)return Ci(e,t,i)}return t.flags|=1,e=ms(s,r),e.ref=t.ref,e.return=t,t.child=e}function fI(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(hu(s,r)&&e.ref===t.ref)if(En=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(En=!0);else return t.lanes=e.lanes,Ci(e,t,i)}return ay(e,t,n,r,i)}function dI(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(pa,Un),Un|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Be(pa,Un),Un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Be(pa,Un),Un|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Be(pa,Un),Un|=r;return tn(e,t,i,n),t.child}function hI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ay(e,t,n,r,i){var s=xn(n)?ho:en.current;return s=Ua(t,s),Sa(t,i),n=h0(e,t,n,r,s,i),r=p0(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ci(e,t,i)):(Ke&&r&&t0(t),t.flags|=1,tn(e,t,n,i),t.child)}function V1(e,t,n,r,i){if(xn(n)){var s=!0;Zf(t)}else s=!1;if(Sa(t,i),t.stateNode===null)bf(e,t),cI(t,n,r),sy(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=cr(u):(u=xn(n)?ho:en.current,u=Ua(t,u));var l=n.getDerivedStateFromProps,f=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&F1(t,o,r,u),Zi=!1;var d=t.memoizedState;o.state=d,nd(t,r,o,i),c=t.memoizedState,a!==r||d!==c||In.current||Zi?(typeof l=="function"&&(iy(t,n,l,r),c=t.memoizedState),(a=Zi||L1(t,n,a,r,d,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,jS(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vr(t.type,a),o.props=u,f=t.pendingProps,d=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=cr(c):(c=xn(n)?ho:en.current,c=Ua(t,c));var h=n.getDerivedStateFromProps;(l=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==c)&&F1(t,o,r,c),Zi=!1,d=t.memoizedState,o.state=d,nd(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||In.current||Zi?(typeof h=="function"&&(iy(t,n,h,r),p=t.memoizedState),(u=Zi||L1(t,n,u,r,d,p,c)||!1)?(l||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return cy(e,t,n,r,s,i)}function cy(e,t,n,r,i,s){hI(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&P1(t,n,!1),Ci(e,t,s);r=t.stateNode,r8.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Fa(t,e.child,null,s),t.child=Fa(t,null,a,s)):tn(e,t,a,s),t.memoizedState=r.state,i&&P1(t,n,!0),t.child}function pI(e){var t=e.stateNode;t.pendingContext?T1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T1(e,t.context,!1),u0(e,t.containerInfo)}function K1(e,t,n,r,i){return La(),r0(i),t.flags|=256,tn(e,t,n,r),t.child}var uy={dehydrated:null,treeContext:null,retryLane:0};function ly(e){return{baseLanes:e,cachePool:null,transitions:null}}function gI(e,t,n){var r=t.pendingProps,i=Ye.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Be(Ye,i&1),e===null)return ny(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xd(o,r,0,null),e=uo(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ly(n),t.memoizedState=uy,e):m0(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return i8(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ms(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ms(a,s):(s=uo(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?ly(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=uy,r}return s=e.child,e=s.sibling,r=ms(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function m0(e,t){return t=Xd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Al(e,t,n,r){return r!==null&&r0(r),Fa(t,e.child,null,n),e=m0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function i8(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=lp(Error(X(422))),Al(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Xd({mode:"visible",children:r.children},i,0,null),s=uo(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Fa(t,e.child,null,o),t.child.memoizedState=ly(o),t.memoizedState=uy,s);if(!(t.mode&1))return Al(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=lp(s,r,void 0),Al(e,t,o,r)}if(a=(o&e.childLanes)!==0,En||a){if(r=Tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ki(e,i),xr(r,e,i,-1))}return S0(),r=lp(Error(X(421))),Al(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=m8.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,zn=hs(i.nextSibling),qn=t,Ke=!0,_r=null,e!==null&&(rr[ir++]=vi,rr[ir++]=bi,rr[ir++]=po,vi=e.id,bi=e.overflow,po=t),t=m0(t,r.children),t.flags|=4096,t)}function W1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ry(e.return,t,n)}function fp(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function yI(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(tn(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&W1(e,n,t);else if(e.tag===19)W1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Be(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&rd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),fp(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&rd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}fp(t,!0,n,null,s);break;case"together":fp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=ms(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ms(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function s8(e,t,n){switch(t.tag){case 3:pI(t),La();break;case 5:zS(t);break;case 1:xn(t.type)&&Zf(t);break;case 4:u0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Be(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Be(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?gI(e,t,n):(Be(Ye,Ye.current&1),e=Ci(e,t,n),e!==null?e.sibling:null);Be(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yI(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,dI(e,t,n)}return Ci(e,t,n)}var mI,fy,wI,vI;mI=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fy=function(){};wI=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zr.current);var s=null;switch(n){case"input":i=Dg(e,i),r=Dg(e,r),s=[];break;case"select":i=Ze({},i,{value:void 0}),r=Ze({},r,{value:void 0}),s=[];break;case"textarea":i=Bg(e,i),r=Bg(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yf)}Lg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ou.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ou.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Me("scroll",e),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};vI=function(e,t,n,r){n!==r&&(t.flags|=4)};function hc(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function o8(e,t,n){var r=t.pendingProps;switch(n0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(t),null;case 1:return xn(t.type)&&Xf(),qt(t),null;case 3:return r=t.stateNode,Ma(),ze(In),ze(en),f0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_r!==null&&(vy(_r),_r=null))),fy(e,t),qt(t),null;case 5:l0(t);var i=no(wu.current);if(n=t.type,e!==null&&t.stateNode!=null)wI(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return qt(t),null}if(e=no(Zr.current),Il(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[qr]=t,r[yu]=s,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<Uc.length;i++)Me(Uc[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":n1(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":i1(r,s),Me("invalid",r)}Lg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Sl(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Sl(r.textContent,a,e),i=["children",""+a]):ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":gl(r),r1(r,s,!0);break;case"textarea":gl(r),s1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[qr]=t,e[yu]=r,mI(e,t,!1,!1),t.stateNode=e;e:{switch(o=Fg(n,r),n){case"dialog":Me("cancel",e),Me("close",e),i=r;break;case"iframe":case"object":case"embed":Me("load",e),i=r;break;case"video":case"audio":for(i=0;i<Uc.length;i++)Me(Uc[i],e);i=r;break;case"source":Me("error",e),i=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),i=r;break;case"details":Me("toggle",e),i=r;break;case"input":n1(e,r),i=Dg(e,r),Me("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ze({},r,{value:void 0}),Me("invalid",e);break;case"textarea":i1(e,r),i=Bg(e,r),Me("invalid",e);break;default:i=r}Lg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?X_(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&G_(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&au(e,c):typeof c=="number"&&au(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ou.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Me("scroll",e):c!=null&&jm(e,s,c,o))}switch(n){case"input":gl(e),r1(e,r,!1);break;case"textarea":gl(e),s1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_s(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?va(e,!!r.multiple,s,!1):r.defaultValue!=null&&va(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Yf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qt(t),null;case 6:if(e&&t.stateNode!=null)vI(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=no(wu.current),no(Zr.current),Il(t)){if(r=t.stateNode,n=t.memoizedProps,r[qr]=t,(s=r.nodeValue!==n)&&(e=qn,e!==null))switch(e.tag){case 3:Sl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=t,t.stateNode=r}return qt(t),null;case 13:if(ze(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&zn!==null&&t.mode&1&&!(t.flags&128))US(),La(),t.flags|=98560,s=!1;else if(s=Il(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(X(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[qr]=t}else La(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qt(t),s=!1}else _r!==null&&(vy(_r),_r=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?bt===0&&(bt=3):S0())),t.updateQueue!==null&&(t.flags|=4),qt(t),null);case 4:return Ma(),fy(e,t),e===null&&pu(t.stateNode.containerInfo),qt(t),null;case 10:return o0(t.type._context),qt(t),null;case 17:return xn(t.type)&&Xf(),qt(t),null;case 19:if(ze(Ye),s=t.memoizedState,s===null)return qt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)hc(s,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=rd(e),o!==null){for(t.flags|=128,hc(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Be(Ye,Ye.current&1|2),t.child}e=e.sibling}s.tail!==null&&at()>za&&(t.flags|=128,r=!0,hc(s,!1),t.lanes=4194304)}else{if(!r)if(e=rd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return qt(t),null}else 2*at()-s.renderingStartTime>za&&n!==1073741824&&(t.flags|=128,r=!0,hc(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=at(),t.sibling=null,n=Ye.current,Be(Ye,r?n&1|2:n&1),t):(qt(t),null);case 22:case 23:return _0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Un&1073741824&&(qt(t),t.subtreeFlags&6&&(t.flags|=8192)):qt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function a8(e,t){switch(n0(t),t.tag){case 1:return xn(t.type)&&Xf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ma(),ze(In),ze(en),f0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return l0(t),null;case 13:if(ze(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));La()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Ye),null;case 4:return Ma(),null;case 10:return o0(t.type._context),null;case 22:case 23:return _0(),null;case 24:return null;default:return null}}var Ol=!1,Jt=!1,c8=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ha(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(e,t,r)}else n.current=null}function dy(e,t,n){try{n()}catch(r){rt(e,t,r)}}var G1=!1;function u8(e,t){if(Yg=Kf,e=IS(),e0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,l=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=o),d===s&&++l===r&&(c=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xg={focusedElem:e,selectionRange:n},Kf=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=t.stateNode,_=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:vr(t.type,g),v);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(I){rt(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return p=G1,G1=!1,p}function Xc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&dy(t,n,s)}i=i.next}while(i!==r)}}function Gd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bI(e){var t=e.alternate;t!==null&&(e.alternate=null,bI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qr],delete t[yu],delete t[Jg],delete t[Vk],delete t[Kk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function EI(e){return e.tag===5||e.tag===3||e.tag===4}function Y1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||EI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function py(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yf));else if(r!==4&&(e=e.child,e!==null))for(py(e,t,n),e=e.sibling;e!==null;)py(e,t,n),e=e.sibling}function gy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gy(e,t,n),e=e.sibling;e!==null;)gy(e,t,n),e=e.sibling}var Bt=null,Er=!1;function Bi(e,t,n){for(n=n.child;n!==null;)_I(e,t,n),n=n.sibling}function _I(e,t,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Md,n)}catch{}switch(n.tag){case 5:Jt||ha(n,t);case 6:var r=Bt,i=Er;Bt=null,Bi(e,t,n),Bt=r,Er=i,Bt!==null&&(Er?(e=Bt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(Er?(e=Bt,n=n.stateNode,e.nodeType===8?ip(e.parentNode,n):e.nodeType===1&&ip(e,n),fu(e)):ip(Bt,n.stateNode));break;case 4:r=Bt,i=Er,Bt=n.stateNode.containerInfo,Er=!0,Bi(e,t,n),Bt=r,Er=i;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dy(n,t,o),i=i.next}while(i!==r)}Bi(e,t,n);break;case 1:if(!Jt&&(ha(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rt(n,t,a)}Bi(e,t,n);break;case 21:Bi(e,t,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Bi(e,t,n),Jt=r):Bi(e,t,n);break;default:Bi(e,t,n)}}function X1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new c8),t.forEach(function(r){var i=w8.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,Er=!1;break e;case 3:Bt=a.stateNode.containerInfo,Er=!0;break e;case 4:Bt=a.stateNode.containerInfo,Er=!0;break e}a=a.return}if(Bt===null)throw Error(X(160));_I(s,o,i),Bt=null,Er=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){rt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)SI(t,e),t=t.sibling}function SI(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hr(t,e),kr(e),r&4){try{Xc(3,e,e.return),Gd(3,e)}catch(g){rt(e,e.return,g)}try{Xc(5,e,e.return)}catch(g){rt(e,e.return,g)}}break;case 1:hr(t,e),kr(e),r&512&&n!==null&&ha(n,n.return);break;case 5:if(hr(t,e),kr(e),r&512&&n!==null&&ha(n,n.return),e.flags&32){var i=e.stateNode;try{au(i,"")}catch(g){rt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&V_(i,s),Fg(a,o);var u=Fg(a,s);for(o=0;o<c.length;o+=2){var l=c[o],f=c[o+1];l==="style"?X_(i,f):l==="dangerouslySetInnerHTML"?G_(i,f):l==="children"?au(i,f):jm(i,l,f,u)}switch(a){case"input":Ng(i,s);break;case"textarea":K_(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?va(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?va(i,!!s.multiple,s.defaultValue,!0):va(i,!!s.multiple,s.multiple?[]:"",!1))}i[yu]=s}catch(g){rt(e,e.return,g)}}break;case 6:if(hr(t,e),kr(e),r&4){if(e.stateNode===null)throw Error(X(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){rt(e,e.return,g)}}break;case 3:if(hr(t,e),kr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fu(t.containerInfo)}catch(g){rt(e,e.return,g)}break;case 4:hr(t,e),kr(e);break;case 13:hr(t,e),kr(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(b0=at())),r&4&&X1(e);break;case 22:if(l=n!==null&&n.memoizedState!==null,e.mode&1?(Jt=(u=Jt)||l,hr(t,e),Jt=u):hr(t,e),kr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!l&&e.mode&1)for(ne=e,l=e.child;l!==null;){for(f=ne=l;ne!==null;){switch(d=ne,h=d.child,d.tag){case 0:case 11:case 14:case 15:Xc(4,d,d.return);break;case 1:ha(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){rt(r,n,g)}}break;case 5:ha(d,d.return);break;case 22:if(d.memoizedState!==null){Q1(f);continue}}h!==null?(h.return=d,ne=h):Q1(f)}l=l.sibling}e:for(l=null,f=e;;){if(f.tag===5){if(l===null){l=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Y_("display",o))}catch(g){rt(e,e.return,g)}}}else if(f.tag===6){if(l===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){rt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;l===f&&(l=null),f=f.return}l===f&&(l=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hr(t,e),kr(e),r&4&&X1(e);break;case 21:break;default:hr(t,e),kr(e)}}function kr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(EI(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(au(i,""),r.flags&=-33);var s=Y1(e);gy(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Y1(e);py(e,a,o);break;default:throw Error(X(161))}}catch(c){rt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function l8(e,t,n){ne=e,II(e)}function II(e,t,n){for(var r=(e.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ol;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Jt;a=Ol;var u=Jt;if(Ol=o,(Jt=c)&&!u)for(ne=i;ne!==null;)o=ne,c=o.child,o.tag===22&&o.memoizedState!==null?J1(i):c!==null?(c.return=o,ne=c):J1(i);for(;s!==null;)ne=s,II(s),s=s.sibling;ne=i,Ol=a,Jt=u}Z1(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):Z1(e)}}function Z1(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jt||Gd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$1(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$1(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var f=l.dehydrated;f!==null&&fu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Jt||t.flags&512&&hy(t)}catch(d){rt(t,t.return,d)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Q1(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function J1(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gd(4,t)}catch(c){rt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){rt(t,i,c)}}var s=t.return;try{hy(t)}catch(c){rt(t,s,c)}break;case 5:var o=t.return;try{hy(t)}catch(c){rt(t,o,c)}}}catch(c){rt(t,t.return,c)}if(t===e){ne=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ne=a;break}ne=t.return}}var f8=Math.ceil,od=Ni.ReactCurrentDispatcher,w0=Ni.ReactCurrentOwner,ar=Ni.ReactCurrentBatchConfig,we=0,Tt=null,dt=null,Lt=0,Un=0,pa=Rs(0),bt=0,_u=null,yo=0,Yd=0,v0=0,Zc=null,bn=null,b0=0,za=1/0,di=null,ad=!1,yy=null,gs=null,Rl=!1,as=null,cd=0,Qc=0,my=null,Ef=-1,_f=0;function rn(){return we&6?at():Ef!==-1?Ef:Ef=at()}function ys(e){return e.mode&1?we&2&&Lt!==0?Lt&-Lt:Gk.transition!==null?(_f===0&&(_f=cS()),_f):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:gS(e.type)),e):1}function xr(e,t,n,r){if(50<Qc)throw Qc=0,my=null,Error(X(185));ju(e,n,r),(!(we&2)||e!==Tt)&&(e===Tt&&(!(we&2)&&(Yd|=n),bt===4&&ns(e,Lt)),An(e,r),n===1&&we===0&&!(t.mode&1)&&(za=at()+500,Vd&&Ts()))}function An(e,t){var n=e.callbackNode;GP(e,t);var r=Vf(e,e===Tt?Lt:0);if(r===0)n!==null&&c1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&c1(n),t===1)e.tag===0?Wk(ev.bind(null,e)):NS(ev.bind(null,e)),Hk(function(){!(we&6)&&Ts()}),n=null;else{switch(uS(r)){case 1:n=Km;break;case 4:n=oS;break;case 16:n=qf;break;case 536870912:n=aS;break;default:n=qf}n=CI(n,xI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xI(e,t){if(Ef=-1,_f=0,we&6)throw Error(X(327));var n=e.callbackNode;if(Ia()&&e.callbackNode!==n)return null;var r=Vf(e,e===Tt?Lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ud(e,r);else{t=r;var i=we;we|=2;var s=OI();(Tt!==e||Lt!==t)&&(di=null,za=at()+500,co(e,t));do try{p8();break}catch(a){AI(e,a)}while(!0);s0(),od.current=s,we=i,dt!==null?t=0:(Tt=null,Lt=0,t=bt)}if(t!==0){if(t===2&&(i=qg(e),i!==0&&(r=i,t=wy(e,i))),t===1)throw n=_u,co(e,0),ns(e,r),An(e,at()),n;if(t===6)ns(e,r);else{if(i=e.current.alternate,!(r&30)&&!d8(i)&&(t=ud(e,r),t===2&&(s=qg(e),s!==0&&(r=s,t=wy(e,s))),t===1))throw n=_u,co(e,0),ns(e,r),An(e,at()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:Gs(e,bn,di);break;case 3:if(ns(e,r),(r&130023424)===r&&(t=b0+500-at(),10<t)){if(Vf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){rn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Qg(Gs.bind(null,e,bn,di),t);break}Gs(e,bn,di);break;case 4:if(ns(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ir(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f8(r/1960))-r,10<r){e.timeoutHandle=Qg(Gs.bind(null,e,bn,di),r);break}Gs(e,bn,di);break;case 5:Gs(e,bn,di);break;default:throw Error(X(329))}}}return An(e,at()),e.callbackNode===n?xI.bind(null,e):null}function wy(e,t){var n=Zc;return e.current.memoizedState.isDehydrated&&(co(e,t).flags|=256),e=ud(e,t),e!==2&&(t=bn,bn=n,t!==null&&vy(t)),e}function vy(e){bn===null?bn=e:bn.push.apply(bn,e)}function d8(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rr(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ns(e,t){for(t&=~v0,t&=~Yd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ir(t),r=1<<n;e[n]=-1,t&=~r}}function ev(e){if(we&6)throw Error(X(327));Ia();var t=Vf(e,0);if(!(t&1))return An(e,at()),null;var n=ud(e,t);if(e.tag!==0&&n===2){var r=qg(e);r!==0&&(t=r,n=wy(e,r))}if(n===1)throw n=_u,co(e,0),ns(e,t),An(e,at()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gs(e,bn,di),An(e,at()),null}function E0(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(za=at()+500,Vd&&Ts())}}function mo(e){as!==null&&as.tag===0&&!(we&6)&&Ia();var t=we;we|=1;var n=ar.transition,r=Ae;try{if(ar.transition=null,Ae=1,e)return e()}finally{Ae=r,ar.transition=n,we=t,!(we&6)&&Ts()}}function _0(){Un=pa.current,ze(pa)}function co(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zk(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(n0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xf();break;case 3:Ma(),ze(In),ze(en),f0();break;case 5:l0(r);break;case 4:Ma();break;case 13:ze(Ye);break;case 19:ze(Ye);break;case 10:o0(r.type._context);break;case 22:case 23:_0()}n=n.return}if(Tt=e,dt=e=ms(e.current,null),Lt=Un=t,bt=0,_u=null,v0=Yd=yo=0,bn=Zc=null,to!==null){for(t=0;t<to.length;t++)if(n=to[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}to=null}return e}function AI(e,t){do{var n=dt;try{if(s0(),wf.current=sd,id){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(go=0,At=wt=Xe=null,Yc=!1,vu=0,w0.current=null,n===null||n.return===null){bt=1,_u=t,dt=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=Lt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=a,f=l.tag;if(!(l.mode&1)&&(f===0||f===11||f===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=j1(o);if(h!==null){h.flags&=-257,z1(h,o,a,s,t),h.mode&1&&M1(s,u,t),t=h,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){M1(s,u,t),S0();break e}c=Error(X(426))}}else if(Ke&&a.mode&1){var v=j1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),z1(v,o,a,s,t),r0(ja(c,a));break e}}s=c=ja(c,a),bt!==4&&(bt=2),Zc===null?Zc=[s]:Zc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=uI(s,c,t);N1(s,m);break e;case 1:a=c;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(gs===null||!gs.has(E)))){s.flags|=65536,t&=-t,s.lanes|=t;var I=lI(s,a,t);N1(s,I);break e}}s=s.return}while(s!==null)}TI(n)}catch(O){t=O,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function OI(){var e=od.current;return od.current=sd,e===null?sd:e}function S0(){(bt===0||bt===3||bt===2)&&(bt=4),Tt===null||!(yo&268435455)&&!(Yd&268435455)||ns(Tt,Lt)}function ud(e,t){var n=we;we|=2;var r=OI();(Tt!==e||Lt!==t)&&(di=null,co(e,t));do try{h8();break}catch(i){AI(e,i)}while(!0);if(s0(),we=n,od.current=r,dt!==null)throw Error(X(261));return Tt=null,Lt=0,bt}function h8(){for(;dt!==null;)RI(dt)}function p8(){for(;dt!==null&&!FP();)RI(dt)}function RI(e){var t=kI(e.alternate,e,Un);e.memoizedProps=e.pendingProps,t===null?TI(e):dt=t,w0.current=null}function TI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=a8(n,t),n!==null){n.flags&=32767,dt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,dt=null;return}}else if(n=o8(n,t,Un),n!==null){dt=n;return}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);bt===0&&(bt=5)}function Gs(e,t,n){var r=Ae,i=ar.transition;try{ar.transition=null,Ae=1,g8(e,t,n,r)}finally{ar.transition=i,Ae=r}return null}function g8(e,t,n,r){do Ia();while(as!==null);if(we&6)throw Error(X(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(YP(e,s),e===Tt&&(dt=Tt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rl||(Rl=!0,CI(qf,function(){return Ia(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ar.transition,ar.transition=null;var o=Ae;Ae=1;var a=we;we|=4,w0.current=null,u8(e,n),SI(n,e),$k(Xg),Kf=!!Yg,Xg=Yg=null,e.current=n,l8(n),MP(),we=a,Ae=o,ar.transition=s}else e.current=n;if(Rl&&(Rl=!1,as=e,cd=i),s=e.pendingLanes,s===0&&(gs=null),HP(n.stateNode),An(e,at()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ad)throw ad=!1,e=yy,yy=null,e;return cd&1&&e.tag!==0&&Ia(),s=e.pendingLanes,s&1?e===my?Qc++:(Qc=0,my=e):Qc=0,Ts(),null}function Ia(){if(as!==null){var e=uS(cd),t=ar.transition,n=Ae;try{if(ar.transition=null,Ae=16>e?16:e,as===null)var r=!1;else{if(e=as,as=null,cd=0,we&6)throw Error(X(331));var i=we;for(we|=4,ne=e.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(ne=u;ne!==null;){var l=ne;switch(l.tag){case 0:case 11:case 15:Xc(8,l,s)}var f=l.child;if(f!==null)f.return=l,ne=f;else for(;ne!==null;){l=ne;var d=l.sibling,h=l.return;if(bI(l),l===u){ne=null;break}if(d!==null){d.return=h,ne=d;break}ne=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xc(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ne=m;break e}ne=s.return}}var _=e.current;for(ne=_;ne!==null;){o=ne;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ne=E;else e:for(o=_;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gd(9,a)}}catch(O){rt(a,a.return,O)}if(a===o){ne=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,ne=I;break e}ne=a.return}}if(we=i,Ts(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Md,e)}catch{}r=!0}return r}finally{Ae=n,ar.transition=t}}return!1}function tv(e,t,n){t=ja(n,t),t=uI(e,t,1),e=ps(e,t,1),t=rn(),e!==null&&(ju(e,1,t),An(e,t))}function rt(e,t,n){if(e.tag===3)tv(e,e,n);else for(;t!==null;){if(t.tag===3){tv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gs===null||!gs.has(r))){e=ja(n,e),e=lI(t,e,1),t=ps(t,e,1),e=rn(),t!==null&&(ju(t,1,e),An(t,e));break}}t=t.return}}function y8(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rn(),e.pingedLanes|=e.suspendedLanes&n,Tt===e&&(Lt&n)===n&&(bt===4||bt===3&&(Lt&130023424)===Lt&&500>at()-b0?co(e,0):v0|=n),An(e,t)}function PI(e,t){t===0&&(e.mode&1?(t=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):t=1);var n=rn();e=ki(e,t),e!==null&&(ju(e,t,n),An(e,n))}function m8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),PI(e,n)}function w8(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),PI(e,n)}var kI;kI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||In.current)En=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return En=!1,s8(e,t,n);En=!!(e.flags&131072)}else En=!1,Ke&&t.flags&1048576&&$S(t,Jf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bf(e,t),e=t.pendingProps;var i=Ua(t,en.current);Sa(t,n),i=h0(null,t,r,e,i,n);var s=p0();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xn(r)?(s=!0,Zf(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,c0(t),i.updater=Wd,t.stateNode=i,i._reactInternals=t,sy(t,r,e,n),t=cy(null,t,r,!0,s,n)):(t.tag=0,Ke&&s&&t0(t),tn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=b8(r),e=vr(r,e),i){case 0:t=ay(null,t,r,e,n);break e;case 1:t=V1(null,t,r,e,n);break e;case 11:t=H1(null,t,r,e,n);break e;case 14:t=q1(null,t,r,vr(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),ay(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),V1(e,t,r,i,n);case 3:e:{if(pI(t),e===null)throw Error(X(387));r=t.pendingProps,s=t.memoizedState,i=s.element,jS(e,t),nd(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ja(Error(X(423)),t),t=K1(e,t,r,n,i);break e}else if(r!==i){i=ja(Error(X(424)),t),t=K1(e,t,r,n,i);break e}else for(zn=hs(t.stateNode.containerInfo.firstChild),qn=t,Ke=!0,_r=null,n=FS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),r===i){t=Ci(e,t,n);break e}tn(e,t,r,n)}t=t.child}return t;case 5:return zS(t),e===null&&ny(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Zg(r,i)?o=null:s!==null&&Zg(r,s)&&(t.flags|=32),hI(e,t),tn(e,t,o,n),t.child;case 6:return e===null&&ny(t),null;case 13:return gI(e,t,n);case 4:return u0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fa(t,null,r,n):tn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),H1(e,t,r,i,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:return tn(e,t,t.pendingProps.children,n),t.child;case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Be(ed,r._currentValue),r._currentValue=o,s!==null)if(Rr(s.value,o)){if(s.children===i.children&&!In.current){t=Ci(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Ii(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),ry(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ry(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),i=cr(i),r=r(i),t.flags|=1,tn(e,t,r,n),t.child;case 14:return r=t.type,i=vr(r,t.pendingProps),i=vr(r.type,i),q1(e,t,r,i,n);case 15:return fI(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),bf(e,t),t.tag=1,xn(r)?(e=!0,Zf(t)):e=!1,Sa(t,n),cI(t,r,i),sy(t,r,i,n),cy(null,t,r,!0,e,n);case 19:return yI(e,t,n);case 22:return dI(e,t,n)}throw Error(X(156,t.tag))};function CI(e,t){return sS(e,t)}function v8(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(e,t,n,r){return new v8(e,t,n,r)}function I0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function b8(e){if(typeof e=="function")return I0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hm)return 11;if(e===qm)return 14}return 2}function ms(e,t){var n=e.alternate;return n===null?(n=sr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Sf(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")I0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ia:return uo(n.children,i,s,t);case zm:o=8,i|=8;break;case Tg:return e=sr(12,n,t,i|2),e.elementType=Tg,e.lanes=s,e;case Pg:return e=sr(13,n,t,i),e.elementType=Pg,e.lanes=s,e;case kg:return e=sr(19,n,t,i),e.elementType=kg,e.lanes=s,e;case z_:return Xd(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M_:o=10;break e;case j_:o=9;break e;case Hm:o=11;break e;case qm:o=14;break e;case Xi:o=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=sr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function uo(e,t,n,r){return e=sr(7,e,r,t),e.lanes=n,e}function Xd(e,t,n,r){return e=sr(22,e,r,t),e.elementType=z_,e.lanes=n,e.stateNode={isHidden:!1},e}function dp(e,t,n){return e=sr(6,e,null,t),e.lanes=n,e}function hp(e,t,n){return t=sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function E8(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wh(0),this.expirationTimes=Wh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function x0(e,t,n,r,i,s,o,a,c){return e=new E8(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=sr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},c0(s),e}function _8(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ra,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function DI(e){if(!e)return Ss;e=e._reactInternals;e:{if(To(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(xn(n))return DS(e,n,t)}return t}function NI(e,t,n,r,i,s,o,a,c){return e=x0(n,r,!0,e,i,s,o,a,c),e.context=DI(null),n=e.current,r=rn(),i=ys(n),s=Ii(r,i),s.callback=t??null,ps(n,s,i),e.current.lanes=i,ju(e,i,r),An(e,r),e}function Zd(e,t,n,r){var i=t.current,s=rn(),o=ys(i);return n=DI(n),t.context===null?t.context=n:t.pendingContext=n,t=Ii(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ps(i,t,o),e!==null&&(xr(e,i,o,s),mf(e,i,o)),o}function ld(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function A0(e,t){nv(e,t),(e=e.alternate)&&nv(e,t)}function S8(){return null}var $I=typeof reportError=="function"?reportError:function(e){console.error(e)};function O0(e){this._internalRoot=e}Qd.prototype.render=O0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Zd(e,t,null,null)};Qd.prototype.unmount=O0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mo(function(){Zd(null,e,null,null)}),t[Pi]=null}};function Qd(e){this._internalRoot=e}Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=dS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ts.length&&t!==0&&t<ts[n].priority;n++);ts.splice(n,0,e),n===0&&pS(e)}};function R0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rv(){}function I8(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ld(o);s.call(u)}}var o=NI(t,r,e,0,null,!1,!1,"",rv);return e._reactRootContainer=o,e[Pi]=o.current,pu(e.nodeType===8?e.parentNode:e),mo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ld(c);a.call(u)}}var c=x0(e,0,!1,null,null,!1,!1,"",rv);return e._reactRootContainer=c,e[Pi]=c.current,pu(e.nodeType===8?e.parentNode:e),mo(function(){Zd(t,c,n,r)}),c}function eh(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=ld(o);a.call(c)}}Zd(t,o,e,i)}else o=I8(n,t,e,i,r);return ld(o)}lS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bc(t.pendingLanes);n!==0&&(Wm(t,n|1),An(t,at()),!(we&6)&&(za=at()+500,Ts()))}break;case 13:mo(function(){var r=ki(e,1);if(r!==null){var i=rn();xr(r,e,1,i)}}),A0(e,1)}};Gm=function(e){if(e.tag===13){var t=ki(e,134217728);if(t!==null){var n=rn();xr(t,e,134217728,n)}A0(e,134217728)}};fS=function(e){if(e.tag===13){var t=ys(e),n=ki(e,t);if(n!==null){var r=rn();xr(n,e,t,r)}A0(e,t)}};dS=function(){return Ae};hS=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};jg=function(e,t,n){switch(t){case"input":if(Ng(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qd(r);if(!i)throw Error(X(90));q_(r),Ng(r,i)}}}break;case"textarea":K_(e,n);break;case"select":t=n.value,t!=null&&va(e,!!n.multiple,t,!1)}};J_=E0;eS=mo;var x8={usingClientEntryPoint:!1,Events:[Hu,ca,qd,Z_,Q_,E0]},pc={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A8={bundleType:pc.bundleType,version:pc.version,rendererPackageName:pc.rendererPackageName,rendererConfig:pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rS(e),e===null?null:e.stateNode},findFiberByHostInstance:pc.findFiberByHostInstance||S8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Md=Tl.inject(A8),Xr=Tl}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x8;Kn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R0(t))throw Error(X(200));return _8(e,t,null,n)};Kn.createRoot=function(e,t){if(!R0(e))throw Error(X(299));var n=!1,r="",i=$I;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=x0(e,1,!1,null,null,n,!1,r,i),e[Pi]=t.current,pu(e.nodeType===8?e.parentNode:e),new O0(t)};Kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=rS(t),e=e===null?null:e.stateNode,e};Kn.flushSync=function(e){return mo(e)};Kn.hydrate=function(e,t,n){if(!Jd(t))throw Error(X(200));return eh(null,e,t,!0,n)};Kn.hydrateRoot=function(e,t,n){if(!R0(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$I;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=NI(t,null,e,1,n??null,i,!1,s,o),e[Pi]=t.current,pu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qd(t)};Kn.render=function(e,t,n){if(!Jd(t))throw Error(X(200));return eh(null,e,t,!1,n)};Kn.unmountComponentAtNode=function(e){if(!Jd(e))throw Error(X(40));return e._reactRootContainer?(mo(function(){eh(null,null,e,!1,function(){e._reactRootContainer=null,e[Pi]=null})}),!0):!1};Kn.unstable_batchedUpdates=E0;Kn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jd(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return eh(e,t,n,!1,r)};Kn.version="18.3.1-next-f1338f8080-20240426";function BI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BI)}catch(e){console.error(e)}}BI(),B_.exports=Kn;var O8=B_.exports,iv=O8;Og.createRoot=iv.createRoot,Og.hydrateRoot=iv.hydrateRoot;let If=null;const R8=e=>{If=e};let De=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const T8=e=>{const{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},ve=async e=>{var a;const{title:t,message:n,level:r,always:i}=e,s=await((a=If==null?void 0:If())==null?void 0:a.get("logger.level"))??De.warn;if(!i&&s<r)return;const o=T8({title:t,message:n});switch(r){case De.debug:console.debug(...o);break;case De.info:console.info(...o);break;case De.warn:console.warn(...o);break;case De.error:console.error(...o);break;default:console.log(...o)}};ve.deprecate=e=>{const{pkg:t,subject:n,transition:r,level:i=De.warn,message:s="",callback:o=null}=e,a=u=>u.charAt(0).toUpperCase()+u.slice(1),c=()=>ve({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${a(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:i});return typeof o=="function"?async function(){return await c(),await o(...arguments)}:c()};function q(e,t){var s,o,a;if(!e){const c=new Error(`INVARIANT ${t}`);c.stack=(a=(o=(s=c.stack)==null?void 0:s.split(`
`))==null?void 0:o.filter(u=>!/at invariant/.test(u)))==null?void 0:a.join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw console.error(`

---

`,c,`

`,...r,`

---

`),c}}let Pl;const P8=new Uint8Array(16);function k8(){if(!Pl&&(Pl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pl(P8)}const $t=[];for(let e=0;e<256;++e)$t.push((e+256).toString(16).slice(1));function C8(e,t=0){return $t[e[t+0]]+$t[e[t+1]]+$t[e[t+2]]+$t[e[t+3]]+"-"+$t[e[t+4]]+$t[e[t+5]]+"-"+$t[e[t+6]]+$t[e[t+7]]+"-"+$t[e[t+8]]+$t[e[t+9]]+"-"+$t[e[t+10]]+$t[e[t+11]]+$t[e[t+12]]+$t[e[t+13]]+$t[e[t+14]]+$t[e[t+15]]}const D8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sv={randomUUID:D8};function T0(e,t,n){if(sv.randomUUID&&!e)return sv.randomUUID();e=e||{};const r=e.random||(e.rng||k8)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,C8(r)}var Re=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),Vu=function(e){return e.BAD="BAD",e.OK="OK",e}({}),Su=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),th=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),ov=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({}),Ps=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({}),N8=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e}({});const $8=()=>{const e=[];let t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const i=e.shift();if(i)return r(i);t=r})}}};let av;const B8=e=>(av||(av=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),Iu="INIT",Po="SUBSCRIBE",Is="UNSUBSCRIBE",by="UPDATED",UI="SNAPSHOT",Ey="EXIT",cv="TERMINATE",xf=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};xf.FCL_REGISTRY=xf.FCL_REGISTRY==null?{}:xf.FCL_REGISTRY;const Ce=xf.FCL_REGISTRY;let pp=0;const U8=5e3;function Et(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((i,s)=>{const o=r.expectReply||!1,a=r.timeout!=null?r.timeout:U8;o&&a&&setTimeout(()=>s(new Error(`Timeout: ${a}ms passed without a response.`)),a);const c={to:e,from:r.from,tag:t,data:n,timeout:a,reply:i,reject:s};try{Ce[e]&&Ce[e].mailbox.deliver(c),o||i(!0)}catch(u){console.error("FCL.Actor -- Could Not Deliver Message",c,Ce[e],u),s(u)}})}const L8=e=>{delete Ce[e]},F8=e=>async t=>{var n;typeof e[Iu]=="function"&&await e[Iu](t);e:for(;;){const r=await t.receive();try{if(r.tag===Ey){typeof e[cv]=="function"&&await e[cv](t,r,r.data||{});break e}await((n=e[r.tag])==null?void 0:n.call(e,t,r,r.data||{}))}catch(i){console.error(`${t.self()} Error`,r,i)}finally{continue e}}},M8=e=>{if(e==null){for(;Ce[String(pp)];)pp++;return String(pp)}return String(e)},ks=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=M8(t);if(Ce[n]!=null)return n;Ce[n]={addr:n,mailbox:$8(),subs:new Set,kvs:{},error:null};const r=j8(n);let i;return typeof e=="object"?i=F8(e):i=e,B8(async()=>{await i(r),L8(n)}),n},j8=e=>({self:()=>e,receive:()=>Ce[e].mailbox.receive(),send:function(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return i.from=e,Et(t,n,r,i)},sendSelf:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Ce[e]&&Et(e,t,n,r)},broadcast:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.from=e;for(const i of Ce[e].subs)Et(i,t,n,r)},subscribe:t=>t!=null&&Ce[e].subs.add(t),unsubscribe:t=>t!=null&&Ce[e].subs.delete(t),subscriberCount:()=>Ce[e].subs.size,hasSubs:()=>!!Ce[e].subs.size,put:(t,n)=>{t!=null&&(Ce[e].kvs[t]=n)},get:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=Ce[e].kvs[t];return r??n},delete:t=>{delete Ce[e].kvs[t]},update:(t,n)=>{t!=null&&(Ce[e].kvs[t]=n(Ce[e].kvs[t]))},keys:()=>Object.keys(Ce[e].kvs),all:()=>Ce[e].kvs,where:t=>Object.keys(Ce[e].kvs).reduce((n,r)=>t.test(r)?{...n,[r]:Ce[e].kvs[r]}:n,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(n=>Ce[e].kvs[n]=t[n])},fatalError:t=>{Ce[e].error=t;for(const n of Ce[e].subs)Et(n,by)}});function nh(e,t,n){t(e);const r=ks(async i=>{for(i.send(e,Po);;){const s=await i.receive(),o=Ce[e].error;if(s.tag===Ey){i.send(e,Is);return}if(o){n(null,o),i.send(e,Is);return}n(s.data,null)}});return()=>Et(r,Ey)}function LI(e,t){return t(e),Et(e,UI,null,{expectReply:!0,timeout:0})}const kl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,s)=>s(i),r)},z8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,s)=>({...i,...s(r)}),{})},gp=e=>e&&typeof e=="object"&&!Array.isArray(e),_y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(gp(e)&&gp(i))for(const s in i)gp(i[s])?(e[s]||Object.assign(e,{[s]:{}}),_y(e[s],i[s])):Object.assign(e,{[s]:i[s]});return _y(e,...n)},H8=e=>Array.isArray(e)?_y({},...e):e,uv=e=>e.contracts?e.contracts:{},lv=e=>e.dependencies?e.dependencies:{},q8=(e,t)=>n=>Object.entries(n).reduce((r,i)=>{var c,u;let[s,o]=i;const a=((c=o==null?void 0:o.aliases)==null?void 0:c[e])||t&&((u=o==null?void 0:o.aliases)==null?void 0:u[t]);return a&&(r[s]=a),r},{}),V8=(e,t)=>n=>Object.entries(n).reduce((r,i)=>{var c,u;let[s,o]=i;const a=((c=o==null?void 0:o.aliases)==null?void 0:c[e])||t&&((u=o==null?void 0:o.aliases)==null?void 0:u[t]);return a&&(r[s]=a),r},{}),K8=e=>Object.entries(e).reduce((t,n)=>{let[r,i]=n;return i!=null&&i.canonical&&(t[`${r}.canonical`]=i.canonical),t},{}),W8=e=>Object.entries(e).reduce((t,n)=>{let[r,i]=n;return i!=null&&i.canonical&&(t[`${r}.canonical`]=i.canonical),t},{}),G8=e=>t=>{let{deployments:n={},accounts:r={}}=t;const i=n==null?void 0:n[e];return i?Object.entries(i).reduce((s,o)=>{var l;let[a,c]=o;const u=(l=r[a])==null?void 0:l.address;return u?c.reduce((f,d)=>({...f,[d]:u}),s):s},{}):{}},Y8=(e,t)=>{var s;const n=H8(e),r=(s=n.networks)==null?void 0:s[t],i=r&&typeof r=="object"&&"fork"in r?r.fork:void 0;return z8(G8(t),kl(uv,q8(t,i)),kl(lv,V8(t,i)),kl(uv,K8),kl(lv,W8))(n)},X8=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),fv=e=>Object.entries((e==null?void 0:e.accounts)??[]).reduce((t,n)=>{let[,r]=n;return t?!0:r&&Object.prototype.hasOwnProperty.call(r,"key")&&X8(r==null?void 0:r.key)},!1),Z8=e=>Array.isArray(e)?e.some(fv):fv(e),Q8=e=>(e==null?void 0:e.toLowerCase())==="local"?"emulator":e==null?void 0:e.toLowerCase();R8(He);const ei="config",FI="PUT_CONFIG",MI="GET_CONFIG",jI="GET_ALL_CONFIG",zI="UPDATE_CONFIG",HI="DELETE_CONFIG",qI="CLEAR_CONFIG",VI="WHERE_CONFIG",gc="CONFIG/UPDATED",KI=e=>e,WI={[FI]:(e,t,n)=>{let{key:r,value:i}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,i),e.broadcast(gc,{...e.all()})},[MI]:(e,t,n)=>{let{key:r,fallback:i}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,i))},[jI]:(e,t)=>{t.reply({...e.all()})},[zI]:(e,t,n)=>{let{key:r,fn:i}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,i||KI),e.broadcast(gc,{...e.all()})},[HI]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(gc,{...e.all()})},[qI]:e=>{const t=Object.keys(e.all());for(const n of t)e.delete(n);e.broadcast(gc,{...e.all()})},[VI]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[Po]:(e,t)=>{e.subscribe(t.from),e.send(t.from,gc,{...e.all()})},[Is]:(e,t)=>{e.unsubscribe(t.from)}};ks(WI,ei);function xu(e,t){return Et(ei,FI,{key:e,value:t}),He()}function xa(e,t){return Et(ei,MI,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function P0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,i=await xa(n);return i??P0(r,t)}function fd(){return Et(ei,jI,null,{expectReply:!0,timeout:10})}function GI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KI;return Et(ei,zI,{key:e,fn:t}),He()}function YI(e){return Et(ei,HI,{key:e}),He()}function XI(e){return Et(ei,VI,{pattern:e},{expectReply:!0,timeout:10})}function ZI(e){return nh(ei,()=>ks(WI,ei),e)}async function J8(){await Et(ei,qI)}async function eC(e){return J8().then(()=>He(e))}async function QI(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await xa("flow.network"),r=Q8(n),{flowJSON:i}=e;if(q(!!i,"config.load -- 'flowJSON' must be defined"),q(!!r,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),Z8(i)){const s=r==="emulator";ve({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:s?De.warn:De.error}),q(s,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[s,o]of Object.entries(Y8(i,r))){const a=`0x${s}`,c=await xa(a);c&&c!==o&&!t?ve({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:De.warn}):xu(a,o);const u=`system.contracts.${s}`,l=await xa(u);l&&l!==o&&!t?ve({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:De.warn}):xu(u,o)}}function He(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>xu(t,e[t])),{put:xu,get:xa,all:fd,first:P0,update:GI,delete:YI,where:XI,subscribe:ZI,overload:JI,load:QI}}He.put=xu;He.get=xa;He.all=fd;He.first=P0;He.update=GI;He.delete=YI;He.where=XI;He.subscribe=ZI;He.overload=JI;He.load=QI;async function JI(e,t){const n=await fd();try{return He(e),await t(await fd())}finally{await eC(n)}}var _e={},rh={};rh.byteLength=rC;rh.toByteArray=sC;rh.fromByteArray=cC;var Vr=[],Jn=[],tC=typeof Uint8Array<"u"?Uint8Array:Array,yp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var jo=0,nC=yp.length;jo<nC;++jo)Vr[jo]=yp[jo],Jn[yp.charCodeAt(jo)]=jo;Jn[45]=62;Jn[95]=63;function ex(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function rC(e){var t=ex(e),n=t[0],r=t[1];return(n+r)*3/4-r}function iC(e,t,n){return(t+n)*3/4-n}function sC(e){var t,n=ex(e),r=n[0],i=n[1],s=new tC(iC(e,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)t=Jn[e.charCodeAt(c)]<<18|Jn[e.charCodeAt(c+1)]<<12|Jn[e.charCodeAt(c+2)]<<6|Jn[e.charCodeAt(c+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Jn[e.charCodeAt(c)]<<2|Jn[e.charCodeAt(c+1)]>>4,s[o++]=t&255),i===1&&(t=Jn[e.charCodeAt(c)]<<10|Jn[e.charCodeAt(c+1)]<<4|Jn[e.charCodeAt(c+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function oC(e){return Vr[e>>18&63]+Vr[e>>12&63]+Vr[e>>6&63]+Vr[e&63]}function aC(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(oC(r));return i.join("")}function cC(e){for(var t,n=e.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(aC(e,o,o+s>a?a:o+s));return r===1?(t=e[n-1],i.push(Vr[t>>2]+Vr[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Vr[t>>10]+Vr[t>>4&63]+Vr[t<<2&63]+"=")),i.join("")}var k0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */k0.read=function(e,t,n,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=s*256+e[t+f],f+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=o*256+e[t+f],f+=d,l-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(h?-1:1)*o*Math.pow(2,s-r)};k0.write=function(e,t,n,r,i,s){var o,a,c,u=s*8-i-1,l=(1<<u)-1,f=l>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?t+=d/c:t+=d*Math.pow(2,1-f),t*c>=2&&(o++,c/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(t*c-1)*Math.pow(2,i),o=o+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=a&255,h+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[n+h]=o&255,h+=p,o/=256,u-=8);e[n+h-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=rh,n=k0,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const x=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(x,y),x.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(x){if(x>i)throw new RangeError('The value "'+x+'" is invalid for option "size"');const y=new Uint8Array(x);return Object.setPrototypeOf(y,a.prototype),y}function a(x,y,b){if(typeof x=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return c(x,y,b)}a.poolSize=8192;function c(x,y,b){if(typeof x=="string")return d(x,y);if(ArrayBuffer.isView(x))return p(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(Cn(x,ArrayBuffer)||x&&Cn(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Cn(x,SharedArrayBuffer)||x&&Cn(x.buffer,SharedArrayBuffer)))return g(x,y,b);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=x.valueOf&&x.valueOf();if(k!=null&&k!==x)return a.from(k,y,b);const U=v(x);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return a.from(x[Symbol.toPrimitive]("string"),y,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}a.from=function(x,y,b){return c(x,y,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function l(x,y,b){return u(x),x<=0?o(x):y!==void 0?typeof b=="string"?o(x).fill(y,b):o(x).fill(y):o(x)}a.alloc=function(x,y,b){return l(x,y,b)};function f(x){return u(x),o(x<0?0:m(x)|0)}a.allocUnsafe=function(x){return f(x)},a.allocUnsafeSlow=function(x){return f(x)};function d(x,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const b=E(x,y)|0;let k=o(b);const U=k.write(x,y);return U!==b&&(k=k.slice(0,U)),k}function h(x){const y=x.length<0?0:m(x.length)|0,b=o(y);for(let k=0;k<y;k+=1)b[k]=x[k]&255;return b}function p(x){if(Cn(x,Uint8Array)){const y=new Uint8Array(x);return g(y.buffer,y.byteOffset,y.byteLength)}return h(x)}function g(x,y,b){if(y<0||x.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<y+(b||0))throw new RangeError('"length" is outside of buffer bounds');let k;return y===void 0&&b===void 0?k=new Uint8Array(x):b===void 0?k=new Uint8Array(x,y):k=new Uint8Array(x,y,b),Object.setPrototypeOf(k,a.prototype),k}function v(x){if(a.isBuffer(x)){const y=m(x.length)|0,b=o(y);return b.length===0||x.copy(b,0,0,y),b}if(x.length!==void 0)return typeof x.length!="number"||Fo(x.length)?o(0):h(x);if(x.type==="Buffer"&&Array.isArray(x.data))return h(x.data)}function m(x){if(x>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return x|0}function _(x){return+x!=x&&(x=0),a.alloc(+x)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,b){if(Cn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),Cn(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(y)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===b)return 0;let k=y.length,U=b.length;for(let H=0,W=Math.min(k,U);H<W;++H)if(y[H]!==b[H]){k=y[H],U=b[H];break}return k<U?-1:U<k?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,b){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let k;if(b===void 0)for(b=0,k=0;k<y.length;++k)b+=y[k].length;const U=a.allocUnsafe(b);let H=0;for(k=0;k<y.length;++k){let W=y[k];if(Cn(W,Uint8Array))H+W.length>U.length?(a.isBuffer(W)||(W=a.from(W)),W.copy(U,H)):Uint8Array.prototype.set.call(U,W,H);else if(a.isBuffer(W))W.copy(U,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=W.length}return U};function E(x,y){if(a.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||Cn(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const b=x.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&b===0)return 0;let U=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return sc(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return oc(x).length;default:if(U)return k?-1:sc(x).length;y=(""+y).toLowerCase(),U=!0}}a.byteLength=E;function I(x,y,b){let k=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,y>>>=0,b<=y))return"";for(x||(x="utf8");;)switch(x){case"hex":return A(this,y,b);case"utf8":case"utf-8":return L(this,y,b);case"ascii":return P(this,y,b);case"latin1":case"binary":return R(this,y,b);case"base64":return $(this,y,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,y,b);default:if(k)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),k=!0}}a.prototype._isBuffer=!0;function O(x,y,b){const k=x[y];x[y]=x[b],x[b]=k}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<y;b+=2)O(this,b,b+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<y;b+=4)O(this,b,b+3),O(this,b+1,b+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<y;b+=8)O(this,b,b+7),O(this,b+1,b+6),O(this,b+2,b+5),O(this,b+3,b+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?L(this,0,y):I.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const b=e.INSPECT_MAX_BYTES;return y=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,b,k,U,H){if(Cn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(b===void 0&&(b=0),k===void 0&&(k=y?y.length:0),U===void 0&&(U=0),H===void 0&&(H=this.length),b<0||k>y.length||U<0||H>this.length)throw new RangeError("out of range index");if(U>=H&&b>=k)return 0;if(U>=H)return-1;if(b>=k)return 1;if(b>>>=0,k>>>=0,U>>>=0,H>>>=0,this===y)return 0;let W=H-U,he=k-b;const Je=Math.min(W,he),qe=this.slice(U,H),et=y.slice(b,k);for(let Pe=0;Pe<Je;++Pe)if(qe[Pe]!==et[Pe]){W=qe[Pe],he=et[Pe];break}return W<he?-1:he<W?1:0};function C(x,y,b,k,U){if(x.length===0)return-1;if(typeof b=="string"?(k=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,Fo(b)&&(b=U?0:x.length-1),b<0&&(b=x.length+b),b>=x.length){if(U)return-1;b=x.length-1}else if(b<0)if(U)b=0;else return-1;if(typeof y=="string"&&(y=a.from(y,k)),a.isBuffer(y))return y.length===0?-1:N(x,y,b,k,U);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(x,y,b):Uint8Array.prototype.lastIndexOf.call(x,y,b):N(x,[y],b,k,U);throw new TypeError("val must be string, number or Buffer")}function N(x,y,b,k,U){let H=1,W=x.length,he=y.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(x.length<2||y.length<2)return-1;H=2,W/=2,he/=2,b/=2}function Je(et,Pe){return H===1?et[Pe]:et.readUInt16BE(Pe*H)}let qe;if(U){let et=-1;for(qe=b;qe<W;qe++)if(Je(x,qe)===Je(y,et===-1?0:qe-et)){if(et===-1&&(et=qe),qe-et+1===he)return et*H}else et!==-1&&(qe-=qe-et),et=-1}else for(b+he>W&&(b=W-he),qe=b;qe>=0;qe--){let et=!0;for(let Pe=0;Pe<he;Pe++)if(Je(x,qe+Pe)!==Je(y,Pe)){et=!1;break}if(et)return qe}return-1}a.prototype.includes=function(y,b,k){return this.indexOf(y,b,k)!==-1},a.prototype.indexOf=function(y,b,k){return C(this,y,b,k,!0)},a.prototype.lastIndexOf=function(y,b,k){return C(this,y,b,k,!1)};function B(x,y,b,k){b=Number(b)||0;const U=x.length-b;k?(k=Number(k),k>U&&(k=U)):k=U;const H=y.length;k>H/2&&(k=H/2);let W;for(W=0;W<k;++W){const he=parseInt(y.substr(W*2,2),16);if(Fo(he))return W;x[b+W]=he}return W}function D(x,y,b,k){return $i(sc(y,x.length-b),x,b,k)}function j(x,y,b,k){return $i(jh(y),x,b,k)}function V(x,y,b,k){return $i(oc(y),x,b,k)}function F(x,y,b,k){return $i(ll(y,x.length-b),x,b,k)}a.prototype.write=function(y,b,k,U){if(b===void 0)U="utf8",k=this.length,b=0;else if(k===void 0&&typeof b=="string")U=b,k=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(k)?(k=k>>>0,U===void 0&&(U="utf8")):(U=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-b;if((k===void 0||k>H)&&(k=H),y.length>0&&(k<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let W=!1;for(;;)switch(U){case"hex":return B(this,y,b,k);case"utf8":case"utf-8":return D(this,y,b,k);case"ascii":case"latin1":case"binary":return j(this,y,b,k);case"base64":return V(this,y,b,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,y,b,k);default:if(W)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),W=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(x,y,b){return y===0&&b===x.length?t.fromByteArray(x):t.fromByteArray(x.slice(y,b))}function L(x,y,b){b=Math.min(x.length,b);const k=[];let U=y;for(;U<b;){const H=x[U];let W=null,he=H>239?4:H>223?3:H>191?2:1;if(U+he<=b){let Je,qe,et,Pe;switch(he){case 1:H<128&&(W=H);break;case 2:Je=x[U+1],(Je&192)===128&&(Pe=(H&31)<<6|Je&63,Pe>127&&(W=Pe));break;case 3:Je=x[U+1],qe=x[U+2],(Je&192)===128&&(qe&192)===128&&(Pe=(H&15)<<12|(Je&63)<<6|qe&63,Pe>2047&&(Pe<55296||Pe>57343)&&(W=Pe));break;case 4:Je=x[U+1],qe=x[U+2],et=x[U+3],(Je&192)===128&&(qe&192)===128&&(et&192)===128&&(Pe=(H&15)<<18|(Je&63)<<12|(qe&63)<<6|et&63,Pe>65535&&Pe<1114112&&(W=Pe))}}W===null?(W=65533,he=1):W>65535&&(W-=65536,k.push(W>>>10&1023|55296),W=56320|W&1023),k.push(W),U+=he}return S(k)}const w=4096;function S(x){const y=x.length;if(y<=w)return String.fromCharCode.apply(String,x);let b="",k=0;for(;k<y;)b+=String.fromCharCode.apply(String,x.slice(k,k+=w));return b}function P(x,y,b){let k="";b=Math.min(x.length,b);for(let U=y;U<b;++U)k+=String.fromCharCode(x[U]&127);return k}function R(x,y,b){let k="";b=Math.min(x.length,b);for(let U=y;U<b;++U)k+=String.fromCharCode(x[U]);return k}function A(x,y,b){const k=x.length;(!y||y<0)&&(y=0),(!b||b<0||b>k)&&(b=k);let U="";for(let H=y;H<b;++H)U+=fl[x[H]];return U}function T(x,y,b){const k=x.slice(y,b);let U="";for(let H=0;H<k.length-1;H+=2)U+=String.fromCharCode(k[H]+k[H+1]*256);return U}a.prototype.slice=function(y,b){const k=this.length;y=~~y,b=b===void 0?k:~~b,y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),b<0?(b+=k,b<0&&(b=0)):b>k&&(b=k),b<y&&(b=y);const U=this.subarray(y,b);return Object.setPrototypeOf(U,a.prototype),U};function M(x,y,b){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+y>b)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let U=this[y],H=1,W=0;for(;++W<b&&(H*=256);)U+=this[y+W]*H;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let U=this[y+--b],H=1;for(;b>0&&(H*=256);)U+=this[y+--b]*H;return U},a.prototype.readUint8=a.prototype.readUInt8=function(y,b){return y=y>>>0,b||M(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,b){return y=y>>>0,b||M(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,b){return y=y>>>0,b||M(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,b){return y=y>>>0,b||M(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,b){return y=y>>>0,b||M(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=dr(function(y){y=y>>>0,Fe(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&st(y,this.length-8);const U=b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,H=this[++y]+this[++y]*2**8+this[++y]*2**16+k*2**24;return BigInt(U)+(BigInt(H)<<BigInt(32))}),a.prototype.readBigUInt64BE=dr(function(y){y=y>>>0,Fe(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&st(y,this.length-8);const U=b*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],H=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+k;return(BigInt(U)<<BigInt(32))+BigInt(H)}),a.prototype.readIntLE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let U=this[y],H=1,W=0;for(;++W<b&&(H*=256);)U+=this[y+W]*H;return H*=128,U>=H&&(U-=Math.pow(2,8*b)),U},a.prototype.readIntBE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let U=b,H=1,W=this[y+--U];for(;U>0&&(H*=256);)W+=this[y+--U]*H;return H*=128,W>=H&&(W-=Math.pow(2,8*b)),W},a.prototype.readInt8=function(y,b){return y=y>>>0,b||M(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,b){y=y>>>0,b||M(y,2,this.length);const k=this[y]|this[y+1]<<8;return k&32768?k|4294901760:k},a.prototype.readInt16BE=function(y,b){y=y>>>0,b||M(y,2,this.length);const k=this[y+1]|this[y]<<8;return k&32768?k|4294901760:k},a.prototype.readInt32LE=function(y,b){return y=y>>>0,b||M(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,b){return y=y>>>0,b||M(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=dr(function(y){y=y>>>0,Fe(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&st(y,this.length-8);const U=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(k<<24);return(BigInt(U)<<BigInt(32))+BigInt(b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=dr(function(y){y=y>>>0,Fe(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&st(y,this.length-8);const U=(b<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(U)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+k)}),a.prototype.readFloatLE=function(y,b){return y=y>>>0,b||M(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,b){return y=y>>>0,b||M(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,b){return y=y>>>0,b||M(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,b){return y=y>>>0,b||M(y,8,this.length),n.read(this,y,!1,52,8)};function z(x,y,b,k,U,H){if(!a.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>U||y<H)throw new RangeError('"value" argument is out of bounds');if(b+k>x.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,b,k,U){if(y=+y,b=b>>>0,k=k>>>0,!U){const he=Math.pow(2,8*k)-1;z(this,y,b,k,he,0)}let H=1,W=0;for(this[b]=y&255;++W<k&&(H*=256);)this[b+W]=y/H&255;return b+k},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,b,k,U){if(y=+y,b=b>>>0,k=k>>>0,!U){const he=Math.pow(2,8*k)-1;z(this,y,b,k,he,0)}let H=k-1,W=1;for(this[b+H]=y&255;--H>=0&&(W*=256);)this[b+H]=y/W&255;return b+k},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,1,255,0),this[b]=y&255,b+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,2,65535,0),this[b]=y&255,this[b+1]=y>>>8,b+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,2,65535,0),this[b]=y>>>8,this[b+1]=y&255,b+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,4,4294967295,0),this[b+3]=y>>>24,this[b+2]=y>>>16,this[b+1]=y>>>8,this[b]=y&255,b+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,4,4294967295,0),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4};function Q(x,y,b,k,U){Qe(y,k,U,x,b,7);let H=Number(y&BigInt(4294967295));x[b++]=H,H=H>>8,x[b++]=H,H=H>>8,x[b++]=H,H=H>>8,x[b++]=H;let W=Number(y>>BigInt(32)&BigInt(4294967295));return x[b++]=W,W=W>>8,x[b++]=W,W=W>>8,x[b++]=W,W=W>>8,x[b++]=W,b}function K(x,y,b,k,U){Qe(y,k,U,x,b,7);let H=Number(y&BigInt(4294967295));x[b+7]=H,H=H>>8,x[b+6]=H,H=H>>8,x[b+5]=H,H=H>>8,x[b+4]=H;let W=Number(y>>BigInt(32)&BigInt(4294967295));return x[b+3]=W,W=W>>8,x[b+2]=W,W=W>>8,x[b+1]=W,W=W>>8,x[b]=W,b+8}a.prototype.writeBigUInt64LE=dr(function(y,b=0){return Q(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=dr(function(y,b=0){return K(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,b,k,U){if(y=+y,b=b>>>0,!U){const Je=Math.pow(2,8*k-1);z(this,y,b,k,Je-1,-Je)}let H=0,W=1,he=0;for(this[b]=y&255;++H<k&&(W*=256);)y<0&&he===0&&this[b+H-1]!==0&&(he=1),this[b+H]=(y/W>>0)-he&255;return b+k},a.prototype.writeIntBE=function(y,b,k,U){if(y=+y,b=b>>>0,!U){const Je=Math.pow(2,8*k-1);z(this,y,b,k,Je-1,-Je)}let H=k-1,W=1,he=0;for(this[b+H]=y&255;--H>=0&&(W*=256);)y<0&&he===0&&this[b+H+1]!==0&&(he=1),this[b+H]=(y/W>>0)-he&255;return b+k},a.prototype.writeInt8=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,1,127,-128),y<0&&(y=255+y+1),this[b]=y&255,b+1},a.prototype.writeInt16LE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,2,32767,-32768),this[b]=y&255,this[b+1]=y>>>8,b+2},a.prototype.writeInt16BE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,2,32767,-32768),this[b]=y>>>8,this[b+1]=y&255,b+2},a.prototype.writeInt32LE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,4,2147483647,-2147483648),this[b]=y&255,this[b+1]=y>>>8,this[b+2]=y>>>16,this[b+3]=y>>>24,b+4},a.prototype.writeInt32BE=function(y,b,k){return y=+y,b=b>>>0,k||z(this,y,b,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4},a.prototype.writeBigInt64LE=dr(function(y,b=0){return Q(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=dr(function(y,b=0){return K(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(x,y,b,k,U,H){if(b+k>x.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function te(x,y,b,k,U){return y=+y,b=b>>>0,U||G(x,y,b,4),n.write(x,y,b,k,23,4),b+4}a.prototype.writeFloatLE=function(y,b,k){return te(this,y,b,!0,k)},a.prototype.writeFloatBE=function(y,b,k){return te(this,y,b,!1,k)};function ie(x,y,b,k,U){return y=+y,b=b>>>0,U||G(x,y,b,8),n.write(x,y,b,k,52,8),b+8}a.prototype.writeDoubleLE=function(y,b,k){return ie(this,y,b,!0,k)},a.prototype.writeDoubleBE=function(y,b,k){return ie(this,y,b,!1,k)},a.prototype.copy=function(y,b,k,U){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(k||(k=0),!U&&U!==0&&(U=this.length),b>=y.length&&(b=y.length),b||(b=0),U>0&&U<k&&(U=k),U===k||y.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),y.length-b<U-k&&(U=y.length-b+k);const H=U-k;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,k,U):Uint8Array.prototype.set.call(y,this.subarray(k,U),b),H},a.prototype.fill=function(y,b,k,U){if(typeof y=="string"){if(typeof b=="string"?(U=b,b=0,k=this.length):typeof k=="string"&&(U=k,k=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(y.length===1){const W=y.charCodeAt(0);(U==="utf8"&&W<128||U==="latin1")&&(y=W)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(b<0||this.length<b||this.length<k)throw new RangeError("Out of range index");if(k<=b)return this;b=b>>>0,k=k===void 0?this.length:k>>>0,y||(y=0);let H;if(typeof y=="number")for(H=b;H<k;++H)this[H]=y;else{const W=a.isBuffer(y)?y:a.from(y,U),he=W.length;if(he===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(H=0;H<k-b;++H)this[H+b]=W[H%he]}return this};const ce={};function se(x,y,b){ce[x]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(x,y){return`The "${x}" argument must be of type number. Received type ${typeof y}`},TypeError),se("ERR_OUT_OF_RANGE",function(x,y,b){let k=`The value of "${x}" is out of range.`,U=b;return Number.isInteger(b)&&Math.abs(b)>2**32?U=le(String(b)):typeof b=="bigint"&&(U=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(U=le(U)),U+="n"),k+=` It must be ${y}. Received ${U}`,k},RangeError);function le(x){let y="",b=x.length;const k=x[0]==="-"?1:0;for(;b>=k+4;b-=3)y=`_${x.slice(b-3,b)}${y}`;return`${x.slice(0,b)}${y}`}function Le(x,y,b){Fe(y,"offset"),(x[y]===void 0||x[y+b]===void 0)&&st(y,x.length-(b+1))}function Qe(x,y,b,k,U,H){if(x>b||x<y){const W=typeof y=="bigint"?"n":"";let he;throw y===0||y===BigInt(0)?he=`>= 0${W} and < 2${W} ** ${(H+1)*8}${W}`:he=`>= -(2${W} ** ${(H+1)*8-1}${W}) and < 2 ** ${(H+1)*8-1}${W}`,new ce.ERR_OUT_OF_RANGE("value",he,x)}Le(k,U,H)}function Fe(x,y){if(typeof x!="number")throw new ce.ERR_INVALID_ARG_TYPE(y,"number",x)}function st(x,y,b){throw Math.floor(x)!==x?(Fe(x,b),new ce.ERR_OUT_OF_RANGE("offset","an integer",x)):y<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,x)}const fr=/[^+/0-9A-Za-z-_]/g;function Pr(x){if(x=x.split("=")[0],x=x.trim().replace(fr,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function sc(x,y){y=y||1/0;let b;const k=x.length;let U=null;const H=[];for(let W=0;W<k;++W){if(b=x.charCodeAt(W),b>55295&&b<57344){if(!U){if(b>56319){(y-=3)>-1&&H.push(239,191,189);continue}else if(W+1===k){(y-=3)>-1&&H.push(239,191,189);continue}U=b;continue}if(b<56320){(y-=3)>-1&&H.push(239,191,189),U=b;continue}b=(U-55296<<10|b-56320)+65536}else U&&(y-=3)>-1&&H.push(239,191,189);if(U=null,b<128){if((y-=1)<0)break;H.push(b)}else if(b<2048){if((y-=2)<0)break;H.push(b>>6|192,b&63|128)}else if(b<65536){if((y-=3)<0)break;H.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((y-=4)<0)break;H.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return H}function jh(x){const y=[];for(let b=0;b<x.length;++b)y.push(x.charCodeAt(b)&255);return y}function ll(x,y){let b,k,U;const H=[];for(let W=0;W<x.length&&!((y-=2)<0);++W)b=x.charCodeAt(W),k=b>>8,U=b%256,H.push(U),H.push(k);return H}function oc(x){return t.toByteArray(Pr(x))}function $i(x,y,b,k){let U;for(U=0;U<k&&!(U+b>=y.length||U>=x.length);++U)y[U+b]=x[U];return U}function Cn(x,y){return x instanceof y||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===y.name}function Fo(x){return x!==x}const fl=function(){const x="0123456789abcdef",y=new Array(256);for(let b=0;b<16;++b){const k=b*16;for(let U=0;U<16;++U)y[k+U]=x[b]+x[U]}return y}();function dr(x){return typeof BigInt>"u"?dl:x}function dl(){throw new Error("BigInt not supported")}})(_e);function Ha(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(Ha(e[r]));const n=_e.Buffer.concat(t);return _e.Buffer.concat([dv(n.length,192),n])}else{const t=dC(e);return t.length===1&&t[0]<128?t:_e.Buffer.concat([dv(t.length,128),t])}}function dv(e,t){if(e<56)return _e.Buffer.from([e+t]);{const n=Sy(e),r=n.length/2,i=Sy(t+55+r);return _e.Buffer.from(i+n,"hex")}}function tx(e){return e.slice(0,2)==="0x"}function uC(e){return typeof e!="string"?e:tx(e)?e.slice(2):e}function Sy(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function lC(e){return e.length%2?"0"+e:e}function fC(e){const t=Sy(e);return _e.Buffer.from(t,"hex")}function dC(e){if(!_e.Buffer.isBuffer(e)){if(typeof e=="string")return tx(e)?_e.Buffer.from(lC(uC(e)),"hex"):_e.Buffer.from(e);if(typeof e=="number")return e?fC(e):_e.Buffer.from([]);if(e==null)return _e.Buffer.from([]);if(e instanceof Uint8Array)return _e.Buffer.from(e);throw new Error("invalid type")}return e}function it(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Ut(e){return e==null?null:"0x"+it(e)}var C0={exports:{}},Aa=typeof Reflect=="object"?Reflect:null,hv=Aa&&typeof Aa.apply=="function"?Aa.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Af;Aa&&typeof Aa.ownKeys=="function"?Af=Aa.ownKeys:Object.getOwnPropertySymbols?Af=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Af=function(t){return Object.getOwnPropertyNames(t)};function hC(e){console&&console.warn&&console.warn(e)}var nx=Number.isNaN||function(t){return t!==t};function Te(){Te.init.call(this)}C0.exports=Te;C0.exports.once=mC;Te.EventEmitter=Te;Te.prototype._events=void 0;Te.prototype._eventsCount=0;Te.prototype._maxListeners=void 0;var pv=10;function ih(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return pv},set:function(e){if(typeof e!="number"||e<0||nx(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");pv=e}});Te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Te.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||nx(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function rx(e){return e._maxListeners===void 0?Te.defaultMaxListeners:e._maxListeners}Te.prototype.getMaxListeners=function(){return rx(this)};Te.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")hv(c,this,n);else for(var u=c.length,l=cx(c,u),r=0;r<u;++r)hv(l[r],this,n);return!0};function ix(e,t,n,r){var i,s,o;if(ih(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),o===void 0)o=s[t]=n,++e._eventsCount;else if(typeof o=="function"?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=rx(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,hC(a)}return e}Te.prototype.addListener=function(t,n){return ix(this,t,n,!1)};Te.prototype.on=Te.prototype.addListener;Te.prototype.prependListener=function(t,n){return ix(this,t,n,!0)};function pC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function sx(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=pC.bind(r);return i.listener=n,r.wrapFn=i,i}Te.prototype.once=function(t,n){return ih(n),this.on(t,sx(this,t,n)),this};Te.prototype.prependOnceListener=function(t,n){return ih(n),this.prependListener(t,sx(this,t,n)),this};Te.prototype.removeListener=function(t,n){var r,i,s,o,a;if(ih(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():gC(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};Te.prototype.off=Te.prototype.removeListener;Te.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function ox(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?yC(i):cx(i,i.length)}Te.prototype.listeners=function(t){return ox(this,t,!0)};Te.prototype.rawListeners=function(t){return ox(this,t,!1)};Te.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ax.call(e,t)};Te.prototype.listenerCount=ax;function ax(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Te.prototype.eventNames=function(){return this._eventsCount>0?Af(this._events):[]};function cx(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function gC(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function yC(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function mC(e,t){return new Promise(function(n,r){function i(o){e.removeListener(t,s),r(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}ux(e,t,s,{once:!0}),t!=="error"&&wC(e,i,{once:!0})})}function wC(e,t,n){typeof e.on=="function"&&ux(e,"error",t,n)}function ux(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Rn=C0.exports;const sh=Ld(Rn);var Iy={exports:{}};(function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof nn<"u"&&nn,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof nn<"u"&&nn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(w){return w&&DataView.prototype.isPrototypeOf(w)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(w){return w&&l.indexOf(Object.prototype.toString.call(w))>-1};function d(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function h(w){return typeof w!="string"&&(w=String(w)),w}function p(w){var S={next:function(){var P=w.shift();return{done:P===void 0,value:P}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(w){this.map={},w instanceof g?w.forEach(function(S,P){this.append(P,S)},this):Array.isArray(w)?w.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(S){this.append(S,w[S])},this)}g.prototype.append=function(w,S){w=d(w),S=h(S);var P=this.map[w];this.map[w]=P?P+", "+S:S},g.prototype.delete=function(w){delete this.map[d(w)]},g.prototype.get=function(w){return w=d(w),this.has(w)?this.map[w]:null},g.prototype.has=function(w){return this.map.hasOwnProperty(d(w))},g.prototype.set=function(w,S){this.map[d(w)]=h(S)},g.prototype.forEach=function(w,S){for(var P in this.map)this.map.hasOwnProperty(P)&&w.call(S,this.map[P],P,this)},g.prototype.keys=function(){var w=[];return this.forEach(function(S,P){w.push(P)}),p(w)},g.prototype.values=function(){var w=[];return this.forEach(function(S){w.push(S)}),p(w)},g.prototype.entries=function(){var w=[];return this.forEach(function(S,P){w.push([P,S])}),p(w)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function m(w){return new Promise(function(S,P){w.onload=function(){S(w.result)},w.onerror=function(){P(w.error)}})}function _(w){var S=new FileReader,P=m(S);return S.readAsArrayBuffer(w),P}function E(w){var S=new FileReader,P=m(S),R=/charset=([A-Za-z0-9_-]+)/.exec(w.type),A=R?R[1]:"utf-8";return S.readAsText(w,A),P}function I(w){for(var S=new Uint8Array(w),P=new Array(S.length),R=0;R<S.length;R++)P[R]=String.fromCharCode(S[R]);return P.join("")}function O(w){if(w.slice)return w.slice(0);var S=new Uint8Array(w.byteLength);return S.set(new Uint8Array(w)),S.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:c.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:c.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():c.arrayBuffer&&c.blob&&u(w)?(this._bodyArrayBuffer=O(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||f(w))?this._bodyArrayBuffer=O(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=v(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function B(w){var S=w.toUpperCase();return N.indexOf(S)>-1?S:w}function D(w,S){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var P=S.body;if(w instanceof D){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,S.headers||(this.headers=new g(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!P&&w._bodyInit!=null&&(P=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=B(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var T=new AbortController;return T.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var A=/\?/;this.url+=(A.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function j(w){var S=new FormData;return w.trim().split("&").forEach(function(P){if(P){var R=P.split("="),A=R.shift().replace(/\+/g," "),T=R.join("=").replace(/\+/g," ");S.append(decodeURIComponent(A),decodeURIComponent(T))}}),S}function V(w){var S=new g,P=w.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var A=R.split(":"),T=A.shift().trim();if(T){var M=A.join(":").trim();try{S.append(T,M)}catch(z){console.warn("Response "+z.message)}}}),S}C.call(D.prototype);function F(w,S){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(w)}C.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var w=new F(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var $=[301,302,303,307,308];F.redirect=function(w,S){if($.indexOf(S)===-1)throw new RangeError("Invalid status code");return new F(null,{status:S,headers:{location:w}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,P){this.message=S,this.name=P;var R=Error(S);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function L(w,S){return new Promise(function(P,R){var A=new D(w,S);if(A.signal&&A.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function M(){T.abort()}T.onload=function(){var K={statusText:T.statusText,headers:V(T.getAllResponseHeaders()||"")};A.url.indexOf("file://")===0&&(T.status<200||T.status>599)?K.status=200:K.status=T.status,K.url="responseURL"in T?T.responseURL:K.headers.get("X-Request-URL");var G="response"in T?T.response:T.responseText;setTimeout(function(){P(new F(G,K))},0)},T.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},T.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},T.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function z(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(T.open(A.method,z(A.url),!0),A.credentials==="include"?T.withCredentials=!0:A.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&(c.blob?T.responseType="blob":c.arrayBuffer&&(T.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(S.headers).forEach(function(K){Q.push(d(K)),T.setRequestHeader(K,h(S.headers[K]))}),A.headers.forEach(function(K,G){Q.indexOf(G)===-1&&T.setRequestHeader(G,K)})}else A.headers.forEach(function(K,G){T.setRequestHeader(G,K)});A.signal&&(A.signal.addEventListener("abort",M),T.onreadystatechange=function(){T.readyState===4&&A.signal.removeEventListener("abort",M)}),T.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return L.polyfill=!0,a.fetch||(a.fetch=L,a.Headers=g,a.Request=D,a.Response=F),o.Headers=g,o.Request=D,o.Response=F,o.fetch=L,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(Iy,Iy.exports);var vC=Iy.exports;const lx=Ld(vC);var na=null;typeof WebSocket<"u"?na=WebSocket:typeof MozWebSocket<"u"?na=MozWebSocket:typeof global<"u"?na=global.WebSocket||global.MozWebSocket:typeof window<"u"?na=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(na=self.WebSocket||self.MozWebSocket);const bC=na;function fx(e){try{return JSON.parse(e)}catch{return null}}function dx(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const EC=globalThis.AbortController||require("abort-controller");class Of extends Error{constructor(t){let{error:n,hostname:r,path:i,method:s,requestBody:o,responseBody:a,responseStatusText:c,statusCode:u}=t;const l=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${i?`path=${i}`:""}
      ${s?`method=${s}`:""}
      ${o?`requestBody=${o}`:""}
      ${a?`responseBody=${a}`:""}
      ${c?`responseStatusText=${c}`:""}
      ${u?`statusCode=${u}`:""}
    `;super(l),this.name="HTTP Request Error",this.statusCode=u,this.errorMessage=n}}async function ht(e){let{hostname:t,path:n,method:r,body:i,headers:s,retryLimit:o=5,retryIntervalMs:a=1e3,timeoutLimit:c=3e4,enableRequestLogging:u=!0}=e;const l=i?JSON.stringify(i):null;function f(){const h=new EC,p=setTimeout(()=>{h.abort()},c);return lx(dx(t,n).toString(),{method:r,body:l,headers:s,signal:h.signal}).then(async g=>{if(g.ok)return g.json();const v=await g.text().catch(()=>null),m=fx(v);throw new Of({error:m==null?void 0:m.message,hostname:t,path:n,method:r,requestBody:l,responseBody:v,responseStatusText:g.statusText,statusCode:g.status})}).catch(async g=>{throw g instanceof Of||g.name==="AbortError"?g:(u&&await ve({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:De.error}),new Of({error:g==null?void 0:g.message,hostname:t,path:n,method:r,requestBody:l}))}).finally(()=>{clearTimeout(p)})}async function d(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await f()}catch(p){const g=[408,429,500,502,503,504];if(p.name==="AbortError"||g.includes(p.statusCode))return await new Promise((v,m)=>{h<o?(u&&console.warn(`Access node unavailable, retrying in ${a} ms...`),setTimeout(()=>{v(d(h+1))},a)):m(p)});throw p}}return await d()}async function _C(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return D0(e,t,i)}async function SC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return D0(e,t,i)}async function IC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return D0(e,t,i)}function D0(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function xC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q(n.node,"SDK Send Execute Script Error: opts.node must be defined."),q(t.response,"SDK Send Execute Script Error: context.response must be defined."),q(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await _C(e,t,n):e.block.height?await SC(e,t,n):await IC(e,t,n)}const AC={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},OC={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function RC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return hx(e,t,i)}async function TC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return hx(e,t,i)}function hx(e,t,n){var s;let r=t.response();r.tag=e.tag;const i=o=>{const a={};if(!o)return a;for(let c of Object.keys(o))a[c]=t.Buffer.from(o[c],"base64").toString();return a};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:i(n.contracts),keys:((s=n.keys)==null?void 0:s.map(o=>({index:Number(o.index),publicKey:o.public_key.replace(/^0x/,""),signAlgo:OC[o.signing_algorithm],signAlgoString:o.signing_algorithm,hashAlgo:AC[o.hashing_algorithm],hashAlgoString:o.hashing_algorithm,sequenceNumber:Number(o.sequence_number),weight:Number(o.weight),revoked:o.revoked})))??[]},r}async function PC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q(n.node,"SDK Send Get Account Error: opts.node must be defined."),q(t.response,"SDK Send Get Account Error: context.response must be defined."),q(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await RC(e,t,n):await TC(e,t,n)}async function kC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return N0(e,t,i)}async function CC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return N0(e,t,i)}async function DC(e,t,n){var o;const r=n.httpRequest||ht,i=(o=e.block)!=null&&o.isSealed?"sealed":"final",s=await r({hostname:n.node,path:`/v1/blocks?height=${i}`,method:"GET",body:null});return N0(e,t,s)}function N0(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},i}async function NC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),q(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await kC(e,t,n):i?await CC(e,t,n):await DC(e,t,n)}async function $C(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return $0(e,t,i)}async function BC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return $0(e,t,i)}async function UC(e,t,n){var o;const r=n.httpRequest||ht,i=(o=e.block)!=null&&o.isSealed?"sealed":"final",s=await r({hostname:n.node,path:`/v1/blocks?height=${i}&expand=payload`,method:"GET",body:null});return $0(e,t,s)}function $0(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,parentVoterSignature:r.header.parent_voter_signature,collectionGuarantees:r.payload.collection_guarantees.map(s=>({collectionId:s.collection_id,signerIds:s.signer_ids})),blockSeals:r.payload.block_seals.map(s=>({blockId:s.block_id,executionReceiptId:s.result_id}))},i}async function LC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Block Error: opts.node must be defined."),q(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await $C(e,t,n):i?await BC(e,t,n):await UC(e,t,n)}async function FC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Collection Error: opts.node must be defined."),q(t.response,"SDK Send Get Collection Error: context.response must be defined.");const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),s=t.response();return s.tag=e.tag,s.collection={id:i.id,transactionIds:i.transactions.map(o=>o.id)},s}async function MC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return px(e,t,i)}async function jC(e,t,n){const i=await(n.httpRequest||ht)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return px(e,t,i)}function px(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(i=>i.events?i.events.forEach(s=>r.events.push({blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(t.Buffer.from(s.payload,"base64").toString())})):null),r}async function zC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Events Error: opts.node must be defined."),q(t.response,"SDK Send Get Events Error: context.response must be defined."),q(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,i=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return q(r||i,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await MC(e,t,n):await jC(e,t,n)}async function HC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),q(t.response,"SDK Send Get Transaction Error: context.response must be defined."),q(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||ht;e=await e;const i=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),s=u=>({address:u.address,keyId:Number(u.key_index),sequenceNumber:Number(u.sequence_number)}),o=u=>({address:u.address,keyId:Number(u.key_index),signature:u.signature,...u.extension_data?{extensionData:t.Buffer.from(u.extension_data,"base64").toString("hex")}:{}}),a=u=>JSON.parse(t.Buffer.from(u,"base64").toString());let c=t.response();return c.tag=e.tag,c.transaction={script:t.Buffer.from(i.script,"base64").toString(),args:[...i.arguments.map(a)],referenceBlockId:i.reference_block_id,gasLimit:Number(i.gas_limit),payer:i.payer,proposalKey:i.proposal_key?s(i.proposal_key):i.proposal_key,authorizers:i.authorizers,payloadSignatures:[...i.payload_signatures.map(o)],envelopeSignatures:[...i.envelope_signatures.map(o)]},c}const qC={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function VC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),q(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),q(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||ht;e=await e;const i=e&&e.block&&e.block.id,s=i?`/v1/transaction_results/${e.transaction.id}?block_id=${encodeURIComponent(i)}`:`/v1/transaction_results/${e.transaction.id}`,o=await r({hostname:n.node,path:s,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:o.block_id,status:qC[o.status.toUpperCase()]||"",statusString:o.status.toUpperCase(),statusCode:o.status_code,errorMessage:o.error_message,events:o.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(t.Buffer.from(c.payload,"base64").toString())}))},a}async function KC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(!!n.node,"SDK Send Ping Error: opts.node must be defined."),q(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||ht)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let i=typeof(t==null?void 0:t.response)=="function"?t.response():{};return i.tag=e.tag,i}const WC=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function GC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Transaction Error: opts.node must be defined."),q(t.response,"SDK Send Transaction Error: context.response must be defined."),q(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||ht;e=await e;let i=[];for(let l of Object.values(e.accounts))try{if(!l.role.payer&&l.signature!=null){const f={address:it(l.addr),key_index:String(l.keyId),signature:t.Buffer.from(l.signature,"hex").toString("base64")};if(l.extensionData!=null){const d=t.Buffer.from(l.extensionData,"hex").toString("base64");d!=null&&(f.extension_data=d)}i.find(d=>d.address===f.address&&d.key_index===f.key_index&&d.signature===f.signature)||i.push(f)}}catch(f){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:l,ix:e}),f}let s={};for(let l of Object.values(e.accounts))try{if(l.role.payer&&l.signature!=null){let f=l.tempId||WC(l);if(s[f]=s[f]||{address:it(l.addr),key_index:String(l.keyId),signature:t.Buffer.from(l.signature,"hex").toString("base64")},l.extensionData!=null){const d=t.Buffer.from(l.extensionData,"hex").toString("base64");d!=null&&(s[f].extension_data=d)}}}catch(f){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:l,ix:e}),f}s=Object.values(s);var o=Date.now();const a=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(l=>t.Buffer.from(JSON.stringify(e.arguments[l].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:it(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:it(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(l=>e.accounts[l].addr).reduce((l,f)=>l.find(d=>d===f)?l:[...l,f],[]).map(it),payload_signatures:i,envelope_signatures:s}});var c=Date.now();let u=t.response();return u.tag=e.tag,u.transactionId=a.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:u.transactionId,delta:c-o}})),u}async function YC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),q(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||ht;e=await e;const i=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let s=t.response();return s.tag=e.tag,s.networkParameters={chainId:i.chain_id},s}async function XC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),q(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const r=n.httpRequest||ht;e=await e;const i=await r({hostname:n.node,path:"/v1/node_version_info",method:"GET"});let s=t.response();return s.tag=e.tag,s.nodeVersionInfo={semver:i.semver,commit:i.commit,sporkId:i.spork_id,protocolVersion:parseInt(i.protocol_version),sporkRootBlockHeight:parseInt(i.spork_root_block_height),nodeRootBlockHeight:parseInt(i.node_root_block_height)},s}const gx=bC;class gv extends Error{constructor(t){let{code:n,reason:r,message:i,wasClean:s}=t;const o=`
      connectWs: connection closed with error${i?`: ${i}`:""}
      ${n?`code: ${n}`:""}
      ${r?`reason: ${r}`:""}
      ${s?`wasClean: ${s}`:""}
    `;super(o),this.name="WebsocketError",this.code=n,this.reason=r,this.wasClean=!1}}function ZC(e){let{hostname:t,path:n,params:r,getParams:i,retryLimit:s=5,retryIntervalMs:o=1e3}=e;if(i&&r)throw new Error("connectWs: cannot specify both params and getParams");let a=new Rn.EventEmitter,c=0;const u=i||(()=>r);let l=()=>{};return function f(){let d=!1,h=!1;const p=QC(t,n,u()),g=new gx(p);g.onmessage=function(v){const m=fx(v.data);m?a.emit("data",m):(a.emit("error",new gv({message:"invalid JSON data"})),this.close())},g.onclose=function(v){if(d){a.emit("close"),a.removeAllListeners();return}h?setTimeout(f,o):c<s?(c++,setTimeout(f,o)):(a.emit("error",new gv({wasClean:v.wasClean,code:v.code,reason:v.reason,message:"failed to connect"})),setTimeout(()=>{a.emit("close"),a.removeAllListeners()}))},g.onopen=function(){h=!0,c=0},l=()=>{d=!0,g.close()}}(),{on(f,d){return a.on(f,d),this},off(f,d){return a.off(f,d),this},close(){l()}}}function QC(e,t,n){const r=new URL(t||"",e);return r.protocol==="https:"?r.protocol="wss:":r.protocol==="http:"&&(r.protocol="ws:"),Object.entries(n||{}).forEach(i=>{let[s,o]=i;if(o){let a;Array.isArray(o)?a=o.join(","):a=o.toString(),r.searchParams.append(s,a)}}),r.toString()}function JC(e,t,n){var i;const r=t.response();return r.tag=e.tag,r.events=((i=n.Events)==null?void 0:i.length)>0?n.Events.map(s=>({blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp,type:s.Type,transactionId:s.TransactionID,transactionIndex:Number(s.TransactionIndex),eventIndex:Number(s.EventIndex),payload:JSON.parse(t.Buffer.from(s.Payload,"base64").toString())})):null,r.heartbeat={blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp},r}function eD(e,t,n){const r=t.response();return r.tag=e.tag,r.streamConnection=n,r}async function tD(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q(n.node,"SDK Send Get Events Error: opts.node must be defined."),q(t.response,"SDK Send Get Events Error: context.response must be defined."),q(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=await e,i=n.connectWs||ZC,s=new Rn.EventEmitter;let o=null;const a=i({hostname:n.node,path:"/v1/subscribe_events",getParams:()=>{var l,f,d,h,p,g;const u={event_types:(l=r.subscribeEvents)==null?void 0:l.eventTypes,addresses:(f=r.subscribeEvents)==null?void 0:f.addresses,contracts:(d=r.subscribeEvents)==null?void 0:d.contracts,heartbeat_interval:(h=r.subscribeEvents)==null?void 0:h.heartbeatInterval};return o?u.start_height=o+1:(u.start_block_id=(p=r.subscribeEvents)==null?void 0:p.startBlockId,u.start_height=(g=r.subscribeEvents)==null?void 0:g.startHeight),u}});return a.on("data",u=>{const l=JC(r,t,u);o=l.heartbeat.blockHeight,s.emit("data",l)}),a.on("error",u=>{s.emit("error",u)}),a.on("close",()=>{s.emit("close")}),eD(r,t,{on(u,l){return s.on(u,l),this},off(u,l){return s.off(u,l),this},close(){a.close()}})}const nD=async function(e,t){var r,i,s,o;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(q(!!(n!=null&&n.node),'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),q(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):GC(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):VC(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):HC(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):xC(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):PC(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):zC(e,t,n);case((i=(r=t.ix).isSubscribeEvents)==null?void 0:i.call(r,e)):return n.connectSubscribeEvents?n.connectSubscribeEvents(e,t,n):tD(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):LC(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):NC(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):FC(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):KC(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):YC(e,t,n);case((o=(s=t.ix).isGetNodeVersionInfo)==null?void 0:o.call(s,e)):return n.sendGetNodeVersionInfo?n.sendGetNodeVersionInfo(e,t,n):XC(e,t,n);default:return e}};let yv=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class Jc extends Error{constructor(t,n){super(n),this.name="SocketError",this.code=t}static fromMessage(t){return new Jc(t.code,t.message)}}const rD=1;class iD{constructor(t,n){oe(this,"counter",0);oe(this,"socket",null);oe(this,"subscriptions",[]);oe(this,"reconnectAttempts",0);oe(this,"connectPromise",null);oe(this,"closeConnection",null);this.config={...n,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...n.reconnectOptions}},this.handlers=t}subscribe(t){const n=this._subscribe(t);return{unsubscribe:()=>{n.then(r=>r&&this.unsubscribe(r))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let i=null;try{await this.connect(),i={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(i);const s=await this.sendSubscribe(i);if(s.error)throw new Error(`Failed to subscribe to topic ${i.topic}`,{cause:Jc.fromMessage(s.error)})}catch(s){return r.onError(s instanceof Error?s:new Error(String(s))),i&&this.unsubscribe(i.id),null}return i.id}unsubscribe(t){var r;const n=this.subscriptions.find(i=>i.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(i=>i.id!==t),this.subscriptions.length===0){(r=this.closeConnection)==null||r.call(this);return}this.sendUnsubscribe(n).catch(i=>{console.error(`Error while unsubscribing from topic: ${i}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,n)=>{var o;if(((o=this.socket)==null?void 0:o.readyState)===rD){t();return}this.socket=new gx(this.config.node);const r=a=>{const c=JSON.parse(a.data);if("action"in c&&c.error){const l=this.subscriptions.find(f=>f.id===c.subscription_id);l&&(l.subscriber.onError(new Error(`Failed to subscribe to topic ${l.topic}: ${c.error.message}`)),this.subscriptions=this.subscriptions.filter(f=>f.id!==c.subscription_id));return}const u=this.subscriptions.find(l=>l.id===c.subscription_id);u&&!("action"in c)&&c.subscription_id===u.id&&u.subscriber.onData(c.payload)},i=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(a=>{n(a)})},s=()=>{t()};this.socket.addEventListener("message",r),this.socket.addEventListener("close",i),this.socket.addEventListener("open",s),this.closeConnection=()=>{var a,c,u,l;(a=this.socket)==null||a.removeEventListener("message",r),(c=this.socket)==null||c.removeEventListener("close",i),(u=this.socket)==null||u.removeEventListener("open",s),(l=this.socket)==null||l.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){var n;if((n=this.closeConnection)==null||n.call(this),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw ve({level:De.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(r=>{r.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;ve({level:De.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(r=>setTimeout(r,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async r=>{await this.sendSubscribe(r).catch(i=>{r.subscriber.onError(new Error(`Failed to restore subscription: ${i}`)),this.subscriptions=this.subscriptions.filter(s=>s.id!==r.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const n={action:yv.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},r=await this.request(n);if(r.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:Jc.fromMessage(r.error)});return r}async sendUnsubscribe(t){var i;const n={action:yv.UNSUBSCRIBE,subscription_id:t.id};(i=this.socket)==null||i.send(JSON.stringify(n));const r=await this.request(n);if(r.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:Jc.fromMessage(r.error)});return r}async request(t){let n=()=>{};return await new Promise((r,i)=>{if(!this.socket){i(new Error("WebSocket is not connected"));return}n=()=>{var c,u,l;(c=this.socket)==null||c.removeEventListener("error",s),(u=this.socket)==null||u.removeEventListener("message",a),(l=this.socket)==null||l.removeEventListener("close",o)},this.socket.addEventListener("error",s),this.socket.addEventListener("message",a),this.socket.addEventListener("close",o),this.socket.send(JSON.stringify(t));function s(c){i(new Error(`WebSocket error: ${c}`))}function o(){i(new Error("WebSocket closed"))}function a(c){const u=JSON.parse(c.data);u.subscription_id===t.subscription_id&&r(u)}}).finally(()=>{n()})}getHandler(t){const n=this.handlers.find(r=>r.topic===t);if(!n)throw new Error(`No handler found for topic ${t}`);return n}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const sD={topic:Ps.BLOCKS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={block:{id:i.header.id,parentId:i.header.parent_id,height:Number(i.header.height),timestamp:i.header.timestamp,parentVoterSignature:i.header.parent_voter_signature,collectionGuarantees:i.payload.collection_guarantees.map(o=>({collectionId:o.collection_id,signerIds:o.signer_indices})),blockSeals:i.payload.block_seals.map(o=>({blockId:o.block_id,executionReceiptId:o.result_id}))}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.header.height)+BigInt(1))},t(s)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},oD={topic:Ps.BLOCK_HEADERS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={blockHeader:{id:i.id,parentId:i.parent_id,height:Number(i.height),timestamp:i.timestamp,parentVoterSignature:i.parent_voter_signature}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.height)+BigInt(1))},t(s)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},aD={topic:Ps.BLOCK_DIGESTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={blockDigest:{id:i.block_id,height:Number(i.height),timestamp:i.timestamp}};r={blockStatus:r.blockStatus,startBlockId:String(BigInt(i.height)+BigInt(1))},t(s)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},cD={topic:Ps.ACCOUNT_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){if(i.account_events){const s=[];for(const[o,a]of Object.entries(i.account_events))for(const c of a){const u={accountStatusEvent:{accountAddress:o,blockId:i.block_id,blockHeight:Number(i.height),type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(Buffer.from(c.payload,"base64").toString())}};s.push(u)}s.sort((o,a)=>{const c=o.accountStatusEvent.transactionIndex-a.accountStatusEvent.transactionIndex;return c!==0?c:o.accountStatusEvent.eventIndex-a.accountStatusEvent.eventIndex});for(const o of s)t(o)}r={...r,startBlockHeight:Number(BigInt(i.height)+BigInt(1)),startBlockId:void 0}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,account_addresses:r.accountAddresses};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},uD={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},lD={topic:Ps.TRANSACTION_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={transactionStatus:{blockId:i.transaction_result.block_id,status:uD[i.transaction_result.status.toUpperCase()],statusString:i.transaction_result.status.toUpperCase(),statusCode:i.transaction_result.status_code,errorMessage:i.transaction_result.error_message,events:i.transaction_result.events.map(o=>({type:o.type,transactionId:o.transaction_id,transactionIndex:Number(o.transaction_index),eventIndex:Number(o.event_index),payload:JSON.parse(_e.Buffer.from(o.payload,"base64").toString())}))}};t(s)},onError(i){n(i)},getConnectionArgs(){return{tx_id:r.transactionId}}}}},fD={topic:Ps.EVENTS,createSubscriber:(e,t,n)=>{let r={...e};return"startHeight"in r&&r.startHeight&&(r.startBlockHeight=r.startHeight,delete r.startHeight),{onData(i){if(i.events&&Array.isArray(i.events))for(const s of i.events){const o={event:{blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(Buffer.from(s.payload,"base64").toString())}};t(o)}r={...r,startBlockHeight:Number(BigInt(i.block_height)+BigInt(1)),startBlockId:void 0}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,contracts:r.contracts};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:String(r.startBlockId)}:i}}}},dD=[sD,oD,aD,cD,lD,fD];let mv=new Map;function hD(e,t){let{topic:n,args:r,onData:i,onError:s}=e;const o=pD(t.node),a=mv.get(o)||new iD(dD,{node:o});return mv.set(o,a),a.subscribe({topic:n,args:r,onData:i,onError:s})}function pD(e){const t=new URL(dx(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const gD={send:nD,subscribe:hD};var yx={},mx={},wx={},vx={},yD=function(t,n){return function(r,i){var s=i*2,o=n*2;r[s]=t[o],r[s+1]=t[o+1]}},B0=yD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(B0);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(o){for(var a=o.A,c=o.C,u=0;u<25;u+=5){for(var l=0;l<5;l++)(0,t.default)(a,u+l)(c,l);for(var f=0;f<5;f++){var d=(u+f)*2,h=(f+1)%5*2,p=(f+2)%5*2;a[d]^=~c[h]&c[p],a[d+1]^=~c[h+1]&c[p+1]}}},i=r;e.default=i})(vx);var bx={},Ex={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n})(Ex);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Ex);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(o){var a=o.A,c=o.roundIndex,u=c*2;a[0]^=t.default[u],a[1]^=t.default[u+1]},i=r;e.default=i})(bx);var _x={},Sx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n})(Sx);var Ix={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n})(Ix);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Sx),n=i(Ix),r=i(B0);function i(a){return a&&a.__esModule?a:{default:a}}var s=function(c){var u=c.A,l=c.C,f=c.W;(0,r.default)(u,1)(f,0);for(var d=0,h=0,p=0,g=32,v=0;v<24;v++){var m=t.default[v],_=n.default[v];(0,r.default)(u,m)(l,0),d=f[0],h=f[1],g=32-_,p=_<32?0:1,f[p]=d<<_|h>>>g,f[(p+1)%2]=h<<_|d>>>g,(0,r.default)(f,0)(u,m),(0,r.default)(l,0)(f,0)}},o=s;e.default=o})(_x);var xx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(B0);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(o){for(var a=o.A,c=o.C,u=o.D,l=o.W,f=0,d=0,h=0;h<5;h++){var p=h*2,g=(h+5)*2,v=(h+10)*2,m=(h+15)*2,_=(h+20)*2;c[p]=a[p]^a[g]^a[v]^a[m]^a[_],c[p+1]=a[p+1]^a[g+1]^a[v+1]^a[m+1]^a[_+1]}for(var E=0;E<5;E++){(0,t.default)(c,(E+1)%5)(l,0),f=l[0],d=l[1],l[0]=f<<1|d>>>31,l[1]=d<<1|f>>>31,u[E*2]=c[(E+4)%5*2]^l[0],u[E*2+1]=c[(E+4)%5*2+1]^l[1];for(var I=0;I<25;I+=5)a[(I+E)*2]^=u[E*2],a[(I+E)*2+1]^=u[E*2+1]}},i=r;e.default=i})(xx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(vx),n=s(bx),r=s(_x),i=s(xx);function s(c){return c&&c.__esModule?c:{default:c}}var o=function(){var u=new Uint32Array(10),l=new Uint32Array(10),f=new Uint32Array(2);return function(d){for(var h=0;h<24;h++)(0,i.default)({A:d,C:u,D:l,W:f}),(0,r.default)({A:d,C:u,W:f}),(0,t.default)({A:d,C:u}),(0,n.default)({A:d,roundIndex:h});u.fill(0),l.fill(0),f.fill(0)}},a=o;e.default=a})(wx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=_e,n=r(wx);function r(c){return c&&c.__esModule?c:{default:c}}var i=function(u,l){for(var f=0;f<u.length;f+=8){var d=f/4;l[d]^=u[f+7]<<24|u[f+6]<<16|u[f+5]<<8|u[f+4],l[d+1]^=u[f+3]<<24|u[f+2]<<16|u[f+1]<<8|u[f]}return l},s=function(u,l){for(var f=0;f<l.length;f+=8){var d=f/4;l[f]=u[d+1],l[f+1]=u[d+1]>>>8,l[f+2]=u[d+1]>>>16,l[f+3]=u[d+1]>>>24,l[f+4]=u[d],l[f+5]=u[d]>>>8,l[f+6]=u[d]>>>16,l[f+7]=u[d]>>>24}return l},o=function(u){var l=this,f=u.capacity,d=u.padding,h=(0,n.default)(),p=200,g=f/8,v=p-f/4,m=0,_=new Uint32Array(p/4),E=t.Buffer.allocUnsafe(v);return this.absorb=function(I){for(var O=0;O<I.length;O++)E[m]=I[O],m+=1,m>=v&&(i(E,_),h(_),m=0);return l},this.squeeze=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O={buffer:I.buffer||t.Buffer.allocUnsafe(g),padding:I.padding||d,queue:t.Buffer.allocUnsafe(E.length),state:new Uint32Array(_.length)};E.copy(O.queue);for(var C=0;C<_.length;C++)O.state[C]=_[C];O.queue.fill(0,m),O.queue[m]|=O.padding,O.queue[v-1]|=128,i(O.queue,O.state);for(var N=0;N<O.buffer.length;N+=v)h(O.state),s(O.state,O.buffer.slice(N,N+v));return O.buffer},this.reset=function(){return E.fill(0),_.fill(0),m=0,l},this},a=o;e.default=a})(mx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=_e,n=r(mx);function r(l){return l&&l.__esModule?l:{default:l}}var i=function(f){var d=f.allowedSizes,h=f.defaultSize,p=f.padding;return function g(){var v=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;if(!this||this.constructor!==g)return new g(m);if(d&&!d.includes(m))throw new Error("Unsupported hash length");var _=new n.default({capacity:m});return this.update=function(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(E))return _.absorb(E),v;if(typeof E=="string")return v.update(t.Buffer.from(E,I));throw new TypeError("Not a string or buffer")},this.digest=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",I=typeof E=="string"?{format:E}:E,O=_.squeeze({buffer:I.buffer,padding:I.padding||p});return I.format&&I.format!=="binary"?O.toString(I.format):O},this.reset=function(){return _.reset(),v},this}},s=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=s;var o=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=o;var a=i({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=a;var c=s;e.SHA3Hash=c,o.SHA3Hash=c;var u=o;e.default=u})(yx);function Ax(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return n.push(...e),n;const[r,...i]=e,[s,...o]=t;return r!==void 0&&n.push(r),s!==void 0&&n.push(s),Ax(i,o,n)}function Ox(e){return function(t){return typeof t=="function"?(ve.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),Ox(e)(t(e))):String(t)}}function Rx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:typeof e=="function"?e:i=>Ax([...e],n.map(Ox(i))).join("").trim()}const de=(e,t,n)=>({label:e,asArgument:t,asInjection:r=>(ve.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),n(r))}),wo=e=>Array.isArray(e),Cs=e=>typeof e=="object",Tx=e=>e==null,mD=e=>typeof e=="boolean",Ge=e=>typeof e=="number",pt=e=>Number.isInteger(e),Oe=e=>typeof e=="string",ae=e=>{throw new Error("Type Error: "+e)},gt=e=>{ve.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let wv=!1;const wD={label:"Identity",asArgument:e=>(wv||(ve.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),wv=!0),e),asInjection:e=>e},vD=de("UInt",e=>Ge(e)&&pt(e)?(gt("UInt"),{type:"UInt",value:e.toString()}):Oe(e)?{type:"UInt",value:e}:ae("Expected Positive Integer for type Unsigned Int"),e=>e),bD=de("Int",e=>Ge(e)&&pt(e)?(gt("Int"),{type:"Int",value:e.toString()}):Oe(e)?{type:"Int",value:e}:ae("Expected Integer for type Int"),e=>e),ED=de("UInt8",e=>Ge(e)&&pt(e)?(gt("UInt8"),{type:"UInt8",value:e.toString()}):Oe(e)?{type:"UInt8",value:e}:ae("Expected integer for UInt8"),e=>e),_D=de("Int8",e=>Ge(e)&&pt(e)?(gt("Int8"),{type:"Int8",value:e.toString()}):Oe(e)?{type:"Int8",value:e}:ae("Expected positive integer for Int8"),e=>e),SD=de("UInt16",e=>Ge(e)&&pt(e)?(gt("UInt16"),{type:"UInt16",value:e.toString()}):Oe(e)?{type:"UInt16",value:e}:ae("Expected integer for UInt16"),e=>e),ID=de("Int16",e=>Ge(e)&&pt(e)?(gt("Int16"),{type:"Int16",value:e.toString()}):Oe(e)?{type:"Int16",value:e}:ae("Expected positive integer for Int16"),e=>e),xD=de("UInt32",e=>Ge(e)&&pt(e)?(gt("UInt32"),{type:"UInt32",value:e.toString()}):Oe(e)?{type:"UInt32",value:e}:ae("Expected integer for UInt32"),e=>e),AD=de("Int32",e=>Ge(e)&&pt(e)?(gt("Int32"),{type:"Int32",value:e.toString()}):Oe(e)?{type:"Int32",value:e}:ae("Expected positive integer for Int32"),e=>e),OD=de("UInt64",e=>Ge(e)&&pt(e)?(gt("UInt64"),{type:"UInt64",value:e.toString()}):Oe(e)?{type:"UInt64",value:e}:ae("Expected integer for UInt64"),e=>e),RD=de("Int64",e=>Ge(e)&&pt(e)?(gt("Int64"),{type:"Int64",value:e.toString()}):Oe(e)?{type:"Int64",value:e}:ae("Expected positive integer for Int64"),e=>e),TD=de("UInt128",e=>Ge(e)&&pt(e)?(gt("UInt128"),{type:"UInt128",value:e.toString()}):Oe(e)?{type:"UInt128",value:e}:ae("Expected integer for UInt128"),e=>e),PD=de("Int128",e=>Ge(e)&&pt(e)?(gt("Int128"),{type:"Int128",value:e.toString()}):Oe(e)?{type:"Int128",value:e}:ae("Expected positive integer for Int128"),e=>e),kD=de("UInt256",e=>Ge(e)&&pt(e)?(gt("UInt256"),{type:"UInt256",value:e.toString()}):Oe(e)?{type:"UInt256",value:e}:ae("Expected integer for UInt256"),e=>e),CD=de("Int256",e=>Ge(e)&&pt(e)?(gt("Int256"),{type:"Int256",value:e.toString()}):Oe(e)?{type:"Int256",value:e}:ae("Expected integer for Int256"),e=>e),DD=de("Word8",e=>Ge(e)&&pt(e)?(gt("Word8"),{type:"Word8",value:e.toString()}):Oe(e)?{type:"Word8",value:e}:ae("Expected positive number for Word8"),e=>e),ND=de("Word16",e=>Ge(e)&&pt(e)?(gt("Word16"),{type:"Word16",value:e.toString()}):Oe(e)?{type:"Word16",value:e}:ae("Expected positive number for Word16"),e=>e),$D=de("Word32",e=>Ge(e)&&pt(e)?(gt("Word32"),{type:"Word32",value:e.toString()}):Oe(e)?{type:"Word32",value:e}:ae("Expected positive number for Word32"),e=>e),BD=de("Word64",e=>Ge(e)&&pt(e)?(gt("Word64"),{type:"Word64",value:e.toString()}):Oe(e)?{type:"Word64",value:e}:ae("Expected positive number for Word64"),e=>e),UD=de("Word128",e=>Ge(e)&&pt(e)?(gt("Word128"),{type:"Word128",value:e.toString()}):Oe(e)?{type:"Word128",value:e}:ae("Expected positive number for Word128"),e=>e),LD=de("Word256",e=>Ge(e)&&pt(e)?(gt("Word256"),{type:"Word256",value:e.toString()}):Oe(e)?{type:"Word256",value:e}:ae("Expected positive number for Word256"),e=>e),oh=()=>{ve.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},FD=de("UFix64",e=>{if(Oe(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?ae(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if(Ge(e))return oh(),{type:"UFix64",value:e.toString()};return ae("Expected String for UFix64")},e=>e),MD=de("Fix64",e=>{if(Oe(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?ae(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if(Ge(e))return oh(),{type:"Fix64",value:e.toString()};return ae("Expected String for Fix64")},e=>e),jD=de("UFix128",e=>{if(Oe(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix128 value. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):t[1].length==0||t[1].length>24?ae(`Expected at least one digit, and at most 24 digits following the decimal of the [U]Fix128 value but found ${t[1].length} digits. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):(t[1]=t[1].padEnd(24,"0"),e=t.join("."),{type:"UFix128",value:e})}else if(Ge(e))return oh(),{type:"UFix128",value:e.toString()};return ae("Expected String for UFix128")},e=>e),zD=de("Fix128",e=>{if(Oe(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix128 value. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):t[1].length==0||t[1].length>24?ae(`Expected at least one digit, and at most 24 digits following the decimal of the [U]Fix128 value but found ${t[1].length} digits. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):(t[1]=t[1].padEnd(24,"0"),e=t.join("."),{type:"Fix128",value:e})}else if(Ge(e))return oh(),{type:"Fix128",value:e.toString()};return ae("Expected String for Fix128")},e=>e),HD=de("String",e=>Oe(e)?{type:"String",value:e}:ae("Expected String for type String"),e=>e),qD=de("Character",e=>Oe(e)?{type:"Character",value:e}:ae("Expected Character for type Character"),e=>e),VD=de("Bool",e=>mD(e)?{type:"Bool",value:e}:ae("Expected Boolean for type Bool"),e=>e),Px=de("Address",e=>Oe(e)?{type:"Address",value:e}:ae("Expected Address for type Address"),e=>e),KD=de("Void",e=>!e||Tx(e)?{type:"Void",value:null}:ae("Expected Void for type Void"),e=>e),WD=e=>de("Optional",t=>({type:"Optional",value:Tx(t)?null:e.asArgument(t)}),t=>t),GD=de("Reference",e=>Cs(e)?{type:"Reference",value:e}:ae("Expected Object for type Reference"),e=>e),vv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return de("Array",t=>({type:"Array",value:wo(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},YD=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return de("Dictionary",t=>{const n=wo(t),r=wo(e);return Cs(t)?{type:"Dictionary",value:r&&n?e.map((i,s)=>({key:i.key.asArgument(t[s].key),value:i.value.asArgument(t[s].value)})):n&&!r?t.map(i=>({key:e.key.asArgument(i.key),value:e.value.asArgument(i.value)})):!n&&!r?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:ae("Invalid arguments for Dictionary.")}:ae("Expected Object for type Dictionary")},t=>t)},XD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return de("Event",n=>Cs(n)?{type:"Event",value:{id:e,fields:wo(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:ae("Expected Object for type Event"),n=>n)},ZD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return de("Resource",n=>Cs(n)?{type:"Resource",value:{id:e,fields:wo(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:ae("Expected Object for type Resource"),n=>n)},QD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return de("Struct",n=>Cs(n)?{type:"Struct",value:{id:e,fields:wo(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:ae("Expected Object for type Struct"),n=>n)},JD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return de("Enum",n=>Cs(n)?{type:"Enum",value:{id:e,fields:wo(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:ae("Expected Object for type Enum"),n=>n)},eN=de("Path",e=>Cs(e)?Oe(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?Oe(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:ae(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):ae(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):ae(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):ae("Expected Object for type Path"),e=>e),tN=e=>de("InclusiveRange",t=>{if(Cs(t)){const{start:n,end:r,step:i}=t;return{type:"InclusiveRange",value:{start:e.asArgument(n),end:e.asArgument(r),step:e.asArgument(i)}}}return ae("Expected Object for type InclusiveRange")},t=>t),nN=Object.freeze(Object.defineProperty({__proto__:null,Address:Px,Array:vv,Bool:VD,Character:qD,Dictionary:YD,Enum:JD,Event:XD,Fix128:zD,Fix64:MD,Identity:wD,InclusiveRange:tN,Int:bD,Int128:PD,Int16:ID,Int256:CD,Int32:AD,Int64:RD,Int8:_D,Optional:WD,Path:eN,Reference:GD,Resource:ZD,String:HD,Struct:QD,UFix128:jD,UFix64:FD,UInt:vD,UInt128:TD,UInt16:SD,UInt256:kD,UInt32:xD,UInt64:OD,UInt8:ED,Void:KD,Word128:UD,Word16:ND,Word256:LD,Word32:$D,Word64:BD,Word8:DD,_Array:vv},Symbol.toStringTag,{value:"Module"})),rN=`{
  "kind":"${th.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,iN=`{
  "kind":"${th.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,kx=`{
  "tag":"${Re.UNKNOWN}",
  "assigns":{},
  "status":"${Vu.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,Cx=new Set(Object.keys(JSON.parse(kx))),ah=()=>JSON.parse(kx),Dx=()=>(ve.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:De.warn}),ah()),Nx=e=>typeof e=="number",$x=e=>Array.isArray(e),Bx=e=>e!==null&&typeof e=="object",U0=e=>e==null,qa=e=>typeof e=="function",Ux=e=>{if(!Bx(e)||U0(e)||Nx(e))return!1;for(let t of Cx)if(!e.hasOwnProperty(t))return!1;return!0},ln=e=>(e.status=Vu.OK,e),L0=(e,t)=>(e.status=Vu.BAD,e.reason=t,e),Tn=e=>t=>(t.tag=e,ln(t)),bv=e=>e.keyId==null?e:(q(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),Lx=()=>JSON.parse(rN),ch=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{q(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),q(t.role!=null,"Account must have a role");const r=Lx(),i=t.role,s=T0();let o={...e};e.authorization&&qa(e.authorization)&&(o={resolve:e.authorization}),!e.authorization&&qa(e)&&(o={resolve:e});const a=o.resolve;return a&&(o.resolve=function(c){for(var u=arguments.length,l=new Array(u>1?u-1:0),f=1;f<u;f++)l[f-1]=arguments[f];return[a,bv].reduce(async(d,h)=>h(await d,...l),c)}),o=bv(o),n.accounts[s]={...r,tempId:s,...o,role:{...r.role,...typeof e.role=="object"?e.role:{},...i?{[i]:!0}:{}}},i===Su.AUTHORIZER?n.authorizations.push(s):i===Su.PAYER?n.payer.push(s):i&&(n[i]=s),n}},Fx=e=>t=>{let n=T0();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(iN),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=qa(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,ln(t)},sN=Tn(Re.UNKNOWN),Mx=Tn(Re.SCRIPT),jx=Tn(Re.TRANSACTION),zx=Tn(Re.GET_TRANSACTION_STATUS),oN=Tn(Re.GET_TRANSACTION),Hx=Tn(Re.GET_ACCOUNT),qx=Tn(Re.GET_EVENTS),aN=Tn(Re.PING),Vx=Tn(Re.GET_BLOCK),cN=Tn(Re.GET_BLOCK_HEADER),uN=Tn(Re.GET_COLLECTION),Kx=Tn(Re.GET_NETWORK_PARAMETERS),lN=Tn(Re.SUBSCRIBE_EVENTS),fN=Tn(Re.GET_NODE_VERSION_INFO),Pn=e=>t=>t.tag===e,Wx=Pn(Re.UNKNOWN),F0=Pn(Re.SCRIPT),Ds=Pn(Re.TRANSACTION),dN=Pn(Re.GET_TRANSACTION_STATUS),hN=Pn(Re.GET_TRANSACTION),Gx=Pn(Re.GET_ACCOUNT),pN=Pn(Re.GET_EVENTS),gN=Pn(Re.PING),yN=Pn(Re.GET_BLOCK),mN=Pn(Re.GET_BLOCK_HEADER),wN=Pn(Re.GET_COLLECTION),vN=Pn(Re.GET_NETWORK_PARAMETERS),bN=Pn(Re.GET_NODE_VERSION_INFO),EN=Pn(Re.SUBSCRIBE_EVENTS),_N=e=>e.status===Vu.OK,Yx=e=>e.status===Vu.BAD,SN=e=>e.reason,IN=e=>e.kind===th.ACCOUNT,xN=e=>e.kind===th.ARGUMENT,AN=e=>{for(let t of Object.keys(e))if(!Cx.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},Rf=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=AN(await e),Yx(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,i=await n;if(qa(i))return Rf(i(e),r);if(U0(i)||!i)return Rf(e,r);if(Ux(i))return Rf(i,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}};function yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,i]=t;return $x(r)?a=>yt(a,r):Rf(r,i)}const ON=function(e){return e},uh=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?n:e.assigns[t]},M0=(e,t)=>n=>(n.assigns[e]=t,ln(n)),Xx=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ON;return n=>(n.assigns[e]=t(n.assigns[e],n),ln(n))},RN=e=>t=>(delete t.assigns[e],ln(t));var j0=Object.freeze({__proto__:null,Bad:L0,Ok:ln,destroy:RN,get:uh,initAccount:Lx,initInteraction:ah,interaction:Dx,isAccount:IN,isArgument:xN,isArray:$x,isBad:Yx,isFn:qa,isGetAccount:Gx,isGetBlock:yN,isGetBlockHeader:mN,isGetCollection:wN,isGetEvents:pN,isGetNetworkParameters:vN,isGetNodeVersionInfo:bN,isGetTransaction:hN,isGetTransactionStatus:dN,isInteraction:Ux,isNull:U0,isNumber:Nx,isObj:Bx,isOk:_N,isPing:gN,isScript:F0,isSubscribeEvents:EN,isTransaction:Ds,isUnknown:Wx,makeArgument:Fx,makeGetAccount:Hx,makeGetBlock:Vx,makeGetBlockHeader:cN,makeGetCollection:uN,makeGetEvents:qx,makeGetNetworkParameters:Kx,makeGetNodeVerionInfo:fN,makeGetTransaction:oN,makeGetTransactionStatus:zx,makePing:aN,makeScript:Mx,makeSubscribeEvents:lN,makeTransaction:jx,makeUnknown:sN,pipe:yt,prepAccount:ch,put:M0,update:Xx,why:SN});function Zx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return yt(ah(),e)}const TN={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},z0=()=>({...TN});function Tf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return yt([Vx,t=>(t.block.isSealed=e,ln(t))])}function Oa(e){return yt([Hx,t=>(t.account.addr=it(e),ln(t))])}const PN=(e,t,n)=>{const r=new sh;let i=kN();e.on("data",async o=>{const a=Object.keys(o).filter(u=>o[u]!=null&&u!=="tag");let c=Promise.all(a.map(async u=>{const l={[u]:o[u]},f=await t(l,n);return{channel:u,message:f}}));i.push(async()=>{(await c).forEach(l=>{let{channel:f,message:d}=l;r.emit(f,d)})})});function s(o){e.on(o,a=>{i.push(async()=>{r.emit(o,a)})})}return s("close"),s("error"),{on(o,a){return r.on(o,a),this},off(o,a){return r.off(o,a),this},close:()=>{e.close()}}};function kN(){let e=[],t=!1;async function n(){if(!t){for(t=!0;e.length>0;){const r=e.shift();await(r==null?void 0:r())}t=!1}}return{push:r=>{e.push(r),n()}}}const CN=()=>{ve.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},Se=async e=>e,DN=async()=>null,NN=async e=>e.staticType,$N=async(e,t,n)=>e?await vo(e,t,n):null,BN=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async i=>i(await vo(r,t,[...n,r.type]))))),UN=async(e,t,n)=>await e.reduce(async(r,i)=>(r=await r,r[await vo(i.key,t,[...n,i.key])]=await vo(i.value,t,[...n,i.key]),r),Promise.resolve({})),Cl=async(e,t,n)=>{const r=await e.fields.reduce(async(s,o)=>(s=await s,s[o.name]=await vo(o.value,t,[...n,o.name]),s),Promise.resolve({})),i=e.id&&Qx(t,e.id);return i?await i(r):r},LN=async(e,t,n)=>{const r=["start","end","step"];return await Object.keys(e).reduce(async(s,o)=>(s=await s,r.includes(o)&&(s[o]=await vo(e[o],t,[...n,o])),s),Promise.resolve({}))},Ev={UInt:Se,Int:Se,UInt8:Se,Int8:Se,UInt16:Se,Int16:Se,UInt32:Se,Int32:Se,UInt64:Se,Int64:Se,UInt128:Se,Int128:Se,UInt256:Se,Int256:Se,Word8:Se,Word16:Se,Word32:Se,Word64:Se,Word128:Se,Word256:Se,UFix64:Se,Fix64:Se,UFix128:Se,Fix128:Se,String:Se,Character:Se,Bool:Se,Address:Se,Void:DN,Optional:$N,Reference:Se,Array:BN,Dictionary:UN,Event:Cl,Resource:Cl,Struct:Cl,Enum:Cl,Type:NN,Path:Se,Capability:Se,InclusiveRange:LN},Qx=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},vo=async(e,t,n)=>{let r=Qx(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},yc=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const i={...Object.keys(Ev).filter(s=>!Object.keys(t).find(o=>new RegExp(o).test(s))).reduce((s,o)=>(s[o]=Ev[o],s),t),...t};return vo(e,i,n)},Ar=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return yc(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await yc(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await yc(r.payload,t)}}));if(e.event){const{payload:n,...r}=e.event;return{...r,data:await yc(n,t)}}else if(e.accountStatusEvent){const{payload:n,...r}=e.accountStatusEvent;return{...r,data:await yc(n,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return CN(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const n=/^flow-/,r=e.networkParameters.chainId;let i;return r==="flow-emulator"?i="local":n.test(r)?i=r.replace(n,""):i=r,{chainId:i}}else{if(e.streamConnection)return PN(e.streamConnection,Ar,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null};class H0 extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}function FN(e){const t=e["sdk.transport"]||e["sdk.send"]||gD;return MN(t)?t:{send:t,subscribe:()=>{throw new H0}}}function MN(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const jN=10;let zo;async function _v(){const e=await He().all();return{get transport(){return FN(e)},get accessNodeUrl(){const t=e["accessNode.api"];return q(!!t,'Either opts.node or "accessNode.api" in config must be defined.'),t},get computeLimit(){const t=e["fcl.limit"];return t||(ve.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),jN)},get customResolver(){return e["sdk.resolve"]},get customDecoders(){return Object.fromEntries(Object.entries(e).filter(t=>{let[n]=t;return n.startsWith("decoder.")}))},get contracts(){return Object.fromEntries(Object.entries(e).filter(t=>{let[n]=t;return n.startsWith("system.contracts.")}).map(t=>{let[n,r]=t;return[n.replace("system.contracts.",""),r]}))},get debug(){return Object.fromEntries(Object.entries(e).filter(t=>{let[n]=t;return n.startsWith("debug.")}))},get legacyContractIdentifiers(){return Object.fromEntries(Object.entries(e).filter(t=>{let[n]=t;return n.startsWith("0x")}))}}}async function q0(){return zo||(He().subscribe(()=>{zo=_v()}),zo=_v()),zo instanceof Promise,zo}function Ku(e){return async function(){const t=await q0();return e(t)(...arguments)}}const Sv=e=>typeof e=="function",Iv=e=>typeof e=="string",zN=()=>/\b(0x\w+)\b/g;function xv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e.matchAll(zN());for(const r of n){const i=r[0];if(t[i])return!0}return!1}const Jx=()=>/import\s+"(\w+)"/g;function Av(e){return Jx().test(e)}function HN(e){return e.matchAll(Jx())}function qN(e){return async function(n){if(!Ds(n)&&!F0(n))return n;var r=uh(n,"ix.cadence");if(q(Sv(r)||Iv(r),"Cadence needs to be a function or a string."),Sv(r)&&(r=await r({})),q(Iv(r),"Cadence needs to be a string at this point."),q(!xv(r,e.legacyContractIdentifiers)||!Av(r),"Both account identifier and contract identifier syntax not simultaneously supported."),xv(r,e.legacyContractIdentifiers)&&(r=Object.entries(e.legacyContractIdentifiers||{}).reduce((i,s)=>{let[o,a]=s;const c=new RegExp("(\\b"+o+"\\b)","g");return i.replace(c,a)},r)),Av(r))for(const[i,s]of HN(r)){const o=e.contracts[s]||null;if(o){const a=e.contracts[s+".canonical"]||null,c=a?`import ${a} as ${s} from ${Ut(o)}`:`import ${s} from ${Ut(o)}`;r=r.replace(i,c)}else ve({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${s}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:De.warn})}return n.message.cadence=r,n}}const xy=e=>typeof e=="function";function VN(e){if(q(typeof e.xform!=null,`No type specified for argument: ${e.value}`),xy(e.xform))return e.xform(e.value);if(xy(e.xform.asArgument))return e.xform.asArgument(e.value);q(!1,"Invalid Argument",e)}async function eA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(q(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),xy(e.resolveArgument)){const n=await e.resolveArgument();return eA(n,t-1)}else return e}async function KN(e){if(Ds(e)||F0(e))for(let[t,n]of Object.entries(e.arguments)){const r=await eA(n);e.arguments[t].asArgument=VN(r)}return e}const WN=e=>nA(rA(iA(e))),GN=e=>nA(rA(n$(e))),YN=(e,t)=>_e.Buffer.from(e.padEnd(t*2,"0"),"hex"),tA=(e,t)=>_e.Buffer.from(e.padStart(t*2,"0"),"hex"),XN=YN(_e.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),nA=e=>XN+e,mp=e=>tA(e,8),ZN=e=>tA(e,32),QN=e=>_e.Buffer.from(JSON.stringify(e),"utf8"),JN=e=>_e.Buffer.from(e,"utf8"),e$=e=>_e.Buffer.from(e,"hex"),t$=e=>{if(e!=null)return _e.Buffer.from(e,"hex")},rA=e=>Ha(e).toString("hex"),iA=e=>(s$(e),[JN(e.cadence||""),e.arguments.map(QN),ZN(e.refBlock||""),e.computeLimit,mp(it(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,mp(it(e.payer)),e.authorizers.map(t=>mp(it(t)))]),n$=e=>(o$(e),[iA(e),r$(e)]),r$=e=>{var n;const t=i$(e);return(n=e.payloadSigs)==null?void 0:n.map(r=>({signerIndex:t.get(it(r.address))||"",keyId:r.keyId,sig:r.sig,sigExt:t$(r.extensionData)})).sort((r,i)=>r.signerIndex>i.signerIndex?1:r.signerIndex<i.signerIndex?-1:r.keyId>i.keyId?1:r.keyId<i.keyId?-1:0).map(r=>{const i=[r.signerIndex,r.keyId,e$(r.sig)];return r.sigExt!=null&&i.push(r.sigExt),i})},i$=e=>{const t=new Map;let n=0;const r=i=>{t.has(i)||(t.set(i,n),n++)};return e.proposalKey.address&&r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},s$=e=>{a$.forEach(t=>hd(e,t)),c$.forEach(t=>hd(e.proposalKey,t,"proposalKey"))},o$=e=>{var t;u$.forEach(n=>hd(e,n)),(t=e.payloadSigs)==null||t.forEach((n,r)=>{l$.forEach(i=>hd(n,i,"payloadSigs",r))})},dd=e=>typeof e=="number",Ra=e=>typeof e=="string",sA=e=>e!==null&&typeof e=="object",Ay=e=>sA(e)&&e instanceof Array,a$=[{name:"cadence",check:Ra},{name:"arguments",check:Ay},{name:"refBlock",check:Ra,defaultVal:"0"},{name:"computeLimit",check:dd},{name:"proposalKey",check:sA},{name:"payer",check:Ra},{name:"authorizers",check:Ay}],c$=[{name:"address",check:Ra},{name:"keyId",check:dd},{name:"sequenceNum",check:dd}],u$=[{name:"payloadSigs",check:Ay}],l$=[{name:"address",check:Ra},{name:"keyId",check:dd},{name:"sig",check:Ra}],hd=(e,t,n,r)=>{const{name:i,check:s,defaultVal:o}=t;if(e[i]==null&&o!=null&&(e[i]=o),e[i]==null)throw f$(i,n,r);if(!s(e[i]))throw d$(i,n,r)},oA=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,f$=(e,t,n)=>new Error(`Missing field ${oA(e,t,n)}`),d$=(e,t,n)=>new Error(`Invalid field ${oA(e,t,n)}`);function aA(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function cA(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const lh=e=>{const t=()=>e.authorizations.map(o=>Ut(e.accounts[o].addr)).reduce((o,a)=>o.find(c=>c===a)?o:[...o,a],[]),n=()=>aA(e).map(s=>{const o={address:Ut(e.accounts[s].addr),keyId:e.accounts[s].keyId,sig:e.accounts[s].signature},a=e.accounts[s].extensionData;return a!=null&&(o.extensionData=a),o}),r=()=>cA(e).map(s=>{const o={address:Ut(e.accounts[s].addr),keyId:e.accounts[s].keyId,sig:e.accounts[s].signature},a=e.accounts[s].extensionData;return a!=null&&(o.extensionData=a),o}),i=e.proposer?{address:Ut(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(s=>e.arguments[s].asArgument),proposalKey:i,payer:Ut(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},zr=5,h$=e=>`${Ut(e.addr)}-${e.keyId}`,p$=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),g$=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};var Mn=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(Mn||{});function y$(){const e=" ",n=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.push(Array(i*4).fill(e).join("-")+r)},function(){return n.reduce((r,i)=>r+`
`+i)}]}function V0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:V0(e.flatMap(n=>n),t-1)}function m$(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:lh(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function w$(e,t){const n=Array.isArray(e.payer)?e.payer:[e.payer],r=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],i=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],s=Object.keys(e.accounts),o=[...new Set(n.concat(r,i))];for(const a of s)o.find(c=>c===a)||delete e.accounts[a]}function Ov(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=h$(t):t.tempId=t.tempId||T0();const n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function v$(e){const t=V0(e),n=new Set;return t.map(i=>{const s=g$(i.tempId,i.role.payer,i.role.proposer,i.role.authorizer,i.role.param);return n.has(s)?null:(n.add(s),i)}).filter(i=>i!==null)}async function b$(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zr,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;if(n<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${zr}) reached. Ensure your authorization functions resolve to an account after ${zr} resolves.`);let i=e.accounts[t];if(!i)return[[],!1];if(r(`account: ${i.tempId}`,Math.max(zr-n,0)),i!=null&&i.resolve)if(p$(i==null?void 0:i.resolve)){r(`account: ${i.tempId} -- cache MISS`,Math.max(zr-n,0));const{resolve:s,...o}=i;let a=await s(o,m$(o,e));a=Array.isArray(a)?a:[a];let c=V0(a);return c=c.map(u=>Ov(e,u)),i.resolve=c.map(u=>u.tempId),i=Ov(e,i),[c.map(u=>u.tempId),!0]}else return r(`account: ${i.tempId} -- cache HIT`,Math.max(zr-n,0)),[i.resolve,!1];return[i.tempId?[i.tempId]:[],!1]}const Lc=e=>e===null?[]:Array.isArray(e)?e:[e];async function E$(e,t,n){var r;for(let i of Object.values(Mn))if(i===Mn.AUTHORIZATIONS||i===Mn.PAYER)e[i]=Lc(e[i]).reduce((s,o)=>o===t?s.concat(...n.filter(a=>i===Mn.PAYER&&a.role.payer||i===Mn.AUTHORIZATIONS&&a.role.authorizer).map(a=>a.tempId)):s.concat(o),[]);else if(i===Mn.PROPOSER){const s=n.filter(o=>o.role.proposer);if(s.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[i]=((r=s[0])==null?void 0:r.tempId)??e[i]}}async function _$(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zr,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;q(e&&typeof e=="object","resolveAccountType Error: ix not defined");let i=new Set;for(let o of t){let a=e.accounts[o];q(!!a,"resolveAccountType Error: account not found");const[c,u]=await b$(e,o,n,{debugLogger:r});if(u){const l=c.map(d=>e.accounts[d]),f=v$(l);f.forEach(d=>i.add(d.tempId)),E$(e,o,f)}}let s;for(const o of e[Mn.PAYER]){let a=e.accounts[o];if(!s)s=a.addr;else if(s!==a.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return i}async function S$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ds(e)){Array.isArray(e.payer)||ve.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[n,r]=y$();try{let i=zr,s=new Set([...Lc(e[Mn.PAYER]),...Lc(e[Mn.PROPOSER]),...Lc(e[Mn.AUTHORIZATIONS])]);for(;s.size>0;){if(i<=0)throw new Error(`resolveAccounts Error: Depth limit (${zr}) reached. Ensure your authorization functions resolve to an account after ${zr} resolves.`);s=await _$(e,s,i,{debugLogger:n}),i--}await w$(e,{debugLogger:n});for(const o of Object.values(Mn))q(Lc(e[o]).length>0||o===Mn.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${o}" found`);t.enableDebug&&console.debug(r())}catch(i){throw console.error(`=== SAD PANDA ===

`,i,`

=== SAD PANDA ===`),i}}return e}async function I$(e){if(Ds(e))try{let t=aA(e);const n=WN(Tv(e));await Promise.all(t.map(Rv(e,n)));let r=cA(e);const i=GN({...Tv(e),payloadSigs:t.map(s=>{const o={address:e.accounts[s].addr||"",keyId:e.accounts[s].keyId||0,sig:e.accounts[s].signature||""},c=e.accounts[s].extensionData;return c!=null&&(o.extensionData=c),o})});await Promise.all(r.map(Rv(e,i)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function Rv(e,t){return async function(r){const i=e.accounts[r];if(i.signature!=null&&i.signature!==void 0)return;const{signature:s,extensionData:o}=await i.signingFunction(x$(i,t,e));e.accounts[r].signature=s,o!=null&&(e.accounts[r].extensionData=o)}}function x$(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:it(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:lh(n)}}catch(r){throw console.error("buildSignable",r),r}}function Tv(e){const t=it((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),n=e.proposer?{address:it(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(r=>e.arguments[r].asArgument),proposalKey:n,payer:t,authorizers:e.authorizations.map(r=>it(e.accounts[r].addr)||"").reduce((r,i)=>r.find(s=>s===i)?r:[...r,i],[])}}async function A$(e){const t=uh(e,"ix.validators",[]);return yt(e,t.map(n=>r=>n(r,{Ok:ln,Bad:L0})))}async function O$(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=it(e.accounts[t].addr);return e}async function R$(e){const t=uh(e,"ix.voucher-intercept");return qa(t)&&await t(lh(e)),e}function T$(e){return async function(n){return Ds(n)&&(n.message.computeLimit=n.message.computeLimit||e.computeLimit),n}}const P$=e=>e,Ho=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P$;return async n=>{const r=s=>[`
Accounts:`,{proposer:s.proposer,authorizations:s.authorizations,payer:s.payer},`

Details:`,s.accounts].filter(Boolean),i=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];console.log(`debug[${e}] ---
`,...o,`


---`)};return await He.get(`debug.${e}`)&&await t(n,i,r),n}};function uA(e){return async n=>yt([qN(e),Ho("cadence",(r,i)=>i(r.message.cadence)),T$(e),Ho("compute limit",(r,i)=>i(r.message.computeLimit)),KN,Ho("arguments",(r,i)=>i(r.message.arguments,r.message)),S$,Ho("accounts",(r,i,s)=>i(...s(r))),C$(e),D$(e),I$,Ho("signatures",(r,i,s)=>i(...s(r))),O$,A$,R$,Ho("resolved",(r,i)=>i(r))])(n)}const k$=Ku(uA);function C$(e){return async function(n){if(Ds(n)&&n.message.refBlock==null){const r=e.transport.send;n.message.refBlock=(await r(Zx([Tf()]),{response:z0,Buffer:_e.Buffer,ix:j0},{get node(){return e.accessNodeUrl}}).then(Ar)).id}return n}}function D$(e){return async function(n){if(Ds(n)){var r=Object.values(n.accounts).find(i=>i.role.proposer);if(q(r!==void 0,"Transactions require a proposer"),r&&r.sequenceNum==null){const i=e.transport.send;n.accounts[r.tempId].sequenceNum=await i(await Zx([Oa(r.addr)]),{response:z0,Buffer:_e.Buffer,ix:j0},{get node(){return e.accessNodeUrl}}).then(Ar).then(s=>s.keys).then(s=>s.find(o=>o.index===r.keyId)).then(s=>s.sequenceNumber)}}return n}}function lo(e){async function t(){var a,c;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=r.transport||e.transport,s=(c=(a=i.send)==null?void 0:a.bind)==null?void 0:c.call(a,i);q(!!s,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const o=r.resolve||e.customResolver||uA(e);return r.node=r.node||e.accessNodeUrl,Array.isArray(n)&&(n=yt(ah(),n)),s(await o(n),{response:z0,ix:j0,Buffer:_e.Buffer},r)}return t}const lA=Ku(lo);function fA(e){function t(n){let{topic:r,args:i,onData:s,onError:o}=n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function c(){try{const l=await e,f=a.transport||l.transport,d=a.node||l.accessNodeUrl;return q(!!d,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),f.subscribe({topic:r,args:i,onData:s,onError:o},{node:d,...a})}catch(l){o(l instanceof Error?l:new Error(String(l)));return}}let u=c();return{unsubscribe:()=>{u.then(l=>{var f;return(f=l==null?void 0:l.unsubscribe)==null?void 0:f.call(l)})}}}return t}function N$(e){let{topic:t,args:n,onData:r,onError:i}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=q0();return fA(o)({topic:t,args:n,onData:r,onError:i},s)}function $$(e){let{topic:t,args:n,onData:r,onError:i}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=q0(),a=fA(o)({topic:t,args:n,onData:c=>{Ar(c).then(r).catch(u=>{var l;i(new Error(`Failed to decode response: ${u.message}`)),(l=a==null?void 0:a.unsubscribe)==null||l.call(a)})},onError:i},s);return a}function B$(e){async function t(n){return Ar(n,e.customDecoders)}return t}const dA=Ku(B$);function K0(e){return Xx("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function hA(e){return yt([t=>(t.block.height=e,t),K0(t=>{if(typeof t.block.isSealed=="boolean")throw new Error("Unable to specify both block height and isSealed.");if(t.block.id)throw new Error("Unable to specify both block height and block id.");return t})])}function pA(e){return yt([t=>(t.block.id=e,ln(t)),K0((t,n)=>{let{Ok:r,Bad:i}=n;return Gx(t)?i(t,"Unable to specify a block id with a Get Account interaction."):typeof t.block.isSealed=="boolean"?i(t,"Unable to specify both block id and isSealed."):t.block.height?i(t,"Unable to specify both block id and block height."):r(t)})])}function gA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return yt([t=>(t.block.isSealed=e,t),K0(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function U$(e){async function t(n){let{height:r,id:i,isSealed:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return q(!(i&&r||i&&s||r&&s),"Method: account -- Only one of the following parameters can be provided: id, height, isSealed"),i?await lo(e)([Oa(n),pA(i)],o).then(Ar):r?await lo(e)([Oa(n),hA(r)],o).then(Ar):await lo(e)([Oa(n),gA(s??!1)],o).then(Ar)}return t}const L$=Ku(U$);function F$(e){async function t(){let{sealed:n=!1,id:r,height:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return q(!(n&&r||n&&i),'Method: block -- Cannot pass "sealed" with "id" or "height"'),q(!(r&&i),'Method: block -- Cannot pass "id" and "height" simultaneously'),r?await lo(e)([Tf(),pA(r)],s).then(Ar):i?await lo(e)([Tf(),hA(i)],s).then(Ar):await lo(e)([Tf(n)],s).then(Ar)}return t}const M$=Ku(F$);function j$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return yt(e.map(t=>ch(t,{role:Su.AUTHORIZER})))}function z$(e,t,n){return yt([qx,r=>(r.events.eventType=e,r.events.start=t,r.events.end=n,ln(r))])}function H$(e){return yt([zx,t=>(t.transaction.id=e,ln(t))])}function q$(){return yt([Kx,e=>ln(e)])}function yA(e){return t=>(t.message.computeLimit=e,t)}function mA(e){return yt(e.map(Fx))}function wA(e,t){return{value:e,xform:t}}function V$(e){return ch(e,{role:Su.PROPOSER})}function K$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),yt(e.map(t=>ch(t,{role:Su.PAYER})))}function W$(){return yt([Mx,M0("ix.cadence",Rx(...arguments))])}const G$=[],Y$=null;function X$(){return yt([jx,M0("ix.cadence",Rx(...arguments)),e=>(e.message.refBlock=e.message.refBlock||Y$,e.authorizations=e.authorizations||G$,ln(e))])}function Ei(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[i,s]=t;return Ei((o,a)=>{let{Ok:c,Bad:u}=a;return i?c(o):u(o,s)})}const[r]=t;return i=>r(i,{Ok:ln,Bad:L0})}var vA={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(nn,function(){return n={418:function(i,s){(function(o,a){for(var c in a)o[c]=a[c]})(s,function(o){var a={};function c(u){if(a[u])return a[u].exports;var l=a[u]={i:u,l:!1,exports:{}};return o[u].call(l.exports,l,l.exports,c),l.l=!0,l.exports}return c.m=o,c.c=a,c.i=function(u){return u},c.d=function(u,l,f){c.o(u,l)||Object.defineProperty(u,l,{configurable:!1,enumerable:!0,get:f})},c.n=function(u){var l=u&&u.__esModule?function(){return u.default}:function(){return u};return c.d(l,"a",l),l},c.o=function(u,l){return Object.prototype.hasOwnProperty.call(u,l)},c.p="",c(c.s=1)}([function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var u=c(3),l=function(){function f(d,h){d===void 0&&(d={}),h===void 0&&(h={splitValues:!1});var p,g=this;this.headersMap={},d&&(typeof Headers<"u"&&d instanceof Headers?u.getHeaderKeys(d).forEach(function(v){u.getHeaderValues(d,v).forEach(function(m){h.splitValues?g.append(v,u.splitHeaderValue(m)):g.append(v,m)})}):typeof(p=d)=="object"&&typeof p.headersMap=="object"&&typeof p.forEach=="function"?d.forEach(function(v,m){g.append(v,m)}):typeof Map<"u"&&d instanceof Map?d.forEach(function(v,m){g.append(m,v)}):typeof d=="string"?this.appendFromString(d):typeof d=="object"&&Object.getOwnPropertyNames(d).forEach(function(v){var m=d[v];Array.isArray(m)?m.forEach(function(_){g.append(v,_)}):g.append(v,m)}))}return f.prototype.appendFromString=function(d){for(var h=d.split(`\r
`),p=0;p<h.length;p++){var g=h[p],v=g.indexOf(":");if(v>0){var m=g.substring(0,v).trim(),_=g.substring(v+1).trim();this.append(m,_)}}},f.prototype.delete=function(d,h){var p=u.normalizeName(d);if(h===void 0)delete this.headersMap[p];else{var g=this.headersMap[p];if(g){var v=g.indexOf(h);v>=0&&g.splice(v,1),g.length===0&&delete this.headersMap[p]}}},f.prototype.append=function(d,h){var p=this,g=u.normalizeName(d);Array.isArray(this.headersMap[g])||(this.headersMap[g]=[]),Array.isArray(h)?h.forEach(function(v){p.headersMap[g].push(u.normalizeValue(v))}):this.headersMap[g].push(u.normalizeValue(h))},f.prototype.set=function(d,h){var p=u.normalizeName(d);if(Array.isArray(h)){var g=[];h.forEach(function(v){g.push(u.normalizeValue(v))}),this.headersMap[p]=g}else this.headersMap[p]=[u.normalizeValue(h)]},f.prototype.has=function(d,h){var p=this.headersMap[u.normalizeName(d)];if(!Array.isArray(p))return!1;if(h!==void 0){var g=u.normalizeValue(h);return p.indexOf(g)>=0}return!0},f.prototype.get=function(d){var h=this.headersMap[u.normalizeName(d)];return h!==void 0?h.concat():[]},f.prototype.forEach=function(d){var h=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(p){d(p,h.headersMap[p])},this)},f.prototype.toHeaders=function(){if(typeof Headers<"u"){var d=new Headers;return this.forEach(function(h,p){p.forEach(function(g){d.append(h,g)})}),d}throw new Error("Headers class is not defined")},f}();a.BrowserHeaders=l},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var u=c(0);a.BrowserHeaders=u.BrowserHeaders},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.iterateHeaders=function(u,l){for(var f=u[Symbol.iterator](),d=f.next();!d.done;)l(d.value[0]),d=f.next()},a.iterateHeadersKeys=function(u,l){for(var f=u.keys(),d=f.next();!d.done;)l(d.value),d=f.next()}},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var u=c(2);a.normalizeName=function(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(l))throw new TypeError("Invalid character in header field name");return l.toLowerCase()},a.normalizeValue=function(l){return typeof l!="string"&&(l=String(l)),l},a.getHeaderValues=function(l,f){var d=l;if(d instanceof Headers&&d.getAll)return d.getAll(f);var h=d.get(f);return h&&typeof h=="string"?[h]:h},a.getHeaderKeys=function(l){var f=l,d={},h=[];return f.keys?u.iterateHeadersKeys(f,function(p){d[p]||(d[p]=!0,h.push(p))}):f.forEach?f.forEach(function(p,g){d[g]||(d[g]=!0,h.push(g))}):u.iterateHeaders(f,function(p){var g=p[0];d[g]||(d[g]=!0,h.push(g))}),h},a.splitHeaderValue=function(l){var f=[];return l.split(", ").forEach(function(d){d.split(",").forEach(function(h){f.push(h)})}),f}}]))},617:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.ChunkParser=s.ChunkType=s.encodeASCII=s.decodeASCII=void 0;var a,c=o(65);function u(v){return(m=v)===9||m===10||m===13||v>=32&&v<=126;var m}function l(v){for(var m=0;m!==v.length;++m)if(!u(v[m]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(v))}function f(v){return(128&v.getUint8(0))==128}function d(v){return v.getUint32(1,!1)}function h(v,m,_){return v.byteLength-m>=_}function p(v,m,_){if(v.slice)return v.slice(m,_);var E=v.length;_!==void 0&&(E=_);for(var I=new Uint8Array(E-m),O=0,C=m;C<E;C++)I[O++]=v[C];return I}s.decodeASCII=l,s.encodeASCII=function(v){for(var m=new Uint8Array(v.length),_=0;_!==v.length;++_){var E=v.charCodeAt(_);if(!u(E))throw new Error("Metadata contains invalid ASCII");m[_]=E}return m},function(v){v[v.MESSAGE=1]="MESSAGE",v[v.TRAILERS=2]="TRAILERS"}(a=s.ChunkType||(s.ChunkType={}));var g=function(){function v(){this.buffer=null,this.position=0}return v.prototype.parse=function(m,_){if(m.length===0&&_)return[];var E,I=[];if(this.buffer==null)this.buffer=m,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=m,this.position=0;else{var O=this.buffer.byteLength-this.position,C=new Uint8Array(O+m.byteLength),N=p(this.buffer,this.position);C.set(N,0);var B=new Uint8Array(m);C.set(B,O),this.buffer=C,this.position=0}for(;;){if(!h(this.buffer,this.position,5))return I;var D=p(this.buffer,this.position,this.position+5),j=new DataView(D.buffer,D.byteOffset,D.byteLength),V=d(j);if(!h(this.buffer,this.position,5+V))return I;var F=p(this.buffer,this.position+5,this.position+5+V);if(this.position+=5+V,f(j))return I.push({chunkType:a.TRAILERS,trailers:(E=F,new c.Metadata(l(E)))}),I;I.push({chunkType:a.MESSAGE,data:F})}},v}();s.ChunkParser=g},8:function(i,s){var o;Object.defineProperty(s,"__esModule",{value:!0}),s.httpStatusToCode=s.Code=void 0,function(a){a[a.OK=0]="OK",a[a.Canceled=1]="Canceled",a[a.Unknown=2]="Unknown",a[a.InvalidArgument=3]="InvalidArgument",a[a.DeadlineExceeded=4]="DeadlineExceeded",a[a.NotFound=5]="NotFound",a[a.AlreadyExists=6]="AlreadyExists",a[a.PermissionDenied=7]="PermissionDenied",a[a.ResourceExhausted=8]="ResourceExhausted",a[a.FailedPrecondition=9]="FailedPrecondition",a[a.Aborted=10]="Aborted",a[a.OutOfRange=11]="OutOfRange",a[a.Unimplemented=12]="Unimplemented",a[a.Internal=13]="Internal",a[a.Unavailable=14]="Unavailable",a[a.DataLoss=15]="DataLoss",a[a.Unauthenticated=16]="Unauthenticated"}(o=s.Code||(s.Code={})),s.httpStatusToCode=function(a){switch(a){case 0:return o.Internal;case 200:return o.OK;case 400:return o.InvalidArgument;case 401:return o.Unauthenticated;case 403:return o.PermissionDenied;case 404:return o.NotFound;case 409:return o.Aborted;case 412:return o.FailedPrecondition;case 429:return o.ResourceExhausted;case 499:return o.Canceled;case 500:return o.Unknown;case 501:return o.Unimplemented;case 503:return o.Unavailable;case 504:return o.DeadlineExceeded;default:return o.Unknown}}},934:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.client=void 0;var a=o(65),c=o(617),u=o(8),l=o(346),f=o(57),d=o(882);s.client=function(g,v){return new h(g,v)};var h=function(){function g(v,m){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new c.ChunkParser,this.methodDefinition=v,this.props=m,this.createTransport()}return g.prototype.createTransport=function(){var v=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,m={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:v,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(m):this.transport=f.makeDefaultTransport(m)},g.prototype.onTransportHeaders=function(v,m){if(this.props.debug&&l.debug("onHeaders",v,m),this.closed)this.props.debug&&l.debug("grpc.onHeaders received after request was closed - ignoring");else if(m!==0){this.responseHeaders=v,this.props.debug&&l.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var _=p(v);this.props.debug&&l.debug("onHeaders.gRPCStatus",_);var E=_&&_>=0?_:u.httpStatusToCode(m);this.props.debug&&l.debug("onHeaders.code",E);var I=v.get("grpc-message")||[];if(this.props.debug&&l.debug("onHeaders.gRPCMessage",I),this.rawOnHeaders(v),E!==u.Code.OK){var O=this.decodeGRPCStatus(I[0]);this.rawOnError(E,O,v)}}},g.prototype.onTransportChunk=function(v){var m=this;if(this.closed)this.props.debug&&l.debug("grpc.onChunk received after request was closed - ignoring");else{var _=[];try{_=this.parser.parse(v)}catch(E){return this.props.debug&&l.debug("onChunk.parsing error",E,E.message),void this.rawOnError(u.Code.Internal,"parsing error: "+E.message)}_.forEach(function(E){if(E.chunkType===c.ChunkType.MESSAGE){var I=m.methodDefinition.responseType.deserializeBinary(E.data);m.rawOnMessage(I)}else E.chunkType===c.ChunkType.TRAILERS&&(m.responseHeaders?(m.responseTrailers=new a.Metadata(E.trailers),m.props.debug&&l.debug("onChunk.trailers",m.responseTrailers)):(m.responseHeaders=new a.Metadata(E.trailers),m.rawOnHeaders(m.responseHeaders)))})}},g.prototype.onTransportEnd=function(){if(this.props.debug&&l.debug("grpc.onEnd"),this.closed)this.props.debug&&l.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var v=p(this.responseTrailers);if(v!==null){var m=this.responseTrailers.get("grpc-message"),_=this.decodeGRPCStatus(m[0]);this.rawOnEnd(v,_,this.responseTrailers)}else this.rawOnError(u.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(u.Code.Unknown,"Response closed without headers");var E=p(this.responseHeaders),I=this.responseHeaders.get("grpc-message");if(this.props.debug&&l.debug("grpc.headers only response ",E,I),E===null)return void this.rawOnEnd(u.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var O=this.decodeGRPCStatus(I[0]);this.rawOnEnd(E,O,this.responseHeaders)}},g.prototype.decodeGRPCStatus=function(v){if(!v)return"";try{return decodeURIComponent(v)}catch{return v}},g.prototype.rawOnEnd=function(v,m,_){var E=this;this.props.debug&&l.debug("rawOnEnd",v,m,_),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(I){if(!E.closed)try{I(v,m,_)}catch(O){setTimeout(function(){throw O},0)}}))},g.prototype.rawOnHeaders=function(v){this.props.debug&&l.debug("rawOnHeaders",v),this.completed||this.onHeadersCallbacks.forEach(function(m){try{m(v)}catch(_){setTimeout(function(){throw _},0)}})},g.prototype.rawOnError=function(v,m,_){var E=this;_===void 0&&(_=new a.Metadata),this.props.debug&&l.debug("rawOnError",v,m),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(I){if(!E.closed)try{I(v,m,_)}catch(O){setTimeout(function(){throw O},0)}}))},g.prototype.rawOnMessage=function(v){var m=this;this.props.debug&&l.debug("rawOnMessage",v.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(_){if(!m.closed)try{_(v)}catch(E){setTimeout(function(){throw E},0)}})},g.prototype.onHeaders=function(v){this.onHeadersCallbacks.push(v)},g.prototype.onMessage=function(v){this.onMessageCallbacks.push(v)},g.prototype.onEnd=function(v){this.onEndCallbacks.push(v)},g.prototype.start=function(v){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var m=new a.Metadata(v||{});m.set("content-type","application/grpc-web+proto"),m.set("x-grpc-web","1"),this.transport.start(m)},g.prototype.send=function(v){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var m=d.frameRequest(v);this.transport.sendMessage(m)},g.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},g.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&l.debug("request.abort aborting request"),this.transport.cancel()},g}();function p(g){var v=g.get("grpc-status")||[];if(v.length>0)try{var m=v[0];return parseInt(m,10)}catch{return null}return null}},346:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.debug=void 0,s.debug=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];console.debug?console.debug.apply(null,o):console.log.apply(null,o)}},607:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.grpc=void 0;var a,c=o(418),u=o(57),l=o(229),f=o(540),d=o(210),h=o(859),p=o(8),g=o(938),v=o(35),m=o(934);(a=s.grpc||(s.grpc={})).setDefaultTransport=u.setDefaultTransportFactory,a.CrossBrowserHttpTransport=h.CrossBrowserHttpTransport,a.FetchReadableStreamTransport=l.FetchReadableStreamTransport,a.XhrTransport=d.XhrTransport,a.WebsocketTransport=f.WebsocketTransport,a.Code=p.Code,a.Metadata=c.BrowserHeaders,a.client=function(_,E){return m.client(_,E)},a.invoke=g.invoke,a.unary=v.unary},938:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.invoke=void 0;var a=o(934);s.invoke=function(c,u){if(c.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var l=a.client(c,{host:u.host,transport:u.transport,debug:u.debug});return u.onHeaders&&l.onHeaders(u.onHeaders),u.onMessage&&l.onMessage(u.onMessage),u.onEnd&&l.onEnd(u.onEnd),l.start(u.metadata),l.send(u.request),l.finishSend(),{close:function(){l.close()}}}},65:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=o(418);Object.defineProperty(s,"Metadata",{enumerable:!0,get:function(){return a.BrowserHeaders}})},57:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.makeDefaultTransport=s.setDefaultTransportFactory=void 0;var a=o(859),c=function(u){return a.CrossBrowserHttpTransport({withCredentials:!1})(u)};s.setDefaultTransportFactory=function(u){c=u},s.makeDefaultTransport=function(u){return c(u)}},229:function(i,s,o){var a=this&&this.__assign||function(){return(a=Object.assign||function(f){for(var d,h=1,p=arguments.length;h<p;h++)for(var g in d=arguments[h])Object.prototype.hasOwnProperty.call(d,g)&&(f[g]=d[g]);return f}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.detectFetchSupport=s.FetchReadableStreamTransport=void 0;var c=o(65),u=o(346);s.FetchReadableStreamTransport=function(f){return function(d){return function(h,p){return h.debug&&u.debug("fetchRequest",h),new l(h,p)}(d,f)}};var l=function(){function f(d,h){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=d,this.init=h}return f.prototype.pump=function(d,h){var p=this;if(this.reader=d,this.cancelled)return this.options.debug&&u.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(g){p.options.debug&&u.debug("Fetch.pump.reader.cancel exception",g)});this.reader.read().then(function(g){if(g.done)return p.options.onEnd(),h;p.options.onChunk(g.value),p.pump(p.reader,h)}).catch(function(g){p.cancelled?p.options.debug&&u.debug("Fetch.catch - request cancelled"):(p.cancelled=!0,p.options.debug&&u.debug("Fetch.catch",g.message),p.options.onEnd(g))})},f.prototype.send=function(d){var h=this;fetch(this.options.url,a(a({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:d,signal:this.controller&&this.controller.signal})).then(function(p){if(h.options.debug&&u.debug("Fetch.response",p),h.options.onHeaders(new c.Metadata(p.headers),p.status),!p.body)return p;h.pump(p.body.getReader(),p)}).catch(function(p){h.cancelled?h.options.debug&&u.debug("Fetch.catch - request cancelled"):(h.cancelled=!0,h.options.debug&&u.debug("Fetch.catch",p.message),h.options.onEnd(p))})},f.prototype.sendMessage=function(d){this.send(d)},f.prototype.finishSend=function(){},f.prototype.start=function(d){this.metadata=d},f.prototype.cancel=function(){var d=this;this.cancelled?this.options.debug&&u.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&u.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&u.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&u.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(h){d.options.debug&&u.debug("Fetch.cancel.reader.cancel exception",h)})):this.options.debug&&u.debug("Fetch.cancel before reader"))},f}();s.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.CrossBrowserHttpTransport=void 0;var a=o(229),c=o(210);s.CrossBrowserHttpTransport=function(u){if(a.detectFetchSupport()){var l={credentials:u.withCredentials?"include":"same-origin"};return a.FetchReadableStreamTransport(l)}return c.XhrTransport({withCredentials:u.withCredentials})}},210:function(i,s,o){var a,c=this&&this.__extends||(a=function(v,m){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(_[I]=E[I])})(v,m)},function(v,m){function _(){this.constructor=v}a(v,m),v.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)});Object.defineProperty(s,"__esModule",{value:!0}),s.stringToArrayBuffer=s.MozChunkedArrayBufferXHR=s.XHR=s.XhrTransport=void 0;var u=o(65),l=o(346),f=o(849);s.XhrTransport=function(v){return function(m){if(f.detectMozXHRSupport())return new h(m,v);if(f.detectXHROverrideMimeTypeSupport())return new d(m,v);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var d=function(){function v(m,_){this.options=m,this.init=_}return v.prototype.onProgressEvent=function(){this.options.debug&&l.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var m=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var _=g(m);this.options.onChunk(_)},v.prototype.onLoadEvent=function(){this.options.debug&&l.debug("XHR.onLoadEvent"),this.options.onEnd()},v.prototype.onStateChange=function(){this.options.debug&&l.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new u.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},v.prototype.sendMessage=function(m){this.xhr.send(m)},v.prototype.finishSend=function(){},v.prototype.start=function(m){var _=this;this.metadata=m;var E=new XMLHttpRequest;this.xhr=E,E.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(I,O){E.setRequestHeader(I,O.join(", "))}),E.withCredentials=!!this.init.withCredentials,E.addEventListener("readystatechange",this.onStateChange.bind(this)),E.addEventListener("progress",this.onProgressEvent.bind(this)),E.addEventListener("loadend",this.onLoadEvent.bind(this)),E.addEventListener("error",function(I){_.options.debug&&l.debug("XHR.error",I),_.options.onEnd(I.error)})},v.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},v.prototype.cancel=function(){this.options.debug&&l.debug("XHR.abort"),this.xhr.abort()},v}();s.XHR=d;var h=function(v){function m(){return v!==null&&v.apply(this,arguments)||this}return c(m,v),m.prototype.configureXhr=function(){this.options.debug&&l.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},m.prototype.onProgressEvent=function(){var _=this.xhr.response;this.options.debug&&l.debug("MozXHR.onProgressEvent: ",new Uint8Array(_)),this.options.onChunk(new Uint8Array(_))},m}(d);function p(v,m){var _=v.charCodeAt(m);if(_>=55296&&_<=56319){var E=v.charCodeAt(m+1);E>=56320&&E<=57343&&(_=65536+(_-55296<<10)+(E-56320))}return _}function g(v){for(var m=new Uint8Array(v.length),_=0,E=0;E<v.length;E++){var I=String.prototype.codePointAt?v.codePointAt(E):p(v,E);m[_++]=255&I}return m}s.MozChunkedArrayBufferXHR=h,s.stringToArrayBuffer=g},849:function(i,s){var o;function a(){if(o!==void 0)return o;if(XMLHttpRequest){o=new XMLHttpRequest;try{o.open("GET","https://localhost")}catch{}}return o}function c(u){var l=a();if(!l)return!1;try{return l.responseType=u,l.responseType===u}catch{}return!1}Object.defineProperty(s,"__esModule",{value:!0}),s.detectXHROverrideMimeTypeSupport=s.detectMozXHRSupport=s.xhrSupportsResponseType=void 0,s.xhrSupportsResponseType=c,s.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&c("moz-chunked-arraybuffer")},s.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.WebsocketTransport=void 0;var a,c=o(346),u=o(617);(function(f){f[f.FINISH_SEND=1]="FINISH_SEND"})(a||(a={}));var l=new Uint8Array([1]);s.WebsocketTransport=function(){return function(f){return function(d){d.debug&&c.debug("websocketRequest",d);var h,p=function(m){if(m.substr(0,8)==="https://")return"wss://"+m.substr(8);if(m.substr(0,7)==="http://")return"ws://"+m.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(d.url),g=[];function v(m){if(m===a.FINISH_SEND)h.send(l);else{var _=m,E=new Int8Array(_.byteLength+1);E.set(new Uint8Array([0])),E.set(_,1),h.send(E)}}return{sendMessage:function(m){h&&h.readyState!==h.CONNECTING?v(m):g.push(m)},finishSend:function(){h&&h.readyState!==h.CONNECTING?v(a.FINISH_SEND):g.push(a.FINISH_SEND)},start:function(m){(h=new WebSocket(p,["grpc-websockets"])).binaryType="arraybuffer",h.onopen=function(){var _;d.debug&&c.debug("websocketRequest.onopen"),h.send((_="",m.forEach(function(E,I){_+=E+": "+I.join(", ")+`\r
`}),u.encodeASCII(_))),g.forEach(function(E){v(E)})},h.onclose=function(_){d.debug&&c.debug("websocketRequest.onclose",_),d.onEnd()},h.onerror=function(_){d.debug&&c.debug("websocketRequest.onerror",_)},h.onmessage=function(_){d.onChunk(new Uint8Array(_.data))}},cancel:function(){d.debug&&c.debug("websocket.abort"),h.close()}}}(f)}}},35:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.unary=void 0;var a=o(65),c=o(934);s.unary=function(u,l){if(u.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(u.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var f=null,d=null,h=c.client(u,{host:l.host,transport:l.transport,debug:l.debug});return h.onHeaders(function(p){f=p}),h.onMessage(function(p){d=p}),h.onEnd(function(p,g,v){l.onEnd({status:p,statusMessage:g,headers:f||new a.Metadata,message:d,trailers:v})}),h.start(l.metadata),h.send(l.request),h.finishSend(),{close:function(){h.close()}}}},882:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.frameRequest=void 0,s.frameRequest=function(o){var a=o.serializeBinary(),c=new ArrayBuffer(a.byteLength+5);return new DataView(c,1,4).setUint32(0,a.length,!1),new Uint8Array(c,5).set(a),new Uint8Array(c)}}},r={},function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{}};return n[s].call(o.exports,o,o.exports,i),o.exports}(607);var n,r})})(vA);var Z$=vA.exports,Pv=/^[0-9]+$/,Q$=function(t,n){var r=Pv.test(t),i=Pv.test(n);return r&&i&&(t=+t,n=+n),t===n?0:r&&!i?-1:i&&!r?1:t<n?-1:1},kv=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,J$=function(t,n){if(typeof t!="string"||typeof n!="string")throw new Error("Invalid input");var r=t.match(kv),i=n.match(kv);if(!r||!i)throw new Error("Invalid input");for(var s=1;s<=3;s++){if(parseInt(r[s])>parseInt(i[s]))return 1;if(parseInt(r[s])<parseInt(i[s]))return-1}if(r[4]&&i[4])for(var o=(r[4]||"").split("."),a=(i[4]||"").split("."),c=0;c<Math.max(o.length,a.length);c++){if(o[c]===void 0)return-1;if(a[c]===void 0)return 1;var u=Q$(o[c],a[c]);if(u!==0)return u}return 0};const W0="1.30.1",fh=e=>t=>typeof t===e,mi=e=>e!=null,e4=fh("object"),Ta=fh("string"),bA=fh("function"),t4=fh("number");function EA(e){return bA(e)?e(wA,nN):[]}async function _A(e,t,n){q(mi(n),`${t}(opts) -- opts is required`),q(e4(n),`${t}(opts) -- opts must be an object`),q(!(n.cadence&&n.template),`${t}({ template, cadence }) -- cannot pass both cadence and template`),q(mi(n.cadence||(n==null?void 0:n.template)),`${t}({ cadence }) -- cadence is required`),q(Ta(n.cadence)||(n==null?void 0:n.template),`${t}({ cadence }) -- cadence must be a string`),q(await e.config.get("accessNode.api"),`${t}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function n4(e,t){return _A(e,"mutate",t)}async function r4(e,t){return _A(e,"query",t)}async function Cv(e){let{url:t}=e;q(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await lx(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const Dv=new Map([["http",Cv],["https",Cv]]);async function i4(e,t){let{url:n}=t;q(typeof n<"u","retrieve({ url }) -- url must be defined"),q(typeof n=="string","retrieve({ url }) -- url must be a string");const r=await e.config.where(/^document\.resolver\./);Object.keys(r).map(c=>{const u=r[c],l=c.replace(/^document\.resolver\./,"");Dv.set(l,u)});const i=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(n);q(i,"Failed to parse URL");const s=i[1];q(i,"Failed to parse URL protocol");const o=Dv.get(s);return q(o,`No resolver found for protcol=${s}`),await o({url:n})}async function s4(e){var i;let{network:t,template:n}=e;return q(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys((i=n==null?void 0:n.data)==null?void 0:i.dependencies).map(s=>{var u,l;const o=Object.values((l=(u=n==null?void 0:n.data)==null?void 0:u.dependencies)==null?void 0:l[s]);q(o!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`),q(o.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`);const a=o[0],c=a==null?void 0:a[t];return q(c,`deriveCadenceByNetwork100 -- Could not find ${t} network information for dependency: ${s}`),[s,c==null?void 0:c.address]}).reduce((s,o)=>{let[a,c]=o;const u=new RegExp("(\\b"+a+"\\b)","g");return s.replace(u,c)},n.data.cadence)}function o4(e){let{cadence:t,networkDependencies:n}=e;return Object.keys(n).reduce((r,i)=>{const s=n[i],o=new RegExp(`import "\\b${i}\\b"`,"g");return r.replace(o,`import ${i} from ${s}`)},t)}async function a4(e){var i,s,o,a,c,u;let{network:t,template:n}=e;q(n.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.1.0");const r={};return(i=n==null?void 0:n.data)==null||i.dependencies.forEach(l=>{l.contracts.forEach(f=>{const d=f.contract;f.networks.forEach(h=>{h.network===t&&(r[d]=h.address)}),q(r[d]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${t} ${d}`)})}),q(Object.keys(r).length===((s=n==null?void 0:n.data)==null?void 0:s.dependencies.length),`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${r}`),q(Object.keys(r).length===Object.values(r).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${t} dependencies:  ${r}`),q(!!((a=(o=n==null?void 0:n.data)==null?void 0:o.cadence)!=null&&a.body),`no cadence found -- Could not replace import dependencies: ${r}`),o4({cadence:(u=(c=n==null?void 0:n.data)==null?void 0:c.cadence)==null?void 0:u.body,networkDependencies:r})}async function c4(e){let{network:t,template:n}=e;switch(q(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),q(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),q(n!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),q(typeof n=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),q(n.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),n.f_version){case"1.1.0":return await a4({network:t,template:n});case"1.0.0":return await s4({network:t,template:n});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function u4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(await e.sdk.send([q$()],t).then(e.sdk.decode)).chainId}function fn(){return{config:He(),sdk:{send:lA,decode:dA,subscribe:$$,subscribeRaw:N$,account:L$,block:M$,resolve:k$}}}let qo={},Nv=!1;function ko(e){async function t(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=await e.config.get("flow.network"),i=await e.config.get("env");i&&!Nv&&(ve.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),Nv=!0);const s=n.node||await e.config.get("accessNode.api");if(!s){if(r)return r;if(i)return i;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(qo[s])try{return await qo[s]}catch{}qo[s]||(qo[s]=u4(e,n).catch(o=>{throw qo[s]=null,o}));try{return await qo[s]}catch(o){if(r)return r;if(i)return i;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${o.message}`)}}return t}const SA=ko(fn());function l4(e){return e||(e=fn()),e.config.subscribe(()=>{ko(e)({enableRequestLogging:!1}).catch(()=>{})})}async function IA(e,t){Ta(t==null?void 0:t.template)&&(t.template=await i4(e,{url:t==null?void 0:t.template}));const n=t.cadence||await c4({template:t.template,network:await ko(e)(t)});return t.cadence=n,t}function xA(e){async function t(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await r4(e,n),n=await IA(e,n),e.sdk.send([W$(n.cadence),mA(EA(n.args||[])),gA(n.isSealed??!1),n.limit&&typeof n.limit=="number"&&yA(n.limit)])}return t}fn();function G0(e){async function t(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xA(e)(n).then(e.sdk.decode)}return t}const Oy=G0(fn()),jn={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},Ja={f_type:"Service",f_vsn:"1.0.0"},AA={f_type:"Identity",f_vsn:"1.0.0"},f4={f_type:"USER",f_vsn:"1.0.0"},d4={f_type:"PollingResponse",f_vsn:"1.0.0"},h4={f_type:"CompositeSignature",f_vsn:"1.0.0"},p4=(e,t)=>_e.Buffer.from(e.padEnd(t*2,"0"),"hex"),g4=(e,t)=>_e.Buffer.from(e.padStart(t*2,"0"),"hex"),$v=e=>g4(e,8),Bv=e=>_e.Buffer.from(e,"hex"),y4=function(e){let{address:t,nonce:n,appIdentifier:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;q(!!t,"Encode Message For Provable Authn Error: address must be defined"),q(!!n,"Encode Message For Provable Authn Error: nonce must be defined"),q(!!r,"Encode Message For Provable Authn Error: appIdentifier must be defined"),q(n.length>=64,"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes");const s=p4(_e.Buffer.from("FCL-ACCOUNT-PROOF-V0.0").toString("hex"),32);return i?_e.Buffer.concat([s,Ha([r,$v(it(t)),Bv(n)])]).toString("hex"):Ha([r,$v(it(t)),Bv(n)]).toString("hex")},m4="ACCOUNT_PROOF",w4="USER_SIGNATURE",OA=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:i}=e;return q(Ta(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),q(Ta(n)&&it(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),q(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),q(Array.isArray(i)&&i.every((s,o,a)=>s.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),q(i.map(s=>s.addr).every((s,o,a)=>s===a[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return q(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),q(Ta(n)&&it(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),q(Array.isArray(r)&&r.every((i,s,o)=>i.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),q(r.map(i=>i.addr).every((i,s,o)=>i===o[0]),"User signatures to be verified must be from a single account address"),!0}},RA=async(e,t,n)=>{const r=t==="ACCOUNT_PROOF"?"verifyAccountProofSignatures":"verifyUserSignatures",i=await ko(e)(n),s={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},o=n.fclCryptoContract||s[i];return q(o,`${r}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${i}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${o}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${r}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};function v4(e){async function t(n,r){let{address:i,nonce:s,signatures:o}=r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};OA({appIdentifier:n,address:i,nonce:s,signatures:o});const c=y4({address:i,nonce:s,appIdentifier:n},!1),u=[],l=[];for(const f of o)u.push(f.signature),l.push(f.keyId.toString());return G0(e)({cadence:await RA(e,m4,a),args:(f,d)=>[f(Ut(i),d.Address),f(c,d.String),f(l,d.Array(d.Int)),f(u,d.Array(d.String))]})}return t}function b4(e){async function t(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Ut(r[0].addr);OA({message:n,address:s,compSigs:r});const o=[],a=[];for(const c of r)o.push(c.signature),a.push(c.keyId.toString());return G0(e)({cadence:await RA(e,w4,i),args:(c,u)=>[c(s,u.Address),c(n,u.String),c(a,u.Array(u.Int)),c(o,u.Array(u.String))]})}return t}fn();const E4=b4(fn());ve.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return E4(t,n)}});function _4(e){return async function(n){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).resolve||e.sdk.resolve;return Array.isArray(n)&&(n=await yt(Dx(),n)),JSON.stringify(lh(await i(n)),null,2)}}fn();const S4=/\[Error Code: (\d+)\]/;class dh extends Error{constructor(t,n){super(t),this.code=n,this.type=ov[n]}static fromErrorMessage(t){const n=t.match(S4),r=n?parseInt(n[1],10):void 0;return new dh(t,r||ov.UNKNOWN_ERROR)}}async function Uv(e,t){return Object.fromEntries(Object.entries(await e.config.where(t)).map(n=>{let[r,i]=n;return[r.replace(t,""),i]}))}const TA=e=>e.status===5,ws=e=>e.status>=4,pd=e=>e.status>=3,gd=e=>e.status>=2,PA=e=>e.status>=1,I4=e=>e.status>=0,kA=(e,t)=>{if(e===t)return!0;if(typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!kA(e[n],t[n]))return!1;return!0},Ry=(e,t)=>!kA(e,t),Au=e=>{if(typeof e=="object"&&(e=e.transactionId),e==null)throw new Error("transactionId required");return e},CA=/^[0-9a-fA-F]{64}$/,wp="POLL",Lv="TIMEOUT";function x4(e){return/^\d+$/.test(e)&&e.length!==64}const A4=async e=>lA([H$(e)]).then(dA),O4=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{[Iu]:async t=>{setTimeout(()=>t.sendSelf(Lv),e.txNotFoundTimeout),t.sendSelf(wp)},[Po]:(t,n)=>{t.subscribe(n.from),t.send(n.from,by,t.all())},[Is]:(t,n)=>{t.unsubscribe(n.from)},[UI]:async(t,n)=>{n.reply(t.all())},[Lv]:async t=>{Object.keys(t.all()).length===0&&t.fatalError(new Error(`TX status polling failed: no transaction was found within timeout interval (${e.txNotFoundTimeout}ms)`))},[wp]:async t=>{const n=()=>setTimeout(()=>t.sendSelf(wp),e.pollRate);let r;const i=t.all();try{r=await A4(t.self())}catch(s){const o=s instanceof Of&&s.statusCode===404,a=s.code===Z$.grpc.Code.NotFound;return o||a?n():t.fatalError(s)}ws(r)||n(),Ry(i,r)&&t.broadcast(by,r),t.merge(r)}}},Fv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=>ks(O4(e),Au(t))};function Co(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};const n=Au(e),r=CA.test(n),i=x4(n);if(!r&&!i)throw new Error("Invalid transactionId");function s(){return LI(e,Fv(t))}function o(c){return nh(Au(e),Fv(t),c)}function a(c){return function(){const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).suppress||!1;return new Promise((d,h)=>{const p=o((g,v)=>{if((v||g.statusCode)&&!f){if(v!=null)h(v),p();else if(g.statusCode===1){const m=dh.fromErrorMessage(g.errorMessage);h(m),p()}return}c(g)&&(d(g),p())})})}}return{snapshot:s,subscribe:o,onceFinalized:a(gd),onceExecuted:a(pd),onceSealed:a(ws)}}Co.isUnknown=I4;Co.isPending=PA;Co.isFinalized=gd;Co.isExecuted=pd;Co.isSealed=ws;Co.isExpired=TA;const R4="local",Mv=new Map;function DA(e){return/^\d+$/.test(e)&&e.length!==64}function T4(e){function t(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};const i=Au(n),s=CA.test(i),o=DA(i);if(!s&&!o)throw new Error("Invalid transactionId");function a(){let f=Mv.get(n);return f||(f=P4(e,n,r),Mv.set(n,f)),f}function c(){return Promise.resolve(a().value)}function u(f,d){const h=a(),{unsubscribe:p}=h.subscribe(f,d);return()=>p()}function l(f){return function(){const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{suppress:!1}).suppress||!1;return new Promise((g,v)=>{const m=u(_=>{if(_.statusCode===1){const E=dh.fromErrorMessage(_.errorMessage);v(E),m()}else f(_)&&(g(_),m())},_=>{p||(v(_),m())})})}}return{snapshot:c,subscribe:u,onceFinalized:l(gd),onceExecuted:l(pd),onceSealed:l(ws)}}return t.isUnknown=Wx,t.isPending=PA,t.isFinalized=gd,t.isExecuted=pd,t.isSealed=ws,t.isExpired=TA,t}fn();function P4(e,t,n){const r=new Set;let i={blockId:"",status:N8.UNKNOWN,statusCode:0,errorMessage:"",events:[],statusString:""};s().catch(u);async function s(){if(DA(Au(t))){a();return}await ko(e)()===R4?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),a()):o()}function o(){const l=e.sdk.subscribe({topic:Ps.TRANSACTION_STATUSES,args:{transactionId:t},onData:f=>{Ry(i,f)&&(i=f,c(f)),ws(f)&&new Promise(d=>setTimeout(d,0)).then(()=>{ws(f)&&l.unsubscribe()})},onError:f=>{f instanceof H0?(console.warn("Failed to subscribe to transaction status updates using real-time streaming (are you using the deprecated GRPC transport?), falling back to polling."),a()):u(f)}})}function a(){const l=Co(t,n).subscribe((f,d)=>{d?u(d):f&&Ry(i,f)&&(i=f,c(f),ws(f)&&new Promise(h=>setTimeout(h,0)).then(()=>{l()}))})}function c(l){for(const f of r)try{f.onData(l)}catch(d){console.error("Error in transaction observer",d)}}function u(l){for(const f of r)try{f.onError(l)}catch(d){console.error("Error in transaction observer",d)}}return{subscribe(l,f){const d={onData:l,onError:f||(()=>{})};return r.add(d),l(i),{unsubscribe:()=>r.delete(d)}},get value(){return i}}}const k4=1e4,C4="UPDATED",Ys="TICK",Dl="hwm",vp=async(e,t)=>setTimeout(()=>t.sendSelf(Ys),await e.config.get("fcl.eventPollRate",k4));function D4(e){return{[Ys]:async n=>{if(!n.hasSubs())return;let r=n.get(Dl);if(r==null)n.put(Dl,await e.sdk.block()),n.put(Ys,await vp(e,n));else{let i=await e.sdk.block();if(n.put(Dl,i),r.height<i.height){const s=await e.sdk.send([z$(n.self(),r.height+1,i.height)]).then(e.sdk.decode);for(let o of s)n.broadcast(C4,o)}n.put(Ys,await vp(e,n))}},[Po]:async(n,r)=>{n.hasSubs()||n.put(Ys,await vp(e,n)),n.subscribe(r.from)},[Is]:(n,r)=>{n.unsubscribe(r.from),n.hasSubs()||(clearTimeout(n.get(Ys)),n.delete(Ys),n.delete(Dl))}}}const N4=(e,t)=>ks(D4(e),t);function $4(e){function t(n){return{subscribe:r=>nh(n,i=>N4(e,i),r)}}return t}const B4="local";function U4(e){function t(n){let r;return typeof n=="string"?r={eventTypes:[n]}:r=n||{},{subscribe:function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d=>{console.error("Unhandled error in event subscription:",d)},o=()=>{},a=()=>{};function c(){const{unsubscribe:d}=e.sdk.subscribe({topic:Ps.EVENTS,args:r,onData:h=>{i(h)},onError:h=>{h instanceof H0?(console.warn("Failed to subscribe to events using real-time streaming (are you using the deprecated GRPC transport?), falling back to legacy polling."),u()):s(h)}});o=d}function u(){if(typeof n!="string")throw new Error("Legacy fcl.events fallback only supports string filters (single event type)");a=$4(e)(n).subscribe((d,h)=>{h?s(h):d&&i(d)})}async function l(){await ko(e)()===B4?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),u()):c()}const f=l().catch(d=>{s(d)});return()=>{f.finally(()=>{o(),a()})}}}}return t}fn();const Vo=()=>{throw new Error("Platform specific Core Strategies are not initialized")},L4={[jn["EXT/RPC"]]:Vo,[jn["HTTP/POST"]]:Vo,[jn["IFRAME/RPC"]]:Vo,[jn["POP/RPC"]]:Vo,[jn["TAB/RPC"]]:Vo,[jn["EXT/RPC"]]:Vo},F4=["ServicePlugin"],M4=["discovery-service"],j4=e=>{const{services:t=[],serviceStrategy:n}=e;q(Array.isArray(t),"Services must be an array");for(const r of t)q(mi(r.f_type)&&r.f_type==="Service","Service is required"),q(mi(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),q(r.method in jn||n.method===r.method,`Service method ${r.method} is not supported`);return q(mi(n),"Service strategy is required"),q(mi(n.method)&&Ta(n.method),"Service strategy method is required"),q(mi(n.exec)&&bA(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},z4=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const i=u=>{if(q(M4.includes(u.type),`Service Plugin type ${u.type} is not supported`),u.type==="discovery-service"){const{discoveryServices:l,serviceStrategy:f}=j4(u);s(l),r.has(f.method)?ve({title:"Add Service Plugin",message:`Service strategy for ${f.method} already exists`,level:De.warn}):r.set(f.method,f.exec)}},s=u=>n=new Set([...u]);return Object.freeze({add:i,getServices:()=>[...n],getStrategy:u=>r.get(u),getStrategies:()=>[...r.keys()]})},H4=e=>{let t;q(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const n of t)q(mi(n.name),"Plugin name is required"),q(mi(n.f_type),"Plugin f_type is required"),q(F4.includes(n.f_type),`Plugin type ${n.f_type} is not supported`);return t},q4=()=>{const e=new Map;return Object.freeze({add:r=>{const i=H4(r);for(const s of i)e.set(s.name,s),s.f_type==="ServicePlugin"&&Ou.add(s)},getPlugins:()=>e})};let Ou;const NA=()=>typeof Ou<"u",$A=e=>{let{coreStrategies:t}=e;if(NA())return Ou;const n=z4({coreStrategies:t});return Ou=n,n},Wu=()=>NA()?Ou:(console.warn("Registry is not initialized, it will be initialized with stub core strategies"),$A({coreStrategies:L4})),jv=q4(),BA=async()=>[...(window==null?void 0:window.fcl_extensions)||[],...Wu().getServices()];async function V4(e,t){const n=await e.config.get("discovery.authn.include",[]),r=await e.config.get("discovery.authn.exclude",[]),i=await e.config.get("discovery.features.suggested",[]),s=await e.config.first(["discovery.wallet.method","discovery.wallet.method.default"],void 0),o=t!=null&&t.method?t.method:s,a=(t==null?void 0:t.endpoint)??await e.config.first(["discovery.wallet","challenge.handshake"],void 0);return q(a,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...t,type:"authn",endpoint:a,method:o,discoveryAuthnInclude:n,discoveryAuthnExclude:r,discoveryFeaturesSuggested:i}}const K4=globalThis.URL;let Y0=class extends K4{constructor(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];super(t,n,...i)}};async function W4(e){var a;let{context:t,types:n}=e;const r=await t.config.get("discovery.authn.endpoint");q(!!r,'"discovery.authn.endpoint" in config must be defined.');const i=await t.config.get("discovery.authn.include",[]),s=await t.config.get("discovery.authn.exclude",[]),o=new Y0(r);return fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,fclVersion:W0,include:i,exclude:s,features:{suggested:await t.config.get("discovery.features.suggested",[])},clientServices:await BA(),supportedStrategies:Wu().getStrategies(),userAgent:(a=window==null?void 0:window.navigator)==null?void 0:a.userAgent,network:await SA()})}).then(c=>c.json())}const Wr={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},G4=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},Ty=async e=>{try{const t=await W4({context:e,types:[Wr.AUTHN]});Et(Wr.AUTHN,Wr.UPDATE_RESULTS,{results:t})}catch(t){ve({title:`${t.name} Error fetching Discovery API services.`,message:t.message,level:De.error})}};function Y4(e){return{[Iu]:async t=>{G4(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?Ty(e):window.addEventListener("load",()=>{Ty(e)})},[Wr.UPDATE_RESULTS]:(t,n,r)=>{t.merge(r),t.broadcast(Wr.UPDATED,{...t.all()})},[Po]:(t,n)=>{t.subscribe(n.from),t.send(n.from,Wr.UPDATED,{...t.all()})},[Is]:(t,n)=>t.unsubscribe(n.from),[Wr.SNAPSHOT]:async(t,n)=>n.reply({...t.all()})}}const zv=e=>ks(Y4(e),Wr.AUTHN);function X4(e){return{subscribe:n=>nh(Wr.AUTHN,()=>zv(e),n),snapshot:()=>LI(Wr.AUTHN,()=>zv(e)),update:()=>{document.readyState==="complete"&&Ty(e)}}}const Z4=X4(fn()),Q4={authn:Z4};function nt(e){const t=new yx.SHA3(256);return t.update(_e.Buffer.from(e,"utf8")),t.digest("hex")}function X0(e){let{contractName:t,address:n}=e;return{contractName:t,address:n,contract:""}}function UA(e){const t=[],n=/import ((\w|,| )+)* from 0x\w+/g,r=e.match(n)||[];for(const i of r){const o=/import ((\w+|, |)*) from (0x\w+)/g.exec(i),a=/((?:\w+)+),?/g,c=(o==null?void 0:o[1].match(a))||[];for(const u of c)t.push(X0({address:o==null?void 0:o[3],contractName:u.replace(/,/g,"")}))}return t}function LA(e){async function t(n){var l;let{address:r,contractName:i}=n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ei(r!=null,"generateDependencyPin({ address }) -- address must be defined"),Ei(i!=null,"generateDependencyPin({ contractName }) -- contractName must be defined"),Ei(typeof r=="string","generateDependencyPin({ address }) -- address must be a string"),Ei(typeof i=="string","generateDependencyPin({ contractName }) -- contractName must be a string");const o=[X0({contractName:i,address:r})];for(const f of o){const d=await e.sdk.send([Oa(await e.config.get(f.address,f.address))],s).then(e.sdk.decode);if(f.contract=(l=d.contracts)==null?void 0:l[f.contractName],!f.contract)throw console.error("Did not find expected contract",f,d),new Error("Did not find expected contract");const h=UA(f.contract);o.push(...h)}const a=o.map(f=>nt(f.contract)),u=(await Promise.all(a)).join("");return nt(u)}return t}fn();async function J4(e,t,n){const r=[];for(const i of n){const s=[nt(i.network)],{address:o,dependency_pin_block_height:a}=i;if(i.dependency_pin){const c=await LA(e)({address:o,contractName:t,blockHeight:a});s.push(nt(c))}r.push(s)}return r}async function e6(e,t){const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=[];for(let o=0;o<(i==null?void 0:i.contracts.length);o++){const a=i==null?void 0:i.contracts[o],c=a==null?void 0:a.contract;s.push(nt(c));const u=await J4(e,c,a==null?void 0:a.networks);s.push(u)}n.push(s)}return n}function t6(e){async function t(n){var u;let{template:r}=n;q(!!r,"generateTemplateId({ template }) -- template must be defined"),q(typeof r=="object","generateTemplateId({ template }) -- template must be an object"),q(r.f_type==="InteractionTemplate","generateTemplateId({ template }) -- template object must be an InteractionTemplate"),q(r.f_version==="1.1.0","generateTemplateId({ template }) -- template object must be an version 1.1.0");const i=r.data,s=await Promise.all(i.messages.map(async l=>[nt(l.key),await Promise.all(l.i18n.map(async f=>[nt(f.tag),nt(f.translation)]))])),o=await Promise.all(i==null?void 0:i.parameters.sort((l,f)=>l.index-f.index).map(async l=>[nt(l.label),[nt(String(l.index)),nt(l.type),await Promise.all(l.messages.map(async f=>[nt(f.key),await Promise.all(f.i18n.map(async d=>[nt(d.tag),nt(d.translation)]))]))]])),a=[await e6(e,i==null?void 0:i.dependencies)],c=Ha([nt(r==null?void 0:r.f_type),nt(r==null?void 0:r.f_version),nt(i==null?void 0:i.type),nt(i==null?void 0:i.interface),s,nt((u=i==null?void 0:i.cadence)==null?void 0:u.body),[a],o]).toString("hex");return nt(c)}return t}fn();function n6(e){async function t(n){var u;let{address:r,contractName:i}=n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ei(r!=null,"generateDependencyPin({ address }) -- address must be defined"),Ei(i!=null,"generateDependencyPin({ contractName }) -- contractName must be defined"),Ei(typeof r=="string","generateDependencyPin({ address }) -- address must be a string"),Ei(typeof i=="string","generateDependencyPin({ contractName }) -- contractName must be a string");const o=[X0({contractName:i,address:r})];for(const l of o){const f=await e.sdk.send([Oa(await e.config.get(l.address,l.address))],s).then(e.sdk.decode);if(l.contract=(u=f.contracts)==null?void 0:u[l.contractName],!l.contract)throw console.error("Did not find expected contract",l,f),new Error("Did not find expected contract");const d=UA(l.contract);o.push(...d)}const c=o.map(l=>nt(l.contract)).join("");return nt(c)}return t}fn();const r6=e=>async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await n4(e,n),n=await IA(e,n);const i=await e.config.get("fcl.authz",e.currentUser.authorization);return r=e.sdk.send([X$(n.cadence),mA(EA(n.args||[])),n.limit&&t4(n.limit)&&yA(n.limit),V$(n.proposer||n.authz||i),K$(n.payer||n.authz||i),j$(n.authorizations||[n.authz||i])]).then(e.sdk.decode),r}catch(i){throw i}},i6=e=>{const n={...fn(),currentUser:e};return r6(n)};function Py(e){if(e==null)return null;if(!e.f_vsn)return{...h4,addr:it(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId,...e.extensionData?{extensionData:e.extensionData}:{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function s6(e){if(e==null)return null;if(!e.f_vsn)return{...Ja,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Ut(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function o6(e){if(e==null)return null;if(!e.f_vsn)return{...Ja,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...AA,address:Ut(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function a6(e){if(e==null)return null;if(!e.f_vsn)return{...Ja,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...AA,address:Ut(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function FA(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...Ja,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function MA(e){if(e==null)return null;if(!e.f_vsn)return{...Ja,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function c6(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function u6(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function jA(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...Ja,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function l6(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function f6(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function d6(e,t){return e.map(n=>p6(n,t)).filter(Boolean)}const h6={"back-channel-rpc":MA,"pre-authz":a6,authz:o6,authn:s6,frame:FA,"open-id":c6,"user-signature":u6,"local-view":jA,"account-proof":l6,"authn-refresh":f6};function p6(e,t){try{return h6[e.type](e,t)}catch(n){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,n),e}}async function g6(e,t){if(e==null||t==null)return[];const n=new Y0(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json());if(Array.isArray(r))return r;const i=[];if(Array.isArray(r.authorizations))for(let s of r.authorizations)i.push({type:"authz",keyId:r.keyId,...s});return r.provider!=null&&i.push({type:"authn",id:"wallet-provider#authn",...r.provider}),i}function y6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function Ru(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((n,r)=>r.type===t&&(!n||J$(r.f_vsn,n.f_vsn)>0)?r:n,null)}function m6(e){var t,n;return Ha([((t=e.provider)==null?void 0:t.address)||((n=e.provider)==null?void 0:n.name)||"UNSPECIFIED",e.id]).toString("hex")}function w6(e){return e.addr=e.addr?Ut(e.addr):null,e.paddr=e.paddr?Ut(e.paddr):null,e}async function Hv(e){e=w6(e);var t=d6(y6(e.services||[],await g6(e.hks,e.code)));const n=Ru(t,"authn");return{...f4,addr:Ut(e.addr),cid:m6(n),loggedIn:!0,services:t,expiresAt:e.expires}}const v6="WC/RPC",b6=typeof window>"u";function E6(){if(b6)return;Wu().getStrategies().includes(v6)||ve({title:"FCL WalletConnect Service Plugin",level:De.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const _6=globalThis.AbortController||require("abort-controller"),hh=async e=>{let{service:t,body:n,config:r,abortSignal:i,customRpc:s,user:o,opts:a}=e;return Wu().getStrategy(t.method)({service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:a,user:o})};async function bo(e,t){var f;let{service:n,msg:r={},config:i={},opts:s={},platform:o,abortSignal:a=new _6().signal,execStrategy:c,user:u}=t;E6(),r.data=n.data;const l={services:await Uv(e,/^service\./),app:await Uv(e,/^app\.detail\./),client:{...i.client,platform:o,fclVersion:W0,fclLibrary:"https://github.com/onflow/fcl-js",hostname:((f=window==null?void 0:window.location)==null?void 0:f.hostname)??null,network:await ko(e)(s)}};try{const d=await(c||hh)({service:n,body:r,config:l,opts:s,user:u,abortSignal:a});return d.status==="REDIRECT"?(q(n.type===d.data.type,"Cannot shift recursive service type in execService"),await bo(e,{service:d.data,msg:r,config:l,opts:s,abortSignal:a,platform:o,user:u})):d}catch(d){throw ve({title:`Error on execService ${n==null?void 0:n.type}`,message:d,level:De.error}),d}}const S6=e=>typeof e=="function",Tu="CURRENT_USER",bp="CURRENT_USER/UPDATED",zA="SNAPSHOT",ky="SET_CURRENT_USER",HA="DEL_CURRENT_USER",Cy=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,I6=async e=>{const t=JSON.parse(Cy),n=await e.get(Tu);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(Tu),t):n||t},x6=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await e.config.first(["fcl.storage","fcl.storage.default"],void 0);return{[Iu]:async n=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),n.merge(JSON.parse(Cy));const r=await t();if(r.can){const i=await I6(r);A6(i)&&n.merge(i)}},[Po]:(n,r)=>{n.subscribe(r.from),n.send(r.from,bp,{...n.all()})},[Is]:(n,r)=>{n.unsubscribe(r.from)},[zA]:async(n,r)=>{r.reply({...n.all()})},[ky]:async(n,r,i)=>{n.merge(i);const s=await t();s.can&&s.put(Tu,n.all()),n.broadcast(bp,{...n.all()})},[HA]:async(n,r)=>{n.merge(JSON.parse(Cy));const i=await t();i.can&&i.put(Tu,n.all()),n.broadcast(bp,{...n.all()})}}},ec=e=>{ks(x6(e),e.actorName)};function A6(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function O6(e){var i;let t=await e.config.get("fcl.accountProof.resolver");if(t==null)return;if(!S6(t)){ve({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof t}
                `,level:De.warn});return}const n={...await t()},r=(i=window==null?void 0:window.location)==null?void 0:i.origin;return n.appIdentifier?r&&(ve.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),q(typeof n.appIdentifier=="string","appIdentifier must be a string")):(q(r,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),n.appIdentifier=r),q(/^[0-9a-f]+$/i.test(n.nonce),"Nonce must be a hex string"),n}const R6=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r,clientServices:await BA(),supportedStrategies:Wu().getStrategies()}}},ph=e=>async function(){var i,s,o;let{service:t,redir:n=!1,forceReauth:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t&&!((i=t==null?void 0:t.provider)!=null&&i.is_installed)&&((s=t==null?void 0:t.provider)!=null&&s.requires_install)){window.location.href=(o=t==null?void 0:t.provider)==null?void 0:o.install_link;return}return new Promise(async(a,c)=>{var h;ec(e);const u={redir:n},l=await Pf(e)(),f=Ru(l.services,"authn-refresh");let d;if(l.loggedIn&&!r)if(f)try{const p=await bo(e,{service:f,msg:d,opts:u,platform:e.platform,user:l});Et(e.actorName,ky,await Hv(p))}catch(p){ve({title:`${p.name} Could not refresh wallet authentication.`,message:p.message,level:De.error})}finally{return a(await Pf(e)())}else return a(l);try{d=await O6(e)}catch(p){return ve({title:`${p.name} On Authentication: Could not resolve account proof data.`,message:p.message,level:De.error}),c(p)}try{const p=await V4(e,t),g=await bo(e,{service:p,msg:d,config:await R6(p),opts:u,platform:e.platform,execStrategy:(h=e.discovery)==null?void 0:h.execStrategy,user:l});Et(e.actorName,ky,await Hv(g))}catch(p){ve({title:`${p} On Authentication`,message:p,level:De.error})}finally{a(await Pf(e)())}})};function T6(e){return function(){ec(e),Et(e.actorName,HA)}}const P6=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),k6=e=>(t,n)=>{let{user:r}=n;const i=P6(t),s=[];i.proposer!=null&&s.push(["PROPOSER",i.proposer]);for(let a of i.payer||[])s.push(["PAYER",a]);for(let a of i.authorization||[])s.push(["AUTHORIZER",a]);var o=s.map(a=>{let[c,u]=a;return{tempId:[u.identity.address,u.identity.keyId].join("|"),addr:u.identity.address,keyId:u.identity.keyId,signingFunction(l){return bo(e,{service:u,msg:l,platform:e.platform,user:r})},role:{proposer:c==="PROPOSER",payer:c==="PAYER",authorizer:c==="AUTHORIZER"}}});return o},C6=e=>async t=>(ec(e),{...t,tempId:"CURRENT_USER",async resolve(n,r){const i=await ph(e)({redir:!0}),s=Ru(i.services,"authz"),o=Ru(i.services,"pre-authz");if(o)return k6(e)(await bo(e,{service:o,msg:r,platform:e.platform,user:i}),{user:i});if(s)return{...n,tempId:"CURRENT_USER",resolve:null,addr:it(s.identity.address),keyId:s.identity.keyId,sequenceNum:null,signature:null,async signingFunction(a){return Py(await bo(e,{service:s,msg:a,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:i}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function D6(e){return function(n){ec(e);const r="@EXIT",i=ks(async s=>{for(s.send(e.actorName,Po);;){const o=await s.receive();if(o.tag===r){s.send(e.actorName,Is);return}n(o.data)}});return()=>Et(i,r)}}function Pf(e){return function(){return ec(e),Et(e.actorName,zA,null,{expectReply:!0,timeout:0})}}const N6=e=>async()=>{const{addr:t}=await ph(e)();return wA(Ut(t),Px)},$6=e=>(q(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),B6=e=>async t=>{ec(e);const n=await ph(e)({redir:!0}),r=Ru(n.services,"user-signature");q(r,"Current user must have authorized a signing service.");try{const i=await bo(e,{service:r,msg:$6(t),platform:e.platform,user:n});return Array.isArray(i)?i.map(s=>Py(s)):[Py(i)]}catch(i){return i}},U6=e=>{const t={authenticate:ph(e),unauthenticate:T6(e),authorization:C6(e),signUserMessage:B6(e),subscribe:D6(e),snapshot:Pf(e),resolveArgument:N6(e)};return Object.assign(()=>({...t}),{...t})},L6=e=>{const t=fn();return U6({...t,getStorageProvider:async()=>e.getStorageProvider?await e.getStorageProvider():await He.first(["fcl.storage","fcl.storage.default"],void 0),platform:e.platform,actorName:Tu,discovery:e.discovery})};function Gu(e){var n;const t=new Y0(e.endpoint);if((n=window==null?void 0:window.location)!=null&&n.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[r,i]of Object.entries(e.params||{}))t.searchParams.append(r,i);return t}function qA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Gu(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(i=>i.json())}function ti(e){if(e==null)return null;if(!e.f_vsn)return{...d4,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:MA(e.authorizationUpdates),local:FA((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const qv={"HTTP/GET":"GET","HTTP/POST":"POST"},F6=e=>(q(qv[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),qv[e.method]);async function Dy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(q(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(i=>setTimeout(i,500)),Dy(e,t);r=await qA(e,{method:F6(e)}).then(ti)}catch(i){throw i}switch(r==null?void 0:r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(i=>setTimeout(i,500)),Dy(r==null?void 0:r.updates,t)}}const Vv=e=>async t=>{let{service:n,body:r,config:i,opts:s}=t;const o=await qA(n,{data:{fclVersion:W0,service:{params:n.params,data:n.data,type:n.type},config:i,...r}}).then(ti);if((o==null?void 0:o.status)==="APPROVED")return o.data;if((o==null?void 0:o.status)==="DECLINED")throw new Error(`Declined: ${o.reason||"No reason supplied."}`);if((o==null?void 0:o.status)==="REDIRECT")return o;if((o==null?void 0:o.status)==="PENDING"){let a=!0,c=!0;const[u,l]=await e(jA(o.local),{serviceEndpoint:Gu,onClose:()=>c=!1}),f=()=>{try{l(),c=!1}catch(h){console.error("Frame Close Error",h)}},d=()=>{const h=a;return a=c,h};return Dy(o.updates,d).then(h=>(f(),h)).catch(h=>{throw console.error(h),f(),h})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:o}),new Error("Auto Decline: Invalid Response")},Nl="FCL:VIEW:CLOSE",Ep="FCL:VIEW:READY",_p="FCL:VIEW:RESPONSE",M6="FCL:VIEW:CUSTOM_RPC",tt=e=>typeof e=="string"&&e.toLowerCase(),j6=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),Bs=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),gh=e=>{let{close:t,send:n,onReady:r,onResponse:i,onMessage:s,onCustomRpc:o,getSource:a}=e,c;return u=>{try{c=(a==null?void 0:a())||c}catch{c=null}try{if(typeof u.data!="object"||j6.has(u.data.type)||c!=null&&u.source!==c)return;tt(u.data.type)===tt(Nl)&&t(),tt(u.data.type)===tt(Ep)&&(r(u,{send:n,close:t}),c||(c=u.source)),tt(u.data.type)===tt(_p)&&i(u,{send:n,close:t}),tt(u.data.type)===tt(M6)&&o(u.data.payload,{send:n,close:t}),s(u,{send:n,close:t}),tt(u.data.type)===tt("FCL:FRAME:READY")&&(Bs(u.data.type,Ep),r(u,{send:n,close:t}),c||(c=u.source)),tt(u.data.type)===tt("FCL:FRAME:RESPONSE")&&(Bs(u.data.type,_p),i(u,{send:n,close:t})),tt(u.data.type)===tt("FCL:FRAME:CLOSE")&&(Bs(u.data.type,Nl),t()),tt(u.data.type)===tt("FCL::CHALLENGE::RESPONSE")&&(Bs(u.data.type,_p),i(u,{send:n,close:t})),tt(u.data.type)===tt("FCL::AUTHZ_READY")&&(Bs(u.data.type,Ep),r(u,{send:n,close:t}),c||(c=u.source)),tt(u.data.type)===tt("FCL::CHALLENGE::CANCEL")&&(Bs(u.data.type,Nl),t()),tt(u.data.type)===tt("FCL::CANCEL")&&(Bs(u.data.type,Nl),t())}catch(l){console.error("Frame Callback Error",l),t()}}};l4();const VA="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",z6=VA.length;function Z0(){let e="",t=32;for(;t--;)e+=VA[Math.random()*z6|0];return e}const H6="modulepreload",q6=function(e){return"/"+e},Kv={},V6=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=q6(c),c in Kv)return;Kv[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":H6,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var Wv=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},K6=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),W6=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),G6=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),Y6=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),X6=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),Z6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Q6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Gv=3,J6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Z6]],Yv=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function eB(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new X6:typeof navigator<"u"?nB(navigator.userAgent):iB()}function tB(e){return e!==""&&J6.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var s=i.exec(e);return!!s&&[r,s]},!1)}function nB(e){var t=tB(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new Y6;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Gv&&(i=Wv(Wv([],i,!0),sB(Gv-i.length),!0)):i=[];var s=i.join("."),o=rB(e),a=Q6.exec(e);return a&&a[1]?new G6(n,s,o,a[1]):new K6(n,s,o)}function rB(e){for(var t=0,n=Yv.length;t<n;t++){var r=Yv[t],i=r[0],s=r[1],o=s.exec(e);if(o)return i}return null}function iB(){var e=typeof process<"u"&&process.version;return e?new W6(process.version.slice(1)):null}function sB(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var Z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ny=function(e,t){return Ny=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ny(e,t)};function oB(e,t){Ny(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var $y=function(){return $y=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$y.apply(this,arguments)};function aB(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function cB(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function uB(e,t){return function(n,r){t(n,r,e)}}function lB(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function fB(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(f){o(f)}}function c(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function dB(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(l){u=[6,l],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function hB(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function pB(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function By(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function KA(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function gB(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(KA(arguments[t]));return e}function yB(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Pu(e){return this instanceof Pu?(this.v=e,this):new Pu(e)}function mB(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{c(r[d](h))}catch(p){f(s[0][3],p)}}function c(d){d.value instanceof Pu?Promise.resolve(d.value.v).then(u,l):f(s[0][2],d)}function u(d){a("next",d)}function l(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function wB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Pu(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function vB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof By=="function"?By(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function bB(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function EB(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _B(e){return e&&e.__esModule?e:{default:e}}function SB(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function IB(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const xB=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $y},__asyncDelegator:wB,__asyncGenerator:mB,__asyncValues:vB,__await:Pu,__awaiter:fB,__classPrivateFieldGet:SB,__classPrivateFieldSet:IB,__createBinding:hB,__decorate:cB,__exportStar:pB,__extends:oB,__generator:dB,__importDefault:_B,__importStar:EB,__makeTemplateObject:bB,__metadata:lB,__param:uB,__read:KA,__rest:aB,__spread:gB,__spreadArrays:yB,__values:By},Symbol.toStringTag,{value:"Module"})),Yu=eP(xB);var Sp={},mc={},Xv;function AB(){if(Xv)return mc;Xv=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return mc.delay=e,mc}var Us={},Ip={},Ls={},Zv;function OB(){return Zv||(Zv=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.ONE_THOUSAND=Ls.ONE_HUNDRED=void 0,Ls.ONE_HUNDRED=100,Ls.ONE_THOUSAND=1e3),Ls}var xp={},Qv;function RB(){return Qv||(Qv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(xp)),xp}var Jv;function WA(){return Jv||(Jv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Yu;t.__exportStar(OB(),e),t.__exportStar(RB(),e)}(Ip)),Ip}var eb;function TB(){if(eb)return Us;eb=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.fromMiliseconds=Us.toMiliseconds=void 0;const e=WA();function t(r){return r*e.ONE_THOUSAND}Us.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Us.fromMiliseconds=n,Us}var tb;function PB(){return tb||(tb=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Yu;t.__exportStar(AB(),e),t.__exportStar(TB(),e)}(Sp)),Sp}var Ko={},nb;function kB(){if(nb)return Ko;nb=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Ko.Watch=e,Ko.default=e,Ko}var Ap={},wc={},rb;function CB(){if(rb)return wc;rb=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.IWatch=void 0;class e{}return wc.IWatch=e,wc}var ib;function DB(){return ib||(ib=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Yu.__exportStar(CB(),e)}(Ap)),Ap}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Yu;t.__exportStar(PB(),e),t.__exportStar(kB(),e),t.__exportStar(DB(),e),t.__exportStar(WA(),e)})(Z);var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.getLocalStorage=$e.getLocalStorageOrThrow=$e.getCrypto=$e.getCryptoOrThrow=GA=$e.getLocation=$e.getLocationOrThrow=Q0=$e.getNavigator=$e.getNavigatorOrThrow=Eo=$e.getDocument=$e.getDocumentOrThrow=$e.getFromWindowOrThrow=$e.getFromWindow=void 0;function Do(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}$e.getFromWindow=Do;function tc(e){const t=Do(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}$e.getFromWindowOrThrow=tc;function NB(){return tc("document")}$e.getDocumentOrThrow=NB;function $B(){return Do("document")}var Eo=$e.getDocument=$B;function BB(){return tc("navigator")}$e.getNavigatorOrThrow=BB;function UB(){return Do("navigator")}var Q0=$e.getNavigator=UB;function LB(){return tc("location")}$e.getLocationOrThrow=LB;function FB(){return Do("location")}var GA=$e.getLocation=FB;function MB(){return tc("crypto")}$e.getCryptoOrThrow=MB;function jB(){return Do("crypto")}$e.getCrypto=jB;function zB(){return tc("localStorage")}$e.getLocalStorageOrThrow=zB;function HB(){return Do("localStorage")}$e.getLocalStorage=HB;var J0={};Object.defineProperty(J0,"__esModule",{value:!0});var YA=J0.getWindowMetadata=void 0;const sb=$e;function qB(){let e,t;try{e=sb.getDocumentOrThrow(),t=sb.getLocationOrThrow()}catch{return null}function n(){const f=e.getElementsByTagName("link"),d=[];for(let h=0;h<f.length;h++){const p=f[h],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const v=p.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let m=t.protocol+"//"+t.host;if(v.indexOf("/")===0)m+=v;else{const _=t.pathname.split("/");_.pop();const E=_.join("/");m+=E+"/"+v}d.push(m)}else if(v.indexOf("//")===0){const m=t.protocol+v;d.push(m)}else d.push(v)}}return d}function r(...f){const d=e.getElementsByTagName("meta");for(let h=0;h<d.length;h++){const p=d[h],g=["itemprop","property","name"].map(v=>p.getAttribute(v)).filter(v=>v?f.includes(v):!1);if(g.length&&g){const v=p.getAttribute("content");if(v)return v}}return""}function i(){let f=r("name","og:site_name","og:title","twitter:title");return f||(f=e.title),f}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=t.origin,u=n();return{description:a,url:c,icons:u,name:o}}YA=J0.getWindowMetadata=qB;const VB="0.1.1";function KB(){return VB}class We extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof We){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=n.cause instanceof We&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${i??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${KB()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=t}walk(t){return XA(this,t)}}function XA(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?XA(e.cause,t):t?null:e}const Wo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WB(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ku(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function _o(e,...t){if(!WB(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function GB(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ku(e.outputLen),ku(e.blockLen)}function Va(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ZA(e,t){_o(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function YB(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ka(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Op(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Cr(e,t){return e<<32-t|e>>>t}const XB=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ZB(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function QB(e){for(let t=0;t<e.length;t++)e[t]=ZB(e[t]);return e}const ob=XB?e=>e:QB;function JB(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function yh(e){return typeof e=="string"&&(e=JB(e)),_o(e),e}function eU(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];_o(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}class ew{}function QA(e){const t=r=>e().update(yh(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function tU(e=32){if(Wo&&typeof Wo.getRandomValues=="function")return Wo.getRandomValues(new Uint8Array(e));if(Wo&&typeof Wo.randomBytes=="function")return Uint8Array.from(Wo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function nU(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}function rU(e,t,n){return e&t^~e&n}function iU(e,t,n){return e&t^e&n^t&n}class sU extends ew{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Op(this.buffer)}update(t){Va(this),t=yh(t),_o(t);const{view:n,buffer:r,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Op(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Va(this),ZA(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Ka(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;nU(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Op(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Ui=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$l=BigInt(2**32-1),ab=BigInt(32);function oU(e,t=!1){return t?{h:Number(e&$l),l:Number(e>>ab&$l)}:{h:Number(e>>ab&$l)|0,l:Number(e&$l)|0}}function aU(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=oU(e[s],t);[r[s],i[s]]=[o,a]}return[r,i]}const cU=(e,t,n)=>e<<n|t>>>32-n,uU=(e,t,n)=>t<<n|e>>>32-n,lU=(e,t,n)=>t<<n-32|e>>>64-n,fU=(e,t,n)=>e<<n-32|t>>>64-n,dU=BigInt(0),vc=BigInt(1),hU=BigInt(2),pU=BigInt(7),gU=BigInt(256),yU=BigInt(113),JA=[],e3=[],t3=[];for(let e=0,t=vc,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],JA.push(2*(5*r+n)),e3.push((e+1)*(e+2)/2%64);let i=dU;for(let s=0;s<7;s++)t=(t<<vc^(t>>pU)*yU)%gU,t&hU&&(i^=vc<<(vc<<BigInt(s))-vc);t3.push(i)}const n3=aU(t3,!0),mU=n3[0],wU=n3[1],cb=(e,t,n)=>n>32?lU(e,t,n):cU(e,t,n),ub=(e,t,n)=>n>32?fU(e,t,n):uU(e,t,n);function vU(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],f=cb(u,l,1)^n[a],d=ub(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=f,e[o+h+1]^=d}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=e3[o],c=cb(i,s,a),u=ub(i,s,a),l=JA[o];i=e[l],s=e[l+1],e[l]=c,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=mU[r],e[1]^=wU[r]}Ka(n)}class tw extends ew{constructor(t,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,ku(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=YB(this.state)}clone(){return this._cloneInto()}keccak(){ob(this.state32),vU(this.state32,this.rounds),ob(this.state32),this.posOut=0,this.pos=0}update(t){Va(this),t=yh(t),_o(t);const{blockLen:n,state:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Va(this,!1),_o(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ku(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ZA(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ka(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new tw(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const bU=(e,t,n)=>QA(()=>new tw(t,e,n)),EU=bU(1,136,256/8),_U=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Li=new Uint32Array(64);class SU extends sU{constructor(t=32){super(64,t,8,!1),this.A=Ui[0]|0,this.B=Ui[1]|0,this.C=Ui[2]|0,this.D=Ui[3]|0,this.E=Ui[4]|0,this.F=Ui[5]|0,this.G=Ui[6]|0,this.H=Ui[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)Li[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=Li[f-15],h=Li[f-2],p=Cr(d,7)^Cr(d,18)^d>>>3,g=Cr(h,17)^Cr(h,19)^h>>>10;Li[f]=g+Li[f-7]+p+Li[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=Cr(a,6)^Cr(a,11)^Cr(a,25),h=l+d+rU(a,c,u)+_U[f]+Li[f]|0,g=(Cr(r,2)^Cr(r,13)^Cr(r,22))+iU(r,i,s)|0;l=u,u=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,s,o,a,c,u,l)}roundClean(){Ka(Li)}destroy(){this.set(0,0,0,0,0,0,0,0),Ka(this.buffer)}}const IU=QA(()=>new SU);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nw=BigInt(0),Uy=BigInt(1);function Xu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function rw(e){if(!Xu(e))throw new Error("Uint8Array expected")}function Cu(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Bl(e){const t=e.toString(16);return t.length&1?"0"+t:t}function r3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?nw:BigInt("0x"+e)}const i3=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xU=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Du(e){if(rw(e),i3)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=xU[e[n]];return t}const ri={_0:48,_9:57,A:65,F:70,a:97,f:102};function lb(e){if(e>=ri._0&&e<=ri._9)return e-ri._0;if(e>=ri.A&&e<=ri.F)return e-(ri.A-10);if(e>=ri.a&&e<=ri.f)return e-(ri.a-10)}function yd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(i3)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=lb(e.charCodeAt(s)),a=lb(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function fo(e){return r3(Du(e))}function s3(e){return rw(e),r3(Du(Uint8Array.from(e).reverse()))}function Zu(e,t){return yd(e.toString(16).padStart(t*2,"0"))}function o3(e,t){return Zu(e,t).reverse()}function er(e,t,n){let r;if(typeof t=="string")try{r=yd(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Xu(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function md(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];rw(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}const Rp=e=>typeof e=="bigint"&&nw<=e;function iw(e,t,n){return Rp(e)&&Rp(t)&&Rp(n)&&t<=e&&e<n}function Pa(e,t,n,r){if(!iw(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function AU(e){let t;for(t=0;e>nw;e>>=Uy,t+=1);return t}const mh=e=>(Uy<<BigInt(e))-Uy,Tp=e=>new Uint8Array(e),fb=e=>Uint8Array.from(e);function OU(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Tp(e),i=Tp(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>n(i,r,...f),c=(f=Tp(0))=>{i=a(fb([0]),f),r=a(),f.length!==0&&(i=a(fb([1]),f),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<t;){r=a();const h=r.slice();d.push(h),f+=r.length}return md(...d)};return(f,d)=>{o(),c(f);let h;for(;!(h=d(u()));)c();return o(),h}}const RU={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Xu(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function wh(e,t,n={}){const r=(i,s,o)=>{const a=RU[s];if(typeof a!="function")throw new Error("invalid validator function");const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}function db(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e(n,...r);return t.set(n,s),s}}function TU(e,t){if(yb(e)>t)throw new XU({givenSize:yb(e),maxSize:t})}const ii={zero:48,nine:57,A:65,F:70,a:97,f:102};function hb(e){if(e>=ii.zero&&e<=ii.nine)return e-ii.zero;if(e>=ii.A&&e<=ii.F)return e-(ii.A-10);if(e>=ii.a&&e<=ii.f)return e-(ii.a-10)}function PU(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new ZU({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=n==="right";i[o?s:r-s-1]=e[o?s:e.length-s-1]}return i}function a3(e,t){if(xs(e)>t)throw new MU({givenSize:xs(e),maxSize:t})}function kU(e,t){if(typeof t=="number"&&t>0&&t>xs(e)-1)throw new l3({offset:t,position:"start",size:xs(e)})}function CU(e,t,n){if(typeof t=="number"&&typeof n=="number"&&xs(e)!==n-t)throw new l3({offset:n,position:"end",size:xs(e)})}function c3(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new jU({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const DU="#__bigint";function sw(e,t,n){return JSON.stringify(e,(r,i)=>typeof i=="bigint"?i.toString()+DU:i,n)}const NU=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $U(e,t={}){const{strict:n=!1}=t;if(!e)throw new pb(e);if(typeof e!="string")throw new pb(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new gb(e);if(!e.startsWith("0x"))throw new gb(e)}function BU(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ow(e){return e instanceof Uint8Array?wd(e):Array.isArray(e)?wd(new Uint8Array(e)):e}function wd(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=NU[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(a3(r,t.size),u3(r,t.size)):r}function Pp(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const u=typeof e=="bigint"?"n":"";throw new FU({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?UU(c,r):c}function UU(e,t){return c3(e,{dir:"left",size:t})}function u3(e,t){return c3(e,{dir:"right",size:t})}function hi(e,t,n,r={}){const{strict:i}=r;kU(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return i&&CU(s,t,n),s}function xs(e){return Math.ceil((e.length-2)/2)}function LU(e,t={}){const{strict:n=!1}=t;try{return $U(e,{strict:n}),!0}catch{return!1}}class FU extends We{constructor({max:t,min:n,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class pb extends We{constructor(t){super(`Value \`${typeof t=="object"?sw(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class gb extends We{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let MU=class extends We{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class l3 extends We{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let jU=class extends We{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const zU=new TextEncoder;function HU(e){if(!(e instanceof Uint8Array)){if(!e)throw new Ul(e);if(typeof e!="object")throw new Ul(e);if(!("BYTES_PER_ELEMENT"in e))throw new Ul(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new Ul(e)}}function qU(e){return e instanceof Uint8Array?e:typeof e=="string"?KU(e):VU(e)}function VU(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function KU(e,t={}){const{size:n}=t;let r=e;n&&(a3(e,n),r=u3(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const u=hb(i.charCodeAt(c++)),l=hb(i.charCodeAt(c++));if(u===void 0||l===void 0)throw new We(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=u*16+l}return o}function WU(e,t={}){const{size:n}=t,r=zU.encode(e);return typeof n=="number"?(TU(r,n),GU(r,n)):r}function GU(e,t){return PU(e,{dir:"right",size:t})}function yb(e){return e.length}function YU(e){try{return HU(e),!0}catch{return!1}}class Ul extends We{constructor(t){super(`Value \`${typeof t=="object"?sw(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class XU extends We{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class ZU extends We{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function f3(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=EU(qU(e));return n==="Bytes"?r:wd(r)}class QU extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const JU={checksum:new QU(8192)},kp=JU.checksum;function d3(e,t={}){const{compressed:n}=t,{prefix:r,x:i,y:s}=e;if(n===!1||typeof i=="bigint"&&typeof s=="bigint"){if(r!==4)throw new mb({prefix:r,cause:new s5});return}if(n===!0||typeof i=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new mb({prefix:r,cause:new i5});return}throw new r5({publicKey:e})}function e5(e){const t=(()=>{if(LU(e))return h3(e);if(YU(e))return t5(e);const{prefix:n,x:r,y:i}=e;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return d3(t),t}function t5(e){return h3(wd(e))}function h3(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new o5({publicKey:e});if(e.length===130){const r=BigInt(hi(e,0,32)),i=BigInt(hi(e,32,64));return{prefix:4,x:r,y:i}}if(e.length===132){const r=Number(hi(e,0,1)),i=BigInt(hi(e,1,33)),s=BigInt(hi(e,33,65));return{prefix:r,x:i,y:s}}const t=Number(hi(e,0,1)),n=BigInt(hi(e,1,33));return{prefix:t,x:n}}function n5(e,t={}){d3(e);const{prefix:n,x:r,y:i}=e,{includePrefix:s=!0}=t;return BU(s?Pp(n,{size:1}):"0x",Pp(r,{size:32}),typeof i=="bigint"?Pp(i,{size:32}):"0x")}class r5 extends We{constructor({publicKey:t}){super(`Value \`${sw(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class mb extends We{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class i5 extends We{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class s5 extends We{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let o5=class extends We{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${xs(ow(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const a5=/^0x[a-fA-F0-9]{40}$/;function p3(e,t={}){const{strict:n=!0}=t;if(!a5.test(e))throw new wb({address:e,cause:new l5});if(n){if(e.toLowerCase()===e)return;if(g3(e)!==e)throw new wb({address:e,cause:new f5})}}function g3(e){if(kp.has(e))return kp.get(e);p3(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=f3(WU(t),{as:"Bytes"}),r=t.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return kp.set(e,i),i}function c5(e,t={}){const{checksum:n=!1}=t;return p3(e),n?g3(e):e}function u5(e,t={}){const n=f3(`0x${n5(e).slice(4)}`).substring(26);return c5(`0x${n}`,t)}class wb extends We{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class l5 extends We{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class f5 extends We{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class y3 extends ew{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,GB(t);const r=yh(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ka(s)}update(t){return Va(this),this.iHash.update(t),this}digestInto(t){Va(this),_o(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const m3=(e,t,n)=>new y3(e,t).update(n).digest();m3.create=(e,t)=>new y3(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _n=BigInt(0),sn=BigInt(1),ro=BigInt(2),d5=BigInt(3),w3=BigInt(4),v3=BigInt(5),b3=BigInt(8);function mn(e,t){const n=e%t;return n>=_n?n:t+n}function Yn(e,t,n){let r=e;for(;t-- >_n;)r*=r,r%=n;return r}function Ly(e,t){if(e===_n)throw new Error("invert: expected non-zero number");if(t<=_n)throw new Error("invert: expected positive modulus, got "+t);let n=mn(e,t),r=t,i=_n,s=sn;for(;n!==_n;){const a=r/n,c=r%n,u=i-s*a;r=n,n=c,i=s,s=u}if(r!==sn)throw new Error("invert: does not exist");return mn(i,t)}function E3(e,t){const n=(e.ORDER+sn)/w3,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function h5(e,t){const n=(e.ORDER-v3)/b3,r=e.mul(t,ro),i=e.pow(r,n),s=e.mul(t,i),o=e.mul(e.mul(s,ro),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function p5(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-sn,n=0;for(;t%ro===_n;)t/=ro,n++;let r=ro;const i=aw(e);for(;vb(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return E3;let s=i.pow(r,t);const o=(t+sn)/ro;return function(c,u){if(c.is0(u))return u;if(vb(c,u)!==1)throw new Error("Cannot find square root");let l=n,f=c.mul(c.ONE,s),d=c.pow(u,t),h=c.pow(u,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let p=1,g=c.sqr(d);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===l)throw new Error("Cannot find square root");const v=sn<<BigInt(l-p-1),m=c.pow(f,v);l=p,f=c.sqr(m),d=c.mul(d,f),h=c.mul(h,m)}return h}}function g5(e){return e%w3===d5?E3:e%b3===v3?h5:p5(e)}const y5=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m5(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=y5.reduce((r,i)=>(r[i]="function",r),t);return wh(e,n)}function w5(e,t,n){if(n<_n)throw new Error("invalid exponent, negatives unsupported");if(n===_n)return e.ONE;if(n===sn)return t;let r=e.ONE,i=t;for(;n>_n;)n&sn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=sn;return r}function _3(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((o,a,c)=>e.is0(a)?o:(r[c]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,c)=>e.is0(a)?o:(r[c]=e.mul(o,r[c]),e.mul(o,a)),s),r}function vb(e,t){const n=(e.ORDER-sn)/ro,r=e.pow(t,n),i=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function S3(e,t){t!==void 0&&ku(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function aw(e,t,n=!1,r={}){if(e<=_n)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=S3(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:mh(i),ZERO:_n,ONE:sn,create:c=>mn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return _n<=c&&c<e},is0:c=>c===_n,isOdd:c=>(c&sn)===sn,neg:c=>mn(-c,e),eql:(c,u)=>c===u,sqr:c=>mn(c*c,e),add:(c,u)=>mn(c+u,e),sub:(c,u)=>mn(c-u,e),mul:(c,u)=>mn(c*u,e),pow:(c,u)=>w5(a,c,u),div:(c,u)=>mn(c*Ly(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Ly(c,e),sqrt:r.sqrt||(c=>(o||(o=g5(e)),o(a,c))),toBytes:c=>n?o3(c,s):Zu(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?s3(c):fo(c)},invertBatch:c=>_3(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function I3(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function x3(e){const t=I3(e);return t+Math.ceil(t/2)}function v5(e,t,n=!1){const r=e.length,i=I3(t),s=x3(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?s3(e):fo(e),a=mn(o,t-sn)+sn;return n?o3(a,i):Zu(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bb=BigInt(0),Fy=BigInt(1);function Cp(e,t){const n=t.negate();return e?n:t}function A3(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Dp(e,t){A3(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,s=mh(e),o=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function Eb(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(e&i),c=e>>o;a>r&&(a-=s,c+=Fy);const u=t*r,l=u+Math.abs(a)-1,f=a===0,d=a<0,h=t%2!==0;return{nextN:c,offset:l,isZero:f,isNeg:d,isNegF:h,offsetF:u}}function b5(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function E5(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Np=new WeakMap,O3=new WeakMap;function $p(e){return O3.get(e)||1}function _5(e,t){return{constTimeNegate:Cp,hasPrecomputes(n){return $p(n)!==1},unsafeLadder(n,r,i=e.ZERO){let s=n;for(;r>bb;)r&Fy&&(i=i.add(s)),s=s.double(),r>>=Fy;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=Dp(r,t),o=[];let a=n,c=a;for(let u=0;u<i;u++){c=a,o.push(c);for(let l=1;l<s;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){let s=e.ZERO,o=e.BASE;const a=Dp(n,t);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:f,isNeg:d,isNegF:h,offsetF:p}=Eb(i,c,a);i=u,f?o=o.add(Cp(h,r[p])):s=s.add(Cp(d,r[l]))}return{p:s,f:o}},wNAFUnsafe(n,r,i,s=e.ZERO){const o=Dp(n,t);for(let a=0;a<o.windows&&i!==bb;a++){const{nextN:c,offset:u,isZero:l,isNeg:f}=Eb(i,a,o);if(i=c,!l){const d=r[u];s=s.add(f?d.negate():d)}}return s},getPrecomputes(n,r,i){let s=Np.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&Np.set(r,i(s))),s},wNAFCached(n,r,i){const s=$p(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=$p(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){A3(r,t),O3.set(n,r),Np.delete(n)}}}function S5(e,t,n,r){b5(n,e),E5(r,t);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=AU(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=mh(c),l=new Array(Number(u)+1).fill(o),f=Math.floor((t.BITS-1)/c)*c;let d=o;for(let h=f;h>=0;h-=c){l.fill(o);for(let g=0;g<s;g++){const v=r[g],m=Number(v>>BigInt(h)&u);l[m]=l[m].add(n[g])}let p=o;for(let g=l.length-1,v=o;g>0;g--)v=v.add(l[g]),p=p.add(v);if(d=d.add(p),h!==0)for(let g=0;g<c;g++)d=d.double()}return d}function R3(e){return m5(e.Fp),wh(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...S3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _b(e){e.lowS!==void 0&&Cu("lowS",e.lowS),e.prehash!==void 0&&Cu("prehash",e.prehash)}function I5(e){const t=R3(e);wh(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class x5 extends Error{constructor(t=""){super(t)}}const gi={Err:x5,_tlv:{encode:(e,t)=>{const{Err:n}=gi;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Bl(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Bl(i.length/2|128):"";return Bl(e)+s+i+t},decode(e,t){const{Err:n}=gi;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=gi;if(e<wi)throw new t("integer: negative integers are not allowed");let n=Bl(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=gi;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return fo(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=gi,i=er("signature",e),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=gi,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),s=r+i;return t.encode(48,s)}};function Bp(e,t){return Du(Zu(e,t))}const wi=BigInt(0),xt=BigInt(1);BigInt(2);const Up=BigInt(3),A5=BigInt(4);function O5(e){const t=I5(e),{Fp:n}=t,r=aw(t.n,t.nBitLength),i=t.toBytes||((E,I,O)=>{const C=I.toAffine();return md(Uint8Array.from([4]),n.toBytes(C.x),n.toBytes(C.y))}),s=t.fromBytes||(E=>{const I=E.subarray(1),O=n.fromBytes(I.subarray(0,n.BYTES)),C=n.fromBytes(I.subarray(n.BYTES,2*n.BYTES));return{x:O,y:C}});function o(E){const{a:I,b:O}=t,C=n.sqr(E),N=n.mul(C,E);return n.add(n.add(N,n.mul(E,I)),O)}function a(E,I){const O=n.sqr(I),C=o(E);return n.eql(O,C)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,Up),A5),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(E){return iw(E,xt,t.n)}function f(E){const{allowedPrivateKeyLengths:I,nByteLength:O,wrapPrivateKey:C,n:N}=t;if(I&&typeof E!="bigint"){if(Xu(E)&&(E=Du(E)),typeof E!="string"||!I.includes(E.length))throw new Error("invalid private key");E=E.padStart(O*2,"0")}let B;try{B=typeof E=="bigint"?E:fo(er("private key",E,O))}catch{throw new Error("invalid private key, expected hex or "+O+" bytes, got "+typeof E)}return C&&(B=mn(B,N)),Pa("private key",B,xt,N),B}function d(E){if(!(E instanceof g))throw new Error("ProjectivePoint expected")}const h=db((E,I)=>{const{px:O,py:C,pz:N}=E;if(n.eql(N,n.ONE))return{x:O,y:C};const B=E.is0();I==null&&(I=B?n.ONE:n.inv(N));const D=n.mul(O,I),j=n.mul(C,I),V=n.mul(N,I);if(B)return{x:n.ZERO,y:n.ZERO};if(!n.eql(V,n.ONE))throw new Error("invZ was invalid");return{x:D,y:j}}),p=db(E=>{if(E.is0()){if(t.allowInfinityPoint&&!n.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:I,y:O}=E.toAffine();if(!n.isValid(I)||!n.isValid(O))throw new Error("bad point: x or y not FE");if(!a(I,O))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(I,O,C){if(I==null||!n.isValid(I))throw new Error("x required");if(O==null||!n.isValid(O)||n.is0(O))throw new Error("y required");if(C==null||!n.isValid(C))throw new Error("z required");this.px=I,this.py=O,this.pz=C,Object.freeze(this)}static fromAffine(I){const{x:O,y:C}=I||{};if(!I||!n.isValid(O)||!n.isValid(C))throw new Error("invalid affine point");if(I instanceof g)throw new Error("projective point not allowed");const N=B=>n.eql(B,n.ZERO);return N(O)&&N(C)?g.ZERO:new g(O,C,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const O=_3(n,I.map(C=>C.pz));return I.map((C,N)=>C.toAffine(O[N])).map(g.fromAffine)}static fromHex(I){const O=g.fromAffine(s(er("pointHex",I)));return O.assertValidity(),O}static fromPrivateKey(I){return g.BASE.multiply(f(I))}static msm(I,O){return S5(g,r,I,O)}_setWindowSize(I){_.setWindowSize(this,I)}assertValidity(){p(this)}hasEvenY(){const{y:I}=this.toAffine();if(n.isOdd)return!n.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){d(I);const{px:O,py:C,pz:N}=this,{px:B,py:D,pz:j}=I,V=n.eql(n.mul(O,j),n.mul(B,N)),F=n.eql(n.mul(C,j),n.mul(D,N));return V&&F}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:O}=t,C=n.mul(O,Up),{px:N,py:B,pz:D}=this;let j=n.ZERO,V=n.ZERO,F=n.ZERO,$=n.mul(N,N),L=n.mul(B,B),w=n.mul(D,D),S=n.mul(N,B);return S=n.add(S,S),F=n.mul(N,D),F=n.add(F,F),j=n.mul(I,F),V=n.mul(C,w),V=n.add(j,V),j=n.sub(L,V),V=n.add(L,V),V=n.mul(j,V),j=n.mul(S,j),F=n.mul(C,F),w=n.mul(I,w),S=n.sub($,w),S=n.mul(I,S),S=n.add(S,F),F=n.add($,$),$=n.add(F,$),$=n.add($,w),$=n.mul($,S),V=n.add(V,$),w=n.mul(B,D),w=n.add(w,w),$=n.mul(w,S),j=n.sub(j,$),F=n.mul(w,L),F=n.add(F,F),F=n.add(F,F),new g(j,V,F)}add(I){d(I);const{px:O,py:C,pz:N}=this,{px:B,py:D,pz:j}=I;let V=n.ZERO,F=n.ZERO,$=n.ZERO;const L=t.a,w=n.mul(t.b,Up);let S=n.mul(O,B),P=n.mul(C,D),R=n.mul(N,j),A=n.add(O,C),T=n.add(B,D);A=n.mul(A,T),T=n.add(S,P),A=n.sub(A,T),T=n.add(O,N);let M=n.add(B,j);return T=n.mul(T,M),M=n.add(S,R),T=n.sub(T,M),M=n.add(C,N),V=n.add(D,j),M=n.mul(M,V),V=n.add(P,R),M=n.sub(M,V),$=n.mul(L,T),V=n.mul(w,R),$=n.add(V,$),V=n.sub(P,$),$=n.add(P,$),F=n.mul(V,$),P=n.add(S,S),P=n.add(P,S),R=n.mul(L,R),T=n.mul(w,T),P=n.add(P,R),R=n.sub(S,R),R=n.mul(L,R),T=n.add(T,R),S=n.mul(P,T),F=n.add(F,S),S=n.mul(M,T),V=n.mul(A,V),V=n.sub(V,S),S=n.mul(A,P),$=n.mul(M,$),$=n.add($,S),new g(V,F,$)}subtract(I){return this.add(I.negate())}is0(){return this.equals(g.ZERO)}wNAF(I){return _.wNAFCached(this,I,g.normalizeZ)}multiplyUnsafe(I){const{endo:O,n:C}=t;Pa("scalar",I,wi,C);const N=g.ZERO;if(I===wi)return N;if(this.is0()||I===xt)return this;if(!O||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,I,g.normalizeZ);let{k1neg:B,k1:D,k2neg:j,k2:V}=O.splitScalar(I),F=N,$=N,L=this;for(;D>wi||V>wi;)D&xt&&(F=F.add(L)),V&xt&&($=$.add(L)),L=L.double(),D>>=xt,V>>=xt;return B&&(F=F.negate()),j&&($=$.negate()),$=new g(n.mul($.px,O.beta),$.py,$.pz),F.add($)}multiply(I){const{endo:O,n:C}=t;Pa("scalar",I,xt,C);let N,B;if(O){const{k1neg:D,k1:j,k2neg:V,k2:F}=O.splitScalar(I);let{p:$,f:L}=this.wNAF(j),{p:w,f:S}=this.wNAF(F);$=_.constTimeNegate(D,$),w=_.constTimeNegate(V,w),w=new g(n.mul(w.px,O.beta),w.py,w.pz),N=$.add(w),B=L.add(S)}else{const{p:D,f:j}=this.wNAF(I);N=D,B=j}return g.normalizeZ([N,B])[0]}multiplyAndAddUnsafe(I,O,C){const N=g.BASE,B=(j,V)=>V===wi||V===xt||!j.equals(N)?j.multiplyUnsafe(V):j.multiply(V),D=B(this,O).add(B(I,C));return D.is0()?void 0:D}toAffine(I){return h(this,I)}isTorsionFree(){const{h:I,isTorsionFree:O}=t;if(I===xt)return!0;if(O)return O(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:O}=t;return I===xt?this:O?O(g,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return Cu("isCompressed",I),this.assertValidity(),i(g,this,I)}toHex(I=!0){return Cu("isCompressed",I),Du(this.toRawBytes(I))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:v,nBitLength:m}=t,_=_5(g,v?Math.ceil(m/2):m);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:l}}function R5(e){const t=R3(e);return wh(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function T5(e){const t=R5(e),{Fp:n,n:r,nByteLength:i,nBitLength:s}=t,o=n.BYTES+1,a=2*n.BYTES+1;function c(w){return mn(w,r)}function u(w){return Ly(w,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:d,isWithinCurveOrder:h}=O5({...t,toBytes(w,S,P){const R=S.toAffine(),A=n.toBytes(R.x),T=md;return Cu("isCompressed",P),P?T(Uint8Array.from([S.hasEvenY()?2:3]),A):T(Uint8Array.from([4]),A,n.toBytes(R.y))},fromBytes(w){const S=w.length,P=w[0],R=w.subarray(1);if(S===o&&(P===2||P===3)){const A=fo(R);if(!iw(A,xt,n.ORDER))throw new Error("Point is not on curve");const T=d(A);let M;try{M=n.sqrt(T)}catch(K){const G=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+G)}const z=(M&xt)===xt;return(P&1)===1!==z&&(M=n.neg(M)),{x:A,y:M}}else if(S===a&&P===4){const A=n.fromBytes(R.subarray(0,n.BYTES)),T=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:A,y:T}}else{const A=o,T=a;throw new Error("invalid Point, expected length of "+A+", or uncompressed "+T+", got "+S)}}});function p(w){const S=r>>xt;return w>S}function g(w){return p(w)?c(-w):w}const v=(w,S,P)=>fo(w.slice(S,P));class m{constructor(S,P,R){Pa("r",S,xt,r),Pa("s",P,xt,r),this.r=S,this.s=P,R!=null&&(this.recovery=R),Object.freeze(this)}static fromCompact(S){const P=i;return S=er("compactSignature",S,P*2),new m(v(S,0,P),v(S,P,2*P))}static fromDER(S){const{r:P,s:R}=gi.toSig(er("DER",S));return new m(P,R)}assertValidity(){}addRecoveryBit(S){return new m(this.r,this.s,S)}recoverPublicKey(S){const{r:P,s:R,recovery:A}=this,T=N(er("msgHash",S));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");const M=A===2||A===3?P+t.n:P;if(M>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=A&1?"03":"02",Q=l.fromHex(z+Bp(M,n.BYTES)),K=u(M),G=c(-T*K),te=c(R*K),ie=l.BASE.multiplyAndAddUnsafe(Q,G,te);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return yd(this.toDERHex())}toDERHex(){return gi.hexFromSig(this)}toCompactRawBytes(){return yd(this.toCompactHex())}toCompactHex(){const S=i;return Bp(this.r,S)+Bp(this.s,S)}}const _={isValidPrivateKey(w){try{return f(w),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const w=x3(t.n);return v5(t.randomBytes(w),t.n)},precompute(w=8,S=l.BASE){return S._setWindowSize(w),S.multiply(BigInt(3)),S}};function E(w,S=!0){return l.fromPrivateKey(w).toRawBytes(S)}function I(w){if(typeof w=="bigint")return!1;if(w instanceof l)return!0;const P=er("key",w).length,R=n.BYTES,A=R+1,T=2*R+1;if(!(t.allowedPrivateKeyLengths||i===A))return P===A||P===T}function O(w,S,P=!0){if(I(w)===!0)throw new Error("first arg must be private key");if(I(S)===!1)throw new Error("second arg must be public key");return l.fromHex(S).multiply(f(w)).toRawBytes(P)}const C=t.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const S=fo(w),P=w.length*8-s;return P>0?S>>BigInt(P):S},N=t.bits2int_modN||function(w){return c(C(w))},B=mh(s);function D(w){return Pa("num < 2^"+s,w,wi,B),Zu(w,i)}function j(w,S,P=V){if(["recovered","canonical"].some(se=>se in P))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:A}=t;let{lowS:T,prehash:M,extraEntropy:z}=P;T==null&&(T=!0),w=er("msgHash",w),_b(P),M&&(w=er("prehashed msgHash",R(w)));const Q=N(w),K=f(S),G=[D(K),D(Q)];if(z!=null&&z!==!1){const se=z===!0?A(n.BYTES):z;G.push(er("extraEntropy",se))}const te=md(...G),ie=Q;function ce(se){const le=C(se);if(!h(le))return;const Le=u(le),Qe=l.BASE.multiply(le).toAffine(),Fe=c(Qe.x);if(Fe===wi)return;const st=c(Le*c(ie+Fe*K));if(st===wi)return;let fr=(Qe.x===Fe?0:2)|Number(Qe.y&xt),Pr=st;return T&&p(st)&&(Pr=g(st),fr^=1),new m(Fe,Pr,fr)}return{seed:te,k2sig:ce}}const V={lowS:t.lowS,prehash:!1},F={lowS:t.lowS,prehash:!1};function $(w,S,P=V){const{seed:R,k2sig:A}=j(w,S,P),T=t;return OU(T.hash.outputLen,T.nByteLength,T.hmac)(R,A)}l.BASE._setWindowSize(8);function L(w,S,P,R=F){var fr;const A=w;S=er("msgHash",S),P=er("publicKey",P);const{lowS:T,prehash:M,format:z}=R;if(_b(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const Q=typeof A=="string"||Xu(A),K=!Q&&!z&&typeof A=="object"&&A!==null&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!Q&&!K)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,te;try{if(K&&(G=new m(A.r,A.s)),Q){try{z!=="compact"&&(G=m.fromDER(A))}catch(Pr){if(!(Pr instanceof gi.Err))throw Pr}!G&&z!=="der"&&(G=m.fromCompact(A))}te=l.fromHex(P)}catch{return!1}if(!G||T&&G.hasHighS())return!1;M&&(S=t.hash(S));const{r:ie,s:ce}=G,se=N(S),le=u(ce),Le=c(se*le),Qe=c(ie*le),Fe=(fr=l.BASE.multiplyAndAddUnsafe(te,Le,Qe))==null?void 0:fr.toAffine();return Fe?c(Fe.x)===ie:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:O,sign:$,verify:L,ProjectivePoint:l,Signature:m,utils:_}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P5(e){return{hash:e,hmac:(t,...n)=>m3(e,t,eU(...n)),randomBytes:tU}}function k5(e,t){const n=r=>T5({...e,...P5(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const T3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Sb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),C5=BigInt(0),D5=BigInt(1),My=BigInt(2),Ib=(e,t)=>(e+t/My)/t;function N5(e){const t=T3,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,f=Yn(l,n,t)*l%t,d=Yn(f,n,t)*l%t,h=Yn(d,My,t)*u%t,p=Yn(h,i,t)*h%t,g=Yn(p,s,t)*p%t,v=Yn(g,a,t)*g%t,m=Yn(v,c,t)*v%t,_=Yn(m,a,t)*g%t,E=Yn(_,n,t)*l%t,I=Yn(E,o,t)*p%t,O=Yn(I,r,t)*u%t,C=Yn(O,My,t);if(!jy.eql(jy.sqr(C),e))throw new Error("Cannot find square root");return C}const jy=aw(T3,void 0,void 0,{sqrt:N5}),$5=k5({a:C5,b:BigInt(7),Fp:jy,n:Sb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Sb,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-D5*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Ib(s*e,t),c=Ib(-r*e,t);let u=mn(e-a*n-c*i,t),l=mn(-a*r-c*s,t);const f=u>o,d=l>o;if(f&&(u=t-u),d&&(l=t-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:d,k2:l}}}},IU);function B5(e){if(e.length!==130&&e.length!==132)throw new L5({signature:e});const t=BigInt(hi(e,0,32)),n=BigInt(hi(e,32,64)),r=(()=>{const i=+`0x${e.slice(130)}`;if(!Number.isNaN(i))try{return U5(i)}catch{throw new F5({value:i})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function U5(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new M5({value:e})}class L5 extends We{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${xs(ow(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class F5 extends We{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class M5 extends We{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P3(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function k3(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function vd(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Qu(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function bd(e){if(!Array.isArray(e))throw new Error("array expected")}function Ed(e,t){if(!k3(!0,t))throw new Error(`${e}: array of strings expected`)}function C3(e,t){if(!k3(!1,t))throw new Error(`${e}: array of numbers expected`)}function D3(...e){const t=s=>s,n=(s,o)=>a=>s(o(a)),r=e.map(s=>s.encode).reduceRight(n,t),i=e.map(s=>s.decode).reduce(n,t);return{encode:r,decode:i}}function N3(e){const t=typeof e=="string"?e.split(""):e,n=t.length;Ed("alphabet",t);const r=new Map(t.map((i,s)=>[i,s]));return{encode:i=>(bd(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${e}`);return t[s]})),decode:i=>(bd(i),i.map(s=>{vd("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${e}`);return o}))}}function $3(e=""){return vd("join",e),{encode:t=>(Ed("join.decode",t),t.join(e)),decode:t=>(vd("join.decode",t),t.split(e))}}function j5(e,t="="){return Qu(e),vd("padding",t),{encode(n){for(Ed("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){Ed("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function xb(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(bd(e),!e.length)return[];let r=0;const i=[],s=Array.from(e,a=>{if(Qu(a),a<0||a>=t)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,c=!0;for(let u=r;u<o;u++){const l=s[u],f=t*a,d=f+l;if(!Number.isSafeInteger(d)||f/t!==a||d-l!==f)throw new Error("convertRadix: carry overflow");const h=d/n;a=d%n;const p=Math.floor(h);if(s[u]=p,!Number.isSafeInteger(p)||p*n+a!==d)throw new Error("convertRadix: carry overflow");if(c)p?c=!1:r=u;else continue}if(i.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}const B3=(e,t)=>t===0?e:B3(t,e%t),_d=(e,t)=>e+(t-B3(e,t)),Lp=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Ab(e,t,n,r){if(bd(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(_d(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${_d(t,n)}`);let i=0,s=0;const o=Lp[t],a=Lp[n]-1,c=[];for(const u of e){if(Qu(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&a)>>>0);const l=Lp[s];if(l===void 0)throw new Error("invalid carry");i&=l-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function z5(e){Qu(e);const t=2**8;return{encode:n=>{if(!P3(n))throw new Error("radix.encode input should be Uint8Array");return xb(Array.from(n),t,e)},decode:n=>(C3("radix.decode",n),Uint8Array.from(xb(n,e,t)))}}function H5(e,t=!1){if(Qu(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(_d(8,e)>32||_d(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!P3(n))throw new Error("radix2.encode input should be Uint8Array");return Ab(Array.from(n),8,e,!t)},decode:n=>(C3("radix2.decode",n),Uint8Array.from(Ab(n,e,8,t)))}}const q5=D3(H5(5),N3("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),j5(5),$3("")),V5=e=>D3(z5(58),N3(e),$3("")),Ju=V5("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function K5(e){return u5(W5(e))}function W5(e){const{payload:t,signature:n}=e,{r,s:i,yParity:s}=n,a=new $5.Signature(BigInt(r),BigInt(i)).addRecoveryBit(s).recoverPublicKey(ow(t).substring(2));return e5(a)}function G5(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if(i&4294967168)if(!(i&4294965248))n+=2;else{if(i>=55296&&i<=56319&&r<t){const s=e.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}i&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Y5(e,t,n){const r=e.length;let i=n,s=0;for(;s<r;){let o=e.charCodeAt(s++);if(o&4294967168)if(!(o&4294965248))t[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){const a=e.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(t[i++]=o>>18&7|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128):(t[i++]=o>>12&15|224,t[i++]=o>>6&63|128)}else{t[i++]=o;continue}t[i++]=o&63|128}}const X5=new TextEncoder,Z5=50;function Q5(e,t,n){X5.encodeInto(e,t.subarray(n))}function J5(e,t,n){e.length>Z5?Q5(e,t,n):Y5(e,t,n)}const eL=4096;function U3(e,t,n){let r=t;const i=r+n,s=[];let o="";for(;r<i;){const a=e[r++];if(!(a&128))s.push(a);else if((a&224)===192){const c=e[r++]&63;s.push((a&31)<<6|c)}else if((a&240)===224){const c=e[r++]&63,u=e[r++]&63;s.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=e[r++]&63,u=e[r++]&63,l=e[r++]&63;let f=(a&7)<<18|c<<12|u<<6|l;f>65535&&(f-=65536,s.push(f>>>10&1023|55296),f=56320|f&1023),s.push(f)}else s.push(a);s.length>=eL&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const tL=new TextDecoder,nL=200;function rL(e,t,n){const r=e.subarray(t,t+n);return tL.decode(r)}function iL(e,t,n){return n>nL?rL(e,t,n):U3(e,t,n)}class Ll{constructor(t,n){oe(this,"type");oe(this,"data");this.type=t,this.data=n}}class Ln extends Error{constructor(t){super(t);const n=Object.create(Ln.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ln.name})}}const bc=4294967295;function sL(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function L3(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function F3(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function oL(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const aL=-1,cL=4294967296-1,uL=17179869184-1;function lL({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=uL)if(t===0&&e<=cL){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,t<<2|n&3),s.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),L3(r,4,e),n}}function fL(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function dL(e){if(e instanceof Date){const t=fL(e);return lL(t)}else return null}function hL(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,s=n>>>2;return{sec:i,nsec:s}}case 12:{const n=F3(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new Ln(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function pL(e){const t=hL(e);return new Date(t.sec*1e3+t.nsec/1e6)}const gL={type:aL,encode:dL,decode:pL},Ud=class Ud{constructor(){oe(this,"__brand");oe(this,"builtInEncoders",[]);oe(this,"builtInDecoders",[]);oe(this,"encoders",[]);oe(this,"decoders",[]);this.register(gL)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(t,n);if(s!=null){const o=-1-r;return new Ll(o,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(t,n);if(s!=null){const o=r;return new Ll(o,s)}}}return t instanceof Ll?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new Ll(n,t)}};oe(Ud,"defaultCodec",new Ud);let Sd=Ud;function yL(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function zy(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):yL(e)?new Uint8Array(e):Uint8Array.from(e)}const mL=100,wL=2048;let vL=class M3{constructor(t){oe(this,"extensionCodec");oe(this,"context");oe(this,"useBigInt64");oe(this,"maxDepth");oe(this,"initialBufferSize");oe(this,"sortKeys");oe(this,"forceFloat32");oe(this,"ignoreUndefined");oe(this,"forceIntegerToFloat");oe(this,"pos");oe(this,"view");oe(this,"bytes");oe(this,"entered",!1);this.extensionCodec=(t==null?void 0:t.extensionCodec)??Sd.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(t==null?void 0:t.useBigInt64)??!1,this.maxDepth=(t==null?void 0:t.maxDepth)??mL,this.initialBufferSize=(t==null?void 0:t.initialBufferSize)??wL,this.sortKeys=(t==null?void 0:t.sortKeys)??!1,this.forceFloat32=(t==null?void 0:t.forceFloat32)??!1,this.ignoreUndefined=(t==null?void 0:t.ignoreUndefined)??!1,this.forceIntegerToFloat=(t==null?void 0:t.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new M3({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=G5(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),J5(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=zy(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of r){const o=t[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),sL(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),L3(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function bL(e,t){return new vL(t).encodeSharedRef(e)}function Fp(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const EL=16,_L=16;class SL{constructor(t=EL,n=_L){oe(this,"hit",0);oe(this,"miss",0);oe(this,"caches");oe(this,"maxKeyLength");oe(this,"maxLengthPerKey");this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<r;a++)if(o[a]!==t[n+a])continue e;return s.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const s=U3(t,n,r),o=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(o,s),s}}const Hy="array",eu="map_key",j3="map_value",IL=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Ln("The type of key must be string or number but "+typeof e)};class xL{constructor(){oe(this,"stack",[]);oe(this,"stackHeadPosition",-1)}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Hy,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=eu,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Hy){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===eu||t.type===j3){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ec=-1,cw=new DataView(new ArrayBuffer(0)),AL=new Uint8Array(cw.buffer);try{cw.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Ob=new RangeError("Insufficient data"),OL=new SL;let RL=class z3{constructor(t){oe(this,"extensionCodec");oe(this,"context");oe(this,"useBigInt64");oe(this,"rawStrings");oe(this,"maxStrLength");oe(this,"maxBinLength");oe(this,"maxArrayLength");oe(this,"maxMapLength");oe(this,"maxExtLength");oe(this,"keyDecoder");oe(this,"mapKeyConverter");oe(this,"totalPos",0);oe(this,"pos",0);oe(this,"view",cw);oe(this,"bytes",AL);oe(this,"headByte",Ec);oe(this,"stack",new xL);oe(this,"entered",!1);this.extensionCodec=(t==null?void 0:t.extensionCodec)??Sd.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(t==null?void 0:t.useBigInt64)??!1,this.rawStrings=(t==null?void 0:t.rawStrings)??!1,this.maxStrLength=(t==null?void 0:t.maxStrLength)??bc,this.maxBinLength=(t==null?void 0:t.maxBinLength)??bc,this.maxArrayLength=(t==null?void 0:t.maxArrayLength)??bc,this.maxMapLength=(t==null?void 0:t.maxMapLength)??bc,this.maxExtLength=(t==null?void 0:t.maxExtLength)??bc,this.keyDecoder=(t==null?void 0:t.keyDecoder)!==void 0?t.keyDecoder:OL,this.mapKeyConverter=(t==null?void 0:t.mapKeyConverter)??IL}clone(){return new z3({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ec,this.stack.reset()}setBuffer(t){const n=zy(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Ec&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=zy(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const a of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Fp(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const s of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Ln(`Unrecognized type byte: ${Fp(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Hy)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===eu){if(n==="__proto__")throw new Ln("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=j3;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=eu;continue e}}return n}}readHeadByte(){return this.headByte===Ec&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ec}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ln(`Unrecognized array type byte: ${Fp(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ln(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ln(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){var s;if(t>this.maxStrLength)throw new Ln(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw Ob;const r=this.pos+n;let i;return this.stateIsMapKey()&&((s=this.keyDecoder)!=null&&s.canBeCached(t))?i=this.keyDecoder.decode(this.bytes,r,t):i=iL(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===eu:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Ln(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw Ob;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new Ln(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=oL(this.view,this.pos);return this.pos+=8,t}readI64(){const t=F3(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function TL(e,t){return new RL(t).decode(e)}const PL=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),kL=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function So(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return kL(e)}catch{return e}}function Io(e){return typeof e=="string"?e:PL(e)||""}function CL(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function H3(e,...t){if(!CL(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Rb(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function DL(e,t){H3(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Go=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mp=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function NL(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function q3(e){return typeof e=="string"&&(e=NL(e)),H3(e),e}let $L=class{clone(){return this._cloneInto()}};function BL(e){const t=r=>e().update(q3(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function V3(e=32){if(Go&&typeof Go.getRandomValues=="function")return Go.getRandomValues(new Uint8Array(e));if(Go&&typeof Go.randomBytes=="function")return Go.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function UL(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}let LL=class extends $L{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mp(this.buffer)}update(t){Rb(this);const{view:n,buffer:r,blockLen:i}=this;t=q3(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Mp(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Rb(this),DL(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;UL(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Mp(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};const Fl=BigInt(2**32-1),qy=BigInt(32);function K3(e,t=!1){return t?{h:Number(e&Fl),l:Number(e>>qy&Fl)}:{h:Number(e>>qy&Fl)|0,l:Number(e&Fl)|0}}function FL(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=K3(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const ML=(e,t)=>BigInt(e>>>0)<<qy|BigInt(t>>>0),jL=(e,t,n)=>e>>>n,zL=(e,t,n)=>e<<32-n|t>>>n,HL=(e,t,n)=>e>>>n|t<<32-n,qL=(e,t,n)=>e<<32-n|t>>>n,VL=(e,t,n)=>e<<64-n|t>>>n-32,KL=(e,t,n)=>e>>>n-32|t<<64-n,WL=(e,t)=>t,GL=(e,t)=>e,YL=(e,t,n)=>e<<n|t>>>32-n,XL=(e,t,n)=>t<<n|e>>>32-n,ZL=(e,t,n)=>t<<n-32|e>>>64-n,QL=(e,t,n)=>e<<n-32|t>>>64-n;function JL(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const eF=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),tF=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,nF=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),rF=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,iF=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),sF=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,fe={fromBig:K3,split:FL,toBig:ML,shrSH:jL,shrSL:zL,rotrSH:HL,rotrSL:qL,rotrBH:VL,rotrBL:KL,rotr32H:WL,rotr32L:GL,rotlSH:YL,rotlSL:XL,rotlBH:ZL,rotlBL:QL,add:JL,add3L:eF,add3H:tF,add4L:nF,add4H:rF,add5H:sF,add5L:iF},[oF,aF]=fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Fi=new Uint32Array(80),Mi=new Uint32Array(80);let cF=class extends LL{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:f,Fl:d,Gh:h,Gl:p,Hh:g,Hl:v}=this;return[t,n,r,i,s,o,a,c,u,l,f,d,h,p,g,v]}set(t,n,r,i,s,o,a,c,u,l,f,d,h,p,g,v){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=v|0}process(t,n){for(let E=0;E<16;E++,n+=4)Fi[E]=t.getUint32(n),Mi[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const I=Fi[E-15]|0,O=Mi[E-15]|0,C=fe.rotrSH(I,O,1)^fe.rotrSH(I,O,8)^fe.shrSH(I,O,7),N=fe.rotrSL(I,O,1)^fe.rotrSL(I,O,8)^fe.shrSL(I,O,7),B=Fi[E-2]|0,D=Mi[E-2]|0,j=fe.rotrSH(B,D,19)^fe.rotrBH(B,D,61)^fe.shrSH(B,D,6),V=fe.rotrSL(B,D,19)^fe.rotrBL(B,D,61)^fe.shrSL(B,D,6),F=fe.add4L(N,V,Mi[E-7],Mi[E-16]),$=fe.add4H(F,C,j,Fi[E-7],Fi[E-16]);Fi[E]=$|0,Mi[E]=F|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:h,Fl:p,Gh:g,Gl:v,Hh:m,Hl:_}=this;for(let E=0;E<80;E++){const I=fe.rotrSH(f,d,14)^fe.rotrSH(f,d,18)^fe.rotrBH(f,d,41),O=fe.rotrSL(f,d,14)^fe.rotrSL(f,d,18)^fe.rotrBL(f,d,41),C=f&h^~f&g,N=d&p^~d&v,B=fe.add5L(_,O,N,aF[E],Mi[E]),D=fe.add5H(B,m,I,C,oF[E],Fi[E]),j=B|0,V=fe.rotrSH(r,i,28)^fe.rotrBH(r,i,34)^fe.rotrBH(r,i,39),F=fe.rotrSL(r,i,28)^fe.rotrBL(r,i,34)^fe.rotrBL(r,i,39),$=r&s^r&a^s&a,L=i&o^i&c^o&c;m=g|0,_=v|0,g=h|0,v=p|0,h=f|0,p=d|0,{h:f,l:d}=fe.add(u|0,l|0,D|0,j|0),u=a|0,l=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const w=fe.add3L(j,F,L);r=fe.add3H(w,D,V,$),i=w|0}({h:r,l:i}=fe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=fe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=fe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=fe.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:d}=fe.add(this.Eh|0,this.El|0,f|0,d|0),{h,l:p}=fe.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:v}=fe.add(this.Gh|0,this.Gl|0,g|0,v|0),{h:m,l:_}=fe.add(this.Hh|0,this.Hl|0,m|0,_|0),this.set(r,i,s,o,a,c,u,l,f,d,h,p,g,v,m,_)}roundClean(){Fi.fill(0),Mi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const uF=BL(()=>new cF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uw=BigInt(0),W3=BigInt(1),lF=BigInt(2);function lw(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function fw(e){if(!lw(e))throw new Error("Uint8Array expected")}function jp(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const fF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function dw(e){fw(e);let t="";for(let n=0;n<e.length;n++)t+=fF[e[n]];return t}function G3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?uw:BigInt("0x"+e)}const si={_0:48,_9:57,A:65,F:70,a:97,f:102};function Tb(e){if(e>=si._0&&e<=si._9)return e-si._0;if(e>=si.A&&e<=si.F)return e-(si.A-10);if(e>=si.a&&e<=si.f)return e-(si.a-10)}function Y3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Tb(e.charCodeAt(s)),a=Tb(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function dF(e){return G3(dw(e))}function kf(e){return fw(e),G3(dw(Uint8Array.from(e).reverse()))}function X3(e,t){return Y3(e.toString(16).padStart(t*2,"0"))}function Vy(e,t){return X3(e,t).reverse()}function oi(e,t,n){let r;if(typeof t=="string")try{r=Y3(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(lw(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function Pb(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];fw(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}const zp=e=>typeof e=="bigint"&&uw<=e;function hF(e,t,n){return zp(e)&&zp(t)&&zp(n)&&t<=e&&e<n}function _c(e,t,n,r){if(!hF(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function pF(e){let t;for(t=0;e>uw;e>>=W3,t+=1);return t}const gF=e=>(lF<<BigInt(e-1))-W3,yF={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||lw(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function hw(e,t,n={}){const r=(i,s,o)=>{const a=yF[s];if(typeof a!="function")throw new Error("invalid validator function");const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}function kb(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e(n,...r);return t.set(n,s),s}}const Rt=BigInt(0),ct=BigInt(1),Zs=BigInt(2),mF=BigInt(3),Ky=BigInt(4),Cb=BigInt(5),Db=BigInt(8);function vt(e,t){const n=e%t;return n>=Rt?n:t+n}function wF(e,t,n){if(t<Rt)throw new Error("invalid exponent, negatives unsupported");if(n<=Rt)throw new Error("invalid modulus");if(n===ct)return Rt;let r=ct;for(;t>Rt;)t&ct&&(r=r*e%n),e=e*e%n,t>>=ct;return r}function Dr(e,t,n){let r=e;for(;t-- >Rt;)r*=r,r%=n;return r}function Nb(e,t){if(e===Rt)throw new Error("invert: expected non-zero number");if(t<=Rt)throw new Error("invert: expected positive modulus, got "+t);let n=vt(e,t),r=t,i=Rt,s=ct;for(;n!==Rt;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==ct)throw new Error("invert: does not exist");return vt(i,t)}function vF(e){const t=(e-ct)/Zs;let n,r,i;for(n=e-ct,r=0;n%Zs===Rt;n/=Zs,r++);for(i=Zs;i<e&&wF(i,t,e)!==e-ct;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(e+ct)/Ky;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+ct)/Zs;return function(o,a){if(o.pow(a,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,i),n),l=o.pow(a,s),f=o.pow(a,n);for(;!o.eql(f,o.ONE);){if(o.eql(f,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(f);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const h=o.pow(u,ct<<BigInt(c-d-1));u=o.sqr(h),l=o.mul(l,h),f=o.mul(f,u),c=d}return l}}function bF(e){if(e%Ky===mF){const t=(e+ct)/Ky;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%Db===Cb){const t=(e-Cb)/Db;return function(n,r){const i=n.mul(r,Zs),s=n.pow(i,t),o=n.mul(r,s),a=n.mul(n.mul(o,Zs),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return vF(e)}const EF=(e,t)=>(vt(e,t)&ct)===ct,_F=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SF(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=_F.reduce((r,i)=>(r[i]="function",r),t);return hw(e,n)}function IF(e,t,n){if(n<Rt)throw new Error("invalid exponent, negatives unsupported");if(n===Rt)return e.ONE;if(n===ct)return t;let r=e.ONE,i=t;for(;n>Rt;)n&ct&&(r=e.mul(r,i)),i=e.sqr(i),n>>=ct;return r}function xF(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function Z3(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Q3(e,t,n=!1,r={}){if(e<=Rt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Z3(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:gF(i),ZERO:Rt,ONE:ct,create:c=>vt(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Rt<=c&&c<e},is0:c=>c===Rt,isOdd:c=>(c&ct)===ct,neg:c=>vt(-c,e),eql:(c,u)=>c===u,sqr:c=>vt(c*c,e),add:(c,u)=>vt(c+u,e),sub:(c,u)=>vt(c-u,e),mul:(c,u)=>vt(c*u,e),pow:(c,u)=>IF(a,c,u),div:(c,u)=>vt(c*Nb(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Nb(c,e),sqrt:r.sqrt||(c=>(o||(o=bF(e)),o(a,c))),invertBatch:c=>xF(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?Vy(c,s):X3(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?kf(c):dF(c)}});return Object.freeze(a)}const $b=BigInt(0),Ml=BigInt(1);function Hp(e,t){const n=t.negate();return e?n:t}function J3(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function qp(e,t){J3(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function AF(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function OF(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Vp=new WeakMap,eO=new WeakMap;function Kp(e){return eO.get(e)||1}function RF(e,t){return{constTimeNegate:Hp,hasPrecomputes(n){return Kp(n)!==1},unsafeLadder(n,r,i=e.ZERO){let s=n;for(;r>$b;)r&Ml&&(i=i.add(s)),s=s.double(),r>>=Ml;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=qp(r,t),o=[];let a=n,c=a;for(let u=0;u<i;u++){c=a,o.push(c);for(let l=1;l<s;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=qp(n,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**n-1),l=2**n,f=BigInt(n);for(let d=0;d<s;d++){const h=d*o;let p=Number(i&u);i>>=f,p>o&&(p-=l,i+=Ml);const g=h,v=h+Math.abs(p)-1,m=d%2!==0,_=p<0;p===0?c=c.add(Hp(m,r[g])):a=a.add(Hp(_,r[v]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=e.ZERO){const{windows:o,windowSize:a}=qp(n,t),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let f=0;f<o;f++){const d=f*a;if(i===$b)break;let h=Number(i&c);if(i>>=l,h>a&&(h-=u,i+=Ml),h===0)continue;let p=r[d+Math.abs(h)-1];h<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=Vp.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&Vp.set(r,i(s))),s},wNAFCached(n,r,i){const s=Kp(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Kp(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){J3(r,t),eO.set(n,r),Vp.delete(n)}}}function TF(e,t,n,r){if(AF(n,e),OF(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=pF(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),u=Math.floor((t.BITS-1)/o)*o;let l=i;for(let f=u;f>=0;f-=o){c.fill(i);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(f)&BigInt(a));c[g]=c[g].add(n[h])}let d=i;for(let h=c.length-1,p=i;h>0;h--)p=p.add(c[h]),d=d.add(p);if(l=l.add(d),f!==0)for(let h=0;h<o;h++)l=l.double()}return l}function PF(e){return SF(e.Fp),hw(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Z3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const pr=BigInt(0),dn=BigInt(1),jl=BigInt(2),kF=BigInt(8),CF={zip215:!0};function DF(e){const t=PF(e);return hw(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function NF(e){const t=DF(e),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,u=jl<<BigInt(a*8)-dn,l=n.create,f=Q3(t.n,t.nBitLength),d=t.uvRatio||((w,S)=>{try{return{isValid:!0,value:n.sqrt(w*n.inv(S))}}catch{return{isValid:!1,value:pr}}}),h=t.adjustScalarBytes||(w=>w),p=t.domain||((w,S,P)=>{if(jp("phflag",P),S.length||P)throw new Error("Contexts/pre-hash are not supported");return w});function g(w,S){_c("coordinate "+w,S,pr,u)}function v(w){if(!(w instanceof E))throw new Error("ExtendedPoint expected")}const m=kb((w,S)=>{const{ex:P,ey:R,ez:A}=w,T=w.is0();S==null&&(S=T?kF:n.inv(A));const M=l(P*S),z=l(R*S),Q=l(A*S);if(T)return{x:pr,y:dn};if(Q!==dn)throw new Error("invZ was invalid");return{x:M,y:z}}),_=kb(w=>{const{a:S,d:P}=t;if(w.is0())throw new Error("bad point: ZERO");const{ex:R,ey:A,ez:T,et:M}=w,z=l(R*R),Q=l(A*A),K=l(T*T),G=l(K*K),te=l(z*S),ie=l(K*l(te+Q)),ce=l(G+l(P*l(z*Q)));if(ie!==ce)throw new Error("bad point: equation left != right (1)");const se=l(R*A),le=l(T*M);if(se!==le)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(S,P,R,A){this.ex=S,this.ey=P,this.ez=R,this.et=A,g("x",S),g("y",P),g("z",R),g("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof E)throw new Error("extended point not allowed");const{x:P,y:R}=S||{};return g("x",P),g("y",R),new E(P,R,dn,l(P*R))}static normalizeZ(S){const P=n.invertBatch(S.map(R=>R.ez));return S.map((R,A)=>R.toAffine(P[A])).map(E.fromAffine)}static msm(S,P){return TF(E,f,S,P)}_setWindowSize(S){C.setWindowSize(this,S)}assertValidity(){_(this)}equals(S){v(S);const{ex:P,ey:R,ez:A}=this,{ex:T,ey:M,ez:z}=S,Q=l(P*z),K=l(T*A),G=l(R*z),te=l(M*A);return Q===K&&G===te}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:S}=t,{ex:P,ey:R,ez:A}=this,T=l(P*P),M=l(R*R),z=l(jl*l(A*A)),Q=l(S*T),K=P+R,G=l(l(K*K)-T-M),te=Q+M,ie=te-z,ce=Q-M,se=l(G*ie),le=l(te*ce),Le=l(G*ce),Qe=l(ie*te);return new E(se,le,Qe,Le)}add(S){v(S);const{a:P,d:R}=t,{ex:A,ey:T,ez:M,et:z}=this,{ex:Q,ey:K,ez:G,et:te}=S;if(P===BigInt(-1)){const ll=l((T-A)*(K+Q)),oc=l((T+A)*(K-Q)),$i=l(oc-ll);if($i===pr)return this.double();const Cn=l(M*jl*te),Fo=l(z*jl*G),fl=Fo+Cn,dr=oc+ll,dl=Fo-Cn,x=l(fl*$i),y=l(dr*dl),b=l(fl*dl),k=l($i*dr);return new E(x,y,k,b)}const ie=l(A*Q),ce=l(T*K),se=l(z*R*te),le=l(M*G),Le=l((A+T)*(Q+K)-ie-ce),Qe=le-se,Fe=le+se,st=l(ce-P*ie),fr=l(Le*Qe),Pr=l(Fe*st),sc=l(Le*st),jh=l(Qe*Fe);return new E(fr,Pr,jh,sc)}subtract(S){return this.add(S.negate())}wNAF(S){return C.wNAFCached(this,S,E.normalizeZ)}multiply(S){const P=S;_c("scalar",P,dn,r);const{p:R,f:A}=this.wNAF(P);return E.normalizeZ([R,A])[0]}multiplyUnsafe(S,P=E.ZERO){const R=S;return _c("scalar",R,pr,r),R===pr?O:this.is0()||R===dn?this:C.wNAFCachedUnsafe(this,R,E.normalizeZ,P)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,r).is0()}toAffine(S){return m(this,S)}clearCofactor(){const{h:S}=t;return S===dn?this:this.multiplyUnsafe(S)}static fromHex(S,P=!1){const{d:R,a:A}=t,T=n.BYTES;S=oi("pointHex",S,T),jp("zip215",P);const M=S.slice(),z=S[T-1];M[T-1]=z&-129;const Q=kf(M),K=P?u:n.ORDER;_c("pointHex.y",Q,pr,K);const G=l(Q*Q),te=l(G-dn),ie=l(R*G-A);let{isValid:ce,value:se}=d(te,ie);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const le=(se&dn)===dn,Le=(z&128)!==0;if(!P&&se===pr&&Le)throw new Error("Point.fromHex: x=0 and x_0=1");return Le!==le&&(se=l(-se)),E.fromAffine({x:se,y:Q})}static fromPrivateKey(S){return D(S).point}toRawBytes(){const{x:S,y:P}=this.toAffine(),R=Vy(P,n.BYTES);return R[R.length-1]|=S&dn?128:0,R}toHex(){return dw(this.toRawBytes())}}E.BASE=new E(t.Gx,t.Gy,dn,l(t.Gx*t.Gy)),E.ZERO=new E(pr,dn,dn,pr);const{BASE:I,ZERO:O}=E,C=RF(E,a*8);function N(w){return vt(w,r)}function B(w){return N(kf(w))}function D(w){const S=n.BYTES;w=oi("private key",w,S);const P=oi("hashed private key",s(w),2*S),R=h(P.slice(0,S)),A=P.slice(S,2*S),T=B(R),M=I.multiply(T),z=M.toRawBytes();return{head:R,prefix:A,scalar:T,point:M,pointBytes:z}}function j(w){return D(w).pointBytes}function V(w=new Uint8Array,...S){const P=Pb(...S);return B(s(p(P,oi("context",w),!!i)))}function F(w,S,P={}){w=oi("message",w),i&&(w=i(w));const{prefix:R,scalar:A,pointBytes:T}=D(S),M=V(P.context,R,w),z=I.multiply(M).toRawBytes(),Q=V(P.context,z,T,w),K=N(M+Q*A);_c("signature.s",K,pr,r);const G=Pb(z,Vy(K,n.BYTES));return oi("result",G,n.BYTES*2)}const $=CF;function L(w,S,P,R=$){const{context:A,zip215:T}=R,M=n.BYTES;w=oi("signature",w,2*M),S=oi("message",S),P=oi("publicKey",P,M),T!==void 0&&jp("zip215",T),i&&(S=i(S));const z=kf(w.slice(M,2*M));let Q,K,G;try{Q=E.fromHex(P,T),K=E.fromHex(w.slice(0,M),T),G=I.multiplyUnsafe(z)}catch{return!1}if(!T&&Q.isSmallOrder())return!1;const te=V(A,K.toRawBytes(),Q.toRawBytes(),S);return K.add(Q.multiplyUnsafe(te)).subtract(G).clearCofactor().equals(E.ZERO)}return I._setWindowSize(8),{CURVE:t,getPublicKey:j,sign:F,verify:L,ExtendedPoint:E,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>o(n.BYTES),precompute(w=8,S=E.BASE){return S._setWindowSize(w),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const pw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Bb=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const $F=BigInt(1),Ub=BigInt(2);BigInt(3);const BF=BigInt(5),UF=BigInt(8);function LF(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=pw,o=e*e%s*e%s,a=Dr(o,Ub,s)*o%s,c=Dr(a,$F,s)*e%s,u=Dr(c,BF,s)*c%s,l=Dr(u,t,s)*u%s,f=Dr(l,n,s)*l%s,d=Dr(f,r,s)*f%s,h=Dr(d,i,s)*d%s,p=Dr(h,i,s)*d%s,g=Dr(p,t,s)*u%s;return{pow_p_5_8:Dr(g,Ub,s)*e%s,b2:o}}function FF(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function MF(e,t){const n=pw,r=vt(t*t*t,n),i=vt(r*r*t,n),s=LF(e*i).pow_p_5_8;let o=vt(e*r*s,n);const a=vt(t*o*o,n),c=o,u=vt(o*Bb,n),l=a===e,f=a===vt(-e,n),d=a===vt(-e*Bb,n);return l&&(o=c),(f||d)&&(o=u),EF(o,n)&&(o=vt(-o,n)),{isValid:l||f,value:o}}const jF=Q3(pw,void 0,!0),zF={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:jF,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:UF,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:uF,randomBytes:V3,adjustScalarBytes:FF,uvRatio:MF},tO=NF(zF),HF="EdDSA",qF="JWT",Id=".",vh="base64url",nO="utf8",rO="utf8",VF=":",KF="did",WF="key",Lb="base58btc",GF="z",YF="K36",XF=32;function gw(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function iO(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function sO(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const n=iO(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return gw(n)}function ZF(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,_=p.length;m!==_&&p[m]===0;)m++,g++;for(var E=(_-m)*l+1>>>0,I=new Uint8Array(E);m!==_;){for(var O=p[m],C=0,N=E-1;(O!==0||C<v)&&N!==-1;N--,C++)O+=256*I[N]>>>0,I[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");v=C,m++}for(var B=E-v;B!==E&&I[B]===0;)B++;for(var D=c.repeat(g);B<E;++B)D+=e.charAt(I[B]);return D}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===c;)v++,g++;for(var _=(p.length-g)*u+1>>>0,E=new Uint8Array(_);p[g];){var I=n[p.charCodeAt(g)];if(I===255)return;for(var O=0,C=_-1;(I!==0||O<m)&&C!==-1;C--,O++)I+=a*E[C]>>>0,E[C]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");m=O,g++}if(p[g]!==" "){for(var N=_-m;N!==_&&E[N]===0;)N++;for(var B=new Uint8Array(v+(_-N)),D=v;N!==_;)B[D++]=E[N++];return B}}}function h(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:d,decode:h}}var QF=ZF,JF=QF;const oO=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},eM=e=>new TextEncoder().encode(e),tM=e=>new TextDecoder().decode(e);let nM=class{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},rM=class{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return aO(this,t)}},iM=class{constructor(t){this.decoders=t}or(t){return aO(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const aO=(e,t)=>new iM({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let sM=class{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new nM(t,n,r),this.decoder=new rM(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const bh=({name:e,prefix:t,encode:n,decode:r})=>new sM(e,t,n,r),el=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=JF(n,t);return bh({prefix:e,name:t,encode:r,decode:s=>oO(i(s))})},oM=(e,t,n,r)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const f=i[e[l]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|f,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},aM=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Mt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>bh({prefix:t,name:e,encode(i){return aM(i,r,n)},decode(i){return oM(i,r,n,e)}}),cM=bh({prefix:"\0",name:"identity",encode:e=>tM(e),decode:e=>eM(e)});var uM=Object.freeze({__proto__:null,identity:cM});const lM=Mt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fM=Object.freeze({__proto__:null,base2:lM});const dM=Mt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hM=Object.freeze({__proto__:null,base8:dM});const pM=el({prefix:"9",name:"base10",alphabet:"0123456789"});var gM=Object.freeze({__proto__:null,base10:pM});const yM=Mt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mM=Mt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var wM=Object.freeze({__proto__:null,base16:yM,base16upper:mM});const vM=Mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bM=Mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),EM=Mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_M=Mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SM=Mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),IM=Mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xM=Mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),AM=Mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),OM=Mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var RM=Object.freeze({__proto__:null,base32:vM,base32upper:bM,base32pad:EM,base32padupper:_M,base32hex:SM,base32hexupper:IM,base32hexpad:xM,base32hexpadupper:AM,base32z:OM});const TM=el({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),PM=el({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var kM=Object.freeze({__proto__:null,base36:TM,base36upper:PM});const CM=el({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DM=el({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var NM=Object.freeze({__proto__:null,base58btc:CM,base58flickr:DM});const $M=Mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),BM=Mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),UM=Mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),LM=Mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var FM=Object.freeze({__proto__:null,base64:$M,base64pad:BM,base64url:UM,base64urlpad:LM});const cO=Array.from(""),MM=cO.reduce((e,t,n)=>(e[n]=t,e),[]),jM=cO.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function zM(e){return e.reduce((t,n)=>(t+=MM[n],t),"")}function HM(e){const t=[];for(const n of e){const r=jM[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const qM=bh({prefix:"",name:"base256emoji",encode:zM,decode:HM});var VM=Object.freeze({__proto__:null,base256emoji:qM}),KM=uO,Fb=128,WM=-128,GM=Math.pow(2,31);function uO(e,t,n){t=t||[],n=n||0;for(var r=n;e>=GM;)t[n++]=e&255|Fb,e/=128;for(;e&WM;)t[n++]=e&255|Fb,e>>>=7;return t[n]=e|0,uO.bytes=n-r+1,t}var YM=Wy,XM=128,Mb=127;function Wy(e,r){var n=0,r=r||0,i=0,s=r,o,a=e.length;do{if(s>=a)throw Wy.bytes=0,new RangeError("Could not decode varint");o=e[s++],n+=i<28?(o&Mb)<<i:(o&Mb)*Math.pow(2,i),i+=7}while(o>=XM);return Wy.bytes=s-r,n}var ZM=Math.pow(2,7),QM=Math.pow(2,14),JM=Math.pow(2,21),ej=Math.pow(2,28),tj=Math.pow(2,35),nj=Math.pow(2,42),rj=Math.pow(2,49),ij=Math.pow(2,56),sj=Math.pow(2,63),oj=function(e){return e<ZM?1:e<QM?2:e<JM?3:e<ej?4:e<tj?5:e<nj?6:e<rj?7:e<ij?8:e<sj?9:10},aj={encode:KM,decode:YM,encodingLength:oj},lO=aj;const jb=(e,t,n=0)=>(lO.encode(e,t,n),t),zb=e=>lO.encodingLength(e),Gy=(e,t)=>{const n=t.byteLength,r=zb(e),i=r+zb(n),s=new Uint8Array(i+n);return jb(e,s,0),jb(n,s,r),s.set(t,i),new cj(e,n,t,s)};let cj=class{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}};const fO=({name:e,code:t,encode:n})=>new uj(e,t,n);let uj=class{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Gy(this.code,n):n.then(r=>Gy(this.code,r))}else throw Error("Unknown type, must be binary type")}};const dO=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),lj=fO({name:"sha2-256",code:18,encode:dO("SHA-256")}),fj=fO({name:"sha2-512",code:19,encode:dO("SHA-512")});var dj=Object.freeze({__proto__:null,sha256:lj,sha512:fj});const hO=0,hj="identity",pO=oO,pj=e=>Gy(hO,pO(e)),gj={code:hO,name:hj,encode:pO,digest:pj};var yj=Object.freeze({__proto__:null,identity:gj});new TextEncoder,new TextDecoder;const Hb={...uM,...fM,...hM,...gM,...wM,...RM,...kM,...NM,...FM,...VM};({...dj,...yj});function gO(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const qb=gO("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Wp=gO("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=iO(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),yO={utf8:qb,"utf-8":qb,hex:Hb.base16,latin1:Wp,ascii:Wp,binary:Wp,...Hb};function Eh(e,t="utf8"){const n=yO[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function nc(e,t="utf8"){const n=yO[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gw(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Vb(e){return So(Eh(nc(e,vh),nO))}function xd(e){return Eh(nc(Io(e),nO),vh)}function mO(e){const t=nc(YF,Lb),n=GF+Eh(sO([t,e]),Lb);return[KF,WF,n].join(VF)}function mj(e){return Eh(e,vh)}function wj(e){return nc(e,vh)}function vj(e){return nc([xd(e.header),xd(e.payload)].join(Id),rO)}function bj(e){return[xd(e.header),xd(e.payload),mj(e.signature)].join(Id)}function Yy(e){const t=e.split(Id),n=Vb(t[0]),r=Vb(t[1]),i=wj(t[2]),s=nc(t.slice(0,2).join(Id),rO);return{header:n,payload:r,signature:i,data:s}}function Kb(e=V3(XF)){const t=tO.getPublicKey(e);return{secretKey:sO([e,t]),publicKey:t}}async function Ej(e,t,n,r,i=Z.fromMiliseconds(Date.now())){const s={alg:HF,typ:qF},o=mO(r.publicKey),a=i+n,c={iss:o,sub:e,aud:t,iat:i,exp:a},u=vj({header:s,payload:c}),l=tO.sign(u,r.secretKey.slice(0,32));return bj({header:s,payload:c,signature:l})}function yw(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function wO(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yw(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function tu(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const n=wO(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return yw(n)}function _j(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,_=p.length;m!==_&&p[m]===0;)m++,g++;for(var E=(_-m)*l+1>>>0,I=new Uint8Array(E);m!==_;){for(var O=p[m],C=0,N=E-1;(O!==0||C<v)&&N!==-1;N--,C++)O+=256*I[N]>>>0,I[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");v=C,m++}for(var B=E-v;B!==E&&I[B]===0;)B++;for(var D=c.repeat(g);B<E;++B)D+=e.charAt(I[B]);return D}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===c;)v++,g++;for(var _=(p.length-g)*u+1>>>0,E=new Uint8Array(_);p[g];){var I=n[p.charCodeAt(g)];if(I===255)return;for(var O=0,C=_-1;(I!==0||O<m)&&C!==-1;C--,O++)I+=a*E[C]>>>0,E[C]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");m=O,g++}if(p[g]!==" "){for(var N=_-m;N!==_&&E[N]===0;)N++;for(var B=new Uint8Array(v+(_-N)),D=v;N!==_;)B[D++]=E[N++];return B}}}function h(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:d,decode:h}}var Sj=_j,Ij=Sj;const xj=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Aj=e=>new TextEncoder().encode(e),Oj=e=>new TextDecoder().decode(e);class Rj{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Tj{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return vO(this,t)}}class Pj{constructor(t){this.decoders=t}or(t){return vO(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vO=(e,t)=>new Pj({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class kj{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Rj(t,n,r),this.decoder=new Tj(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const _h=({name:e,prefix:t,encode:n,decode:r})=>new kj(e,t,n,r),tl=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Ij(n,t);return _h({prefix:e,name:t,encode:r,decode:s=>xj(i(s))})},Cj=(e,t,n,r)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const f=i[e[l]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|f,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Dj=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},jt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>_h({prefix:t,name:e,encode(i){return Dj(i,r,n)},decode(i){return Cj(i,r,n,e)}}),Nj=_h({prefix:"\0",name:"identity",encode:e=>Oj(e),decode:e=>Aj(e)}),$j=Object.freeze(Object.defineProperty({__proto__:null,identity:Nj},Symbol.toStringTag,{value:"Module"})),Bj=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Uj=Object.freeze(Object.defineProperty({__proto__:null,base2:Bj},Symbol.toStringTag,{value:"Module"})),Lj=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Fj=Object.freeze(Object.defineProperty({__proto__:null,base8:Lj},Symbol.toStringTag,{value:"Module"})),Mj=tl({prefix:"9",name:"base10",alphabet:"0123456789"}),jj=Object.freeze(Object.defineProperty({__proto__:null,base10:Mj},Symbol.toStringTag,{value:"Module"})),zj=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hj=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qj=Object.freeze(Object.defineProperty({__proto__:null,base16:zj,base16upper:Hj},Symbol.toStringTag,{value:"Module"})),Vj=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kj=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wj=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gj=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yj=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xj=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zj=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qj=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jj=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),e7=Object.freeze(Object.defineProperty({__proto__:null,base32:Vj,base32hex:Yj,base32hexpad:Zj,base32hexpadupper:Qj,base32hexupper:Xj,base32pad:Wj,base32padupper:Gj,base32upper:Kj,base32z:Jj},Symbol.toStringTag,{value:"Module"})),t7=tl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),n7=tl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),r7=Object.freeze(Object.defineProperty({__proto__:null,base36:t7,base36upper:n7},Symbol.toStringTag,{value:"Module"})),i7=tl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s7=tl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),o7=Object.freeze(Object.defineProperty({__proto__:null,base58btc:i7,base58flickr:s7},Symbol.toStringTag,{value:"Module"})),a7=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),c7=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),u7=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),l7=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),f7=Object.freeze(Object.defineProperty({__proto__:null,base64:a7,base64pad:c7,base64url:u7,base64urlpad:l7},Symbol.toStringTag,{value:"Module"})),bO=Array.from(""),d7=bO.reduce((e,t,n)=>(e[n]=t,e),[]),h7=bO.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function p7(e){return e.reduce((t,n)=>(t+=d7[n],t),"")}function g7(e){const t=[];for(const n of e){const r=h7[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const y7=_h({prefix:"",name:"base256emoji",encode:p7,decode:g7}),m7=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:y7},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Wb={...$j,...Uj,...Fj,...jj,...qj,...e7,...r7,...o7,...f7,...m7};function EO(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Gb=EO("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Gp=EO("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=wO(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),_O={utf8:Gb,"utf-8":Gb,hex:Wb.base16,latin1:Gp,ascii:Gp,binary:Gp,...Wb};function or(e,t="utf8"){const n=_O[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yw(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function On(e,t="utf8"){const n=_O[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const w7={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},v7="Input must be an string, Buffer or Uint8Array";function b7(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(v7);return t}function E7(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function zl(e){return(4294967296+e).toString(16).substring(1)}function _7(e,t,n){let r=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(n===32)r+=zl(t[i]).toUpperCase(),r+=" ",r+=zl(t[i+1]).toUpperCase();else if(n===64)r+=zl(t[i+1]).toUpperCase(),r+=zl(t[i]).toUpperCase();else throw new Error("Invalid size "+n);i%6===4?r+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)}function S7(e,t,n){let r=new Date().getTime();const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-r)+"ms"),r=s;for(let o=0;o<n;o++){const a=e(i),c=new Date().getTime(),u=c-r;r=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var SO={normalizeInput:b7,toHex:E7,debugPrint:_7,testSpeed:S7};const Cf=SO;function Hl(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function Yb(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let s=e[t+1]+r;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function IO(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function ji(e,t,n,r,i,s){const o=Fc[i],a=Fc[i+1],c=Fc[s],u=Fc[s+1];Hl(ue,e,t),Yb(ue,e,o,a);let l=ue[r]^ue[e],f=ue[r+1]^ue[e+1];ue[r]=f,ue[r+1]=l,Hl(ue,n,r),l=ue[t]^ue[n],f=ue[t+1]^ue[n+1],ue[t]=l>>>24^f<<8,ue[t+1]=f>>>24^l<<8,Hl(ue,e,t),Yb(ue,e,c,u),l=ue[r]^ue[e],f=ue[r+1]^ue[e+1],ue[r]=l>>>16^f<<16,ue[r+1]=f>>>16^l<<16,Hl(ue,n,r),l=ue[t]^ue[n],f=ue[t+1]^ue[n+1],ue[t]=f>>>31^l<<1,ue[t+1]=l>>>31^f<<1}const xO=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),I7=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Vt=new Uint8Array(I7.map(function(e){return e*2})),ue=new Uint32Array(32),Fc=new Uint32Array(32);function AO(e,t){let n=0;for(n=0;n<16;n++)ue[n]=e.h[n],ue[n+16]=xO[n];for(ue[24]=ue[24]^e.t,ue[25]=ue[25]^e.t/4294967296,t&&(ue[28]=~ue[28],ue[29]=~ue[29]),n=0;n<32;n++)Fc[n]=IO(e.b,4*n);for(n=0;n<12;n++)ji(0,8,16,24,Vt[n*16+0],Vt[n*16+1]),ji(2,10,18,26,Vt[n*16+2],Vt[n*16+3]),ji(4,12,20,28,Vt[n*16+4],Vt[n*16+5]),ji(6,14,22,30,Vt[n*16+6],Vt[n*16+7]),ji(0,10,20,30,Vt[n*16+8],Vt[n*16+9]),ji(2,12,22,24,Vt[n*16+10],Vt[n*16+11]),ji(4,14,16,26,Vt[n*16+12],Vt[n*16+13]),ji(6,8,18,28,Vt[n*16+14],Vt[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^ue[n]^ue[n+16]}const zi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function OO(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};zi.fill(0),zi[0]=e,t&&(zi[1]=t.length),zi[2]=1,zi[3]=1,n&&zi.set(n,32),r&&zi.set(r,48);for(let s=0;s<16;s++)i.h[s]=xO[s]^IO(zi,s*4);return t&&(mw(i,t),i.c=128),i}function mw(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,AO(e,!1),e.c=0),e.b[e.c++]=t[n]}function RO(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;AO(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function TO(e,t,n,r,i){n=n||64,e=Cf.normalizeInput(e),r&&(r=Cf.normalizeInput(r)),i&&(i=Cf.normalizeInput(i));const s=OO(n,t,r,i);return mw(s,e),RO(s)}function x7(e,t,n,r,i){const s=TO(e,t,n,r,i);return Cf.toHex(s)}var A7={blake2b:TO,blake2bHex:x7,blake2bInit:OO,blake2bUpdate:mw,blake2bFinal:RO};const PO=SO;function O7(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Hi(e,t,n,r,i,s){Ee[e]=Ee[e]+Ee[t]+i,Ee[r]=ql(Ee[r]^Ee[e],16),Ee[n]=Ee[n]+Ee[r],Ee[t]=ql(Ee[t]^Ee[n],12),Ee[e]=Ee[e]+Ee[t]+s,Ee[r]=ql(Ee[r]^Ee[e],8),Ee[n]=Ee[n]+Ee[r],Ee[t]=ql(Ee[t]^Ee[n],7)}function ql(e,t){return e>>>t^e<<32-t}const kO=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Kt=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ee=new Uint32Array(16),Pt=new Uint32Array(16);function CO(e,t){let n=0;for(n=0;n<8;n++)Ee[n]=e.h[n],Ee[n+8]=kO[n];for(Ee[12]^=e.t,Ee[13]^=e.t/4294967296,t&&(Ee[14]=~Ee[14]),n=0;n<16;n++)Pt[n]=O7(e.b,4*n);for(n=0;n<10;n++)Hi(0,4,8,12,Pt[Kt[n*16+0]],Pt[Kt[n*16+1]]),Hi(1,5,9,13,Pt[Kt[n*16+2]],Pt[Kt[n*16+3]]),Hi(2,6,10,14,Pt[Kt[n*16+4]],Pt[Kt[n*16+5]]),Hi(3,7,11,15,Pt[Kt[n*16+6]],Pt[Kt[n*16+7]]),Hi(0,5,10,15,Pt[Kt[n*16+8]],Pt[Kt[n*16+9]]),Hi(1,6,11,12,Pt[Kt[n*16+10]],Pt[Kt[n*16+11]]),Hi(2,7,8,13,Pt[Kt[n*16+12]],Pt[Kt[n*16+13]]),Hi(3,4,9,14,Pt[Kt[n*16+14]],Pt[Kt[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=Ee[n]^Ee[n+8]}function DO(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(kO),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(ww(r,t),r.c=64),r}function ww(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,CO(e,!1),e.c=0),e.b[e.c++]=t[n]}function NO(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;CO(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function $O(e,t,n){n=n||32,e=PO.normalizeInput(e);const r=DO(n,t);return ww(r,e),NO(r)}function R7(e,t,n){const r=$O(e,t,n);return PO.toHex(r)}var T7={blake2s:$O,blake2sHex:R7,blake2sInit:DO,blake2sUpdate:ww,blake2sFinal:NO};const Sc=A7,Ic=T7;var P7={blake2b:Sc.blake2b,blake2bHex:Sc.blake2bHex,blake2bInit:Sc.blake2bInit,blake2bUpdate:Sc.blake2bUpdate,blake2bFinal:Sc.blake2bFinal,blake2s:Ic.blake2s,blake2sHex:Ic.blake2sHex,blake2sInit:Ic.blake2sInit,blake2sUpdate:Ic.blake2sUpdate,blake2sFinal:Ic.blake2sFinal},Kr={exports:{}};function k7(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var C7=D7;function D7(e,t,n){var r=n&&n.stringify||k7,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var o=new Array(s);o[0]=r(e);for(var a=1;a<s;a++)o[a]=r(t[a]);return o.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var u="",l=1-i,f=-1,d=e&&e.length||0,h=0;h<d;){if(e.charCodeAt(h)===37&&h+1<d){switch(f=f>-1?f:0,e.charCodeAt(h+1)){case 100:case 102:if(l>=c||t[l]==null)break;f<h&&(u+=e.slice(f,h)),u+=Number(t[l]),f=h+2,h++;break;case 105:if(l>=c||t[l]==null)break;f<h&&(u+=e.slice(f,h)),u+=Math.floor(Number(t[l])),f=h+2,h++;break;case 79:case 111:case 106:if(l>=c||t[l]===void 0)break;f<h&&(u+=e.slice(f,h));var p=typeof t[l];if(p==="string"){u+="'"+t[l]+"'",f=h+2,h++;break}if(p==="function"){u+=t[l].name||"<anonymous>",f=h+2,h++;break}u+=r(t[l]),f=h+2,h++;break;case 115:if(l>=c)break;f<h&&(u+=e.slice(f,h)),u+=String(t[l]),f=h+2,h++;break;case 37:f<h&&(u+=e.slice(f,h)),u+="%",f=h+2,h++,l--;break}++l}++h}return f===-1?e:(f<d&&(u+=e.slice(f)),u)}const Xb=C7;Kr.exports=xi;const Nu=G7().console||{},N7={mapHttpRequest:Vl,mapHttpResponse:Vl,wrapRequestSerializer:Yp,wrapResponseSerializer:Yp,wrapErrorSerializer:Yp,req:Vl,res:Vl,err:Qb,errWithCause:Qb};function cs(e,t){return e==="silent"?1/0:t.levels.values[e]}const vw=Symbol("pino.logFuncs"),Xy=Symbol("pino.hierarchy"),$7={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Zb(e,t){const n={logger:t,parent:e[Xy]};t[Xy]=n}function B7(e,t,n){const r={};t.forEach(i=>{r[i]=n[i]?n[i]:Nu[i]||Nu[$7[i]||"log"]||ka}),e[vw]=r}function U7(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function xi(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||Nu;e.browser.write&&(e.browser.asObject=!0);const r=e.serializers||{},i=U7(e.browser.serialize,r);let s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=Object.keys(e.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(g){n[g]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const c=e.level||"info",u=Object.create(n);u.log||(u.log=ka),B7(u,a,n),Zb({},u),Object.defineProperty(u,"levelVal",{get:f}),Object.defineProperty(u,"level",{get:d,set:h});const l={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:a,timestamp:V7(e),messageKey:e.messageKey||"msg",onChild:e.onChild||ka};u.levels=L7(e),u.level=c,u.isLevelEnabled=function(g){return this.levels.values[g]?this.levels.values[g]>=this.levels.values[this.level]:!1},u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=ka,u.serializers=r,u._serialize=i,u._stdErrSerialize=s,u.child=function(...g){return p.call(this,l,...g)},t&&(u._logEvent=Zy());function f(){return cs(this.level,this)}function d(){return this._level}function h(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Fs(this,l,u,"error"),Fs(this,l,u,"fatal"),Fs(this,l,u,"warn"),Fs(this,l,u,"info"),Fs(this,l,u,"debug"),Fs(this,l,u,"trace"),o.forEach(v=>{Fs(this,l,u,v)})}function p(g,v,m){if(!v)throw new Error("missing bindings for child Pino");m=m||{},i&&v.serializers&&(m.serializers=v.serializers);const _=m.serializers;if(i&&_){var E=Object.assign({},r,_),I=e.browser.serialize===!0?Object.keys(E):i;delete v.serializers,bw([v],I,E,this._stdErrSerialize)}function O(N){this._childLevel=(N._childLevel|0)+1,this.bindings=v,E&&(this.serializers=E,this._serialize=I),t&&(this._logEvent=Zy([].concat(N._logEvent.bindings,v)))}O.prototype=this;const C=new O(this);return Zb(this,C),C.child=function(...N){return p.call(this,g,...N)},C.level=m.level||this.level,g.onChild(C),C}return u}function L7(e){const t=e.customLevels||{},n=Object.assign({},xi.levels.values,t),r=Object.assign({},xi.levels.labels,F7(t));return{values:n,labels:r}}function F7(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}xi.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},xi.stdSerializers=N7,xi.stdTimeFunctions=Object.assign({},{nullTime:BO,epochTime:UO,unixTime:K7,isoTime:W7});function M7(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[Xy];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function Fs(e,t,n,r){if(Object.defineProperty(e,r,{value:cs(e.level,n)>cs(r,n)?ka:n[vw][r],writable:!0,enumerable:!0,configurable:!0}),e[r]===ka){if(!t.transmit)return;const s=t.transmit.level||e.level,o=cs(s,n);if(cs(r,n)<o)return}e[r]=z7(e,t,n,r);const i=M7(e);i.length!==0&&(e[r]=j7(i,e[r]))}function j7(e,t){return function(){return t.apply(this,[...e,...arguments])}}function z7(e,t,n,r){return function(i){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Nu?Nu:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];var u=!1;if(t.serialize&&(bw(o,this._serialize,this.serializers,this._stdErrSerialize),u=!0),t.asObject||t.formatters?i.call(a,...H7(this,r,o,s,t)):i.apply(a,o),t.transmit){const l=t.transmit.level||e._level,f=cs(l,n),d=cs(r,n);if(d<f)return;q7(this,{ts:s,methodLevel:r,methodValue:d,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:cs(e._level,n)},o,u)}}}(e[vw][r])}function H7(e,t,n,r,i){const{level:s,log:o=f=>f}=i.formatters||{},a=n.slice();let c=a[0];const u={};let l=(e._childLevel|0)+1;if(l<1&&(l=1),r&&(u.time=r),s){const f=s(t,e.levels.values[t]);Object.assign(u,f)}else u.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());return[o(u),...a]}else{if(c!==null&&typeof c=="object"){for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());c=a.length?Xb(a.shift(),a):void 0}else typeof c=="string"&&(c=Xb(a.shift(),a));return c!==void 0&&(u[i.messageKey]=c),[o(u)]}}function bw(e,t,n,r){for(const i in e)if(r&&e[i]instanceof Error)e[i]=xi.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i])&&t)for(const s in e[i])t.indexOf(s)>-1&&s in n&&(e[i][s]=n[s](e[i][s]))}function q7(e,t,n,r=!1){const i=t.send,s=t.ts,o=t.methodLevel,a=t.methodValue,c=t.val,u=e._logEvent.bindings;r||bw(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=n.filter(function(l){return u.indexOf(l)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=a,i(o,e._logEvent,c),e._logEvent=Zy(u)}function Zy(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Qb(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function V7(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?BO:UO}function Vl(){return{}}function Yp(e){return e}function ka(){}function BO(){return!1}function UO(){return Date.now()}function K7(){return Math.round(Date.now()/1e3)}function W7(){return new Date(Date.now()).toISOString()}function G7(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Kr.exports.default=xi;Kr.exports.pino=xi;const Y7={level:"info"},Sh="custom_context",Ew=1e3*1024;var X7=Object.defineProperty,Z7=(e,t,n)=>t in e?X7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rs=(e,t,n)=>Z7(e,typeof t!="symbol"?t+"":t,n);let Q7=class{constructor(t){rs(this,"nodeValue"),rs(this,"sizeInBytes"),rs(this,"next"),this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Jb=class{constructor(t){rs(this,"lengthInNodes"),rs(this,"sizeInBytes"),rs(this,"head"),rs(this,"tail"),rs(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new Q7(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}};const J7=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n);function eE(e){return typeof e=="string"?e:J7(e)||""}var e9=Object.defineProperty,t9=(e,t,n)=>t in e?e9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kl=(e,t,n)=>t9(e,typeof t!="symbol"?t+"":t,n);let LO=class{constructor(t,n=Ew){Kl(this,"logs"),Kl(this,"level"),Kl(this,"levelValue"),Kl(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=t??"error",this.levelValue=Kr.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Jb(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===Kr.exports.levels.values.error?console.error(t):n===Kr.exports.levels.values.warn?console.warn(t):n===Kr.exports.levels.values.debug?console.debug(t):n===Kr.exports.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(eE({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Jb(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(eE({extraMetadata:t})),new Blob(n,{type:"application/json"})}};var n9=Object.defineProperty,r9=(e,t,n)=>t in e?n9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i9=(e,t,n)=>r9(e,t+"",n);let s9=class{constructor(t,n=Ew){i9(this,"baseChunkLogger"),this.baseChunkLogger=new LO(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var o9=Object.defineProperty,a9=(e,t,n)=>t in e?o9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c9=(e,t,n)=>a9(e,t+"",n);let u9=class{constructor(t,n=Ew){c9(this,"baseChunkLogger"),this.baseChunkLogger=new LO(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var l9=Object.defineProperty,f9=Object.defineProperties,d9=Object.getOwnPropertyDescriptors,tE=Object.getOwnPropertySymbols,h9=Object.prototype.hasOwnProperty,p9=Object.prototype.propertyIsEnumerable,nE=(e,t,n)=>t in e?l9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vs=(e,t)=>{for(var n in t||(t={}))h9.call(t,n)&&nE(e,n,t[n]);if(tE)for(var n of tE(t))p9.call(t,n)&&nE(e,n,t[n]);return e},bs=(e,t)=>f9(e,d9(t));function g9(e){return bs(vs({},e),{level:(e==null?void 0:e.level)||Y7.level})}function y9(e,t,n=Sh){return e[n]=t,e}function kn(e,t=Sh){return e[t]||""}function m9(e,t,n=Sh){const r=kn(e,n);return r.trim()?`${r}/${t}`:t}function Gn(e,t,n=Sh){const r=m9(e,t,n),i=e.child({context:r});return y9(i,r,n)}function w9(e){var t,n;const r=new s9((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Kr.exports(bs(vs({},e.opts),{level:"trace",browser:bs(vs({},(n=e.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function v9(e){var t,n;const r=new u9((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Kr.exports(bs(vs({},e.opts),{level:"trace",browser:bs(vs({},(n=e.opts)==null?void 0:n.browser),{write:i=>r.write(i)})}),r),chunkLoggerController:r}}function FO(e){var t;if(typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string")return{logger:e.loggerOverride,chunkLoggerController:null};const n=bs(vs({},e.opts),{level:typeof e.loggerOverride=="string"?e.loggerOverride:(t=e.opts)==null?void 0:t.level});return typeof window<"u"?w9(bs(vs({},e),{opts:n})):v9(bs(vs({},e),{opts:n}))}var b9={};const E9=":";function Ai(e){const[t,n]=e.split(E9);return{namespace:t,reference:n}}function MO(e,t){return e.includes(":")?[e]:t.chains||[]}var _9=Object.defineProperty,S9=Object.defineProperties,I9=Object.getOwnPropertyDescriptors,rE=Object.getOwnPropertySymbols,x9=Object.prototype.hasOwnProperty,A9=Object.prototype.propertyIsEnumerable,Qy=(e,t,n)=>t in e?_9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iE=(e,t)=>{for(var n in t||(t={}))x9.call(t,n)&&Qy(e,n,t[n]);if(rE)for(var n of rE(t))A9.call(t,n)&&Qy(e,n,t[n]);return e},O9=(e,t)=>S9(e,I9(t)),sE=(e,t,n)=>Qy(e,typeof t!="symbol"?t+"":t,n);const R9="ReactNative",Hn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},T9="js";function Ad(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ns(){return!Eo()&&!!Q0()&&navigator.product===R9}function P9(){return Ns()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function k9(){return Ns()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function rc(){return!Ad()&&!!Q0()&&!!Eo()}function nl(){return Ns()?Hn.reactNative:Ad()?Hn.node:rc()?Hn.browser:Hn.unknown}function oE(){var e;try{return Ns()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function C9(e,t){const n=new URLSearchParams(e);return Object.entries(t).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!=null&&n.set(r,String(i))}),n.toString()}function D9(e){var t,n;const r=jO();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e==null?void 0:e.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),O9(iE(iE({},r),e),{url:(e==null?void 0:e.url)||r.url,name:(e==null?void 0:e.name)||r.name,description:(e==null?void 0:e.description)||r.description,icons:(n=e==null?void 0:e.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function jO(){return YA()||{name:"",description:"",url:"",icons:[""]}}function N9(){if(nl()===Hn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=eB();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function $9(){var e;const t=nl();return t===Hn.browser?[t,((e=GA())==null?void 0:e.host)||"unknown"].join(":"):t}function zO(e,t,n){const r=N9(),i=$9();return[[e,t].join("-"),[T9,n].join("-"),r,i].join("/")}function B9({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=n.split("?"),l=zO(e,t,r),f={auth:i,ua:l,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=C9(u[1]||"",f);return u[0]+"?"+d}function io(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Jy(e){return Object.fromEntries(e.entries())}function em(e){return new Map(Object.entries(e))}function Xs(e=Z.FIVE_MINUTES,t){const n=Z.toMiliseconds(e||Z.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const u=new Error(t);o=Promise.reject(u),c(u)},n),r=a,i=c})}}function Gr(e,t,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),t);try{const o=await e;r(o)}catch(o){i(o)}clearTimeout(s)})}function HO(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function U9(e){return HO("topic",e)}function L9(e){return HO("id",e)}function qO(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function lt(e,t){return Z.fromMiliseconds(Date.now()+Z.toMiliseconds(e))}function Hr(e){return Date.now()>=Z.toMiliseconds(e)}function xe(e,t){return`${e}${t?`:${t}`:""}`}function Qr(e=[],t=[]){return[...new Set([...e,...t])]}async function F9({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=M9(s,e,t),a=nl();if(a===Hn.browser){if(!((r=Eo())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}j9(o)}else a===Hn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function M9(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const s=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${V9(r,!0)}`}else i=`${i}/wc?${r}`;return i}function j9(e){let t="_self";q9()?t="_top":(H9()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function z9(e,t){let n="";try{if(rc()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function aE(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function cE(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function _w(){return typeof process<"u"&&b9.IS_VITEST==="true"}function H9(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function q9(){try{return window.self!==window.top}catch{return!1}}function V9(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function VO(e){return Buffer.from(e,"base64").toString("utf-8")}function K9(e){return new Promise(t=>setTimeout(t,e))}let W9=class{constructor({limit:t}){sE(this,"limit"),sE(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}};const Wl=BigInt(2**32-1),uE=BigInt(32);function KO(e,t=!1){return t?{h:Number(e&Wl),l:Number(e>>uE&Wl)}:{h:Number(e>>uE&Wl)|0,l:Number(e&Wl)|0}}function WO(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=KO(e[s],t);[r[s],i[s]]=[o,a]}return[r,i]}const lE=(e,t,n)=>e>>>n,fE=(e,t,n)=>e<<32-n|t>>>n,Qi=(e,t,n)=>e>>>n|t<<32-n,Ji=(e,t,n)=>e<<32-n|t>>>n,Mc=(e,t,n)=>e<<64-n|t>>>n-32,jc=(e,t,n)=>e>>>n-32|t<<64-n,G9=(e,t)=>t,Y9=(e,t)=>e,X9=(e,t,n)=>e<<n|t>>>32-n,Z9=(e,t,n)=>t<<n|e>>>32-n,Q9=(e,t,n)=>t<<n-32|e>>>64-n,J9=(e,t,n)=>e<<n-32|t>>>64-n;function wr(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Sw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Iw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,ez=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),tz=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,nz=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),rz=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,Yo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ih(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Di(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Tr(e,...t){if(!Ih(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function xh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Di(e.outputLen),Di(e.blockLen)}function As(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xw(e,t){Tr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function $u(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function lr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Xp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Nr(e,t){return e<<32-t|e>>>t}const GO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function YO(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const li=GO?e=>e:e=>YO(e);function iz(e){for(let t=0;t<e.length;t++)e[t]=YO(e[t]);return e}const es=GO?e=>e:iz,XO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",sz=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ca(e){if(Tr(e),XO)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=sz[e[n]];return t}const ai={_0:48,_9:57,A:65,F:70,a:97,f:102};function dE(e){if(e>=ai._0&&e<=ai._9)return e-ai._0;if(e>=ai.A&&e<=ai.F)return e-(ai.A-10);if(e>=ai.a&&e<=ai.f)return e-(ai.a-10)}function Od(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(XO)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=dE(e.charCodeAt(s)),a=dE(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function ZO(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Or(e){return typeof e=="string"&&(e=ZO(e)),Tr(e),e}function is(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Tr(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}let Ah=class{};function rl(e){const t=r=>e().update(Or(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function oz(e){const t=(r,i)=>e(i).update(Or(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function No(e=32){if(Yo&&typeof Yo.getRandomValues=="function")return Yo.getRandomValues(new Uint8Array(e));if(Yo&&typeof Yo.randomBytes=="function")return Uint8Array.from(Yo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const az=BigInt(0),xc=BigInt(1),cz=BigInt(2),uz=BigInt(7),lz=BigInt(256),fz=BigInt(113),QO=[],JO=[],eR=[];for(let e=0,t=xc,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],QO.push(2*(5*r+n)),JO.push((e+1)*(e+2)/2%64);let i=az;for(let s=0;s<7;s++)t=(t<<xc^(t>>uz)*fz)%lz,t&cz&&(i^=xc<<(xc<<BigInt(s))-xc);eR.push(i)}const tR=WO(eR,!0),dz=tR[0],hz=tR[1],hE=(e,t,n)=>n>32?Q9(e,t,n):X9(e,t,n),pE=(e,t,n)=>n>32?J9(e,t,n):Z9(e,t,n);function pz(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],f=hE(u,l,1)^n[a],d=pE(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=f,e[o+h+1]^=d}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=JO[o],c=hE(i,s,a),u=pE(i,s,a),l=QO[o];i=e[l],s=e[l+1],e[l]=c,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=dz[r],e[1]^=hz[r]}lr(n)}let gz=class nR extends Ah{constructor(t,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,Di(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=$u(this.state)}clone(){return this._cloneInto()}keccak(){es(this.state32),pz(this.state32,this.rounds),es(this.state32),this.posOut=0,this.pos=0}update(t){As(this),t=Or(t),Tr(t);const{blockLen:n,state:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){As(this,!1),Tr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Di(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(xw(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,lr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new nR(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}};const yz=(e,t,n)=>rl(()=>new gz(t,e,n)),mz=yz(1,136,256/8);function wz(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}function vz(e,t,n){return e&t^~e&n}function bz(e,t,n){return e&t^e&n^t&n}let rR=class extends Ah{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Xp(this.buffer)}update(t){As(this),t=Or(t),Tr(t);const{view:n,buffer:r,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Xp(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){As(this),xw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,lr(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;wz(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Xp(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const qi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Gt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ez=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vi=new Uint32Array(64);class _z extends rR{constructor(t=32){super(64,t,8,!1),this.A=qi[0]|0,this.B=qi[1]|0,this.C=qi[2]|0,this.D=qi[3]|0,this.E=qi[4]|0,this.F=qi[5]|0,this.G=qi[6]|0,this.H=qi[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)Vi[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=Vi[f-15],h=Vi[f-2],p=Nr(d,7)^Nr(d,18)^d>>>3,g=Nr(h,17)^Nr(h,19)^h>>>10;Vi[f]=g+Vi[f-7]+p+Vi[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=Nr(a,6)^Nr(a,11)^Nr(a,25),h=l+d+vz(a,c,u)+Ez[f]+Vi[f]|0,p=(Nr(r,2)^Nr(r,13)^Nr(r,22))+bz(r,i,s)|0;l=u,u=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,s,o,a,c,u,l)}roundClean(){lr(Vi)}destroy(){this.set(0,0,0,0,0,0,0,0),lr(this.buffer)}}const iR=WO(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Sz=iR[0],Iz=iR[1],Ki=new Uint32Array(80),Wi=new Uint32Array(80);let Aw=class extends rR{constructor(t=64){super(128,t,16,!1),this.Ah=Gt[0]|0,this.Al=Gt[1]|0,this.Bh=Gt[2]|0,this.Bl=Gt[3]|0,this.Ch=Gt[4]|0,this.Cl=Gt[5]|0,this.Dh=Gt[6]|0,this.Dl=Gt[7]|0,this.Eh=Gt[8]|0,this.El=Gt[9]|0,this.Fh=Gt[10]|0,this.Fl=Gt[11]|0,this.Gh=Gt[12]|0,this.Gl=Gt[13]|0,this.Hh=Gt[14]|0,this.Hl=Gt[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:f,Fl:d,Gh:h,Gl:p,Hh:g,Hl:v}=this;return[t,n,r,i,s,o,a,c,u,l,f,d,h,p,g,v]}set(t,n,r,i,s,o,a,c,u,l,f,d,h,p,g,v){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=v|0}process(t,n){for(let E=0;E<16;E++,n+=4)Ki[E]=t.getUint32(n),Wi[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const I=Ki[E-15]|0,O=Wi[E-15]|0,C=Qi(I,O,1)^Qi(I,O,8)^lE(I,O,7),N=Ji(I,O,1)^Ji(I,O,8)^fE(I,O,7),B=Ki[E-2]|0,D=Wi[E-2]|0,j=Qi(B,D,19)^Mc(B,D,61)^lE(B,D,6),V=Ji(B,D,19)^jc(B,D,61)^fE(B,D,6),F=ez(N,V,Wi[E-7],Wi[E-16]),$=tz(F,C,j,Ki[E-7],Ki[E-16]);Ki[E]=$|0,Wi[E]=F|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:h,Fl:p,Gh:g,Gl:v,Hh:m,Hl:_}=this;for(let E=0;E<80;E++){const I=Qi(f,d,14)^Qi(f,d,18)^Mc(f,d,41),O=Ji(f,d,14)^Ji(f,d,18)^jc(f,d,41),C=f&h^~f&g,N=d&p^~d&v,B=nz(_,O,N,Iz[E],Wi[E]),D=rz(B,m,I,C,Sz[E],Ki[E]),j=B|0,V=Qi(r,i,28)^Mc(r,i,34)^Mc(r,i,39),F=Ji(r,i,28)^jc(r,i,34)^jc(r,i,39),$=r&s^r&a^s&a,L=i&o^i&c^o&c;m=g|0,_=v|0,g=h|0,v=p|0,h=f|0,p=d|0,{h:f,l:d}=wr(u|0,l|0,D|0,j|0),u=a|0,l=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const w=Sw(j,F,L);r=Iw(w,D,V,$),i=w|0}({h:r,l:i}=wr(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=wr(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=wr(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=wr(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:d}=wr(this.Eh|0,this.El|0,f|0,d|0),{h,l:p}=wr(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:v}=wr(this.Gh|0,this.Gl|0,g|0,v|0),{h:m,l:_}=wr(this.Hh|0,this.Hl|0,m|0,_|0),this.set(r,i,s,o,a,c,u,l,f,d,h,p,g,v,m,_)}roundClean(){lr(Ki,Wi)}destroy(){lr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class xz extends Aw{constructor(){super(48),this.Ah=Wt[0]|0,this.Al=Wt[1]|0,this.Bh=Wt[2]|0,this.Bl=Wt[3]|0,this.Ch=Wt[4]|0,this.Cl=Wt[5]|0,this.Dh=Wt[6]|0,this.Dl=Wt[7]|0,this.Eh=Wt[8]|0,this.El=Wt[9]|0,this.Fh=Wt[10]|0,this.Fl=Wt[11]|0,this.Gh=Wt[12]|0,this.Gl=Wt[13]|0,this.Hh=Wt[14]|0,this.Hl=Wt[15]|0}}const Yt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Az extends Aw{constructor(){super(32),this.Ah=Yt[0]|0,this.Al=Yt[1]|0,this.Bh=Yt[2]|0,this.Bl=Yt[3]|0,this.Ch=Yt[4]|0,this.Cl=Yt[5]|0,this.Dh=Yt[6]|0,this.Dl=Yt[7]|0,this.Eh=Yt[8]|0,this.El=Yt[9]|0,this.Fh=Yt[10]|0,this.Fl=Yt[11]|0,this.Gh=Yt[12]|0,this.Gl=Yt[13]|0,this.Hh=Yt[14]|0,this.Hl=Yt[15]|0}}const Oh=rl(()=>new _z),Oz=rl(()=>new Aw),Rz=rl(()=>new xz),Tz=rl(()=>new Az),Pz=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),mt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ee=new Uint32Array(32);function Gi(e,t,n,r,i,s){const o=i[s],a=i[s+1];let c=ee[2*e],u=ee[2*e+1],l=ee[2*t],f=ee[2*t+1],d=ee[2*n],h=ee[2*n+1],p=ee[2*r],g=ee[2*r+1],v=Sw(c,l,o);u=Iw(v,u,f,a),c=v|0,{Dh:g,Dl:p}={Dh:g^u,Dl:p^c},{Dh:g,Dl:p}={Dh:G9(g,p),Dl:Y9(g)},{h,l:d}=wr(h,d,g,p),{Bh:f,Bl:l}={Bh:f^h,Bl:l^d},{Bh:f,Bl:l}={Bh:Qi(f,l,24),Bl:Ji(f,l,24)},ee[2*e]=c,ee[2*e+1]=u,ee[2*t]=l,ee[2*t+1]=f,ee[2*n]=d,ee[2*n+1]=h,ee[2*r]=p,ee[2*r+1]=g}function Yi(e,t,n,r,i,s){const o=i[s],a=i[s+1];let c=ee[2*e],u=ee[2*e+1],l=ee[2*t],f=ee[2*t+1],d=ee[2*n],h=ee[2*n+1],p=ee[2*r],g=ee[2*r+1],v=Sw(c,l,o);u=Iw(v,u,f,a),c=v|0,{Dh:g,Dl:p}={Dh:g^u,Dl:p^c},{Dh:g,Dl:p}={Dh:Qi(g,p,16),Dl:Ji(g,p,16)},{h,l:d}=wr(h,d,g,p),{Bh:f,Bl:l}={Bh:f^h,Bl:l^d},{Bh:f,Bl:l}={Bh:Mc(f,l,63),Bl:jc(f,l,63)},ee[2*e]=c,ee[2*e+1]=u,ee[2*t]=l,ee[2*t+1]=f,ee[2*n]=d,ee[2*n+1]=h,ee[2*r]=p,ee[2*r+1]=g}function kz(e,t={},n,r,i){if(Di(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=t;if(s!==void 0&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class Cz extends Ah{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Di(t),Di(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=$u(this.buffer)}update(t){As(this),t=Or(t),Tr(t);const{blockLen:n,buffer:r,buffer32:i}=this,s=t.length,o=t.byteOffset,a=t.buffer;for(let c=0;c<s;){this.pos===n&&(es(i),this.compress(i,0,!1),es(i),this.pos=0);const u=Math.min(n-this.pos,s-c),l=o+c;if(u===n&&!(l%4)&&c+u<s){const f=new Uint32Array(a,l,Math.floor((s-c)/4));es(f);for(let d=0;c+n<s;d+=i.length,c+=n)this.length+=n,this.compress(f,d,!1);es(f);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(t){As(this),xw(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,lr(this.buffer.subarray(n)),es(r),this.compress(r,0,!0),es(r);const i=$u(t);this.get().forEach((s,o)=>i[o]=li(s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.buffer.set(n),t.destroyed=s,t.finished=i,t.length=r,t.pos=a,t.outputLen=o,t}clone(){return this._cloneInto()}}class Dz extends Cz{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=mt[0]|0,this.v0h=mt[1]|0,this.v1l=mt[2]|0,this.v1h=mt[3]|0,this.v2l=mt[4]|0,this.v2h=mt[5]|0,this.v3l=mt[6]|0,this.v3h=mt[7]|0,this.v4l=mt[8]|0,this.v4h=mt[9]|0,this.v5l=mt[10]|0,this.v5h=mt[11]|0,this.v6l=mt[12]|0,this.v6h=mt[13]|0,this.v7l=mt[14]|0,this.v7h=mt[15]|0,kz(n,t,64,16,16);let{key:r,personalization:i,salt:s}=t,o=0;if(r!==void 0&&(r=Or(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Or(s);const a=$u(s);this.v4l^=li(a[0]),this.v4h^=li(a[1]),this.v5l^=li(a[2]),this.v5h^=li(a[3])}if(i!==void 0){i=Or(i);const a=$u(i);this.v6l^=li(a[0]),this.v6h^=li(a[1]),this.v7l^=li(a[2]),this.v7h^=li(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:f,v5h:d,v6l:h,v6h:p,v7l:g,v7h:v}=this;return[t,n,r,i,s,o,a,c,u,l,f,d,h,p,g,v]}set(t,n,r,i,s,o,a,c,u,l,f,d,h,p,g,v){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=f|0,this.v5h=d|0,this.v6l=h|0,this.v6h=p|0,this.v7l=g|0,this.v7h=v|0}compress(t,n,r){this.get().forEach((c,u)=>ee[u]=c),ee.set(mt,16);let{h:i,l:s}=KO(BigInt(this.length));ee[24]=mt[8]^s,ee[25]=mt[9]^i,r&&(ee[28]=~ee[28],ee[29]=~ee[29]);let o=0;const a=Pz;for(let c=0;c<12;c++)Gi(0,4,8,12,t,n+2*a[o++]),Yi(0,4,8,12,t,n+2*a[o++]),Gi(1,5,9,13,t,n+2*a[o++]),Yi(1,5,9,13,t,n+2*a[o++]),Gi(2,6,10,14,t,n+2*a[o++]),Yi(2,6,10,14,t,n+2*a[o++]),Gi(3,7,11,15,t,n+2*a[o++]),Yi(3,7,11,15,t,n+2*a[o++]),Gi(0,5,10,15,t,n+2*a[o++]),Yi(0,5,10,15,t,n+2*a[o++]),Gi(1,6,11,12,t,n+2*a[o++]),Yi(1,6,11,12,t,n+2*a[o++]),Gi(2,7,8,13,t,n+2*a[o++]),Yi(2,7,8,13,t,n+2*a[o++]),Gi(3,4,9,14,t,n+2*a[o++]),Yi(3,4,9,14,t,n+2*a[o++]);this.v0l^=ee[0]^ee[16],this.v0h^=ee[1]^ee[17],this.v1l^=ee[2]^ee[18],this.v1h^=ee[3]^ee[19],this.v2l^=ee[4]^ee[20],this.v2h^=ee[5]^ee[21],this.v3l^=ee[6]^ee[22],this.v3h^=ee[7]^ee[23],this.v4l^=ee[8]^ee[24],this.v4h^=ee[9]^ee[25],this.v5l^=ee[10]^ee[26],this.v5h^=ee[11]^ee[27],this.v6l^=ee[12]^ee[28],this.v6h^=ee[13]^ee[29],this.v7l^=ee[14]^ee[30],this.v7h^=ee[15]^ee[31],lr(ee)}destroy(){this.destroyed=!0,lr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Nz=oz(e=>new Dz(e)),$z="https://rpc.walletconnect.org/v1";function sR(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(mz(n)).toString("hex")}async function Bz(e,t,n,r,i,s){switch(n.t){case"eip191":return await Uz(e,t,n.s);case"eip1271":return await Lz(e,t,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function Uz(e,t,n){const r=B5(n);return K5({payload:sR(t),signature:r}).toLowerCase()===e.toLowerCase()}async function Lz(e,t,n,r,i,s){const o=Ai(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),f=(t.startsWith("0x")?t:sR(t)).substring(2),d=a+f+c+l+u,h=await fetch(`${s||$z}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Fz(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:d},"latest"]})}),{result:p}=await h.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Fz(){return Date.now()+Math.floor(Math.random()*1e3)}function Mz(e){const t=atob(e),n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return Ju.encode(s)}function jz(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=Nz(r,{dkLen:32});return Ju.encode(i)}function gE(e){const t=new Uint8Array(Oh(zz(e)));return Ju.encode(t)}function zz(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function yE(e){const t=Buffer.from(e,"base64"),n=TL(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=bL(n),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(r)]),o=Tz(s);return q5.encode(o).replace(/=+$/,"")}function Zp(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function Hz(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(Zp(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(Zp(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(Zp(r.length)),i.push(r);const s=Buffer.concat(i),o=Oh(s);return Buffer.from(o).toString("hex").toUpperCase()}function qz(e){var t,n;const r=[];try{if(typeof e=="string")return r.push(e),r;if(typeof e!="object")return r;e!=null&&e.id&&r.push(e.id);const i=(n=(t=e==null?void 0:e.capabilities)==null?void 0:t.caip345)==null?void 0:n.transactionHashes;i&&r.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return r}var Vz=Object.defineProperty,Kz=Object.defineProperties,Wz=Object.getOwnPropertyDescriptors,mE=Object.getOwnPropertySymbols,Gz=Object.prototype.hasOwnProperty,Yz=Object.prototype.propertyIsEnumerable,wE=(e,t,n)=>t in e?Vz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xz=(e,t)=>{for(var n in t||(t={}))Gz.call(t,n)&&wE(e,n,t[n]);if(mE)for(var n of mE(t))Yz.call(t,n)&&wE(e,n,t[n]);return e},Zz=(e,t)=>Kz(e,Wz(t));const oR="did:pkh:",Qz={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},Jz=e=>e?Qz[e]||e:"",Rh=e=>e==null?void 0:e.split(":"),eH=e=>{const t=e&&Rh(e);if(t)return e.includes(oR)?t[3]:t[1]},tH=e=>{const t=e&&Rh(e);if(t)return e.includes(oR)?t[2]:t[0]},tm=e=>{const t=e&&Rh(e);if(t)return t[2]+":"+t[3]},Rd=e=>{const t=e&&Rh(e);if(t)return t.pop()};async function vE(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,s=aR(i,i.iss),o=Rd(i.iss);return await Bz(o,s,r,tm(i.iss),n)}const aR=(e,t)=>{const n=tH(t);if(!n)throw new Error("Invalid issuer: "+t);const r=`${e.domain} wants you to sign in with your ${Jz(n)} account:`,i=Rd(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,a=`Version: ${e.version}`,c=`Chain ID: ${eH(t)}`,u=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,f=e.exp?`Expiration Time: ${e.exp}`:void 0,d=e.nbf?`Not Before: ${e.nbf}`:void 0,h=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map(v=>`
- ${v}`).join("")}`:void 0,g=Df(e.resources);if(g){const v=Bu(g);s=lH(s,v)}return[r,i,"",s,"",o,a,c,u,l,f,d,h,p].filter(v=>v!=null).join(`
`)};function nH(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function rH(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function xo(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function iH(e,t,n,r={}){return n==null||n.sort((i,s)=>i.localeCompare(s)),{att:{[e]:sH(t,n,r)}}}function sH(e,t,n={}){t=t==null?void 0:t.sort((i,s)=>i.localeCompare(s));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function cR(e){return xo(e),`urn:recap:${nH(e).replace(/=/g,"")}`}function Bu(e){const t=rH(e.replace("urn:recap:",""));return xo(t),t}function oH(e,t,n){const r=iH(e,t,n);return cR(r)}function aH(e){return e&&e.includes("urn:recap:")}function cH(e,t){const n=Bu(e),r=Bu(t),i=uH(n,r);return cR(i)}function uH(e,t){xo(e),xo(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=e.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=t.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[i]=Zz(Xz({},r.att[i]),{[a]:((c=e.att[i])==null?void 0:c[a])||((u=t.att[i])==null?void 0:u[a])})})}),r}function lH(e="",t){xo(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(a=>{const c=Object.keys(t.att[a]).map(f=>({ability:f.split("/")[0],action:f.split("/")[1]}));c.sort((f,d)=>f.action.localeCompare(d.action));const u={};c.forEach(f=>{u[f.ability]||(u[f.ability]=[]),u[f.ability].push(f.action)});const l=Object.keys(u).map(f=>(i++,`(${i}) '${f}': '${u[f].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${e?e+" ":""}${o}`}function bE(e){var t;const n=Bu(e);xo(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function EE(e){const t=Bu(e);xo(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Df(e){if(!e)return;const t=e==null?void 0:e[e.length-1];return aH(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function uR(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function nm(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Qp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function wn(e,...t){if(!uR(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function _E(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fH(e,t){wn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Es(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Wa(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function dH(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const hH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pH(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function rm(e){if(typeof e=="string")e=pH(e);else if(uR(e))e=im(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function gH(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function yH(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const mH=(e,t)=>{function n(r,...i){if(wn(r),!hH)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const u=i[0];if(!u)throw new Error("nonce / iv required");e.varSizeNonce?wn(u):wn(u,e.nonceLength)}const s=e.tagLength;s&&i[1]!==void 0&&wn(i[1]);const o=t(r,...i),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");wn(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,wn(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(wn(u),s&&u.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,e),n};function SE(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!vH(t))throw new Error("invalid output, must be aligned");return t}function IE(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);e.setUint32(t+4,o,r),e.setUint32(t+0,a,r)}function wH(e,t,n){nm(n);const r=new Uint8Array(16),i=dH(r);return IE(i,0,BigInt(t),n),IE(i,8,BigInt(e),n),r}function vH(e){return e.byteOffset%4===0}function im(e){return Uint8Array.from(e)}const lR=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),bH=lR("expand 16-byte k"),EH=lR("expand 32-byte k"),_H=Es(bH),SH=Es(EH);function be(e,t){return e<<t|e>>>32-t}function sm(e){return e.byteOffset%4===0}const Gl=64,IH=16,fR=2**32-1,xE=new Uint32Array;function xH(e,t,n,r,i,s,o,a){const c=i.length,u=new Uint8Array(Gl),l=Es(u),f=sm(i)&&sm(s),d=f?Es(i):xE,h=f?Es(s):xE;for(let p=0;p<c;o++){if(e(t,n,r,l,o,a),o>=fR)throw new Error("arx: counter overflow");const g=Math.min(Gl,c-p);if(f&&g===Gl){const v=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,_;m<IH;m++)_=v+m,h[_]=d[_]^l[m];p+=Gl;continue}for(let v=0,m;v<g;v++)m=p+v,s[m]=i[m]^u[v];p+=g}}function AH(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=gH({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Qp(i),Qp(o),nm(s),nm(n),(a,c,u,l,f=0)=>{wn(a),wn(c),wn(u);const d=u.length;if(l===void 0&&(l=new Uint8Array(d)),wn(l),Qp(f),f<0||f>=fR)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);const h=[];let p=a.length,g,v;if(p===32)h.push(g=im(a)),v=SH;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),v=_H,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);sm(c)||h.push(c=im(c));const m=Es(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,m,Es(c.subarray(0,16)),m),c=c.subarray(16)}const _=16-i;if(_!==c.length)throw new Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){const I=new Uint8Array(12);I.set(c,s?0:12-c.length),c=I,h.push(c)}const E=Es(c);return xH(e,v,m,E,u,l,f,o),Wa(...h),l}}const kt=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class OH{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=rm(t),wn(t,32);const n=kt(t,0),r=kt(t,2),i=kt(t,4),s=kt(t,6),o=kt(t,8),a=kt(t,10),c=kt(t,12),u=kt(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=kt(t,16+2*l)}process(t,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],f=o[4],d=o[5],h=o[6],p=o[7],g=o[8],v=o[9],m=kt(t,n+0),_=kt(t,n+2),E=kt(t,n+4),I=kt(t,n+6),O=kt(t,n+8),C=kt(t,n+10),N=kt(t,n+12),B=kt(t,n+14);let D=s[0]+(m&8191),j=s[1]+((m>>>13|_<<3)&8191),V=s[2]+((_>>>10|E<<6)&8191),F=s[3]+((E>>>7|I<<9)&8191),$=s[4]+((I>>>4|O<<12)&8191),L=s[5]+(O>>>1&8191),w=s[6]+((O>>>14|C<<2)&8191),S=s[7]+((C>>>11|N<<5)&8191),P=s[8]+((N>>>8|B<<8)&8191),R=s[9]+(B>>>5|i),A=0,T=A+D*a+j*(5*v)+V*(5*g)+F*(5*p)+$*(5*h);A=T>>>13,T&=8191,T+=L*(5*d)+w*(5*f)+S*(5*l)+P*(5*u)+R*(5*c),A+=T>>>13,T&=8191;let M=A+D*c+j*a+V*(5*v)+F*(5*g)+$*(5*p);A=M>>>13,M&=8191,M+=L*(5*h)+w*(5*d)+S*(5*f)+P*(5*l)+R*(5*u),A+=M>>>13,M&=8191;let z=A+D*u+j*c+V*a+F*(5*v)+$*(5*g);A=z>>>13,z&=8191,z+=L*(5*p)+w*(5*h)+S*(5*d)+P*(5*f)+R*(5*l),A+=z>>>13,z&=8191;let Q=A+D*l+j*u+V*c+F*a+$*(5*v);A=Q>>>13,Q&=8191,Q+=L*(5*g)+w*(5*p)+S*(5*h)+P*(5*d)+R*(5*f),A+=Q>>>13,Q&=8191;let K=A+D*f+j*l+V*u+F*c+$*a;A=K>>>13,K&=8191,K+=L*(5*v)+w*(5*g)+S*(5*p)+P*(5*h)+R*(5*d),A+=K>>>13,K&=8191;let G=A+D*d+j*f+V*l+F*u+$*c;A=G>>>13,G&=8191,G+=L*a+w*(5*v)+S*(5*g)+P*(5*p)+R*(5*h),A+=G>>>13,G&=8191;let te=A+D*h+j*d+V*f+F*l+$*u;A=te>>>13,te&=8191,te+=L*c+w*a+S*(5*v)+P*(5*g)+R*(5*p),A+=te>>>13,te&=8191;let ie=A+D*p+j*h+V*d+F*f+$*l;A=ie>>>13,ie&=8191,ie+=L*u+w*c+S*a+P*(5*v)+R*(5*g),A+=ie>>>13,ie&=8191;let ce=A+D*g+j*p+V*h+F*d+$*f;A=ce>>>13,ce&=8191,ce+=L*l+w*u+S*c+P*a+R*(5*v),A+=ce>>>13,ce&=8191;let se=A+D*v+j*g+V*p+F*h+$*d;A=se>>>13,se&=8191,se+=L*f+w*l+S*u+P*c+R*a,A+=se>>>13,se&=8191,A=(A<<2)+A|0,A=A+T|0,T=A&8191,A=A>>>13,M+=A,s[0]=T,s[1]=M,s[2]=z,s[3]=Q,s[4]=K,s[5]=G,s[6]=te,s[7]=ie,s[8]=ce,s[9]=se}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=i,i=t[a]>>>13,t[a]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)t[a]=t[a]&s|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let o=t[0]+n[0];t[0]=o&65535;for(let a=1;a<8;a++)o=(t[a]+n[a]|0)+(o>>>16)|0,t[a]=o&65535;Wa(r)}update(t){_E(this),t=rm(t),wn(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(t,s);continue}n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Wa(this.h,this.r,this.buffer,this.pad)}digestInto(t){_E(this),fH(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)t[s++]=r[o]>>>0,t[s++]=r[o]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function RH(e){const t=(r,i)=>e(i).update(rm(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const TH=RH(e=>new OH(e));function PH(e,t,n,r,i,s=20){let o=e[0],a=e[1],c=e[2],u=e[3],l=t[0],f=t[1],d=t[2],h=t[3],p=t[4],g=t[5],v=t[6],m=t[7],_=i,E=n[0],I=n[1],O=n[2],C=o,N=a,B=c,D=u,j=l,V=f,F=d,$=h,L=p,w=g,S=v,P=m,R=_,A=E,T=I,M=O;for(let Q=0;Q<s;Q+=2)C=C+j|0,R=be(R^C,16),L=L+R|0,j=be(j^L,12),C=C+j|0,R=be(R^C,8),L=L+R|0,j=be(j^L,7),N=N+V|0,A=be(A^N,16),w=w+A|0,V=be(V^w,12),N=N+V|0,A=be(A^N,8),w=w+A|0,V=be(V^w,7),B=B+F|0,T=be(T^B,16),S=S+T|0,F=be(F^S,12),B=B+F|0,T=be(T^B,8),S=S+T|0,F=be(F^S,7),D=D+$|0,M=be(M^D,16),P=P+M|0,$=be($^P,12),D=D+$|0,M=be(M^D,8),P=P+M|0,$=be($^P,7),C=C+V|0,M=be(M^C,16),S=S+M|0,V=be(V^S,12),C=C+V|0,M=be(M^C,8),S=S+M|0,V=be(V^S,7),N=N+F|0,R=be(R^N,16),P=P+R|0,F=be(F^P,12),N=N+F|0,R=be(R^N,8),P=P+R|0,F=be(F^P,7),B=B+$|0,A=be(A^B,16),L=L+A|0,$=be($^L,12),B=B+$|0,A=be(A^B,8),L=L+A|0,$=be($^L,7),D=D+j|0,T=be(T^D,16),w=w+T|0,j=be(j^w,12),D=D+j|0,T=be(T^D,8),w=w+T|0,j=be(j^w,7);let z=0;r[z++]=o+C|0,r[z++]=a+N|0,r[z++]=c+B|0,r[z++]=u+D|0,r[z++]=l+j|0,r[z++]=f+V|0,r[z++]=d+F|0,r[z++]=h+$|0,r[z++]=p+L|0,r[z++]=g+w|0,r[z++]=v+S|0,r[z++]=m+P|0,r[z++]=_+R|0,r[z++]=E+A|0,r[z++]=I+T|0,r[z++]=O+M|0}const kH=AH(PH,{counterRight:!1,counterLength:4,allowShortKeys:!1}),CH=new Uint8Array(16),AE=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(CH.subarray(n))},DH=new Uint8Array(32);function OE(e,t,n,r,i){const s=e(t,n,DH),o=TH.create(s);i&&AE(o,i),AE(o,r);const a=wH(r.length,i?i.length:0,!0);o.update(a);const c=o.digest();return Wa(s,a),c}const NH=e=>(t,n,r)=>({encrypt(i,s){const o=i.length;s=SE(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);e(t,n,a,a,1);const c=OE(e,t,n,a,r);return s.set(c,o),Wa(c),s},decrypt(i,s){s=SE(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=OE(e,t,n,o,r);if(!yH(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),e(t,n,s,s,1),Wa(c),s}}),dR=mH({blockSize:64,nonceLength:12,tagLength:16},NH(kH));let hR=class extends Ah{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,xh(t);const r=Or(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),lr(s)}update(t){return As(this),this.iHash.update(t),this}digestInto(t){As(this),Tr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Th=(e,t,n)=>new hR(e,t).update(n).digest();Th.create=(e,t)=>new hR(e,t);function $H(e,t,n){return xh(e),n===void 0&&(n=new Uint8Array(e.outputLen)),Th(e,Or(n),Or(t))}const Jp=Uint8Array.from([0]),RE=Uint8Array.of();function BH(e,t,n,r=32){xh(e),Di(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/i);n===void 0&&(n=RE);const o=new Uint8Array(s*i),a=Th.create(e,t),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<s;l++)Jp[0]=l+1,c.update(l===0?RE:u).update(n).update(Jp).digestInto(u),o.set(u,i*l),a._cloneInto(c);return a.destroy(),c.destroy(),lr(u,Jp),o.slice(0,r)}const UH=(e,t,n,r,i)=>BH(e,$H(e,t,n),r,i),Ph=Oh,Ow=BigInt(0),om=BigInt(1);function Td(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function so(e,t,n=""){const r=Ih(e),i=e==null?void 0:e.length,s=t!==void 0;if(!r||s&&i!==t){const o=n&&`"${n}" `,a=s?` of length ${t}`:"",c=r?`length=${i}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return e}function Yl(e){const t=e.toString(16);return t.length&1?"0"+t:t}function pR(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Ow:BigInt("0x"+e)}function kh(e){return pR(Ca(e))}function Pd(e){return Tr(e),pR(Ca(Uint8Array.from(e).reverse()))}function Rw(e,t){return Od(e.toString(16).padStart(t*2,"0"))}function Tw(e,t){return Rw(e,t).reverse()}function Zt(e,t,n){let r;if(typeof t=="string")try{r=Od(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Ih(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const eg=e=>typeof e=="bigint"&&Ow<=e;function LH(e,t,n){return eg(e)&&eg(t)&&eg(n)&&t<=e&&e<n}function am(e,t,n,r){if(!LH(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function gR(e){let t;for(t=0;e>Ow;e>>=om,t+=1);return t}const il=e=>(om<<BigInt(e))-om;function FH(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=d=>new Uint8Array(d),i=d=>Uint8Array.of(d);let s=r(e),o=r(e),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},u=(...d)=>n(o,s,...d),l=(d=r(0))=>{o=u(i(0),d),s=u(),d.length!==0&&(o=u(i(1),d),s=u())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<t;){s=u();const p=s.slice();h.push(p),d+=s.length}return is(...h)};return(d,h)=>{c(),l(d);let p;for(;!(p=h(f()));)l();return c(),p}}function Ch(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,s,o){const a=e[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(t).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function TE(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e(n,...r);return t.set(n,s),s}}const Sn=BigInt(0),on=BigInt(1),oo=BigInt(2),yR=BigInt(3),mR=BigInt(4),wR=BigInt(5),MH=BigInt(7),vR=BigInt(8),jH=BigInt(9),bR=BigInt(16);function Fn(e,t){const n=e%t;return n>=Sn?n:t+n}function mr(e,t,n){let r=e;for(;t-- >Sn;)r*=r,r%=n;return r}function PE(e,t){if(e===Sn)throw new Error("invert: expected non-zero number");if(t<=Sn)throw new Error("invert: expected positive modulus, got "+t);let n=Fn(e,t),r=t,i=Sn,s=on;for(;n!==Sn;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==on)throw new Error("invert: does not exist");return Fn(i,t)}function Pw(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function ER(e,t){const n=(e.ORDER+on)/mR,r=e.pow(t,n);return Pw(e,r,t),r}function zH(e,t){const n=(e.ORDER-wR)/vR,r=e.mul(t,oo),i=e.pow(r,n),s=e.mul(t,i),o=e.mul(e.mul(s,oo),i),a=e.mul(s,e.sub(o,e.ONE));return Pw(e,a,t),a}function HH(e){const t=$s(e),n=_R(e),r=n(t,t.neg(t.ONE)),i=n(t,r),s=n(t,t.neg(r)),o=(e+MH)/bR;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const f=a.mul(u,i),d=a.mul(u,s),h=a.eql(a.sqr(l),c),p=a.eql(a.sqr(f),c);u=a.cmov(u,l,h),l=a.cmov(d,f,p);const g=a.eql(a.sqr(l),c),v=a.cmov(u,l,g);return Pw(a,v,c),v}}function _R(e){if(e<yR)throw new Error("sqrt is not defined for small field");let t=e-on,n=0;for(;t%oo===Sn;)t/=oo,n++;let r=oo;const i=$s(e);for(;kE(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return ER;let s=i.pow(r,t);const o=(t+on)/oo;return function(a,c){if(a.is0(c))return c;if(kE(a,c)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,s),f=a.pow(c,t),d=a.pow(c,o);for(;!a.eql(f,a.ONE);){if(a.is0(f))return a.ZERO;let h=1,p=a.sqr(f);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===u)throw new Error("Cannot find square root");const g=on<<BigInt(u-h-1),v=a.pow(l,g);u=h,l=a.sqr(v),f=a.mul(f,l),d=a.mul(d,v)}return d}}function qH(e){return e%mR===yR?ER:e%vR===wR?zH:e%bR===jH?HH(e):_R(e)}const VH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function KH(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=VH.reduce((r,i)=>(r[i]="function",r),t);return Ch(e,n),e}function WH(e,t,n){if(n<Sn)throw new Error("invalid exponent, negatives unsupported");if(n===Sn)return e.ONE;if(n===on)return t;let r=e.ONE,i=t;for(;n>Sn;)n&on&&(r=e.mul(r,i)),i=e.sqr(i),n>>=on;return r}function SR(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((o,a,c)=>e.is0(a)?o:(r[c]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,c)=>e.is0(a)?o:(r[c]=e.mul(o,r[c]),e.mul(o,a)),s),r}function kE(e,t){const n=(e.ORDER-on)/oo,r=e.pow(t,n),i=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function IR(e,t){t!==void 0&&Di(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function $s(e,t,n=!1,r={}){if(e<=Sn)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,s,o=!1,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=t;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE),typeof d.modFromBytes=="boolean"&&(o=d.modFromBytes),a=d.allowedLengths}else typeof t=="number"&&(i=t),r.sqrt&&(s=r.sqrt);const{nBitLength:c,nByteLength:u}=IR(e,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const f=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:il(c),ZERO:Sn,ONE:on,allowedLengths:a,create:d=>Fn(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Sn<=d&&d<e},is0:d=>d===Sn,isValidNot0:d=>!f.is0(d)&&f.isValid(d),isOdd:d=>(d&on)===on,neg:d=>Fn(-d,e),eql:(d,h)=>d===h,sqr:d=>Fn(d*d,e),add:(d,h)=>Fn(d+h,e),sub:(d,h)=>Fn(d-h,e),mul:(d,h)=>Fn(d*h,e),pow:(d,h)=>WH(f,d,h),div:(d,h)=>Fn(d*PE(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>PE(d,e),sqrt:s||(d=>(l||(l=qH(e)),l(f,d))),toBytes:d=>n?Tw(d,u):Rw(d,u),fromBytes:(d,h=!0)=>{if(a){if(!a.includes(d.length)||d.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const g=new Uint8Array(u);g.set(d,n?0:g.length-d.length),d=g}if(d.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+d.length);let p=n?Pd(d):kh(d);if(o&&(p=Fn(p,e)),!h&&!f.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:d=>SR(f,d),cmov:(d,h,p)=>p?h:d});return Object.freeze(f)}function xR(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function AR(e){const t=xR(e);return t+Math.ceil(t/2)}function GH(e,t,n=!1){const r=e.length,i=xR(t),s=AR(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Pd(e):kh(e),a=Fn(o,t-on)+on;return n?Tw(a,i):Rw(a,i)}const Ga=BigInt(0),ao=BigInt(1);function kd(e,t){const n=t.negate();return e?n:t}function tg(e,t){const n=SR(e.Fp,t.map(r=>r.Z));return t.map((r,i)=>e.fromAffine(r.toAffine(n[i])))}function OR(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ng(e,t){OR(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,s=il(e),o=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function CE(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(e&i),c=e>>o;a>r&&(a-=s,c+=ao);const u=t*r,l=u+Math.abs(a)-1,f=a===0,d=a<0,h=t%2!==0;return{nextN:c,offset:l,isZero:f,isNeg:d,isNegF:h,offsetF:u}}function YH(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function XH(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const rg=new WeakMap,RR=new WeakMap;function ig(e){return RR.get(e)||1}function DE(e){if(e!==Ga)throw new Error("invalid wNAF")}class ZH{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let i=t;for(;n>Ga;)n&ao&&(r=r.add(i)),i=i.double(),n>>=ao;return r}precomputeWindow(t,n){const{windows:r,windowSize:i}=ng(n,this.bits),s=[];let o=t,a=o;for(let c=0;c<r;c++){a=o,s.push(a);for(let u=1;u<i;u++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=ng(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:f,isNegF:d,offsetF:h}=CE(r,a,o);r=c,l?s=s.add(kd(d,n[h])):i=i.add(kd(f,n[u]))}return DE(r),{p:i,f:s}}wNAFUnsafe(t,n,r,i=this.ZERO){const s=ng(t,this.bits);for(let o=0;o<s.windows&&r!==Ga;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=CE(r,o,s);if(r=a,!u){const f=n[c];i=i.add(l?f.negate():f)}}return DE(r),i}getPrecomputes(t,n,r){let i=rg.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(i=r(i)),rg.set(n,i))),i}cached(t,n,r){const i=ig(t);return this.wNAF(i,this.getPrecomputes(i,t,r),n)}unsafe(t,n,r,i){const s=ig(t);return s===1?this._unsafeLadder(t,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,t,r),n,i)}createCache(t,n){OR(n,this.bits),RR.set(t,n),rg.delete(t)}hasCache(t){return ig(t)!==1}}function QH(e,t,n,r){let i=t,s=e.ZERO,o=e.ZERO;for(;n>Ga||r>Ga;)n&ao&&(s=s.add(i)),r&ao&&(o=o.add(i)),i=i.double(),n>>=ao,r>>=ao;return{p1:s,p2:o}}function JH(e,t,n,r){YH(n,e),XH(r,t);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=gR(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=il(c),l=new Array(Number(u)+1).fill(o),f=Math.floor((t.BITS-1)/c)*c;let d=o;for(let h=f;h>=0;h-=c){l.fill(o);for(let g=0;g<s;g++){const v=r[g],m=Number(v>>BigInt(h)&u);l[m]=l[m].add(n[g])}let p=o;for(let g=l.length-1,v=o;g>0;g--)v=v.add(l[g]),p=p.add(v);if(d=d.add(p),h!==0)for(let g=0;g<c;g++)d=d.double()}return d}function NE(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return KH(t),t}else return $s(e,{isLE:n})}function eq(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const c=t[a];if(!(typeof c=="bigint"&&c>Ga))throw new Error(`CURVE.${a} must be positive bigint`)}const i=NE(t.p,n.Fp,r),s=NE(t.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!i.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),ZO("HashToScalar-");const Ac=BigInt(0),Xo=BigInt(1),Xl=BigInt(2);function tq(e){return Ch(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function nq(e){const t=tq(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=t,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||No,u=a?255:448,l=a?32:56,f=BigInt(a?9:5),d=BigInt(a?121665:39081),h=a?Xl**BigInt(254):Xl**BigInt(447),p=a?BigInt(8)*Xl**BigInt(251)-Xo:BigInt(4)*Xl**BigInt(445)-Xo,g=h+p+Xo,v=F=>Fn(F,n),m=_(f);function _(F){return Tw(v(F),l)}function E(F){const $=Zt("u coordinate",F,l);return a&&($[31]&=127),v(Pd($))}function I(F){return Pd(i(Zt("scalar",F,l)))}function O(F,$){const L=B(E($),I(F));if(L===Ac)throw new Error("invalid private or public key received");return _(L)}function C(F){return O(F,m)}function N(F,$,L){const w=v(F*($-L));return $=v($-w),L=v(L+w),{x_2:$,x_3:L}}function B(F,$){am("u",F,Ac,n),am("scalar",$,h,g);const L=$,w=F;let S=Xo,P=Ac,R=F,A=Xo,T=Ac;for(let z=BigInt(u-1);z>=Ac;z--){const Q=L>>z&Xo;T^=Q,{x_2:S,x_3:R}=N(T,S,R),{x_2:P,x_3:A}=N(T,P,A),T=Q;const K=S+P,G=v(K*K),te=S-P,ie=v(te*te),ce=G-ie,se=R+A,le=R-A,Le=v(le*K),Qe=v(se*te),Fe=Le+Qe,st=Le-Qe;R=v(Fe*Fe),A=v(w*v(st*st)),S=v(G*ie),P=v(ce*(G+v(d*ce)))}({x_2:S,x_3:R}=N(T,S,R)),{x_2:P,x_3:A}=N(T,P,A);const M=s(P);return v(S*M)}const D={secretKey:l,publicKey:l,seed:l},j=(F=c(l))=>(Tr(F,D.seed),F);function V(F){const $=j(F);return{secretKey:$,publicKey:C($)}}return{keygen:V,getSharedSecret:(F,$)=>O(F,$),getPublicKey:F=>C(F),scalarMult:O,scalarMultBase:C,utils:{randomSecretKey:j,randomPrivateKey:j},GuBytes:m.slice(),lengths:D}}const rq=BigInt(1),$E=BigInt(2),iq=BigInt(3),sq=BigInt(5);BigInt(8);const TR=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),oq={p:TR,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function aq(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=TR,o=e*e%s*e%s,a=mr(o,$E,s)*o%s,c=mr(a,rq,s)*e%s,u=mr(c,sq,s)*c%s,l=mr(u,t,s)*u%s,f=mr(l,n,s)*l%s,d=mr(f,r,s)*f%s,h=mr(d,i,s)*d%s,p=mr(h,i,s)*d%s,g=mr(p,t,s)*u%s;return{pow_p_5_8:mr(g,$E,s)*e%s,b2:o}}function cq(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const uq=$s(oq.p,{isLE:!0}),cm=(()=>{const e=uq.ORDER;return nq({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=aq(t);return Fn(mr(n,iq,e)*r,e)},adjustScalarBytes:cq})})(),BE=(e,t)=>(e+(e>=0?t:-t)/PR)/t;function lq(e,t,n){const[[r,i],[s,o]]=t,a=BE(o*e,n),c=BE(-i*e,n);let u=e-a*r-c*s,l=-a*i-c*o;const f=u<_i,d=l<_i;f&&(u=-u),d&&(l=-l);const h=il(Math.ceil(gR(n)/2))+Da;if(u<_i||u>=h||l<_i||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:u,k2neg:d,k2:l}}function um(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function sg(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return Td(n.lowS,"lowS"),Td(n.prehash,"prehash"),n.format!==void 0&&um(n.format),n}class fq extends Error{constructor(t=""){super(t)}}const yi={Err:fq,_tlv:{encode:(e,t)=>{const{Err:n}=yi;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Yl(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Yl(i.length/2|128):"";return Yl(e)+s+i+t},decode(e,t){const{Err:n}=yi;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=yi;if(e<_i)throw new t("integer: negative integers are not allowed");let n=Yl(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=yi;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return kh(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=yi,i=Zt("signature",e),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=yi,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),s=r+i;return t.encode(48,s)}},_i=BigInt(0),Da=BigInt(1),PR=BigInt(2),Zl=BigInt(3),dq=BigInt(4);function ga(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let i=Zt("private key",t);try{r=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function hq(e,t={}){const n=eq("weierstrass",e,t),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;Ch(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=CR(r,i);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(F,$,L){const{x:w,y:S}=$.toAffine(),P=r.toBytes(w);if(Td(L,"isCompressed"),L){l();const R=!r.isOdd(S);return is(kR(R),P)}else return is(Uint8Array.of(4),P,r.toBytes(S))}function d(F){so(F,void 0,"Point");const{publicKey:$,publicKeyUncompressed:L}=u,w=F.length,S=F[0],P=F.subarray(1);if(w===$&&(S===2||S===3)){const R=r.fromBytes(P);if(!r.isValid(R))throw new Error("bad point: is not on curve, wrong x");const A=g(R);let T;try{T=r.sqrt(A)}catch(z){const Q=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+Q)}l();const M=r.isOdd(T);return(S&1)===1!==M&&(T=r.neg(T)),{x:R,y:T}}else if(w===L&&S===4){const R=r.BYTES,A=r.fromBytes(P.subarray(0,R)),T=r.fromBytes(P.subarray(R,R*2));if(!v(A,T))throw new Error("bad point: is not on curve");return{x:A,y:T}}else throw new Error(`bad point: got length ${w}, expected compressed=${$} or uncompressed=${L}`)}const h=t.toBytes||f,p=t.fromBytes||d;function g(F){const $=r.sqr(F),L=r.mul($,F);return r.add(r.add(L,r.mul(F,s.a)),s.b)}function v(F,$){const L=r.sqr($),w=g(F);return r.eql(L,w)}if(!v(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const m=r.mul(r.pow(s.a,Zl),dq),_=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(m,_)))throw new Error("bad curve params: a or b");function E(F,$,L=!1){if(!r.isValid($)||L&&r.is0($))throw new Error(`bad point coordinate ${F}`);return $}function I(F){if(!(F instanceof D))throw new Error("ProjectivePoint expected")}function O(F){if(!c||!c.basises)throw new Error("no endo");return lq(F,c.basises,i.ORDER)}const C=TE((F,$)=>{const{X:L,Y:w,Z:S}=F;if(r.eql(S,r.ONE))return{x:L,y:w};const P=F.is0();$==null&&($=P?r.ONE:r.inv(S));const R=r.mul(L,$),A=r.mul(w,$),T=r.mul(S,$);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:R,y:A}}),N=TE(F=>{if(F.is0()){if(t.allowInfinityPoint&&!r.is0(F.Y))return;throw new Error("bad point: ZERO")}const{x:$,y:L}=F.toAffine();if(!r.isValid($)||!r.isValid(L))throw new Error("bad point: x or y not field elements");if(!v($,L))throw new Error("bad point: equation left != right");if(!F.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function B(F,$,L,w,S){return L=new D(r.mul(L.X,F),L.Y,L.Z),$=kd(w,$),L=kd(S,L),$.add(L)}class D{constructor($,L,w){this.X=E("x",$),this.Y=E("y",L,!0),this.Z=E("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine($){const{x:L,y:w}=$||{};if(!$||!r.isValid(L)||!r.isValid(w))throw new Error("invalid affine point");if($ instanceof D)throw new Error("projective point not allowed");return r.is0(L)&&r.is0(w)?D.ZERO:new D(L,w,r.ONE)}static fromBytes($){const L=D.fromAffine(p(so($,void 0,"point")));return L.assertValidity(),L}static fromHex($){return D.fromBytes(Zt("pointHex",$))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute($=8,L=!0){return V.createCache(this,$),L||this.multiply(Zl),this}assertValidity(){N(this)}hasEvenY(){const{y:$}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd($)}equals($){I($);const{X:L,Y:w,Z:S}=this,{X:P,Y:R,Z:A}=$,T=r.eql(r.mul(L,A),r.mul(P,S)),M=r.eql(r.mul(w,A),r.mul(R,S));return T&&M}negate(){return new D(this.X,r.neg(this.Y),this.Z)}double(){const{a:$,b:L}=s,w=r.mul(L,Zl),{X:S,Y:P,Z:R}=this;let A=r.ZERO,T=r.ZERO,M=r.ZERO,z=r.mul(S,S),Q=r.mul(P,P),K=r.mul(R,R),G=r.mul(S,P);return G=r.add(G,G),M=r.mul(S,R),M=r.add(M,M),A=r.mul($,M),T=r.mul(w,K),T=r.add(A,T),A=r.sub(Q,T),T=r.add(Q,T),T=r.mul(A,T),A=r.mul(G,A),M=r.mul(w,M),K=r.mul($,K),G=r.sub(z,K),G=r.mul($,G),G=r.add(G,M),M=r.add(z,z),z=r.add(M,z),z=r.add(z,K),z=r.mul(z,G),T=r.add(T,z),K=r.mul(P,R),K=r.add(K,K),z=r.mul(K,G),A=r.sub(A,z),M=r.mul(K,Q),M=r.add(M,M),M=r.add(M,M),new D(A,T,M)}add($){I($);const{X:L,Y:w,Z:S}=this,{X:P,Y:R,Z:A}=$;let T=r.ZERO,M=r.ZERO,z=r.ZERO;const Q=s.a,K=r.mul(s.b,Zl);let G=r.mul(L,P),te=r.mul(w,R),ie=r.mul(S,A),ce=r.add(L,w),se=r.add(P,R);ce=r.mul(ce,se),se=r.add(G,te),ce=r.sub(ce,se),se=r.add(L,S);let le=r.add(P,A);return se=r.mul(se,le),le=r.add(G,ie),se=r.sub(se,le),le=r.add(w,S),T=r.add(R,A),le=r.mul(le,T),T=r.add(te,ie),le=r.sub(le,T),z=r.mul(Q,se),T=r.mul(K,ie),z=r.add(T,z),T=r.sub(te,z),z=r.add(te,z),M=r.mul(T,z),te=r.add(G,G),te=r.add(te,G),ie=r.mul(Q,ie),se=r.mul(K,se),te=r.add(te,ie),ie=r.sub(G,ie),ie=r.mul(Q,ie),se=r.add(se,ie),G=r.mul(te,se),M=r.add(M,G),G=r.mul(le,se),T=r.mul(ce,T),T=r.sub(T,G),G=r.mul(ce,te),z=r.mul(le,z),z=r.add(z,G),new D(T,M,z)}subtract($){return this.add($.negate())}is0(){return this.equals(D.ZERO)}multiply($){const{endo:L}=t;if(!i.isValidNot0($))throw new Error("invalid scalar: out of range");let w,S;const P=R=>V.cached(this,R,A=>tg(D,A));if(L){const{k1neg:R,k1:A,k2neg:T,k2:M}=O($),{p:z,f:Q}=P(A),{p:K,f:G}=P(M);S=Q.add(G),w=B(L.beta,z,K,R,T)}else{const{p:R,f:A}=P($);w=R,S=A}return tg(D,[w,S])[0]}multiplyUnsafe($){const{endo:L}=t,w=this;if(!i.isValid($))throw new Error("invalid scalar: out of range");if($===_i||w.is0())return D.ZERO;if($===Da)return w;if(V.hasCache(this))return this.multiply($);if(L){const{k1neg:S,k1:P,k2neg:R,k2:A}=O($),{p1:T,p2:M}=QH(D,w,P,A);return B(L.beta,T,M,S,R)}else return V.unsafe(w,$)}multiplyAndAddUnsafe($,L,w){const S=this.multiplyUnsafe(L).add($.multiplyUnsafe(w));return S.is0()?void 0:S}toAffine($){return C(this,$)}isTorsionFree(){const{isTorsionFree:$}=t;return o===Da?!0:$?$(D,this):V.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:$}=t;return o===Da?this:$?$(D,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes($=!0){return Td($,"isCompressed"),this.assertValidity(),h(D,this,$)}toHex($=!0){return Ca(this.toBytes($))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes($=!0){return this.toBytes($)}_setWindowSize($){this.precompute($)}static normalizeZ($){return tg(D,$)}static msm($,L){return JH(D,i,$,L)}static fromPrivateKey($){return D.BASE.multiply(ga(i,$))}}D.BASE=new D(s.Gx,s.Gy,r.ONE),D.ZERO=new D(r.ZERO,r.ONE,r.ZERO),D.Fp=r,D.Fn=i;const j=i.BITS,V=new ZH(D,t.endo?Math.ceil(j/2):j);return D.BASE.precompute(8),D}function kR(e){return Uint8Array.of(e?2:3)}function CR(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function pq(e,t={}){const{Fn:n}=e,r=t.randomBytes||No,i=Object.assign(CR(e.Fp,n),{seed:AR(n.ORDER)});function s(d){try{return!!ga(n,d)}catch{return!1}}function o(d,h){const{publicKey:p,publicKeyUncompressed:g}=i;try{const v=d.length;return h===!0&&v!==p||h===!1&&v!==g?!1:!!e.fromBytes(d)}catch{return!1}}function a(d=r(i.seed)){return GH(so(d,i.seed,"seed"),n.ORDER)}function c(d,h=!0){return e.BASE.multiply(ga(n,d)).toBytes(h)}function u(d){const h=a(d);return{secretKey:h,publicKey:c(h)}}function l(d){if(typeof d=="bigint")return!1;if(d instanceof e)return!0;const{secretKey:h,publicKey:p,publicKeyUncompressed:g}=i;if(n.allowedLengths||h===p)return;const v=Zt("key",d).length;return v===p||v===g}function f(d,h,p=!0){if(l(d)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const g=ga(n,d);return e.fromHex(h).multiply(g).toBytes(p)}return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:u,Point:e,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:d=>ga(n,d),precompute(d=8,h=e.BASE){return h.precompute(d,!1)}},lengths:i})}function gq(e,t,n={}){xh(t),Ch(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||No,i=n.hmac||((L,...w)=>Th(t,L,is(...w))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:f,utils:d,lengths:h}=pq(e,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function v(L){const w=a>>Da;return L>w}function m(L,w){if(!o.isValidNot0(w))throw new Error(`invalid signature ${L}: out of range 1..Point.Fn.ORDER`);return w}function _(L,w){um(w);const S=h.signature,P=w==="compact"?S:w==="recovered"?S+1:void 0;return so(L,P,`${w} signature`)}class E{constructor(w,S,P){this.r=m("r",w),this.s=m("s",S),P!=null&&(this.recovery=P),Object.freeze(this)}static fromBytes(w,S=g){_(w,S);let P;if(S==="der"){const{r:M,s:z}=yi.toSig(so(w));return new E(M,z)}S==="recovered"&&(P=w[0],S="compact",w=w.subarray(1));const R=o.BYTES,A=w.subarray(0,R),T=w.subarray(R,R*2);return new E(o.fromBytes(A),o.fromBytes(T),P)}static fromHex(w,S){return this.fromBytes(Od(w),S)}addRecoveryBit(w){return new E(this.r,this.s,w)}recoverPublicKey(w){const S=s.ORDER,{r:P,s:R,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(a*PR<S&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const T=A===2||A===3?P+a:P;if(!s.isValid(T))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(T),z=e.fromBytes(is(kR((A&1)===0),M)),Q=o.inv(T),K=O(Zt("msgHash",w)),G=o.create(-K*Q),te=o.create(R*Q),ie=e.BASE.multiplyUnsafe(G).add(z.multiplyUnsafe(te));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return v(this.s)}toBytes(w=g){if(um(w),w==="der")return Od(yi.hexFromSig(this));const S=o.toBytes(this.r),P=o.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return is(Uint8Array.of(this.recovery),S,P)}return is(S,P)}toHex(w){return Ca(this.toBytes(w))}assertValidity(){}static fromCompact(w){return E.fromBytes(Zt("sig",w),"compact")}static fromDER(w){return E.fromBytes(Zt("sig",w),"der")}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ca(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ca(this.toBytes("compact"))}}const I=n.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const w=kh(L),S=L.length*8-c;return S>0?w>>BigInt(S):w},O=n.bits2int_modN||function(L){return o.create(I(L))},C=il(c);function N(L){return am("num < 2^"+c,L,_i,C),o.toBytes(L)}function B(L,w){return so(L,void 0,"message"),w?so(t(L),void 0,"prehashed message"):L}function D(L,w,S){if(["recovered","canonical"].some(te=>te in S))throw new Error("sign() legacy options not supported");const{lowS:P,prehash:R,extraEntropy:A}=sg(S,p);L=B(L,R);const T=O(L),M=ga(o,w),z=[N(M),N(T)];if(A!=null&&A!==!1){const te=A===!0?r(h.secretKey):A;z.push(Zt("extraEntropy",te))}const Q=is(...z),K=T;function G(te){const ie=I(te);if(!o.isValidNot0(ie))return;const ce=o.inv(ie),se=e.BASE.multiply(ie).toAffine(),le=o.create(se.x);if(le===_i)return;const Le=o.create(ce*o.create(K+le*M));if(Le===_i)return;let Qe=(se.x===le?0:2)|Number(se.y&Da),Fe=Le;return P&&v(Le)&&(Fe=o.neg(Le),Qe^=1),new E(le,Fe,Qe)}return{seed:Q,k2sig:G}}function j(L,w,S={}){L=Zt("message",L);const{seed:P,k2sig:R}=D(L,w,S);return FH(t.outputLen,o.BYTES,i)(P,R)}function V(L){let w;const S=typeof L=="string"||Ih(L),P=!S&&L!==null&&typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!S&&!P)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(P)w=new E(L.r,L.s);else if(S){try{w=E.fromBytes(Zt("sig",L),"der")}catch(R){if(!(R instanceof yi.Err))throw R}if(!w)try{w=E.fromBytes(Zt("sig",L),"compact")}catch{return!1}}return w||!1}function F(L,w,S,P={}){const{lowS:R,prehash:A,format:T}=sg(P,p);if(S=Zt("publicKey",S),w=B(Zt("message",w),A),"strict"in P)throw new Error("options.strict was renamed to lowS");const M=T===void 0?V(L):E.fromBytes(Zt("sig",L),T);if(M===!1)return!1;try{const z=e.fromBytes(S);if(R&&M.hasHighS())return!1;const{r:Q,s:K}=M,G=O(w),te=o.inv(K),ie=o.create(G*te),ce=o.create(Q*te),se=e.BASE.multiplyUnsafe(ie).add(z.multiplyUnsafe(ce));return se.is0()?!1:o.create(se.x)===Q}catch{return!1}}function $(L,w,S={}){const{prehash:P}=sg(S,p);return w=B(w,P),E.fromBytes(L,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:f,utils:d,lengths:h,Point:e,sign:j,verify:F,recoverPublicKey:$,Signature:E,hash:t})}function yq(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=$s(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function mq(e){const{CURVE:t,curveOpts:n}=yq(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function wq(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,IR(n.Fn.ORDER,n.Fn.BITS))})}function vq(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:i}=mq(e),s=hq(t,n),o=gq(s,r,i);return wq(e,o)}function lm(e,t){const n=r=>vq({...e,hash:r});return{...n(t),create:n}}const DR={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},NR={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},$R={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},bq=$s(DR.p),Eq=$s(NR.p),_q=$s($R.p),Sq=lm({...DR,Fp:bq,lowS:!1},Oh);lm({...NR,Fp:Eq,lowS:!1},Rz),lm({...$R,Fp:_q,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Oz);const Iq=Sq,BR="base10",an="base16",vn="base64pad",ss="base64url",sl="utf8",UR=0,Oi=1,ol=2,xq=0,UE=1,nu=12,kw=32;function Aq(){const e=cm.utils.randomPrivateKey(),t=cm.getPublicKey(e);return{privateKey:On(e,an),publicKey:On(t,an)}}function fm(){const e=No(kw);return On(e,an)}function Oq(e,t){const n=cm.getSharedSecret(or(e,an),or(t,an)),r=UH(Ph,n,void 0,void 0,kw);return On(r,an)}function Nf(e){const t=Ph(or(e,an));return On(t,an)}function tr(e){const t=Ph(or(e,sl));return On(t,an)}function LR(e){return or(`${e}`,BR)}function Ao(e){return Number(On(e,BR))}function FR(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function MR(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function Rq(e){const t=LR(typeof e.type<"u"?e.type:UR);if(Ao(t)===Oi&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?or(e.senderPublicKey,an):void 0,r=typeof e.iv<"u"?or(e.iv,an):No(nu),i=or(e.symKey,an),s=dR(i,r).encrypt(or(e.message,sl)),o=jR({type:t,sealed:s,iv:r,senderPublicKey:n});return e.encoding===ss?FR(o):o}function Tq(e){const t=or(e.symKey,an),{sealed:n,iv:r}=Uu({encoded:e.encoded,encoding:e.encoding}),i=dR(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return On(i,sl)}function Pq(e,t){const n=LR(ol),r=No(nu),i=or(e,sl),s=jR({type:n,sealed:i,iv:r});return t===ss?FR(s):s}function kq(e,t){const{sealed:n}=Uu({encoded:e,encoding:t});return On(n,sl)}function jR(e){if(Ao(e.type)===ol)return On(tu([e.type,e.sealed]),vn);if(Ao(e.type)===Oi){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return On(tu([e.type,e.senderPublicKey,e.iv,e.sealed]),vn)}return On(tu([e.type,e.iv,e.sealed]),vn)}function Uu(e){const t=(e.encoding||vn)===ss?MR(e.encoded):e.encoded,n=or(t,vn),r=n.slice(xq,UE),i=UE;if(Ao(r)===Oi){const c=i+kw,u=c+nu,l=n.slice(i,c),f=n.slice(c,u),d=n.slice(u);return{type:r,sealed:d,iv:f,senderPublicKey:l}}if(Ao(r)===ol){const c=n.slice(i),u=No(nu);return{type:r,sealed:c,iv:u}}const s=i+nu,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function Cq(e,t){const n=Uu({encoded:e,encoding:t==null?void 0:t.encoding});return zR({type:Ao(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?On(n.senderPublicKey,an):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function zR(e){const t=(e==null?void 0:e.type)||UR;if(t===Oi){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function LE(e){return e.type===Oi&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function FE(e){return e.type===ol}function Dq(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return tu([new Uint8Array([4]),t,n])}function Nq(e,t){const[n,r,i]=e.split("."),s=Buffer.from(MR(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,u=Ph(c),l=Dq(t);if(!Iq.verify(tu([o,a]),u,l))throw new Error("Invalid signature");return Yy(e).payload}const $q="irn";function Cd(e){return(e==null?void 0:e.relay)||{protocol:$q}}function ya(e){const t=w7[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Bq=Object.defineProperty,Uq=Object.defineProperties,Lq=Object.getOwnPropertyDescriptors,ME=Object.getOwnPropertySymbols,Fq=Object.prototype.hasOwnProperty,Mq=Object.prototype.propertyIsEnumerable,jE=(e,t,n)=>t in e?Bq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,og=(e,t)=>{for(var n in t||(t={}))Fq.call(t,n)&&jE(e,n,t[n]);if(ME)for(var n of ME(t))Mq.call(t,n)&&jE(e,n,t[n]);return e},jq=(e,t)=>Uq(e,Lq(t));function zq(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=e[i];n[s]=o}}),n}function zE(e){if(!e.includes("wc:")){const u=VO(e);u!=null&&u.includes("wc:")&&(e=u)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),s=typeof n<"u"?e.substring(n):"",o=new URLSearchParams(s),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Hq(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:zq(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Hq(e){return e.startsWith("//")?e.substring(2):e}function qq(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const s=i,o=n+t+s;e[s]&&(r[o]=e[s])}),r}function HE(e){const t=new URLSearchParams,n=og(og(jq(og({},qq(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(n).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!==void 0&&t.append(r,String(i))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function Ql(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var Vq=Object.defineProperty,Kq=Object.defineProperties,Wq=Object.getOwnPropertyDescriptors,qE=Object.getOwnPropertySymbols,Gq=Object.prototype.hasOwnProperty,Yq=Object.prototype.propertyIsEnumerable,VE=(e,t,n)=>t in e?Vq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xq=(e,t)=>{for(var n in t||(t={}))Gq.call(t,n)&&VE(e,n,t[n]);if(qE)for(var n of qE(t))Yq.call(t,n)&&VE(e,n,t[n]);return e},Zq=(e,t)=>Kq(e,Wq(t));function ic(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function HR(e){const t=[];return Object.values(e).forEach(n=>{t.push(...ic(n.accounts))}),[...new Set(t)]}function Qq(e){const t=[];return Object.values(e).forEach(n=>{t.push(...n.methods)}),[...new Set(t)]}function Jq(e){const t=[];return Object.values(e).forEach(n=>{t.push(...n.events)}),[...new Set(t)]}function eV(e,t){const n=[];return Object.values(e).forEach(r=>{ic(r.accounts).includes(t)&&n.push(...r.methods)}),n}function tV(e,t){const n=[];return Object.values(e).forEach(r=>{ic(r.accounts).includes(t)&&n.push(...r.events)}),n}function Dh(e){return e.includes(":")}function ma(e){return Dh(e)?e.split(":")[0]:e}function KE(e){var t,n,r;const i={};if(!Jr(e))return i;for(const[s,o]of Object.entries(e)){const a=Dh(s)?[s]:o.chains,c=o.methods||[],u=o.events||[],l=ma(s);i[l]=Zq(Xq({},i[l]),{chains:Qr(a,(t=i[l])==null?void 0:t.chains),methods:Qr(c,(n=i[l])==null?void 0:n.methods),events:Qr(u,(r=i[l])==null?void 0:r.events)})}return i}function nV(e){const t={};return e==null||e.forEach(n=>{var r;const[i,s]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${s}`)}),t}function WE(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=nV(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Qr(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function rV(e,t){var n,r,i,s,o,a;const c=KE(e),u=KE(t),l={},f=Object.keys(c).concat(Object.keys(u));for(const d of f)l[d]={chains:Qr((n=c[d])==null?void 0:n.chains,(r=u[d])==null?void 0:r.chains),methods:Qr((i=c[d])==null?void 0:i.methods,(s=u[d])==null?void 0:s.methods),events:Qr((o=c[d])==null?void 0:o.events,(a=u[d])==null?void 0:a.events)};return l}const iV={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},sV={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(e,t){const{message:n,code:r}=sV[e];return{message:t?`${n} ${t}`:n,code:r}}function Ve(e,t){const{message:n,code:r}=iV[e];return{message:t?`${n} ${t}`:n,code:r}}function Ri(e,t){return!!Array.isArray(e)}function Jr(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ot(e){return typeof e>"u"}function ft(e,t){return t&&Ot(e)?!0:typeof e=="string"&&!!e.trim().length}function Cw(e,t){return typeof e=="number"&&!isNaN(e)}function oV(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let s=!0;return io(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:u}=e.namespaces[o],l=ic(a),f=n[o];(!io(MO(o,f),l)||!io(f.methods,c)||!io(f.events,u))&&(s=!1)}),s):!1}function Dd(e){return ft(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function aV(e){if(ft(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&Dd(n)}}return!1}function cV(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(ft(e,!1)){if(t(e))return!0;const n=VO(e);return t(n)}}catch{}return!1}function uV(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function lV(e){return e==null?void 0:e.topic}function fV(e,t){let n=null;return ft(e==null?void 0:e.publicKey,!1)||(n=J("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function GE(e){let t=!0;return Ri(e)?e.length&&(t=e.every(n=>ft(n,!1))):t=!1,t}function dV(e,t,n){let r=null;return Ri(t)&&t.length?t.forEach(i=>{r||Dd(i)||(r=Ve("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Dd(e)||(r=Ve("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function hV(e,t,n){let r=null;return Object.entries(e).forEach(([i,s])=>{if(r)return;const o=dV(i,MO(i,s),`${t} ${n}`);o&&(r=o)}),r}function pV(e,t){let n=null;return Ri(e)?e.forEach(r=>{n||aV(r)||(n=Ve("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Ve("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function gV(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=pV(r==null?void 0:r.accounts,`${t} namespace`);i&&(n=i)}),n}function yV(e,t){let n=null;return GE(e==null?void 0:e.methods)?GE(e==null?void 0:e.events)||(n=Ve("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Ve("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function qR(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=yV(r,`${t}, namespace`);i&&(n=i)}),n}function mV(e,t,n){let r=null;if(e&&Jr(e)){const i=qR(e,t);i&&(r=i);const s=hV(e,t,n);s&&(r=s)}else r=J("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function ag(e,t){let n=null;if(e&&Jr(e)){const r=qR(e,t);r&&(n=r);const i=gV(e,t);i&&(n=i)}else n=J("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function VR(e){return ft(e.protocol,!0)}function wV(e,t){let n=!1;return e?e&&Ri(e)&&e.length&&e.forEach(r=>{n=VR(r)}):n=!0,n}function vV(e){return typeof e=="number"}function yn(e){return typeof e<"u"&&typeof e!==null}function bV(e){return!(!e||typeof e!="object"||!e.code||!Cw(e.code)||!e.message||!ft(e.message,!1))}function EV(e){return!(Ot(e)||!ft(e.method,!1))}function _V(e){return!(Ot(e)||Ot(e.result)&&Ot(e.error)||!Cw(e.id)||!ft(e.jsonrpc,!1))}function SV(e){return!(Ot(e)||!ft(e.name,!1))}function YE(e,t){return!(!Dd(t)||!HR(e).includes(t))}function IV(e,t,n){return ft(n,!1)?eV(e,t).includes(n):!1}function xV(e,t,n){return ft(n,!1)?tV(e,t).includes(n):!1}function XE(e,t,n){let r=null;const i=AV(e),s=OV(t),o=Object.keys(i),a=Object.keys(s),c=ZE(Object.keys(e)),u=ZE(Object.keys(t)),l=c.filter(f=>!u.includes(f));return l.length&&(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),io(o,a)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(f=>{if(!f.includes(":")||r)return;const d=ic(t[f].accounts);d.includes(f)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${d.toString()}`))}),o.forEach(f=>{r||(io(i[f].methods,s[f].methods)?io(i[f].events,s[f].events)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${f}`)):r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${f}`))}),r}function AV(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function ZE(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function OV(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=ic(e[n].accounts);r==null||r.forEach(i=>{t[i]={accounts:e[n].accounts.filter(s=>s.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function RV(e,t){return Cw(e)&&e<=t.max&&e>=t.min}function QE(){const e=nl();return new Promise(t=>{switch(e){case Hn.browser:t(TV());break;case Hn.reactNative:t(PV());break;case Hn.node:t(kV());break;default:t(!0)}})}function TV(){return rc()&&(navigator==null?void 0:navigator.onLine)}async function PV(){if(Ns()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e==null?void 0:e.isConnected}return!0}function kV(){return!0}function CV(e){switch(nl()){case Hn.browser:DV(e);break;case Hn.reactNative:NV(e);break}}function DV(e){!Ns()&&rc()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function NV(e){Ns()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(t=>e(t==null?void 0:t.isConnected)))}function $V(){var e;return rc()&&Eo()?((e=Eo())==null?void 0:e.visibilityState)==="visible":!0}const cg={};class Oc{static get(t){return cg[t]}static set(t,n){cg[t]=n}static delete(t){delete cg[t]}}function BV(e){const t=Ju.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function UV({publicKey:e,signature:t,payload:n}){var r;const i=dm(n.method),s=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=MV(n.address),a=n.era==="00"?new Uint8Array([0]):dm(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${FV(n.tip)}`),f=zV(l),d=new Uint8Array([0,...e,o,...t,...a,...u,...f,...i]),h=jV(d.length+1);return new Uint8Array([...h,s,...d])}function LV(e){const t=dm(e),n=P7.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function dm(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function FV(e){return e.startsWith("0x")?e.slice(2):e}function MV(e){const t=Ju.decode(e)[0];return t===42?0:t===60?2:1}function jV(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function zV(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function HV(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=BV(e.transaction.address),r=UV({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return LV(i)}function Dw({logger:e,name:t}){const n=typeof e=="string"?FO({opts:{level:e,name:t}}).logger:e;return n.level=typeof e=="string"?e:e.level,n}var Nh,Ue,KR,Qs,JE,WR,GR,YR,Nw,hm,pm,Nd={},$d=[],qV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,$h=Array.isArray;function Si(e,t){for(var n in t)e[n]=t[n];return e}function $w(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function VV(e,t,n){var r,i,s,o={};for(s in t)s=="key"?r=t[s]:s=="ref"?i=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?Nh.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return $f(e,o,r,i,null)}function $f(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++KR,__i:-1,__u:0};return i==null&&Ue.vnode!=null&&Ue.vnode(s),s}function Bh(e){return e.children}function Bf(e,t){this.props=e,this.context=t}function Ya(e,t){if(t==null)return e.__?Ya(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Ya(e):null}function KV(e){if(e.__P&&e.__d){var t=e.__v,n=t.__e,r=[],i=[],s=Si({},t);s.__v=t.__v+1,Ue.vnode&&Ue.vnode(s),Bw(e.__P,s,t,e.__n,e.__P.namespaceURI,32&t.__u?[n]:null,r,n??Ya(t),!!(32&t.__u),i),s.__v=t.__v,s.__.__k[s.__i]=s,JR(r,s,i),t.__e=t.__=null,s.__e!=n&&XR(s)}}function XR(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(t){if(t!=null&&t.__e!=null)return e.__e=e.__c.base=t.__e}),XR(e)}function e2(e){(!e.__d&&(e.__d=!0)&&Qs.push(e)&&!Bd.__r++||JE!=Ue.debounceRendering)&&((JE=Ue.debounceRendering)||WR)(Bd)}function Bd(){for(var e,t=1;Qs.length;)Qs.length>t&&Qs.sort(GR),e=Qs.shift(),t=Qs.length,KV(e);Bd.__r=0}function ZR(e,t,n,r,i,s,o,a,c,u,l){var f,d,h,p,g,v,m,_=r&&r.__k||$d,E=t.length;for(c=WV(n,t,_,c,E),f=0;f<E;f++)(h=n.__k[f])!=null&&(d=h.__i!=-1&&_[h.__i]||Nd,h.__i=f,v=Bw(e,h,d,i,s,o,a,c,u,l),p=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&Uw(d.ref,null,h),l.push(h.ref,h.__c||p,h)),g==null&&p!=null&&(g=p),(m=!!(4&h.__u))||d.__k===h.__k?c=QR(h,c,e,m):typeof h.type=="function"&&v!==void 0?c=v:p&&(c=p.nextSibling),h.__u&=-7);return n.__e=g,c}function WV(e,t,n,r,i){var s,o,a,c,u,l=n.length,f=l,d=0;for(e.__k=new Array(i),s=0;s<i;s++)(o=t[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[s]=$f(null,o,null,null,null):$h(o)?o=e.__k[s]=$f(Bh,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=e.__k[s]=$f(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[s]=o,c=s+d,o.__=e,o.__b=e.__b+1,a=null,(u=o.__i=GV(o,n,c,f))!=-1&&(f--,(a=n[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(i>l?d--:i<l&&d++),typeof o.type!="function"&&(o.__u|=4)):u!=c&&(u==c-1?d--:u==c+1?d++:(u>c?d--:d++,o.__u|=4))):e.__k[s]=null;if(f)for(s=0;s<l;s++)(a=n[s])!=null&&!(2&a.__u)&&(a.__e==r&&(r=Ya(a)),tT(a,a));return r}function QR(e,t,n,r){var i,s;if(typeof e.type=="function"){for(i=e.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=e,t=QR(i[s],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=Ya(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function GV(e,t,n,r){var i,s,o,a=e.key,c=e.type,u=t[n],l=u!=null&&(2&u.__u)==0;if(u===null&&a==null||l&&a==u.key&&c==u.type)return n;if(r>(l?1:0)){for(i=n-1,s=n+1;i>=0||s<t.length;)if((u=t[o=i>=0?i--:s++])!=null&&!(2&u.__u)&&a==u.key&&c==u.type)return o}return-1}function t2(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||qV.test(t)?n:n+"px"}function Jl(e,t,n,r,i){var s,o;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||t2(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||t2(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(YR,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Nw,e.addEventListener(t,s?pm:hm,s)):e.removeEventListener(t,s?pm:hm,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function n2(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Nw++;else if(t.t<n.u)return;return n(Ue.event?Ue.event(t):t)}}}function Bw(e,t,n,r,i,s,o,a,c,u){var l,f,d,h,p,g,v,m,_,E,I,O,C,N,B,D=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(l=Ue.__b)&&l(t);e:if(typeof D=="function")try{if(m=t.props,_="prototype"in D&&D.prototype.render,E=(l=D.contextType)&&r[l.__c],I=l?E?E.props.value:l.__:r,n.__c?v=(f=t.__c=n.__c).__=f.__E:(_?t.__c=f=new D(m,I):(t.__c=f=new Bf(m,I),f.constructor=D,f.render=XV),E&&E.sub(f),f.state||(f.state={}),f.__n=r,d=f.__d=!0,f.__h=[],f._sb=[]),_&&f.__s==null&&(f.__s=f.state),_&&D.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Si({},f.__s)),Si(f.__s,D.getDerivedStateFromProps(m,f.__s))),h=f.props,p=f.state,f.__v=t,d)_&&D.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),_&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(_&&D.getDerivedStateFromProps==null&&m!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(m,I),t.__v==n.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(m,f.__s,I)===!1){t.__v!=n.__v&&(f.props=m,f.state=f.__s,f.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(j){j&&(j.__=t)}),$d.push.apply(f.__h,f._sb),f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(m,f.__s,I),_&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,p,g)})}if(f.context=I,f.props=m,f.__P=e,f.__e=!1,O=Ue.__r,C=0,_)f.state=f.__s,f.__d=!1,O&&O(t),l=f.render(f.props,f.state,f.context),$d.push.apply(f.__h,f._sb),f._sb=[];else do f.__d=!1,O&&O(t),l=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++C<25);f.state=f.__s,f.getChildContext!=null&&(r=Si(Si({},r),f.getChildContext())),_&&!d&&f.getSnapshotBeforeUpdate!=null&&(g=f.getSnapshotBeforeUpdate(h,p)),N=l!=null&&l.type===Bh&&l.key==null?eT(l.props.children):l,a=ZR(e,$h(N)?N:[N],t,n,r,i,s,o,a,c,u),f.base=t.__e,t.__u&=-161,f.__h.length&&o.push(f),v&&(f.__E=f.__=null)}catch(j){if(t.__v=null,c||s!=null)if(j.then){for(t.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,t.__e=a}else{for(B=s.length;B--;)$w(s[B]);gm(t)}else t.__e=n.__e,t.__k=n.__k,j.then||gm(t);Ue.__e(j,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=YV(n.__e,t,n,r,i,s,o,c,u);return(l=Ue.diffed)&&l(t),128&t.__u?void 0:a}function gm(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(gm))}function JR(e,t,n){for(var r=0;r<n.length;r++)Uw(n[r],n[++r],n[++r]);Ue.__c&&Ue.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){Ue.__e(s,i.__v)}})}function eT(e){return typeof e!="object"||e==null||e.__b>0?e:$h(e)?e.map(eT):Si({},e)}function YV(e,t,n,r,i,s,o,a,c){var u,l,f,d,h,p,g,v=n.props||Nd,m=t.props,_=t.type;if(_=="svg"?i="http://www.w3.org/2000/svg":_=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((h=s[u])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){e=h,s[u]=null;break}}if(e==null){if(_==null)return document.createTextNode(m);e=document.createElementNS(i,_,m.is&&m),a&&(Ue.__m&&Ue.__m(t,s),a=!1),s=null}if(_==null)v===m||a&&e.data==m||(e.data=m);else{if(s=s&&Nh.call(e.childNodes),!a&&s!=null)for(v={},u=0;u<e.attributes.length;u++)v[(h=e.attributes[u]).name]=h.value;for(u in v)h=v[u],u=="dangerouslySetInnerHTML"?f=h:u=="children"||u in m||u=="value"&&"defaultValue"in m||u=="checked"&&"defaultChecked"in m||Jl(e,u,null,h,i);for(u in m)h=m[u],u=="children"?d=h:u=="dangerouslySetInnerHTML"?l=h:u=="value"?p=h:u=="checked"?g=h:a&&typeof h!="function"||v[u]===h||Jl(e,u,h,v[u],i);if(l)a||f&&(l.__html==f.__html||l.__html==e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(f&&(e.innerHTML=""),ZR(t.type=="template"?e.content:e,$h(d)?d:[d],t,n,r,_=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:n.__k&&Ya(n,0),a,c),s!=null)for(u=s.length;u--;)$w(s[u]);a||(u="value",_=="progress"&&p==null?e.removeAttribute("value"):p!=null&&(p!==e[u]||_=="progress"&&!p||_=="option"&&p!=v[u])&&Jl(e,u,p,v[u],i),u="checked",g!=null&&g!=e[u]&&Jl(e,u,g,v[u],i))}return e}function Uw(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){Ue.__e(i,n)}}function tT(e,t,n){var r,i;if(Ue.unmount&&Ue.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Uw(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Ue.__e(s,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&tT(r[i],t,n||typeof e.type!="function");n||$w(e.__e),e.__c=e.__=e.__e=void 0}function XV(e,t,n){return this.constructor(e,n)}function r2(e,t,n){var r,i,s,o;t==document&&(t=document.documentElement),Ue.__&&Ue.__(e,t),i=(r=!1)?null:t.__k,s=[],o=[],Bw(t,e=t.__k=VV(Bh,null,[e]),i||Nd,Nd,t.namespaceURI,i?null:t.firstChild?Nh.call(t.childNodes):null,s,i?i.__e:t.firstChild,r,o),JR(s,e,o)}Nh=$d.slice,Ue={__e:function(e,t,n,r){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},KR=0,Bf.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Si({},this.state),typeof e=="function"&&(e=e(Si({},n),this.props)),e&&Si(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),e2(this))},Bf.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),e2(this))},Bf.prototype.render=Bh,Qs=[],WR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,GR=function(e,t){return e.__v.__b-t.__v.__b},Bd.__r=0,YR=/(PointerCapture)$|Capture$/i,Nw=0,hm=n2(!1),pm=n2(!0);var ZV=0;function Ur(e,t,n,r,i,s){t||(t={});var o,a,c=t;if("ref"in c)for(a in c={},t)a=="ref"?o=t[a]:c[a]=t[a];var u={type:e,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ZV,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return Ue.vnode&&Ue.vnode(u),u}class $o{}let QV=class extends $o{constructor(t){super()}};const i2=Z.FIVE_SECONDS,Bo={pulse:"heartbeat_pulse"};let JV=class nT extends QV{constructor(t){super(t),this.events=new Rn.EventEmitter,this.interval=i2,this.interval=(t==null?void 0:t.interval)||i2}static async init(t){const n=new nT(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Z.toMiliseconds(this.interval))}pulse(){this.events.emit(Bo.pulse)}};const eK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,tK=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,nK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function rK(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){iK(e);return}return t}function iK(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function ef(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!nK.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(eK.test(e)||tK.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,rK)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function sK(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function It(e,...t){try{return sK(e(...t))}catch(n){return Promise.reject(n)}}function oK(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function aK(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Uf(e){if(oK(e))return String(e);if(aK(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Uf(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ym="base64:";function cK(e){return typeof e=="string"?e:ym+fK(e)}function uK(e){return typeof e!="string"||!e.startsWith(ym)?e:lK(e.slice(ym.length))}function lK(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function fK(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function gn(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function dK(...e){return gn(e.join(":"))}function tf(e){return e=gn(e),e?e+":":""}function hK(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function pK(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const gK="memory",yK=()=>{const e=new Map;return{name:gK,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function mK(e={}){const t={mounts:{"":e.driver||yK()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of t.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:t.mounts[l]};return{base:"",relativeKey:u,driver:t.mounts[""]}},r=(u,l)=>t.mountpoints.filter(f=>f.startsWith(u)||l&&u.startsWith(f)).map(f=>({relativeBase:u.length>f.length?u.slice(f.length):void 0,mountpoint:f,driver:t.mounts[f]})),i=(u,l)=>{if(t.watching){l=gn(l);for(const f of t.watchListeners)f(u,l)}},s=async()=>{if(!t.watching){t.watching=!0;for(const u in t.mounts)t.unwatch[u]=await s2(t.mounts[u],i,u)}},o=async()=>{if(t.watching){for(const u in t.unwatch)await t.unwatch[u]();t.unwatch={},t.watching=!1}},a=(u,l,f)=>{const d=new Map,h=p=>{let g=d.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},d.set(p.base,g)),g};for(const p of u){const g=typeof p=="string",v=gn(g?p:p.key),m=g?void 0:p.value,_=g||!p.options?l:{...l,...p.options},E=n(v);h(E).items.push({key:v,value:m,relativeKey:E.relativeKey,options:_})}return Promise.all([...d.values()].map(p=>f(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=gn(u);const{relativeKey:f,driver:d}=n(u);return It(d.hasItem,f,l)},getItem(u,l={}){u=gn(u);const{relativeKey:f,driver:d}=n(u);return It(d.getItem,f,l).then(h=>ef(h))},getItems(u,l={}){return a(u,l,f=>f.driver.getItems?It(f.driver.getItems,f.items.map(d=>({key:d.relativeKey,options:d.options})),l).then(d=>d.map(h=>({key:dK(f.base,h.key),value:ef(h.value)}))):Promise.all(f.items.map(d=>It(f.driver.getItem,d.relativeKey,d.options).then(h=>({key:d.key,value:ef(h)})))))},getItemRaw(u,l={}){u=gn(u);const{relativeKey:f,driver:d}=n(u);return d.getItemRaw?It(d.getItemRaw,f,l):It(d.getItem,f,l).then(h=>uK(h))},async setItem(u,l,f={}){if(l===void 0)return c.removeItem(u);u=gn(u);const{relativeKey:d,driver:h}=n(u);h.setItem&&(await It(h.setItem,d,Uf(l),f),h.watch||i("update",u))},async setItems(u,l){await a(u,l,async f=>{if(f.driver.setItems)return It(f.driver.setItems,f.items.map(d=>({key:d.relativeKey,value:Uf(d.value),options:d.options})),l);f.driver.setItem&&await Promise.all(f.items.map(d=>It(f.driver.setItem,d.relativeKey,Uf(d.value),d.options)))})},async setItemRaw(u,l,f={}){if(l===void 0)return c.removeItem(u,f);u=gn(u);const{relativeKey:d,driver:h}=n(u);if(h.setItemRaw)await It(h.setItemRaw,d,l,f);else if(h.setItem)await It(h.setItem,d,cK(l),f);else return;h.watch||i("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=gn(u);const{relativeKey:f,driver:d}=n(u);d.removeItem&&(await It(d.removeItem,f,l),(l.removeMeta||l.removeMata)&&await It(d.removeItem,f+"$",l),d.watch||i("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=gn(u);const{relativeKey:f,driver:d}=n(u),h=Object.create(null);if(d.getMeta&&Object.assign(h,await It(d.getMeta,f,l)),!l.nativeOnly){const p=await It(d.getItem,f+"$",l).then(g=>ef(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(h,p))}return h},setMeta(u,l,f={}){return this.setItem(u+"$",l,f)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var v;u=tf(u);const f=r(u,!0);let d=[];const h=[];let p=!0;for(const m of f){(v=m.driver.flags)!=null&&v.maxDepth||(p=!1);const _=await It(m.driver.getKeys,m.relativeBase,l);for(const E of _){const I=m.mountpoint+gn(E);d.some(O=>I.startsWith(O))||h.push(I)}d=[m.mountpoint,...d.filter(E=>!E.startsWith(m.mountpoint))]}const g=l.maxDepth!==void 0&&!p;return h.filter(m=>(!g||hK(m,l.maxDepth))&&pK(m,u))},async clear(u,l={}){u=tf(u),await Promise.all(r(u,!1).map(async f=>{if(f.driver.clear)return It(f.driver.clear,f.relativeBase,l);if(f.driver.removeItem){const d=await f.driver.getKeys(f.relativeBase||"",l);return Promise.all(d.map(h=>f.driver.removeItem(h,l)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(u=>o2(u)))},async watch(u){return await s(),t.watchListeners.push(u),async()=>{t.watchListeners=t.watchListeners.filter(l=>l!==u),t.watchListeners.length===0&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(u,l){if(u=tf(u),u&&t.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(t.mountpoints.push(u),t.mountpoints.sort((f,d)=>d.length-f.length)),t.mounts[u]=l,t.watching&&Promise.resolve(s2(l,i,u)).then(f=>{t.unwatch[u]=f}).catch(console.error),c},async unmount(u,l=!0){var f,d;u=tf(u),!(!u||!t.mounts[u])&&(t.watching&&u in t.unwatch&&((d=(f=t.unwatch)[u])==null||d.call(f),delete t.unwatch[u]),l&&await o2(t.mounts[u]),t.mountpoints=t.mountpoints.filter(h=>h!==u),delete t.mounts[u])},getMount(u=""){u=gn(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=gn(u),r(u,l.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,f={})=>c.setItem(u,l,f),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function s2(e,t,n){return e.watch?e.watch((r,i)=>t(r,n+i)):()=>{}}async function o2(e){typeof e.dispose=="function"&&await It(e.dispose)}function Uo(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function rT(e,t){let n;const r=()=>{if(n)return n;const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),n=Uo(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(t,i).objectStore(t)))}let ug;function al(){return ug||(ug=rT("keyval-store","keyval")),ug}function a2(e,t=al()){return t("readonly",n=>Uo(n.get(e)))}function wK(e,t,n=al()){return n("readwrite",r=>(r.put(t,e),Uo(r.transaction)))}function vK(e,t=al()){return t("readwrite",n=>(n.delete(e),Uo(n.transaction)))}function bK(e=al()){return e("readwrite",t=>(t.clear(),Uo(t.transaction)))}function EK(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Uo(e.transaction)}function _K(e=al()){return e("readonly",t=>{if(t.getAllKeys)return Uo(t.getAllKeys());const n=[];return EK(t,r=>n.push(r.key)).then(()=>n)})}const SK="idb-keyval";var IK=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=i=>t+i;let r;return e.dbName&&e.storeName&&(r=rT(e.dbName,e.storeName)),{name:SK,options:e,async hasItem(i){return!(typeof await a2(n(i),r)>"u")},async getItem(i){return await a2(n(i),r)??null},setItem(i,s){return wK(n(i),s,r)},removeItem(i){return vK(n(i),r)},getKeys(){return _K(r)},clear(){return bK(r)}}};const xK="WALLET_CONNECT_V2_INDEXED_DB",AK="keyvaluestorage";let OK=class{constructor(){this.indexedDb=mK({driver:IK({dbName:xK,storeName:AK})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,Io(n))}async removeItem(t){await this.indexedDb.removeItem(t)}};var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lf={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof lg<"u"&&lg.localStorage?Lf.exports=lg.localStorage:typeof window<"u"&&window.localStorage?Lf.exports=window.localStorage:Lf.exports=new t})();function RK(e){var t;return[e[0],So((t=e[1])!=null?t:"")]}let TK=class{constructor(){this.localStorage=Lf.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(RK)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return So(n)}async setItem(t,n){this.localStorage.setItem(t,Io(n))}async removeItem(t){this.localStorage.removeItem(t)}};const PK="wc_storage_version",c2=1,kK=async(e,t,n)=>{const r=PK,i=await t.getItem(r);if(i&&i>=c2){n(t);return}const s=await e.getKeys();if(!s.length){n(t);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await e.getItem(a);await t.setItem(a,u),o.push(a)}}await t.setItem(r,c2),n(t),CK(e,o)},CK=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let DK=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new TK;this.storage=t;try{const n=new OK;kK(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}};var NK=Object.defineProperty,$K=(e,t,n)=>t in e?NK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u2=(e,t,n)=>$K(e,typeof t!="symbol"?t+"":t,n);let BK=class extends $o{constructor(t){super(),this.opts=t,u2(this,"protocol","wc"),u2(this,"version",2)}};var UK=Object.defineProperty,LK=(e,t,n)=>t in e?UK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FK=(e,t,n)=>LK(e,t+"",n);class MK extends $o{constructor(t,n){super(),this.core=t,this.logger=n,FK(this,"records",new Map)}}let jK=class{constructor(t,n){this.logger=t,this.core=n}};class zK extends $o{constructor(t,n){super(),this.relayer=t,this.logger=n}}let HK=class extends $o{constructor(t){super()}},qK=class{constructor(t,n,r,i){this.core=t,this.logger=n,this.name=r}},VK=class extends $o{constructor(t,n){super(),this.relayer=t,this.logger=n}},KK=class extends $o{constructor(t,n){super(),this.core=t,this.logger=n}},WK=class{constructor(t,n,r){this.core=t,this.logger=n,this.store=r}},GK=class{constructor(t,n){this.projectId=t,this.logger=n}};class YK{constructor(t,n,r){this.core=t,this.logger=n,this.telemetryEnabled=r}}var XK=Object.defineProperty,ZK=(e,t,n)=>t in e?XK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l2=(e,t,n)=>ZK(e,typeof t!="symbol"?t+"":t,n);let QK=class{constructor(t){this.opts=t,l2(this,"protocol","wc"),l2(this,"version",2)}},JK=class{constructor(t){this.client=t}};const eW="PARSE_ERROR",tW="INVALID_REQUEST",nW="METHOD_NOT_FOUND",rW="INVALID_PARAMS",iT="INTERNAL_ERROR",Lw="SERVER_ERROR",iW=[-32700,-32600,-32601,-32602,-32603],ru={[eW]:{code:-32700,message:"Parse error"},[tW]:{code:-32600,message:"Invalid Request"},[nW]:{code:-32601,message:"Method not found"},[rW]:{code:-32602,message:"Invalid params"},[iT]:{code:-32603,message:"Internal error"},[Lw]:{code:-32e3,message:"Server error"}},sT=Lw;function sW(e){return iW.includes(e)}function f2(e){return Object.keys(ru).includes(e)?ru[e]:ru[sT]}function oW(e){const t=Object.values(ru).find(n=>n.code===e);return t||ru[sT]}function oT(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var aT={},ci={},d2;function aW(){if(d2)return ci;d2=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.isBrowserCryptoAvailable=ci.getSubtleCrypto=ci.getBrowerCrypto=void 0;function e(){return(nn==null?void 0:nn.crypto)||(nn==null?void 0:nn.msCrypto)||{}}ci.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}ci.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return ci.isBrowserCryptoAvailable=n,ci}var ui={},h2;function cW(){if(h2)return ui;h2=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.isBrowser=ui.isNode=ui.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ui.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ui.isNode=t;function n(){return!e()&&!t()}return ui.isBrowser=n,ui}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Yu;t.__exportStar(aW(),e),t.__exportStar(cW(),e)})(aT);function Mr(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function us(e=6){return BigInt(Mr(e))}function Sr(e,t,n){return{id:n||Mr(),jsonrpc:"2.0",method:e,params:t}}function Lu(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Uh(e,t,n){return{id:e,jsonrpc:"2.0",error:uW(t)}}function uW(e,t){return typeof e>"u"?f2(iT):(typeof e=="string"&&(e=Object.assign(Object.assign({},f2(Lw)),{message:e})),sW(e.code)&&(e=oW(e.code)),e)}class lW{}class fW extends lW{constructor(){super()}}class dW extends fW{constructor(t){super()}}const hW="^https?:",pW="^wss?:";function gW(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function cT(e,t){const n=gW(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function p2(e){return cT(e,hW)}function g2(e){return cT(e,pW)}function yW(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function uT(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Fw(e){return uT(e)&&"method"in e}function Lh(e){return uT(e)&&(jr(e)||nr(e))}function jr(e){return"result"in e}function nr(e){return"error"in e}let Mw=class extends dW{constructor(t){super(t),this.events=new Rn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(Sr(t.method,t.params||[],t.id||us().toString()),n)}async requestStrict(t,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${t.id}`,s=>{nr(s)?i(s.error):r(s.result)});try{await this.connection.send(t,n)}catch(s){i(s)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Lh(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const mW=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),wW=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",y2=e=>e.split("?")[0],m2=10,vW=mW();let bW=class{constructor(t){if(this.url=t,this.events=new Rn.EventEmitter,this.registering=!1,!g2(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Io(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!g2(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,r)=>{const i=aT.isReactNative()?void 0:{rejectUnauthorized:!yW(t)},s=new vW(t,[],i);wW()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),n(s)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?So(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),s=Uh(t,i);this.events.emit("payload",s)}parseError(t,n=this.url){return oT(t,y2(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>m2&&this.events.setMaxListeners(m2)}emitError(t){const n=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${y2(this.url)}`));return this.events.emit("register_error",n),n}};var EW={};const lT="wc",fT=2,mm="core",ni=`${lT}@2:${mm}:`,_W={logger:"error"},SW={database:":memory:"},IW="crypto",w2="client_ed25519_seed",xW=Z.ONE_DAY,AW="keychain",OW="0.3",RW="messages",TW="0.3",PW=Z.SIX_HOURS,kW="publisher",dT="irn",CW="error",hT="wss://relay.walletconnect.org",DW="relayer",ot={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},NW="_subscription",Xn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},$W=.1,wm="2.23.6",je={link_mode:"link_mode",relay:"relay"},Ff={inbound:"inbound",outbound:"outbound"},BW="0.3",UW="WALLETCONNECT_CLIENT_ID",v2="WALLETCONNECT_LINK_MODE_APPS",Bn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},LW="subscription",FW="0.3",MW="pairing",jW="0.3",Rc={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},Js={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},gr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zW="history",HW="0.3",qW="expirer",Qn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},VW="0.3",KW="verify-api",WW="https://verify.walletconnect.com",pT="https://verify.walletconnect.org",iu=pT,GW=`${iu}/v3`,YW=[WW,pT],XW="echo",ZW="https://echo.walletconnect.com",Lr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},yr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Ms={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},js={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Tc={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},QW=.1,JW="event-client",eG=86400,tG="https://pulse.walletconnect.org/batch";function nG(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,_=p.length;m!==_&&p[m]===0;)m++,g++;for(var E=(_-m)*l+1>>>0,I=new Uint8Array(E);m!==_;){for(var O=p[m],C=0,N=E-1;(O!==0||C<v)&&N!==-1;N--,C++)O+=256*I[N]>>>0,I[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");v=C,m++}for(var B=E-v;B!==E&&I[B]===0;)B++;for(var D=c.repeat(g);B<E;++B)D+=e.charAt(I[B]);return D}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===c;)v++,g++;for(var _=(p.length-g)*u+1>>>0,E=new Uint8Array(_);p[g];){var I=n[p.charCodeAt(g)];if(I===255)return;for(var O=0,C=_-1;(I!==0||O<m)&&C!==-1;C--,O++)I+=a*E[C]>>>0,E[C]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");m=O,g++}if(p[g]!==" "){for(var N=_-m;N!==_&&E[N]===0;)N++;for(var B=new Uint8Array(v+(_-N)),D=v;N!==_;)B[D++]=E[N++];return B}}}function h(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:d,decode:h}}var rG=nG,iG=rG;const gT=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},sG=e=>new TextEncoder().encode(e),oG=e=>new TextDecoder().decode(e);class aG{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class cG{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return yT(this,t)}}class uG{constructor(t){this.decoders=t}or(t){return yT(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const yT=(e,t)=>new uG({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class lG{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new aG(t,n,r),this.decoder=new cG(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Fh=({name:e,prefix:t,encode:n,decode:r})=>new lG(e,t,n,r),cl=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=iG(n,t);return Fh({prefix:e,name:t,encode:r,decode:s=>gT(i(s))})},fG=(e,t,n,r)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const f=i[e[l]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|f,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},dG=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},zt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Fh({prefix:t,name:e,encode(i){return dG(i,r,n)},decode(i){return fG(i,r,n,e)}}),hG=Fh({prefix:"\0",name:"identity",encode:e=>oG(e),decode:e=>sG(e)});var pG=Object.freeze({__proto__:null,identity:hG});const gG=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yG=Object.freeze({__proto__:null,base2:gG});const mG=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wG=Object.freeze({__proto__:null,base8:mG});const vG=cl({prefix:"9",name:"base10",alphabet:"0123456789"});var bG=Object.freeze({__proto__:null,base10:vG});const EG=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_G=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var SG=Object.freeze({__proto__:null,base16:EG,base16upper:_G});const IG=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xG=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AG=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),OG=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),RG=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),TG=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PG=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kG=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),CG=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var DG=Object.freeze({__proto__:null,base32:IG,base32upper:xG,base32pad:AG,base32padupper:OG,base32hex:RG,base32hexupper:TG,base32hexpad:PG,base32hexpadupper:kG,base32z:CG});const NG=cl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$G=cl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var BG=Object.freeze({__proto__:null,base36:NG,base36upper:$G});const UG=cl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),LG=cl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var FG=Object.freeze({__proto__:null,base58btc:UG,base58flickr:LG});const MG=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jG=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zG=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),HG=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qG=Object.freeze({__proto__:null,base64:MG,base64pad:jG,base64url:zG,base64urlpad:HG});const mT=Array.from(""),VG=mT.reduce((e,t,n)=>(e[n]=t,e),[]),KG=mT.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function WG(e){return e.reduce((t,n)=>(t+=VG[n],t),"")}function GG(e){const t=[];for(const n of e){const r=KG[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const YG=Fh({prefix:"",name:"base256emoji",encode:WG,decode:GG});var XG=Object.freeze({__proto__:null,base256emoji:YG}),ZG=wT,b2=128,QG=-128,JG=Math.pow(2,31);function wT(e,t,n){t=t||[],n=n||0;for(var r=n;e>=JG;)t[n++]=e&255|b2,e/=128;for(;e&QG;)t[n++]=e&255|b2,e>>>=7;return t[n]=e|0,wT.bytes=n-r+1,t}var eY=vm,tY=128,E2=127;function vm(e,r){var n=0,r=r||0,i=0,s=r,o,a=e.length;do{if(s>=a)throw vm.bytes=0,new RangeError("Could not decode varint");o=e[s++],n+=i<28?(o&E2)<<i:(o&E2)*Math.pow(2,i),i+=7}while(o>=tY);return vm.bytes=s-r,n}var nY=Math.pow(2,7),rY=Math.pow(2,14),iY=Math.pow(2,21),sY=Math.pow(2,28),oY=Math.pow(2,35),aY=Math.pow(2,42),cY=Math.pow(2,49),uY=Math.pow(2,56),lY=Math.pow(2,63),fY=function(e){return e<nY?1:e<rY?2:e<iY?3:e<sY?4:e<oY?5:e<aY?6:e<cY?7:e<uY?8:e<lY?9:10},dY={encode:ZG,decode:eY,encodingLength:fY},vT=dY;const _2=(e,t,n=0)=>(vT.encode(e,t,n),t),S2=e=>vT.encodingLength(e),bm=(e,t)=>{const n=t.byteLength,r=S2(e),i=r+S2(n),s=new Uint8Array(i+n);return _2(e,s,0),_2(n,s,r),s.set(t,i),new hY(e,n,t,s)};class hY{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const bT=({name:e,code:t,encode:n})=>new pY(e,t,n);class pY{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?bm(this.code,n):n.then(r=>bm(this.code,r))}else throw Error("Unknown type, must be binary type")}}const ET=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),gY=bT({name:"sha2-256",code:18,encode:ET("SHA-256")}),yY=bT({name:"sha2-512",code:19,encode:ET("SHA-512")});var mY=Object.freeze({__proto__:null,sha256:gY,sha512:yY});const _T=0,wY="identity",ST=gT,vY=e=>bm(_T,ST(e)),bY={code:_T,name:wY,encode:ST,digest:vY};var EY=Object.freeze({__proto__:null,identity:bY});new TextEncoder,new TextDecoder;const I2={...pG,...yG,...wG,...bG,...SG,...DG,...BG,...FG,...qG,...XG};({...mY,...EY});function IT(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function _Y(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?IT(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function xT(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const x2=xT("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),fg=xT("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=_Y(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),SY={utf8:x2,"utf-8":x2,hex:I2.base16,latin1:fg,ascii:fg,binary:fg,...I2};function IY(e,t="utf8"){const n=SY[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?IT(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var xY=Object.defineProperty,AY=(e,t,n)=>t in e?xY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$r=(e,t,n)=>AY(e,typeof t!="symbol"?t+"":t,n);class OY{constructor(t,n){this.core=t,this.logger=n,$r(this,"keychain",new Map),$r(this,"name",AW),$r(this,"version",OW),$r(this,"initialized",!1),$r(this,"storagePrefix",ni),$r(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),$r(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),$r(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),$r(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=J("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),$r(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=Gn(n,this.name)}get context(){return kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Jy(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?em(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var RY=Object.defineProperty,TY=(e,t,n)=>t in e?RY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t,n)=>TY(e,typeof t!="symbol"?t+"":t,n);class PY{constructor(t,n,r){this.core=t,this.logger=n,_t(this,"name",IW),_t(this,"keychain"),_t(this,"randomSessionIdentifier",fm()),_t(this,"initialized",!1),_t(this,"clientId"),_t(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),_t(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),_t(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const i=await this.getClientSeed(),s=Kb(i),o=mO(s.publicKey);return this.clientId=o,o}),_t(this,"generateKeyPair",()=>{this.isInitialized();const i=Aq();return this.setPrivateKey(i.publicKey,i.privateKey)}),_t(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Kb(s),a=this.randomSessionIdentifier;return await Ej(a,i,xW,o)}),_t(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Oq(a,s);return this.setSymKey(c,o)}),_t(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Nf(i);return await this.keychain.set(o,i),o}),_t(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),_t(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),_t(this,"encode",async(i,s,o)=>{this.isInitialized();const a=zR(o),c=Io(s);if(FE(a))return Pq(c,o==null?void 0:o.encoding);if(LE(a)){const d=a.senderPublicKey,h=a.receiverPublicKey;i=await this.generateSharedKey(d,h)}const u=this.getSymKey(i),{type:l,senderPublicKey:f}=a;return Rq({type:l,symKey:u,message:c,senderPublicKey:f,encoding:o==null?void 0:o.encoding})}),_t(this,"decode",async(i,s,o)=>{this.isInitialized();const a=Cq(s,o);if(FE(a)){const c=kq(s,o==null?void 0:o.encoding);return So(c)}if(LE(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=Tq({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return So(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),_t(this,"getPayloadType",(i,s=vn)=>{const o=Uu({encoded:i,encoding:s});return Ao(o.type)}),_t(this,"getPayloadSenderPublicKey",(i,s=vn)=>{const o=Uu({encoded:i,encoding:s});return o.senderPublicKey?On(o.senderPublicKey,an):void 0}),this.core=t,this.logger=Gn(n,this.name),this.keychain=r||new OY(this.core,this.logger)}get context(){return kn(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(w2)}catch{t=fm(),await this.keychain.set(w2,t)}return IY(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var kY=Object.defineProperty,CY=Object.defineProperties,DY=Object.getOwnPropertyDescriptors,A2=Object.getOwnPropertySymbols,NY=Object.prototype.hasOwnProperty,$Y=Object.prototype.propertyIsEnumerable,Em=(e,t,n)=>t in e?kY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BY=(e,t)=>{for(var n in t||(t={}))NY.call(t,n)&&Em(e,n,t[n]);if(A2)for(var n of A2(t))$Y.call(t,n)&&Em(e,n,t[n]);return e},UY=(e,t)=>CY(e,DY(t)),Dn=(e,t,n)=>Em(e,typeof t!="symbol"?t+"":t,n);class LY extends jK{constructor(t,n){super(t,n),this.logger=t,this.core=n,Dn(this,"messages",new Map),Dn(this,"messagesWithoutClientAck",new Map),Dn(this,"name",RW),Dn(this,"version",TW),Dn(this,"initialized",!1),Dn(this,"storagePrefix",ni),Dn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Dn(this,"set",async(r,i,s)=>{this.isInitialized();const o=tr(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===Ff.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,UY(BY({},c),{[o]:i}))}return await this.persist(),o}),Dn(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),Dn(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Dn(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=tr(i);return typeof s[o]<"u"}),Dn(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=tr(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),Dn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Gn(t,this.name),this.core=n}get context(){return kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Jy(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Jy(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?em(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?em(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var FY=Object.defineProperty,MY=Object.defineProperties,jY=Object.getOwnPropertyDescriptors,O2=Object.getOwnPropertySymbols,zY=Object.prototype.hasOwnProperty,HY=Object.prototype.propertyIsEnumerable,_m=(e,t,n)=>t in e?FY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zo=(e,t)=>{for(var n in t||(t={}))zY.call(t,n)&&_m(e,n,t[n]);if(O2)for(var n of O2(t))HY.call(t,n)&&_m(e,n,t[n]);return e},R2=(e,t)=>MY(e,jY(t)),Zn=(e,t,n)=>_m(e,typeof t!="symbol"?t+"":t,n);class qY extends zK{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,Zn(this,"events",new Rn.EventEmitter),Zn(this,"name",kW),Zn(this,"queue",new Map),Zn(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Zn(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Zn(this,"needsTransportRestart",!1),Zn(this,"publish",async(r,i,s)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const f=(s==null?void 0:s.ttl)||PW,d=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,p=(s==null?void 0:s.id)||us().toString(),g=ya(Cd().protocol),v={id:p,method:(s==null?void 0:s.publishMethod)||g.publish,params:Zo({topic:r,message:i,ttl:f,prompt:d,tag:h,attestation:s==null?void 0:s.attestation},s==null?void 0:s.tvf)},m=`Failed to publish payload, please try again. id:${p} tag:${h}`;try{Ot((o=v.params)==null?void 0:o.prompt)&&((a=v.params)==null||delete a.prompt),Ot((c=v.params)==null?void 0:c.tag)&&((u=v.params)==null||delete u.tag);const _=new Promise(async E=>{const I=({id:C})=>{var N;((N=v.id)==null?void 0:N.toString())===C.toString()&&(this.removeRequestFromQueue(C),this.relayer.events.removeListener(ot.publish,I),E())};this.relayer.events.on(ot.publish,I);const O=Gr(new Promise((C,N)=>{this.rpcPublish(v,s).then(C).catch(B=>{this.logger.warn(B,B==null?void 0:B.message),N(B)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${h}`);try{await O,this.events.removeListener(ot.publish,I)}catch(C){this.queue.set(p,{request:v,opts:s,attempt:1}),this.logger.warn(C,C==null?void 0:C.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:r,message:i,opts:s}}),await Gr(_,this.publishTimeout,m)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(l=s==null?void 0:s.internal)!=null&&l.throwOnFailedPublish)throw _}finally{this.queue.delete(p)}}),Zn(this,"publishCustom",async r=>{var i,s,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:u,opts:l={}}=r,{attestation:f,tvf:d,publishMethod:h,prompt:p,tag:g,ttl:v=Z.FIVE_MINUTES}=l,m=l.id||us().toString(),_=ya(Cd().protocol),E=h||_.publish,I={id:m,method:E,params:Zo(R2(Zo({},u),{ttl:v,prompt:p,tag:g,attestation:f}),d)},O=`Failed to publish custom payload, please try again. id:${m} tag:${g}`;try{Ot((i=I.params)==null?void 0:i.prompt)&&((s=I.params)==null||delete s.prompt),Ot((o=I.params)==null?void 0:o.tag)&&((a=I.params)==null||delete a.tag);const C=new Promise(async N=>{const B=({id:j})=>{var V;((V=I.id)==null?void 0:V.toString())===j.toString()&&(this.removeRequestFromQueue(j),this.relayer.events.removeListener(ot.publish,B),N())};this.relayer.events.on(ot.publish,B);const D=Gr(new Promise((j,V)=>{this.rpcPublish(I,l).then(j).catch(F=>{this.logger.warn(F,F==null?void 0:F.message),V(F)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${E} id:${m} tag:${g}`);try{await D,this.events.removeListener(ot.publish,B)}catch(j){this.queue.set(m,{request:I,opts:l,attempt:1}),this.logger.warn(j,j==null?void 0:j.message)}});this.logger.trace({type:"method",method:"publish",params:{id:m,payload:u,opts:l}}),await Gr(C,this.publishTimeout,O)}catch(C){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(C),(c=l==null?void 0:l.internal)!=null&&c.throwOnFailedPublish)throw C}finally{this.queue.delete(m)}}),Zn(this,"on",(r,i)=>{this.events.on(r,i)}),Zn(this,"once",(r,i)=>{this.events.once(r,i)}),Zn(this,"off",(r,i)=>{this.events.off(r,i)}),Zn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=t,this.logger=Gn(n,this.name),this.registerEventListeners()}get context(){return kn(this.logger)}async rpcPublish(t,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:t});const r=await this.relayer.request(t);return this.relayer.events.emit(ot.publish,Zo(Zo({},t),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{var r;const i=t.attempt+1;this.queue.set(n,R2(Zo({},t),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${t.request.id}, tag: ${(r=t.request.params)==null?void 0:r.tag}, attempt: ${i}`),await this.rpcPublish(t.request,t.opts),this.logger.warn({},`Publisher: queue->published: ${t.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Bo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ot.connection_stalled);return}this.checkQueue()}),this.relayer.on(ot.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var VY=Object.defineProperty,KY=(e,t,n)=>t in e?VY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qo=(e,t,n)=>KY(e,typeof t!="symbol"?t+"":t,n);class WY{constructor(){Qo(this,"map",new Map),Qo(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),Qo(this,"get",t=>this.map.get(t)||[]),Qo(this,"exists",(t,n)=>this.get(t).includes(n)),Qo(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(t);return}this.map.set(t,i)}),Qo(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var GY=Object.defineProperty,YY=Object.defineProperties,XY=Object.getOwnPropertyDescriptors,T2=Object.getOwnPropertySymbols,ZY=Object.prototype.hasOwnProperty,QY=Object.prototype.propertyIsEnumerable,Sm=(e,t,n)=>t in e?GY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pc=(e,t)=>{for(var n in t||(t={}))ZY.call(t,n)&&Sm(e,n,t[n]);if(T2)for(var n of T2(t))QY.call(t,n)&&Sm(e,n,t[n]);return e},dg=(e,t)=>YY(e,XY(t)),ke=(e,t,n)=>Sm(e,typeof t!="symbol"?t+"":t,n);class JY extends VK{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,ke(this,"subscriptions",new Map),ke(this,"topicMap",new WY),ke(this,"events",new Rn.EventEmitter),ke(this,"name",LW),ke(this,"version",FW),ke(this,"pending",new Map),ke(this,"cached",[]),ke(this,"initialized",!1),ke(this,"storagePrefix",ni),ke(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),ke(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),ke(this,"clientId"),ke(this,"batchSubscribeTopicsLimit",500),ke(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ke(this,"subscribe",async(r,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const o=Cd(i),a={topic:r,relay:o,transportType:i==null?void 0:i.transportType};(s=i==null?void 0:i.internal)!=null&&s.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,i);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),ke(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),ke(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),ke(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),ke(this,"on",(r,i)=>{this.events.on(r,i)}),ke(this,"once",(r,i)=>{this.events.once(r,i)}),ke(this,"off",(r,i)=>{this.events.off(r,i)}),ke(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),ke(this,"start",async()=>{await this.onConnect()}),ke(this,"stop",async()=>{await this.onDisconnect()}),ke(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ke(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),ke(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Bo.pulse,async()=>{await this.checkPending()}),this.events.on(Bn.created,async r=>{const i=Bn.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(Bn.deleted,async r=>{const i=Bn.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=t,this.logger=Gn(n,this.name),this.clientId=""}get context(){return kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async i=>await this.unsubscribeById(t,i,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const i=Cd(r);await this.restartToComplete({topic:t,id:n,relay:i}),await this.rpcUnsubscribe(t,n,i);const s=Ve("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,n,r){var i,s;const o=await this.getSubscriptionId(t);if((i=r==null?void 0:r.internal)!=null&&i.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===je.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const a={method:ya(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===je.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(f=>this.logger.warn(f))},Z.toMiliseconds(Z.ONE_SECOND)),o;const u=new Promise(async f=>{const d=h=>{h.topic===t&&(this.events.removeListener(Bn.created,d),f(h.id))};this.events.on(Bn.created,d);try{const h=await Gr(new Promise((p,g)=>{this.relayer.request(a).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),g(v)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(Bn.created,d),f(h)}catch{}}),l=await Gr(u,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${t} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ot.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(t){if(!t.length)return!0;const n=t[0].relay,r={method:ya(n.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{return await Gr(new Promise((i,s)=>{this.relayer.request(r).then(i).catch(o=>{this.logger.warn(o),s(o)})}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again"),!0}catch{return this.relayer.events.emit(ot.connection_stalled),!1}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:ya(n.protocol).batchFetchMessages,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Gr(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ot.connection_stalled)}return i}rpcUnsubscribe(t,n,r){const i={method:ya(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,n){this.setSubscription(t,dg(Pc({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,Pc({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,Pc({},n)),this.topicMap.set(n.topic,t),this.events.emit(Bn.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(Bn.deleted,dg(Pc({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Bn.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Bn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size&&!t.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(t.length){if(!await this.rpcBatchSubscribe(t)){this.logger.warn(`Batch subscribe failed for ${t.length} topics, adding to pending for retry`),t.forEach(n=>{this.pending.set(n.topic,n)});return}this.onBatchSubscribe(await Promise.all(t.map(async n=>dg(Pc({},n),{id:await this.getSubscriptionId(n.topic)}))))}}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await K9(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return tr(t+await this.getClientId())}}var eX=Object.defineProperty,P2=Object.getOwnPropertySymbols,tX=Object.prototype.hasOwnProperty,nX=Object.prototype.propertyIsEnumerable,Im=(e,t,n)=>t in e?eX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k2=(e,t)=>{for(var n in t||(t={}))tX.call(t,n)&&Im(e,n,t[n]);if(P2)for(var n of P2(t))nX.call(t,n)&&Im(e,n,t[n]);return e},pe=(e,t,n)=>Im(e,typeof t!="symbol"?t+"":t,n);class rX extends HK{constructor(t){var n;super(t),pe(this,"protocol","wc"),pe(this,"version",2),pe(this,"core"),pe(this,"logger"),pe(this,"events",new Rn.EventEmitter),pe(this,"provider"),pe(this,"messages"),pe(this,"subscriber"),pe(this,"publisher"),pe(this,"name",DW),pe(this,"transportExplicitlyClosed",!1),pe(this,"initialized",!1),pe(this,"connectionAttemptInProgress",!1),pe(this,"relayUrl"),pe(this,"projectId"),pe(this,"packageName"),pe(this,"bundleId"),pe(this,"hasExperiencedNetworkDisruption",!1),pe(this,"pingTimeout"),pe(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),pe(this,"reconnectTimeout"),pe(this,"connectPromise"),pe(this,"reconnectInProgress",!1),pe(this,"requestsInFlight",[]),pe(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),pe(this,"stalledRestartInProgress",!1),pe(this,"stalledRestartTimeout"),pe(this,"stalledRestartBackoff",0),pe(this,"stalledRestartBaseInterval",Z.toMiliseconds(Z.ONE_SECOND*2)),pe(this,"stalledRestartMaxInterval",Z.toMiliseconds(Z.THIRTY_SECONDS)),pe(this,"request",async r=>{var i,s;this.logger.debug("Publishing Request Payload");const o=r.id||us().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const a=`${o}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),pe(this,"resetPingTimeout",()=>{Ad()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,s,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null?void 0:s.terminate)==null||o.call(s)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),pe(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),pe(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ot.connect)}),pe(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),pe(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(ot.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportExplicitlyClosed=!0,clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0,this.reconnectInProgress=!1,this.transportClose().catch(i=>this.logger.warn(i))}),pe(this,"registerProviderListeners",()=>{this.provider.on(Xn.payload,this.onPayloadHandler),this.provider.on(Xn.connect,this.onConnectHandler),this.provider.on(Xn.disconnect,this.onDisconnectHandler),this.provider.on(Xn.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=Dw({logger:(n=t.logger)!=null?n:CW,name:this.name}),this.messages=new LY(this.logger,t.core),this.subscriber=new JY(this,this.logger),this.publisher=new qY(this,this.logger),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||hT,P9()?this.packageName=oE():k9()&&(this.bundleId=oE()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t==null?void 0:t.message))}get context(){return kn(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:je.relay},Ff.outbound)}async publishCustom(t){this.isInitialized(),await this.publisher.publishCustom(t)}async subscribe(t,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"",c;const u=l=>{l.topic===t&&(this.subscriber.off(Bn.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Bn.created,u)}),new Promise(async(l,f)=>{a=await this.subscriber.subscribe(t,k2({internal:{throwOnFailedPublish:o}},n)).catch(d=>{o&&f(d)})||a,l()})]),a}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Gr(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,clearTimeout(this.stalledRestartTimeout),this.stalledRestartInProgress=!1,this.stalledRestartBackoff=0,await this.resetTransport()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.resetTransport(),await this.transportOpen())}async resetTransport(){this.reconnectInProgress=!0,clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0,await this.transportDisconnect(),await this.subscriber.stop(),this.reconnectInProgress=!1}async confirmOnlineStateOrThrow(){if(!await QE())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const i=lt(Z.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(ot.message,t),await this.recordMessageEvent(t,Ff.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(Xn.disconnect,s),await Gr(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Xn.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Xn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Z.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,i,s;if(Ad())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Mw(new bW(B9({sdkVersion:wm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:i}=t;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Fw(t)){if(!t.method.endsWith(NW))return;const n=t.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:je.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(k2({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(t),await this.onMessageEvent(a)}else Lh(t)&&this.events.emit(ot.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,Ff.inbound),this.events.emit(ot.message,t))}async acknowledgePayload(t){const n=Lu(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Xn.payload,this.onPayloadHandler),this.provider.off(Xn.connect,this.onConnectHandler),this.provider.off(Xn.disconnect,this.onDisconnectHandler),this.provider.off(Xn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await QE();CV(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Bo.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&$V())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}}),this.events.on(ot.connection_stalled,()=>{if(this.transportExplicitlyClosed||this.stalledRestartInProgress)return;this.stalledRestartInProgress=!0;const n=this.stalledRestartBackoff===0?0:Math.min(Math.pow(2,this.stalledRestartBackoff-1)*this.stalledRestartBaseInterval,this.stalledRestartMaxInterval);this.stalledRestartBackoff++,this.logger.warn(`Connection stalled, restarting transport${n?` in ${n}ms`:""}...`),this.stalledRestartTimeout=setTimeout(async()=>{try{if(this.transportExplicitlyClosed)return;await this.restartTransport()}catch(r){this.logger.error(r,r==null?void 0:r.message)}finally{this.stalledRestartInProgress=!1}},n)})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ot.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t==null?void 0:t.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds($W)))))}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function iX(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function C2(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function D2(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const sX="[object RegExp]",oX="[object String]",aX="[object Number]",cX="[object Boolean]",N2="[object Arguments]",uX="[object Symbol]",lX="[object Date]",fX="[object Map]",dX="[object Set]",hX="[object Array]",pX="[object Function]",gX="[object ArrayBuffer]",hg="[object Object]",yX="[object Error]",mX="[object DataView]",wX="[object Uint8Array]",vX="[object Uint8ClampedArray]",bX="[object Uint16Array]",EX="[object Uint32Array]",_X="[object BigUint64Array]",SX="[object Int8Array]",IX="[object Int16Array]",xX="[object Int32Array]",AX="[object BigInt64Array]",OX="[object Float32Array]",RX="[object Float64Array]";function $2(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function TX(e,t,n){return zc(e,t,void 0,void 0,void 0,void 0,n)}function zc(e,t,n,r,i,s,o){const a=o(e,t,n,r,i,s);if(a!==void 0)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return su(e,t,s,o)}return su(e,t,s,o)}function su(e,t,n,r){if(Object.is(e,t))return!0;let i=D2(e),s=D2(t);if(i===N2&&(i=hg),s===N2&&(s=hg),i!==s)return!1;switch(i){case oX:return e.toString()===t.toString();case aX:{const c=e.valueOf(),u=t.valueOf();return iX(c,u)}case cX:case lX:case uX:return Object.is(e.valueOf(),t.valueOf());case sX:return e.source===t.source&&e.flags===t.flags;case pX:return e===t}n=n??new Map;const o=n.get(e),a=n.get(t);if(o!=null&&a!=null)return o===t;n.set(e,t),n.set(t,e);try{switch(i){case fX:{if(e.size!==t.size)return!1;for(const[c,u]of e.entries())if(!t.has(c)||!zc(u,t.get(c),c,e,t,n,r))return!1;return!0}case dX:{if(e.size!==t.size)return!1;const c=Array.from(e.values()),u=Array.from(t.values());for(let l=0;l<c.length;l++){const f=c[l],d=u.findIndex(h=>zc(f,h,void 0,e,t,n,r));if(d===-1)return!1;u.splice(d,1)}return!0}case hX:case wX:case vX:case bX:case EX:case _X:case SX:case IX:case xX:case AX:case OX:case RX:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let c=0;c<e.length;c++)if(!zc(e[c],t[c],c,e,t,n,r))return!1;return!0}case gX:return e.byteLength!==t.byteLength?!1:su(new Uint8Array(e),new Uint8Array(t),n,r);case mX:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:su(new Uint8Array(e),new Uint8Array(t),n,r);case yX:return e.name===t.name&&e.message===t.message;case hg:{if(!(su(e.constructor,t.constructor,n,r)||$2(e)&&$2(t)))return!1;const c=[...Object.keys(e),...C2(e)],u=[...Object.keys(t),...C2(t)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const f=c[l],d=e[f];if(!Object.hasOwn(t,f))return!1;const h=t[f];if(!zc(d,h,f,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function PX(){}function kX(e,t){return TX(e,t,PX)}var CX=Object.defineProperty,B2=Object.getOwnPropertySymbols,DX=Object.prototype.hasOwnProperty,NX=Object.prototype.propertyIsEnumerable,xm=(e,t,n)=>t in e?CX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U2=(e,t)=>{for(var n in t||(t={}))DX.call(t,n)&&xm(e,n,t[n]);if(B2)for(var n of B2(t))NX.call(t,n)&&xm(e,n,t[n]);return e},hn=(e,t,n)=>xm(e,typeof t!="symbol"?t+"":t,n);class Lo extends qK{constructor(t,n,r,i=ni,s=void 0){super(t,n,r,i),this.core=t,this.logger=n,this.name=r,hn(this,"map",new Map),hn(this,"version",BW),hn(this,"cached",[]),hn(this,"initialized",!1),hn(this,"getKey"),hn(this,"storagePrefix",ni),hn(this,"recentlyDeleted",[]),hn(this,"recentlyDeletedLimit",200),hn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ot(o)?this.map.set(this.getKey(o),o):uV(o)?this.map.set(o.id,o):lV(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),hn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),hn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),hn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>kX(a[c],o[c]))):this.values)),hn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=U2(U2({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),hn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Gn(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var $X=Object.defineProperty,BX=(e,t,n)=>t in e?$X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ye=(e,t,n)=>BX(e,typeof t!="symbol"?t+"":t,n);class UX{constructor(t,n){this.core=t,this.logger=n,ye(this,"name",MW),ye(this,"version",jW),ye(this,"events",new sh),ye(this,"pairings"),ye(this,"initialized",!1),ye(this,"storagePrefix",ni),ye(this,"ignoredPayloadTypes",[Oi]),ye(this,"registeredMethods",[]),ye(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ye(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ye(this,"create",async r=>{this.isInitialized();const i=fm(),s=await this.core.crypto.setSymKey(i),o=lt(Z.FIVE_MINUTES),a={protocol:dT},c={topic:s,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},u=HE({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Js.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:s,uri:u}}),ye(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Lr.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:u}=zE(r.uri);i.props.properties.topic=s,i.addTrace(Lr.pairing_uri_validation_success),i.addTrace(Lr.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(s)){if(l=this.pairings.get(s),i.addTrace(Lr.existing_pairing),l.active)throw i.setError(fi.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Lr.pairing_not_expired)}const f=c||lt(Z.FIVE_MINUTES),d={topic:s,relay:a,expiry:f,active:!1,methods:u};this.core.expirer.set(s,f),await this.pairings.set(s,d),i.addTrace(Lr.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(Js.create,d),i.addTrace(Lr.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Lr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(fi.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(h){throw i.setError(fi.subscribe_pairing_topic_failure),h}return i.addTrace(Lr.subscribe_pairing_topic_success),d}),ye(this,"activate",async({topic:r})=>{this.isInitialized();const i=lt(Z.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),ye(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Xs();this.events.once(xe("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}}),ye(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),ye(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),ye(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ye(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ve("USER_DISCONNECTED")),await this.deletePairing(i))}),ye(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return HE({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),ye(this,"sendRequest",async(r,i,s)=>{const o=Sr(i,s),a=await this.core.crypto.encode(r,o),c=Rc[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),ye(this,"sendResult",async(r,i,s)=>{const o=Lu(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,u=Rc[c].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)}),ye(this,"sendError",async(r,i,s)=>{const o=Uh(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,u=Rc[c]?Rc[c].res:Rc.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)}),ye(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Ve("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),ye(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Hr(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),ye(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),ye(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),ye(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(Js.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ye(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{jr(i)?this.events.emit(xe("pairing_ping",s),{}):nr(i)&&this.events.emit(xe("pairing_ping",s),{error:i.error})},500)}),ye(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Js.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ye(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Ve("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),ye(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Ve("WC_METHOD_UNSUPPORTED",r))}),ye(this,"isValidPair",(r,i)=>{var s;if(!yn(r)){const{message:a}=J("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(fi.malformed_pairing_uri),new Error(a)}if(!cV(r.uri)){const{message:a}=J("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(fi.malformed_pairing_uri),new Error(a)}const o=zE(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(fi.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(fi.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(fi.pairing_expired);const{message:a}=J("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ye(this,"isValidPing",async r=>{if(!yn(r)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ye(this,"isValidDisconnect",async r=>{if(!yn(r)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ye(this,"isValidPairingTopic",async r=>{if(!ft(r,!1)){const{message:i}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Hr(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=J("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=t,this.logger=Gn(n,this.name),this.pairings=new Lo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return kn(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(ot.message,async t=>{const{topic:n,message:r,transportType:i}=t;if(this.pairings.keys.includes(n)&&i!==je.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);Fw(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):Lh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Qn.expired,async t=>{const{topic:n}=qO(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Js.expire,{topic:n}))})}}var LX=Object.defineProperty,FX=(e,t,n)=>t in e?LX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ct=(e,t,n)=>FX(e,typeof t!="symbol"?t+"":t,n);class MX extends MK{constructor(t,n){super(t,n),this.core=t,this.logger=n,Ct(this,"records",new Map),Ct(this,"events",new Rn.EventEmitter),Ct(this,"name",zW),Ct(this,"version",HW),Ct(this,"cached",[]),Ct(this,"initialized",!1),Ct(this,"storagePrefix",ni),Ct(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ct(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:lt(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(gr.created,o)}),Ct(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=nr(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(gr.updated,i))}),Ct(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),Ct(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(gr.deleted,s)}}),this.persist()}),Ct(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),Ct(this,"on",(r,i)=>{this.events.on(r,i)}),Ct(this,"once",(r,i)=>{this.events.once(r,i)}),Ct(this,"off",(r,i)=>{this.events.off(r,i)}),Ct(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Gn(n,this.name)}get context(){return kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Sr(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(gr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(gr.created,t=>{const n=gr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(gr.updated,t=>{const n=gr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(gr.deleted,t=>{const n=gr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(Bo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{Z.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(gr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var jX=Object.defineProperty,zX=(e,t,n)=>t in e?jX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xt=(e,t,n)=>zX(e,typeof t!="symbol"?t+"":t,n);class HX extends KK{constructor(t,n){super(t,n),this.core=t,this.logger=n,Xt(this,"expirations",new Map),Xt(this,"events",new Rn.EventEmitter),Xt(this,"name",qW),Xt(this,"version",VW),Xt(this,"cached",[]),Xt(this,"initialized",!1),Xt(this,"storagePrefix",ni),Xt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Xt(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Xt(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Qn.created,{target:s,expiration:o})}),Xt(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Xt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Qn.deleted,{target:i,expiration:s})}}),Xt(this,"on",(r,i)=>{this.events.on(r,i)}),Xt(this,"once",(r,i)=>{this.events.once(r,i)}),Xt(this,"off",(r,i)=>{this.events.off(r,i)}),Xt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Gn(n,this.name)}get context(){return kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return U9(t);if(typeof t=="number")return L9(t);const{message:n}=J("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Qn.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;Z.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(Qn.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(Bo.pulse,()=>this.checkExpirations()),this.events.on(Qn.created,t=>{const n=Qn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Qn.expired,t=>{const n=Qn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(Qn.deleted,t=>{const n=Qn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var qX=Object.defineProperty,VX=(e,t,n)=>t in e?qX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ut=(e,t,n)=>VX(e,typeof t!="symbol"?t+"":t,n);class KX extends WK{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,ut(this,"name",KW),ut(this,"abortController"),ut(this,"isDevEnv"),ut(this,"verifyUrlV3",GW),ut(this,"storagePrefix",ni),ut(this,"version",fT),ut(this,"publicKey"),ut(this,"fetchPromise"),ut(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ut(this,"register",async i=>{if(!rc()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const u=Eo(),l=this.startAbortTimer(Z.ONE_SECOND*5),f=await new Promise((d,h)=>{const p=()=>{window.removeEventListener("message",v),u.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const v=m=>{if(m.data&&typeof m.data=="string")try{const _=JSON.parse(m.data);if(_.type==="verify_attestation"){if(Yy(_.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",v),d(_.attestation===null?"":_.attestation)}}catch(_){this.logger.warn(_)}};u.body.appendChild(g),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug(f,"jwt attestation"),f}catch(u){this.logger.warn(u)}return""}),ut(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Yy(s).payload.id!==a)return;const u=await this.isValidJwtAttestation(s);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),ut(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ut(this,"getVerifyUrl",i=>{let s=i||iu;return YW.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${iu}`),s=iu),s}),ut(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),ut(this,"persistPublicKey",async i=>{this.logger.debug(i,"persisting public key to local storage"),await this.store.setItem(this.storeKey,i),this.publicKey=i}),ut(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ut(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ut(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ut(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),ut(this,"validateAttestation",(i,s)=>{const o=Nq(i,s.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Gn(n,this.name),this.abortController=new AbortController,this.isDevEnv=_w(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return kn(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(t))}}var WX=Object.defineProperty,GX=(e,t,n)=>t in e?WX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L2=(e,t,n)=>GX(e,typeof t!="symbol"?t+"":t,n);class YX extends GK{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,L2(this,"context",XW),L2(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${ZW}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Gn(n,this.context)}}var XX=Object.defineProperty,F2=Object.getOwnPropertySymbols,ZX=Object.prototype.hasOwnProperty,QX=Object.prototype.propertyIsEnumerable,Am=(e,t,n)=>t in e?XX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kc=(e,t)=>{for(var n in t||(t={}))ZX.call(t,n)&&Am(e,n,t[n]);if(F2)for(var n of F2(t))QX.call(t,n)&&Am(e,n,t[n]);return e},St=(e,t,n)=>Am(e,typeof t!="symbol"?t+"":t,n);class JX extends YK{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,St(this,"context",JW),St(this,"storagePrefix",ni),St(this,"storageVersion",QW),St(this,"events",new Map),St(this,"shouldPersist",!1),St(this,"init",async()=>{if(!_w())try{const i={eventId:cE(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:zO(this.core.relayer.protocol,this.core.relayer.version,wm)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),St(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,u=cE(),l=this.core.projectId||"",f=Date.now(),d=kc({eventId:u,timestamp:f,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,d),this.shouldPersist=!0),d}),St(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return kc(kc({},a),this.setMethods(a.eventId))}),St(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),St(this,"setEventListeners",()=>{this.core.heartbeat.on(Bo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(i.timestamp)>eG&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),St(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),St(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),St(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),St(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),St(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,kc(kc({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),St(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),St(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${tG}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${wm}${s}`,{method:"POST",body:JSON.stringify(i)})}),St(this,"getAppDomain",()=>jO().url),this.logger=Gn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var eZ=Object.defineProperty,M2=Object.getOwnPropertySymbols,tZ=Object.prototype.hasOwnProperty,nZ=Object.prototype.propertyIsEnumerable,Om=(e,t,n)=>t in e?eZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j2=(e,t)=>{for(var n in t||(t={}))tZ.call(t,n)&&Om(e,n,t[n]);if(M2)for(var n of M2(t))nZ.call(t,n)&&Om(e,n,t[n]);return e},Ne=(e,t,n)=>Om(e,typeof t!="symbol"?t+"":t,n);let rZ=class AT extends BK{constructor(t){var n;super(t),Ne(this,"protocol",lT),Ne(this,"version",fT),Ne(this,"name",mm),Ne(this,"relayUrl"),Ne(this,"projectId"),Ne(this,"customStoragePrefix"),Ne(this,"events",new Rn.EventEmitter),Ne(this,"logger"),Ne(this,"heartbeat"),Ne(this,"relayer"),Ne(this,"crypto"),Ne(this,"storage"),Ne(this,"history"),Ne(this,"expirer"),Ne(this,"pairing"),Ne(this,"verify"),Ne(this,"echoClient"),Ne(this,"linkModeSupportedApps"),Ne(this,"eventClient"),Ne(this,"initialized",!1),Ne(this,"logChunkController"),Ne(this,"on",(a,c)=>this.events.on(a,c)),Ne(this,"once",(a,c)=>this.events.once(a,c)),Ne(this,"off",(a,c)=>this.events.off(a,c)),Ne(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ne(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:je.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const r=this.getGlobalCore(t==null?void 0:t.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||hT,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=g9({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:_W.logger,name:mm}),{logger:s,chunkLoggerController:o}=FO({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Gn(s,this.name),this.heartbeat=new JV,this.crypto=new PY(this,this.logger,t==null?void 0:t.keychain),this.history=new MX(this,this.logger),this.expirer=new HX(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new DK(j2(j2({},SW),t==null?void 0:t.storageOptions)),this.relayer=new rX({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new UX(this,this.logger),this.verify=new KX(this,this.logger,this.storage),this.echoClient=new YX(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new JX(this,this.logger,t==null?void 0:t.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new AT(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(UW,r),n}get context(){return kn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(v2,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(v2)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(t,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&EW.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const iZ=rZ,OT="wc",RT=2,TT="client",jw=`${OT}@${RT}:${TT}:`,pg={name:TT,logger:"error"},z2="WALLETCONNECT_DEEPLINK_CHOICE",sZ="proposal",H2="Proposal expired",oZ="session",Jo=Z.SEVEN_DAYS,aZ="engine",Dt={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},gg={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},Br={idle:"IDLE",active:"ACTIVE"},cZ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},uZ="request",lZ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],fZ="wc",dZ="auth",hZ="authKeys",pZ="pairingTopics",gZ="requests",Mh=`${fZ}@${1.5}:${dZ}:`,Mf=`${Mh}:PUB_KEY`;var yZ=Object.defineProperty,mZ=Object.defineProperties,wZ=Object.getOwnPropertyDescriptors,q2=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,bZ=Object.prototype.propertyIsEnumerable,Rm=(e,t,n)=>t in e?yZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ie=(e,t)=>{for(var n in t||(t={}))vZ.call(t,n)&&Rm(e,n,t[n]);if(q2)for(var n of q2(t))bZ.call(t,n)&&Rm(e,n,t[n]);return e},Nt=(e,t)=>mZ(e,wZ(t)),Y=(e,t,n)=>Rm(e,typeof t!="symbol"?t+"":t,n);class EZ extends JK{constructor(t){super(t),Y(this,"name",aZ),Y(this,"events",new sh),Y(this,"initialized",!1),Y(this,"requestQueue",{state:Br.idle,queue:[]}),Y(this,"sessionRequestQueue",{state:Br.idle,queue:[]}),Y(this,"emittedSessionRequests",new W9({limit:500})),Y(this,"requestQueueDelay",Z.ONE_SECOND),Y(this,"expectedPairingMethodMap",new Map),Y(this,"recentlyDeletedMap",new Map),Y(this,"recentlyDeletedLimit",200),Y(this,"relayMessageCache",[]),Y(this,"pendingSessions",new Map),Y(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Dt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),Y(this,"connect",async n=>{var r;this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Nt(Ie({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(i),i.optionalNamespaces=rV(i.requiredNamespaces,i.optionalNamespaces),i.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:l,authentication:f,walletPay:d}=i,h=((r=f==null?void 0:f[0])==null?void 0:r.ttl)||Dt.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES;this.validateRequestExpiry(h);let p=s,g,v=!1;try{if(p){const D=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),v=D.active}}catch(D){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),D}if(!p||!v){const{topic:D,uri:j}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});p=D,g=j}if(!p){const{message:D}=J("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(D)}const m=await this.client.core.crypto.generateKeyPair(),_=lt(h),E=Ie(Nt(Ie(Ie({requiredNamespaces:o,optionalNamespaces:a,relays:l??[{protocol:dT}],proposer:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:_,pairingTopic:p},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:Mr()}),(f||d)&&{requests:{authentication:f==null?void 0:f.map(D=>{const{domain:j,chains:V,nonce:F,uri:$,exp:L,nbf:w,type:S,statement:P,requestId:R,resources:A,signatureTypes:T}=D;return{domain:j,chains:V,nonce:F,type:S??"caip122",aud:$,version:"1",iat:new Date().toISOString(),exp:L,nbf:w,statement:P,requestId:R,resources:A,signatureTypes:T}}),walletPay:d}}),I=xe("session_connect",E.id),{reject:O,resolve:C,done:N}=Xs(h,H2),B=({id:D})=>{D===E.id&&(this.client.events.off("proposal_expire",B),this.pendingSessions.delete(E.id),this.events.emit(I,{error:{message:H2,code:0}}))};return this.client.events.on("proposal_expire",B),this.events.once(I,({error:D,session:j})=>{this.client.events.off("proposal_expire",B),D?O(D):j&&C(j)}),await this.setProposal(E.id,E),await this.sendProposeSession({proposal:E,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:E.id}}}).catch(D=>{throw this.deleteProposal(E.id),D}),{uri:g,approval:N}}),Y(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Y(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[yr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(j){throw o.setError(Ms.no_internet_connection),j}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(j){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Ms.proposal_not_found),j}try{await this.isValidApprove(n)}catch(j){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ms.session_approve_namespace_validation_failure),j}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:f,sessionConfig:d,proposalRequestsResponses:h}=n,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:v,requiredNamespaces:m,optionalNamespaces:_}=p;let E=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});E||(E=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:yr.session_approve_started,properties:{topic:g,trace:[yr.session_approve_started,yr.session_namespaces_validation_success]}}));const I=await this.client.core.crypto.generateKeyPair(),O=v.publicKey,C=await this.client.core.crypto.generateSharedKey(I,O),N=Nt(Ie(Ie(Ie({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:I,metadata:this.client.metadata},expiry:lt(Jo)},l&&{sessionProperties:l}),f&&{scopedProperties:f}),d&&{sessionConfig:d}),{proposalRequestsResponses:h}),B=je.relay;E.addTrace(yr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:B,internal:{skipSubscribe:!0}})}catch(j){throw E.setError(Ms.subscribe_session_topic_failure),j}E.addTrace(yr.subscribe_session_topic_success);const D=Nt(Ie({},N),{topic:C,requiredNamespaces:m,optionalNamespaces:_,pairingTopic:g,acknowledged:!1,self:N.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:I,transportType:je.relay,authentication:h==null?void 0:h.authentication,walletPayResult:h==null?void 0:h.walletPay});await this.client.session.set(C,D),E.addTrace(yr.store_session);try{await this.sendApproveSession({sessionTopic:C,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:I},sessionSettleRequest:N,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Ie({correlationId:a},this.getTVFApproveParams(D))}}),E.addTrace(yr.session_approve_publish_success)}catch(j){throw this.client.logger.error(j),this.client.session.delete(C,Ve("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),j}return this.client.core.eventClient.deleteEvent({eventId:E.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:v.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(C,lt(Jo)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),Y(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&await this.sendError({id:r,topic:s,error:i,rpcOpts:Dt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),Y(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(f){throw this.client.logger.error("update() -> isValidUpdate() failed"),f}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=Xs(Z.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=Mr(),u=us().toString(),l=this.client.session.get(r).namespaces;return this.events.once(xe("session_update",c),({error:f})=>{f?a(f):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(f=>{this.client.logger.error(f),this.client.session.update(r,{namespaces:l}),a(f)}),{acknowledged:s}}),Y(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=Mr(),{done:s,resolve:o,reject:a}=Xs(Z.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(xe("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,lt(Jo)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),Y(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(v){throw this.client.logger.error("request() -> isValidRequest() failed"),v}const{chainId:r,request:i,topic:s,expiry:o=Dt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);(a==null?void 0:a.transportType)===je.relay&&await this.confirmOnlineStateOrThrow();const c=Mr(),u=us().toString(),{done:l,resolve:f,reject:d}=Xs(o,"Request expired. Please try again.");this.events.once(xe("session_request",c),({error:v,result:m})=>{v?d(v):f(m)});const h="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:s,method:h,params:{request:Nt(Ie({},i),{expiryTimestamp:lt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(v=>d(v)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await l();const g={request:Nt(Ie({},i),{expiryTimestamp:lt(o)}),chainId:r};return await Promise.all([new Promise(async v=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:s,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(m=>d(m)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),v()}),new Promise(async v=>{var m;if(!((m=a.sessionConfig)!=null&&m.disableDeepLink)){const _=await z9(this.client.core.storage,z2);await F9({id:c,topic:s,wcDeepLink:_})}v()}),l()]).then(v=>v[2])}),Y(this,"respond",async n=>{var r,i;this.isInitialized();const s=this.client.core.eventClient.createEvent({properties:{topic:(n==null?void 0:n.topic)||((i=(r=n==null?void 0:n.response)==null?void 0:r.id)==null?void 0:i.toString()),trace:[yr.session_request_response_started]}});try{await this.isValidRespond(n)}catch(f){throw s.addTrace(f==null?void 0:f.message),s.setError(Ms.session_request_response_validation_failure),f}s.addTrace(yr.session_request_response_validation_success);const{topic:o,response:a}=n,{id:c}=a,u=this.client.session.get(o);u.transportType===je.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);try{s.addTrace(yr.session_request_response_publish_started),jr(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):nr(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(n)}catch(f){throw s.addTrace(f==null?void 0:f.message),s.setError(Ms.session_request_response_publish_failure),f}}),Y(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=Mr(),s=us().toString(),{done:o,resolve:a,reject:c}=Xs(Z.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(xe("session_ping",i),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Y(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=us().toString(),a=Mr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Y(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Ve("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=J("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),Y(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>oV(r,n)))),Y(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Y(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?je.link_mode:je.relay;o===je.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:f,type:d,exp:h,nbf:p,methods:g=[],expiry:v}=n,m=[...n.resources||[]],{topic:_,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:_,uri:E}});const I=await this.client.core.crypto.generateKeyPair(),O=Nf(I);if(await Promise.all([this.client.auth.authKeys.set(Mf,{responseTopic:O,publicKey:I}),this.client.auth.pairingTopics.set(O,{topic:O,pairingTopic:_})]),await this.client.core.relayer.subscribe(O,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${_}`),g.length>0){const{namespace:A}=Ai(a[0]);let T=oH(A,"request",g);Df(m)&&(T=cH(T,m.pop())),m.push(T)}const C=v&&v>Dt.wc_sessionAuthenticate.req.ttl?v:Dt.wc_sessionAuthenticate.req.ttl,N={authPayload:{type:d??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:f,iat:new Date().toISOString(),exp:h,nbf:p,resources:m},requester:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:lt(C)},B={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},D={requiredNamespaces:{},optionalNamespaces:B,relays:[{protocol:"irn"}],pairingTopic:_,proposer:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:lt(Dt.wc_sessionPropose.req.ttl),id:Mr()},{done:j,resolve:V,reject:F}=Xs(C,"Request expired"),$=Mr(),L=xe("session_connect",D.id),w=xe("session_request",$),S=async({error:A,session:T})=>{this.events.off(w,P),A?F(A):T&&V({session:T})},P=async A=>{var T,M,z;if(await this.deletePendingAuthRequest($,{message:"fulfilled",code:0}),A.error){const se=Ve("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return A.error.code===se.code?void 0:(this.events.off(L,S),F(A.error.message))}await this.deleteProposal(D.id),this.events.off(L,S);const{cacaos:Q,responder:K}=A.result,G=[],te=[];for(const se of Q){await vE({cacao:se,projectId:this.client.core.projectId})||(this.client.logger.error(se,"Signature verification failed"),F(Ve("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:le}=se,Le=Df(le.resources),Qe=[tm(le.iss)],Fe=Rd(le.iss);if(Le){const st=bE(Le),fr=EE(Le);G.push(...st),Qe.push(...fr)}for(const st of Qe)te.push(`${st}:${Fe}`)}const ie=await this.client.core.crypto.generateSharedKey(I,K.publicKey);let ce;G.length>0&&(ce={topic:ie,acknowledged:!0,self:{publicKey:I,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:lt(Jo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:_,namespaces:WE([...new Set(G)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(ie,{transportType:o}),await this.client.session.set(ie,ce),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:K.metadata}),ce=this.client.session.get(ie)),(T=this.client.metadata.redirect)!=null&&T.linkMode&&(M=K.metadata.redirect)!=null&&M.linkMode&&(z=K.metadata.redirect)!=null&&z.universal&&r&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(ie,{transportType:je.link_mode})),V({auths:Q,session:ce})};this.events.once(L,S),this.events.once(w,P);let R;try{if(s){const A=Sr("wc_sessionAuthenticate",N,$);this.client.core.history.set(_,A);const T=await this.client.core.crypto.encode("",A,{type:ol,encoding:ss});R=Ql(r,_,T)}else await Promise.all([this.sendRequest({topic:_,method:"wc_sessionAuthenticate",params:N,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:$}),this.sendRequest({topic:_,method:"wc_sessionPropose",params:D,expiry:Dt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D.id})])}catch(A){throw this.events.off(L,S),this.events.off(w,P),A}return await this.setProposal(D.id,D),await this.setAuthRequest($,{request:Nt(Ie({},N),{verifyContext:{}}),pairingTopic:_,transportType:o}),{uri:R??E,response:j}}),Y(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[js.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw s.setError(Tc.no_internet_connection),v}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(Tc.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||je.relay;a===je.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=Nf(c),f={type:Oi,receiverPublicKey:c,senderPublicKey:u},d=[],h=[];for(const v of i){if(!await vE({cacao:v,projectId:this.client.core.projectId})){s.setError(Tc.invalid_cacao);const O=Ve("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:O,encodeOpts:f}),new Error(O.message)}s.addTrace(js.cacaos_verified);const{p:m}=v,_=Df(m.resources),E=[tm(m.iss)],I=Rd(m.iss);if(_){const O=bE(_),C=EE(_);d.push(...O),E.push(...C)}for(const O of E)h.push(`${O}:${I}`)}const p=await this.client.core.crypto.generateSharedKey(u,c);s.addTrace(js.create_authenticated_session_topic);let g;if((d==null?void 0:d.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:lt(Jo),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:WE([...new Set(d)],[...new Set(h)]),transportType:a},s.addTrace(js.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(v){throw s.setError(Tc.subscribe_authenticated_session_topic_failure),v}s.addTrace(js.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),s.addTrace(js.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(js.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:i,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:f,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(v){throw s.setError(Tc.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),Y(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===je.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Nf(o),u={type:Oi,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:u,rpcOpts:Dt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),Y(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return aR(r,i)}),Y(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Y(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Y(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Ve("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(z2).catch(u=>this.client.logger.warn(u)),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Br.idle),await Promise.all(this.getPendingSessionRequests().filter(u=>u.topic===i).map(u=>this.deletePendingSessionRequest(u.id,Ve("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),Y(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Ms.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Ve("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Y(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=Br.idle,this.client.events.emit("session_request_expire",{id:n}))}),Y(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),Y(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Y(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,lt(Dt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Y(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=je.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),Y(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||lt(Dt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),Y(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:f,publishOpts:d={}}=n,h=Sr(i,s,c);let p;const g=!!l;try{const _=g?ss:vn;p=await this.client.core.crypto.encode(r,h,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),_}let v;if(lZ.includes(i)){const _=tr(JSON.stringify(h)),E=tr(p);v=await this.client.core.verify.register({id:E,decryptedId:_})}const m=Ie(Ie({},Dt[i].req),d);if(m.attestation=v,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),g){const _=Ql(l,r,p);await global.Linking.openURL(_,this.client.name)}else m.tvf=Nt(Ie({},f),{correlationId:h.id}),u?(m.internal=Nt(Ie({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,m)):this.client.core.relayer.publish(r,p,m).catch(_=>this.client.logger.error(_));return h.id}),Y(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:i}=n,s=Sr("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,s);const o=await this.client.core.crypto.encode(r.pairingTopic,s,{encoding:vn}),a=tr(JSON.stringify(s)),c=tr(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Nt(Ie({},i),{publishMethod:"wc_proposeSession",attestation:u})})}),Y(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:a}=n,c=Lu(s.id,i),u=await this.client.core.crypto.encode(s.pairingTopic,c,{encoding:vn}),l=Sr("wc_sessionSettle",o,a==null?void 0:a.id),f=await this.client.core.crypto.encode(r,l,{encoding:vn});this.client.core.history.set(r,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:s.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:f},opts:Nt(Ie({},a),{publishMethod:"wc_approveSession"})})}),Y(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,u=Lu(r,s);let l;const f=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=f?ss:vn;l=await this.client.core.crypto.encode(i,u,Nt(Ie({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let d,h;try{d=await this.client.core.history.get(i,r);const p=d.request;try{h=this.getTVFParams(r,p.params,s)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),p}if(f){const p=Ql(c,i,l);await global.Linking.openURL(p,this.client.name)}else{const p=d.request.method,g=Dt[p].res;g.tvf=Nt(Ie({},h),{correlationId:r}),o?(g.internal=Nt(Ie({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,l,g)):this.client.core.relayer.publish(i,l,g).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(u)}),Y(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,u=Uh(r,s);let l;const f=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=f?ss:vn;l=await this.client.core.crypto.encode(i,u,Nt(Ie({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),h}let d;try{d=await this.client.core.history.get(i,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),h}if(f){const h=Ql(c,i,l);await global.Linking.openURL(h,this.client.name)}else{const h=d.request.method,p=a||Dt[h].res;this.client.core.relayer.publish(i,l,p)}await this.client.core.history.resolve(u)}),Y(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;Hr(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Hr(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),Y(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Y(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Y(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Br.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Br.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Br.idle}),Y(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Y(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Y(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=J("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),Y(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Y(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(fi.proposal_listener_not_found)),this.isValidConnect(Ie({},i.params));const l=a.expiryTimestamp||lt(Dt.wc_sessionPropose.req.ttl),f=Ie({id:c,pairingTopic:r,expiryTimestamp:l,attestation:s,encryptedId:o},a);await this.setProposal(c,f);const d=await this.getVerifyContext({attestationId:s,hash:tr(JSON.stringify(i)),encryptedId:o,metadata:f.proposer.metadata});u==null||u.addTrace(Lr.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:d})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:Dt.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Y(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(jr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(s,{sessionTopic:l,pairingTopic:n,proposalId:s,publicKey:c});const f=await this.client.core.relayer.subscribe(l,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:n})}else if(nr(r)){await this.deleteProposal(s);const o=xe("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Y(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:f,sessionConfig:d,proposalRequestsResponses:h}=r.params,p=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!p)return this.client.logger.error(`Pending session not found for topic ${n}`);const g=this.client.proposal.get(p.proposalId),v=Nt(Ie(Ie(Ie({topic:n,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),f&&{scopedProperties:f}),d&&{sessionConfig:d}),{transportType:je.relay,authentication:h==null?void 0:h.authentication,walletPayResult:h==null?void 0:h.walletPay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:v.peer.metadata}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:r.id,topic:n,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:v}),this.events.emit(xe("session_connect",p.proposalId),{session:v})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;jr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(xe("session_approve",i),{})):nr(r)&&(await this.client.session.delete(n,Ve("USER_DISCONNECTED")),this.events.emit(xe("session_approve",i),{error:r.error}))}),Y(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=Oc.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:Ve("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ie({topic:n},i));try{Oc.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0})}catch(c){throw Oc.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Y(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=xe("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);jr(r)?this.events.emit(xe("session_update",i),{}):nr(r)&&this.events.emit(xe("session_update",i),{error:r.error})}),Y(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,lt(Jo)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Y(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=xe("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);jr(r)?this.events.emit(xe("session_extend",i),{}):nr(r)&&this.events.emit(xe("session_extend",i),{error:r.error})}),Y(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Y(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=xe("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);jr(r)?this.events.emit(xe("session_ping",i),{}):nr(r)&&this.events.emit(xe("session_ping",i),{error:r.error})},500)}),Y(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{await this.isValidDisconnect({topic:n,reason:r.params}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Ve("USER_DISCONNECTED")}),await this.deleteSession({topic:n,id:i})}catch(s){this.client.logger.error(s)}}),Y(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=n,{id:f,params:d}=a;try{await this.isValidRequest(Ie({topic:o},d));const h=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:tr(JSON.stringify(Sr("wc_sessionRequest",d,f))),encryptedId:u,metadata:h.peer.metadata,transportType:l}),g={id:f,topic:o,params:d,verifyContext:p};await this.setPendingSessionRequest(g),l===je.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=h.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:f,topic:o,error:h}),this.client.logger.error(h)}}),Y(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=xe("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);jr(r)?this.events.emit(xe("session_request",i),{result:r.result}):nr(r)&&this.events.emit(xe("session_request",i),{error:r.error})}),Y(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=Oc.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Ie({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),Oc.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),jr(r)?this.events.emit(xe("session_request",i),{result:r.result}):nr(r)&&this.events.emit(xe("session_request",i),{error:r.error})}),Y(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:u,authPayload:l,expiryTimestamp:f}=s.params,d=await this.getVerifyContext({attestationId:o,hash:tr(JSON.stringify(s)),encryptedId:a,metadata:u.metadata,transportType:c}),h={requester:u,pairingTopic:i,id:s.id,authPayload:l,verifyContext:d,expiryTimestamp:f};await this.setAuthRequest(s.id,{request:h,pairingTopic:i,transportType:c}),c===je.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(u){this.client.logger.error(u);const l=s.params.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),h={type:Oi,receiverPublicKey:l,senderPublicKey:f};await this.sendError({id:s.id,topic:i,error:u,encodeOpts:h,rpcOpts:Dt.wc_sessionAuthenticate.autoReject,appLink:d})}}),Y(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Y(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Br.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),Y(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{this.events.emit(xe("session_request",s.request.id),{error:r})})}),Y(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Br.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Y(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Br.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),Y(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Sr("wc_sessionPropose",Nt(Ie({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),Y(this,"isValidConnect",async n=>{if(!yn(n)){const{message:u}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ot(r)||await this.isValidPairingTopic(r),!wV(c)){const{message:u}=J("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(i&&!Ot(i)&&Jr(i)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(i,"requiredNamespaces")}if(s&&!Ot(s)&&Jr(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Y(this,"validateNamespaces",(n,r)=>{const i=mV(n,"connect()",r);if(i)throw new Error(i.message)}),Y(this,"isValidApprove",async n=>{if(!yn(n))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=ag(i,"approve()");if(u)throw new Error(u.message);const l=XE(c.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!ft(s,!0)){const{message:f}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}if(o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const f=new Set(Object.keys(i));if(!Object.keys(a).every(d=>f.has(d.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(f).join(", ")}`)}}),Y(this,"isValidReject",async n=>{if(!yn(n)){const{message:s}=J("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!bV(i)){const{message:s}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),Y(this,"isValidSessionSettleRequest",n=>{if(!yn(n)){const{message:u}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!VR(r)){const{message:u}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=fV(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ag(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Hr(o)){const{message:u}=J("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Y(this,"isValidUpdate",async n=>{if(!yn(n)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=ag(i,"update()");if(o)throw new Error(o.message);const a=XE(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),Y(this,"isValidExtend",async n=>{if(!yn(n)){const{message:i}=J("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Y(this,"isValidRequest",async n=>{if(!yn(n)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!YE(a,s)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!EV(i)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!IV(a,s,i.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),Y(this,"isValidRespond",async n=>{var r;if(!yn(n)){const{message:a}=J("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(a){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!_V(s)){const{message:a}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}const o=this.client.pendingRequest.get(s.id);if(o.topic!==i){const{message:a}=J("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${s.id}, expected topic: ${o.topic}, received topic: ${i}`);throw new Error(a)}}),Y(this,"isValidPing",async n=>{if(!yn(n)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Y(this,"isValidEmit",async n=>{if(!yn(n)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!YE(o,s)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!SV(i)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!xV(o,s,i.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),Y(this,"isValidDisconnect",async n=>{if(!yn(n)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Y(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!ft(i,!1))throw new Error("uri is required parameter");if(!ft(s,!1))throw new Error("domain is required parameter");if(!ft(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Ai(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Ai(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Y(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||iu,validation:"UNKNOWN",origin:o.url||""}};try{if(a===je.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Y(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=J("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),Y(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Y(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),Y(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),Y(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,u,l,f,d;return!n||r!==je.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=n==null?void 0:n.redirect)==null?void 0:l.universal)!==void 0&&((f=n==null?void 0:n.redirect)==null?void 0:f.universal)!==""&&((d=n==null?void 0:n.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Y(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n==null?void 0:n.redirect)==null?void 0:i.universal:void 0}),Y(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=aE(n,"topic")||"",i=decodeURIComponent(aE(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:je.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),Y(this,"registerLinkModeListeners",async()=>{var n;if(_w()||Ns()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),Y(this,"getTVFApproveParams",n=>{try{const r=HR(n.namespaces),i=Qq(n.namespaces),s=Jq(n.namespaces),o=n.sessionProperties,a=n.scopedProperties;return{approvedChains:r,approvedMethods:i,approvedEvents:s,sessionProperties:o,scopedProperties:a}}catch(r){return this.client.logger.warn(r,"Error getting TVF approve params"),{}}}),Y(this,"getTVFParams",(n,r,i)=>{var s,o,a;if(!((s=r.request)!=null&&s.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,i);c.txHashes=u,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn(u,"Error getting TVF params")}return c}),Y(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),Y(this,"extractTxHashesFromResult",(n,r)=>{var i;try{if(!r)return[];const s=n.method,o=cZ[s];if(s==="sui_signTransaction")return[jz(r.transactionBytes)];if(s==="near_signTransaction")return[gE(r)];if(s==="near_signTransactions")return r.map(c=>gE(c));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[HV({transaction:n.params.transactionPayload,signature:r.signature})];if(s==="algo_signTxn")return Ri(r)?r.map(c=>yE(c)):[yE(r)];if(s==="cosmos_signDirect")return[Hz(r)];if(s==="wallet_sendCalls")return qz(r);if(typeof r=="string")return[r];const a=r[o.key];if(Ri(a))return s==="solana_signAllTransactions"?a.map(c=>Mz(c)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn(s,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(t){this.client.logger.warn(t,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ot.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:i,transportType:s}=t,{publicKey:o}=this.client.auth.authKeys.keys.includes(Mf)?this.client.auth.authKeys.get(Mf):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===je.link_mode?ss:vn});Fw(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:tr(r)})):Lh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s})),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${r}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Qn.expired,async t=>{const{topic:n,id:r}=qO(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,J("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,J("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Js.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Js.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!ft(t,!1)){const{message:n}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(Hr(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=J("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!ft(t,!1)){const{message:n}=J("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(Hr(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=J("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=J("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(ft(t,!1)){const{message:n}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!vV(t)){const{message:n}=J("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(Hr(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=J("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}validateRequestExpiry(t){if(t&&!RV(t,gg)){const{message:n}=J("MISSING_OR_INVALID",`request() expiry: ${t}. Expiry must be a number (in seconds) between ${gg.min} and ${gg.max}`);throw new Error(n)}}}class _Z extends Lo{constructor(t,n){super(t,n,sZ,jw),this.core=t,this.logger=n}}let SZ=class extends Lo{constructor(t,n){super(t,n,oZ,jw),this.core=t,this.logger=n}};class IZ extends Lo{constructor(t,n){super(t,n,uZ,jw,r=>r.id),this.core=t,this.logger=n}}class xZ extends Lo{constructor(t,n){super(t,n,hZ,Mh,()=>Mf),this.core=t,this.logger=n}}class AZ extends Lo{constructor(t,n){super(t,n,pZ,Mh),this.core=t,this.logger=n}}class OZ extends Lo{constructor(t,n){super(t,n,gZ,Mh,r=>r.id),this.core=t,this.logger=n}}var RZ=Object.defineProperty,TZ=(e,t,n)=>t in e?RZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yg=(e,t,n)=>TZ(e,typeof t!="symbol"?t+"":t,n);class PZ{constructor(t,n){this.core=t,this.logger=n,yg(this,"authKeys"),yg(this,"pairingTopics"),yg(this,"requests"),this.authKeys=new xZ(this.core,this.logger),this.pairingTopics=new AZ(this.core,this.logger),this.requests=new OZ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var kZ=Object.defineProperty,CZ=(e,t,n)=>t in e?kZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,me=(e,t,n)=>CZ(e,typeof t!="symbol"?t+"":t,n);class zw extends QK{constructor(t){super(t),me(this,"protocol",OT),me(this,"version",RT),me(this,"name",pg.name),me(this,"metadata"),me(this,"core"),me(this,"logger"),me(this,"events",new Rn.EventEmitter),me(this,"engine"),me(this,"session"),me(this,"proposal"),me(this,"pendingRequest"),me(this,"auth"),me(this,"signConfig"),me(this,"on",(r,i)=>this.events.on(r,i)),me(this,"once",(r,i)=>this.events.once(r,i)),me(this,"off",(r,i)=>this.events.off(r,i)),me(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),me(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),me(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),me(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),me(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(t==null?void 0:t.name)||pg.name,this.metadata=D9(t==null?void 0:t.metadata),this.signConfig=t==null?void 0:t.signConfig;const n=Dw({logger:(t==null?void 0:t.logger)||pg.logger,name:this.name});this.logger=n,this.core=(t==null?void 0:t.core)||new iZ(t),this.session=new SZ(this.core,this.logger),this.proposal=new _Z(this.core,this.logger),this.pendingRequest=new IZ(this.core,this.logger),this.engine=new EZ(this),this.auth=new PZ(this.core,this.logger)}static async init(t){const n=new zw(t);return await n.initialize(),n}get context(){return kn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const DZ=zw;var Tm={exports:{}};(function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof nn<"u"&&nn,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof nn<"u"&&nn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(w){return w&&DataView.prototype.isPrototypeOf(w)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(w){return w&&l.indexOf(Object.prototype.toString.call(w))>-1};function d(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function h(w){return typeof w!="string"&&(w=String(w)),w}function p(w){var S={next:function(){var P=w.shift();return{done:P===void 0,value:P}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(w){this.map={},w instanceof g?w.forEach(function(S,P){this.append(P,S)},this):Array.isArray(w)?w.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(S){this.append(S,w[S])},this)}g.prototype.append=function(w,S){w=d(w),S=h(S);var P=this.map[w];this.map[w]=P?P+", "+S:S},g.prototype.delete=function(w){delete this.map[d(w)]},g.prototype.get=function(w){return w=d(w),this.has(w)?this.map[w]:null},g.prototype.has=function(w){return this.map.hasOwnProperty(d(w))},g.prototype.set=function(w,S){this.map[d(w)]=h(S)},g.prototype.forEach=function(w,S){for(var P in this.map)this.map.hasOwnProperty(P)&&w.call(S,this.map[P],P,this)},g.prototype.keys=function(){var w=[];return this.forEach(function(S,P){w.push(P)}),p(w)},g.prototype.values=function(){var w=[];return this.forEach(function(S){w.push(S)}),p(w)},g.prototype.entries=function(){var w=[];return this.forEach(function(S,P){w.push([P,S])}),p(w)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function m(w){return new Promise(function(S,P){w.onload=function(){S(w.result)},w.onerror=function(){P(w.error)}})}function _(w){var S=new FileReader,P=m(S);return S.readAsArrayBuffer(w),P}function E(w){var S=new FileReader,P=m(S),R=/charset=([A-Za-z0-9_-]+)/.exec(w.type),A=R?R[1]:"utf-8";return S.readAsText(w,A),P}function I(w){for(var S=new Uint8Array(w),P=new Array(S.length),R=0;R<S.length;R++)P[R]=String.fromCharCode(S[R]);return P.join("")}function O(w){if(w.slice)return w.slice(0);var S=new Uint8Array(w.byteLength);return S.set(new Uint8Array(w)),S.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:c.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:c.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():c.arrayBuffer&&c.blob&&u(w)?(this._bodyArrayBuffer=O(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||f(w))?this._bodyArrayBuffer=O(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=v(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function B(w){var S=w.toUpperCase();return N.indexOf(S)>-1?S:w}function D(w,S){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var P=S.body;if(w instanceof D){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,S.headers||(this.headers=new g(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!P&&w._bodyInit!=null&&(P=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=B(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var T=new AbortController;return T.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var A=/\?/;this.url+=(A.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function j(w){var S=new FormData;return w.trim().split("&").forEach(function(P){if(P){var R=P.split("="),A=R.shift().replace(/\+/g," "),T=R.join("=").replace(/\+/g," ");S.append(decodeURIComponent(A),decodeURIComponent(T))}}),S}function V(w){var S=new g,P=w.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var A=R.split(":"),T=A.shift().trim();if(T){var M=A.join(":").trim();try{S.append(T,M)}catch(z){console.warn("Response "+z.message)}}}),S}C.call(D.prototype);function F(w,S){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(w)}C.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var w=new F(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var $=[301,302,303,307,308];F.redirect=function(w,S){if($.indexOf(S)===-1)throw new RangeError("Invalid status code");return new F(null,{status:S,headers:{location:w}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,P){this.message=S,this.name=P;var R=Error(S);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function L(w,S){return new Promise(function(P,R){var A=new D(w,S);if(A.signal&&A.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function M(){T.abort()}T.onload=function(){var K={statusText:T.statusText,headers:V(T.getAllResponseHeaders()||"")};A.url.indexOf("file://")===0&&(T.status<200||T.status>599)?K.status=200:K.status=T.status,K.url="responseURL"in T?T.responseURL:K.headers.get("X-Request-URL");var G="response"in T?T.response:T.responseText;setTimeout(function(){P(new F(G,K))},0)},T.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},T.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},T.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function z(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(T.open(A.method,z(A.url),!0),A.credentials==="include"?T.withCredentials=!0:A.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&(c.blob?T.responseType="blob":c.arrayBuffer&&(T.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(S.headers).forEach(function(K){Q.push(d(K)),T.setRequestHeader(K,h(S.headers[K]))}),A.headers.forEach(function(K,G){Q.indexOf(G)===-1&&T.setRequestHeader(G,K)})}else A.headers.forEach(function(K,G){T.setRequestHeader(G,K)});A.signal&&(A.signal.addEventListener("abort",M),T.onreadystatechange=function(){T.readyState===4&&A.signal.removeEventListener("abort",M)}),T.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return L.polyfill=!0,a.fetch||(a.fetch=L,a.Headers=g,a.Request=D,a.Response=F),o.Headers=g,o.Request=D,o.Response=F,o.fetch=L,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(Tm,Tm.exports);var NZ=Tm.exports;const V2=Ld(NZ);var $Z=Object.defineProperty,BZ=Object.defineProperties,UZ=Object.getOwnPropertyDescriptors,K2=Object.getOwnPropertySymbols,LZ=Object.prototype.hasOwnProperty,FZ=Object.prototype.propertyIsEnumerable,W2=(e,t,n)=>t in e?$Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G2=(e,t)=>{for(var n in t||(t={}))LZ.call(t,n)&&W2(e,n,t[n]);if(K2)for(var n of K2(t))FZ.call(t,n)&&W2(e,n,t[n]);return e},Y2=(e,t)=>BZ(e,UZ(t));const MZ={Accept:"application/json","Content-Type":"application/json"},jZ="POST",X2={headers:MZ,method:jZ},Z2=10;let PT=class{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new Rn.EventEmitter,this.isAvailable=!1,this.registering=!1,!p2(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=Io(t),r=await(await V2(this.url,Y2(G2({},X2),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!p2(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=Io({id:1,jsonrpc:"2.0",method:"test",params:[]});await V2(t,Y2(G2({},X2),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?So(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),s=Uh(t,i);this.events.emit("payload",s)}parseError(t,n=this.url){return oT(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Z2&&this.events.setMaxListeners(Z2)}};function zZ(e){return Number.isSafeInteger(e)&&e>=0}function HZ(e){return e!=null&&typeof e!="function"&&zZ(e.length)}function qZ(e){return e==="__proto__"}function Hw(e){return e==null||typeof e!="object"&&typeof e!="function"}function kT(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function qw(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const VZ="[object RegExp]",CT="[object String]",DT="[object Number]",NT="[object Boolean]",$T="[object Arguments]",KZ="[object Symbol]",WZ="[object Date]",GZ="[object Map]",YZ="[object Set]",XZ="[object Array]",ZZ="[object ArrayBuffer]",BT="[object Object]",QZ="[object DataView]",JZ="[object Uint8Array]",eQ="[object Uint8ClampedArray]",tQ="[object Uint16Array]",nQ="[object Uint32Array]",rQ="[object Int8Array]",iQ="[object Int16Array]",sQ="[object Int32Array]",oQ="[object Float32Array]",aQ="[object Float64Array]";function Vw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cQ(e,t){return wa(e,void 0,e,new Map,t)}function wa(e,t,n,r=new Map,i=void 0){const s=i==null?void 0:i(e,t,n,r);if(s!==void 0)return s;if(Hw(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const o=new Array(e.length);r.set(e,o);for(let a=0;a<e.length;a++)o[a]=wa(e[a],a,n,r,i);return Object.hasOwn(e,"index")&&(o.index=e.index),Object.hasOwn(e,"input")&&(o.input=e.input),o}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const o=new RegExp(e.source,e.flags);return o.lastIndex=e.lastIndex,o}if(e instanceof Map){const o=new Map;r.set(e,o);for(const[a,c]of e)o.set(a,wa(c,a,n,r,i));return o}if(e instanceof Set){const o=new Set;r.set(e,o);for(const a of e)o.add(wa(a,void 0,n,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(Vw(e)){const o=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,o);for(let a=0;a<e.length;a++)o[a]=wa(e[a],a,n,r,i);return o}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const o=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,o),br(o,e,n,r,i),o}if(typeof File<"u"&&e instanceof File){const o=new File([e],e.name,{type:e.type});return r.set(e,o),br(o,e,n,r,i),o}if(typeof Blob<"u"&&e instanceof Blob){const o=new Blob([e],{type:e.type});return r.set(e,o),br(o,e,n,r,i),o}if(e instanceof Error){const o=new e.constructor;return r.set(e,o),o.message=e.message,o.name=e.name,o.stack=e.stack,o.cause=e.cause,br(o,e,n,r,i),o}if(e instanceof Boolean){const o=new Boolean(e.valueOf());return r.set(e,o),br(o,e,n,r,i),o}if(e instanceof Number){const o=new Number(e.valueOf());return r.set(e,o),br(o,e,n,r,i),o}if(e instanceof String){const o=new String(e.valueOf());return r.set(e,o),br(o,e,n,r,i),o}if(typeof e=="object"&&uQ(e)){const o=Object.create(Object.getPrototypeOf(e));return r.set(e,o),br(o,e,n,r,i),o}return e}function br(e,t,n=e,r,i){const s=[...Object.keys(t),...kT(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(c==null||c.writable)&&(e[a]=wa(t[a],a,n,r,i))}}function uQ(e){switch(qw(e)){case $T:case XZ:case ZZ:case QZ:case NT:case WZ:case oQ:case aQ:case rQ:case iQ:case sQ:case GZ:case DT:case BT:case VZ:case YZ:case CT:case KZ:case JZ:case eQ:case tQ:case nQ:return!0;default:return!1}}function lQ(e,t){return cQ(e,(n,r,i,s)=>{if(typeof e=="object"){if(qw(e)===BT&&typeof e.constructor!="function"){const o={};return s.set(e,o),br(o,e,i,s),o}switch(Object.prototype.toString.call(e)){case DT:case CT:case NT:{const o=new e.constructor(e==null?void 0:e.valueOf());return br(o,e),o}case $T:{const o={};return br(o,e),o.length=e.length,o[Symbol.iterator]=e[Symbol.iterator],o}default:return}}})}function Q2(e){return lQ(e)}function J2(e){return e!==null&&typeof e=="object"&&qw(e)==="[object Arguments]"}function Pm(e){return typeof e=="object"&&e!==null}function fQ(e){return Pm(e)&&HZ(e)}function dQ(){}function mg(e){return Vw(e)}function wg(e){var n;if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const r=e[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))!=null&&n.writable)?!1:e.toString()===`[object ${r}]`}let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function hQ(e){if(Hw(e))return e;if(Array.isArray(e)||Vw(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e);if(t==null)return Object.assign(Object.create(t),e);const n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){let r;return e instanceof AggregateError?r=new n(e.errors,e.message,{cause:e.cause}):r=new n(e.message,{cause:e.cause}),r.stack=e.stack,Object.assign(r,e),r}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const r=Object.create(t);return Object.assign(r,e)}return e}function pQ(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let i=e;for(let s=0;s<n.length;s++){const o=n[s];i=km(i,o,r,new Map)}return i}function km(e,t,n,r){if(Hw(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(r.has(t))return hQ(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let s=0;s<t.length;s++)t[s]=t[s]??void 0}const i=[...Object.keys(t),...kT(t)];for(let s=0;s<i.length;s++){const o=i[s];if(qZ(o))continue;let a=t[o],c=e[o];if(J2(a)&&(a={...a}),J2(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Q2(a)),Array.isArray(a))if(Array.isArray(c)){const l=[],f=Reflect.ownKeys(c);for(let d=0;d<f.length;d++){const h=f[d];l[h]=c[h]}c=l}else if(fQ(c)){const l=[];for(let f=0;f<c.length;f++)l[f]=c[f];c=l}else c=[];const u=n(c,a,o,e,t,r);u!==void 0?e[o]=u:Array.isArray(a)||Pm(c)&&Pm(a)&&(wg(c)||wg(a)||mg(c)||mg(a))?e[o]=km(c,a,n,r):c==null&&wg(a)?e[o]=km({},a,n,r):c==null&&mg(a)?e[o]=Q2(a):(c===void 0||a!==void 0)&&(e[o]=a)}return e}function gQ(e,...t){return pQ(e,...t,dQ)}const e_="error",yQ="wss://relay.walletconnect.org",mQ="wc",UT="universal_provider",nf=`${mQ}@2:${UT}:`,LT="https://rpc.walletconnect.org/v1/",FT="generic",wQ=`${LT}bundler`,Na="call_status",vQ=86400,Kw={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var bQ=Object.defineProperty,EQ=Object.defineProperties,_Q=Object.getOwnPropertyDescriptors,t_=Object.getOwnPropertySymbols,SQ=Object.prototype.hasOwnProperty,IQ=Object.prototype.propertyIsEnumerable,n_=(e,t,n)=>t in e?bQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rf=(e,t)=>{for(var n in t||(t={}))SQ.call(t,n)&&n_(e,n,t[n]);if(t_)for(var n of t_(t))IQ.call(t,n)&&n_(e,n,t[n]);return e},xQ=(e,t)=>EQ(e,_Q(t));function MT(e,t,n){var r;const i=Ai(e);return((r=t.rpcMap)==null?void 0:r[i.reference])||`${LT}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function AQ(e){return e.includes(":")?e.split(":")[1]:e}function jT(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function OQ(e,t){const n=Object.keys(t.namespaces).filter(i=>i.includes(e));if(!n.length)return[];const r=[];return n.forEach(i=>{const s=t.namespaces[i].accounts;r.push(...s)}),r}function r_(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>{var r,i;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((i=n==null?void 0:n.chains)==null?void 0:i.length)>0}))}function sf(e={},t={}){const n=r_(i_(e)),r=r_(i_(t));return gQ(n,r)}function i_(e){var t,n,r,i,s;const o={};if(!Jr(e))return o;for(const[a,c]of Object.entries(e)){const u=Dh(a)?[a]:c.chains,l=c.methods||[],f=c.events||[],d=c.rpcMap||{},h=ma(a);o[h]=xQ(rf(rf({},o[h]),c),{chains:Qr(u,(t=o[h])==null?void 0:t.chains),methods:Qr(l,(n=o[h])==null?void 0:n.methods),events:Qr(f,(r=o[h])==null?void 0:r.events)}),(Jr(d)||Jr(((i=o[h])==null?void 0:i.rpcMap)||{}))&&(o[h].rpcMap=rf(rf({},d),(s=o[h])==null?void 0:s.rpcMap))}return o}function s_(e){return e.includes(":")?e.split(":")[2]:e}function o_(e){const t={};for(const[n,r]of Object.entries(e)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=Dh(n)?[n]:r.chains?r.chains:jT(r.accounts);t[n]={chains:a,methods:i,events:s,accounts:o}}return t}function vg(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}function RQ(e){try{const t=JSON.parse(e);return typeof t=="object"&&t!==null&&!Array.isArray(t)}catch{return!1}}const zT={},$a=e=>zT[e],bg=(e,t)=>{zT[e]=t};var TQ=Object.defineProperty,a_=Object.getOwnPropertySymbols,PQ=Object.prototype.hasOwnProperty,kQ=Object.prototype.propertyIsEnumerable,c_=(e,t,n)=>t in e?TQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u_=(e,t)=>{for(var n in t||(t={}))PQ.call(t,n)&&c_(e,n,t[n]);if(a_)for(var n of a_(t))kQ.call(t,n)&&c_(e,n,t[n]);return e};const l_="eip155",CQ=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],DQ=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,Eg=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,f_=e=>Object.keys(e).filter(t=>CQ.includes(t)).reduce((t,n)=>(t[n]=NQ(e[n]),t),{}),NQ=e=>typeof e=="string"&&RQ(e)?JSON.parse(e):e,$Q=(e,t,n)=>{const{sessionProperties:r={},scopedProperties:i={}}=e,s={};if(!Jr(i)&&!Jr(r))return;const o=f_(r);for(const a of n){const c=DQ(a);if(!c)continue;s[Eg(c)]=o;const u=i==null?void 0:i[`${l_}:${c}`];if(u){const l=u==null?void 0:u[`${l_}:${c}:${t}`];s[Eg(c)]=u_(u_({},s[Eg(c)]),f_(l||u))}}for(const[a,c]of Object.entries(s))Object.keys(c).length===0&&delete s[a];return Object.keys(s).length>0?s:void 0};var BQ=Object.defineProperty,UQ=(e,t,n)=>t in e?BQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LQ=(e,t,n)=>UQ(e,t+"",n);let _g;class Ww{constructor(t){LQ(this,"storage"),this.storage=t}async getItem(t){return await this.storage.getItem(t)}async setItem(t,n){return await this.storage.setItem(t,n)}async removeItem(t){return await this.storage.removeItem(t)}static getStorage(t){return _g||(_g=new Ww(t)),_g}}var FQ=Object.defineProperty,MQ=Object.defineProperties,jQ=Object.getOwnPropertyDescriptors,d_=Object.getOwnPropertySymbols,zQ=Object.prototype.hasOwnProperty,HQ=Object.prototype.propertyIsEnumerable,h_=(e,t,n)=>t in e?FQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qQ=(e,t)=>{for(var n in t||(t={}))zQ.call(t,n)&&h_(e,n,t[n]);if(d_)for(var n of d_(t))HQ.call(t,n)&&h_(e,n,t[n]);return e},VQ=(e,t)=>MQ(e,jQ(t));async function KQ(e,t){const n=Ai(e.result.capabilities.caip345.caip2),r=e.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(r.map(f=>WQ(n.reference,f,t))),s=i.filter(f=>f.status==="fulfilled").map(f=>f.value).filter(f=>f);i.filter(f=>f.status==="rejected").forEach(f=>console.warn("Failed to fetch transaction receipt:",f.reason));const o=!s.length||s.some(f=>!f),a=s.every(f=>(f==null?void 0:f.status)==="0x1"),c=s.every(f=>(f==null?void 0:f.status)==="0x0"),u=s.some(f=>(f==null?void 0:f.status)==="0x0");let l;return o?l=100:a?l=200:c?l=500:u&&(l=600),{id:e.result.id,version:e.request.version,atomic:e.request.atomicRequired,chainId:e.request.chainId,capabilities:e.result.capabilities,receipts:s,status:l}}async function WQ(e,t,n){return await n(parseInt(e)).request(Sr("eth_getTransactionReceipt",[t]))}async function GQ({sendCalls:e,storage:t}){const n=await t.getItem(Na);await t.setItem(Na,VQ(qQ({},n),{[e.result.id]:{request:e.request,result:e.result,expiry:lt(vQ)}}))}async function YQ({resultId:e,storage:t}){const n=await t.getItem(Na);if(n){delete n[e],await t.setItem(Na,n);for(const r in n)Hr(n[r].expiry)&&delete n[r];await t.setItem(Na,n)}}async function XQ({resultId:e,storage:t}){const n=await t.getItem(Na),r=n==null?void 0:n[e];if(r&&!Hr(r.expiry))return r;await YQ({resultId:e,storage:t})}var ZQ=Object.defineProperty,QQ=Object.defineProperties,JQ=Object.getOwnPropertyDescriptors,p_=Object.getOwnPropertySymbols,eJ=Object.prototype.hasOwnProperty,tJ=Object.prototype.propertyIsEnumerable,Cm=(e,t,n)=>t in e?ZQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sg=(e,t)=>{for(var n in t||(t={}))eJ.call(t,n)&&Cm(e,n,t[n]);if(p_)for(var n of p_(t))tJ.call(t,n)&&Cm(e,n,t[n]);return e},Ig=(e,t)=>QQ(e,JQ(t)),zs=(e,t,n)=>Cm(e,typeof t!="symbol"?t+"":t,n);class nJ{constructor(t){zs(this,"name","eip155"),zs(this,"client"),zs(this,"chainId"),zs(this,"namespace"),zs(this,"httpProviders"),zs(this,"events"),zs(this,"storage"),this.namespace=t.namespace,this.events=$a("events"),this.client=$a("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=Ww.getStorage(this.client.core.storage)}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t);case"wallet_sendCalls":return await this.sendCalls(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n);const r=this.chainId;this.chainId=parseInt(t),this.events.emit(Kw.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${t}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||MT(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mw(new PT(r,$a("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(AQ(n));t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(t){const n=t||this.chainId;return this.httpProviders[n]||(this.httpProviders=Ig(Sg({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(t){var n,r;let i=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var n,r,i,s,o;const a=(r=(n=t.request)==null?void 0:n.params)==null?void 0:r[0],c=((s=(i=t.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(t.topic),l=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{},f=c.length>0?c.join(","):`0x${this.chainId.toString(16)}`,d=`${a}${f}`,h=l==null?void 0:l[d];if(h)return h;let p;try{p=$Q(u,a,c)}catch(v){console.warn("Failed to extract capabilities from session",v)}if(p)return p;const g=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:Ig(Sg({},u.sessionProperties||{}),{capabilities:Ig(Sg({},l||{}),{[d]:g})})})}catch(v){console.warn("Failed to update session with capabilities",v)}return g}async getCallStatus(t){var n,r,i;const s=this.client.session.get(t.topic),o=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(o){const u=this.getBundlerUrl(t.chainId,o);try{return await this.getUserOperationReceipt(u,t)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const a=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,t)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,a)}const c=await XQ({resultId:(i=t.request.params)==null?void 0:i[0],storage:this.storage});if(c)try{return await KQ(c,this.getHttpProvider.bind(this))}catch(u){console.warn("Failed to fetch call status from stored send calls",u,c)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,n){var r;const i=new URL(t),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Sr("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(t,n){return`${wQ}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${n}`}async sendCalls(t){var n,r,i;const s=await this.client.request(t),o=(n=t.request.params)==null?void 0:n[0],a=s==null?void 0:s.id,c=(s==null?void 0:s.capabilities)||{},u=(r=c==null?void 0:c.caip345)==null?void 0:r.caip2,l=(i=c==null?void 0:c.caip345)==null?void 0:i.transactionHashes;return!a||!u||!(l!=null&&l.length)||await GQ({sendCalls:{request:o,result:s},storage:this.storage}),s}}var rJ=Object.defineProperty,iJ=(e,t,n)=>t in e?rJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ea=(e,t,n)=>iJ(e,typeof t!="symbol"?t+"":t,n);class sJ{constructor(t){ea(this,"name",FT),ea(this,"client"),ea(this,"httpProviders"),ea(this,"events"),ea(this,"namespace"),ea(this,"chainId"),this.namespace=t.namespace,this.events=$a("events"),this.client=$a("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n);const r=this.chainId;this.chainId=t,this.events.emit(Kw.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${t}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getNamespaceName(){const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return Ai(t).namespace}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var t,n;const r={};return(n=(t=this.namespace)==null?void 0:t.accounts)==null||n.forEach(i=>{var s,o;const a=Ai(i),c=(o=(s=this.namespace)==null?void 0:s.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];r[a.reference]=this.createHttpProvider(i,c)}),r}getHttpProvider(t){const n=Ai(t).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||MT(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mw(new PT(r,$a("disableProviderPing")))}}var oJ=Object.defineProperty,aJ=Object.defineProperties,cJ=Object.getOwnPropertyDescriptors,g_=Object.getOwnPropertySymbols,uJ=Object.prototype.hasOwnProperty,lJ=Object.prototype.propertyIsEnumerable,Dm=(e,t,n)=>t in e?oJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cc=(e,t)=>{for(var n in t||(t={}))uJ.call(t,n)&&Dm(e,n,t[n]);if(g_)for(var n of g_(t))lJ.call(t,n)&&Dm(e,n,t[n]);return e},of=(e,t)=>aJ(e,cJ(t)),Nn=(e,t,n)=>Dm(e,typeof t!="symbol"?t+"":t,n);class Gw{constructor(t){Nn(this,"client"),Nn(this,"namespaces"),Nn(this,"optionalNamespaces"),Nn(this,"sessionProperties"),Nn(this,"scopedProperties"),Nn(this,"events",new sh),Nn(this,"rpcProviders",{}),Nn(this,"session"),Nn(this,"providerOpts"),Nn(this,"logger"),Nn(this,"uri"),Nn(this,"disableProviderPing",!1),Nn(this,"connectParams");var n,r;this.providerOpts=t,this.logger=Dw({logger:(n=t.logger)!=null?n:e_,name:(r=this.providerOpts.name)!=null?r:UT}),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const n=new Gw(t);return await n.initialize(),n}async request(t,n,r){const[i,s]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Cc({},t),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(t,n,r,i){const s=new Date().getTime();this.request(t,r,i).then(o=>n(null,Lu(s,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Ve("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=t,this.setNamespaces(t),this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(t,n);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=o_(this.session.namespaces);this.namespaces=sf(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){var n,r;const{uri:i,approval:s}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(n=this.connectParams)==null?void 0:n.authentication,walletPay:(r=this.connectParams)==null?void 0:r.walletPay});i&&(this.uri=i,this.events.emit("display_uri",i));const o=await s();this.session=o;const a=o_(o.namespaces);return this.namespaces=sf(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,i]=this.validateChain(t),s=this.getProvider(r);s?s.setDefaultChain(i,n):this.session&&this.logger.warn(`Provider for namespace '${r}' not found in setDefaultChain`)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(t={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!Ri(n))return;for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,n;if(this.client=this.providerOpts.client||await DZ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||e_,relayUrl:this.providerOpts.relayUrl||yQ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(n=>ma(n)))];bg("client",this.client),bg("events",this.events),bg("disableProviderPing",this.disableProviderPing),t.forEach(n=>{if(!this.session)return;const r=OQ(n,this.session);if((r==null?void 0:r.length)===0)return;const i=jT(r),s=sf(this.namespaces,this.optionalNamespaces),o=of(Cc({},s[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new nJ({namespace:o});break;default:this.rpcProviders[n]=new sJ({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var n;const{topic:r}=t;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var n;const{params:r,topic:i}=t;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&Ri(o)&&this.events.emit("accountsChanged",o.map(s_))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ma(o),u=vg(o)!==vg(a)?`${c}:${vg(a)}`:o;this.onChainChanged({currentCaipChainId:u})}else this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var r,i;if(t!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=n,o=(i=this.client)==null?void 0:i.session.get(t);this.session=of(Cc({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",async t=>{var n;t.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",of(Cc({},Ve("USER_DISCONNECTED")),{data:t.topic})))}),this.on(Kw.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(of(Cc({},t),{internal:!0}))})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[FT]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])})}setNamespaces(t){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=t;this.optionalNamespaces=sf(n,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(t){const[n,r]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ma(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=ma(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged({currentCaipChainId:t,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[i,s]=this.validateChain(t);if(s){if(this.updateNamespaceChain(i,s),r)this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:i,currentCaipChainId:t,previousCaipChainId:n});else{const o=this.getProvider(i);o?o.setDefaultChain(s):this.session&&this.logger.warn(`Provider for namespace '${i}' not found during chain change`)}await this.persist("namespaces",this.namespaces)}}emitAccountsChangedOnChainChange({namespace:t,currentCaipChainId:n,previousCaipChainId:r}){var i,s;try{if(r===n)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[t])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(s_);if(!Ri(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(t,n){if(!this.namespaces)return;const r=this.namespaces[t]?t:`${t}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${nf}/${t}${i}`,n)}async getFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${nf}/${t}${r}`)}async deleteFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${nf}/${t}${r}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(nf)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}}const fJ=Gw;let Yr=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),HT=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const qT="fcl-plugin-service-walletconnect",VT="WC/RPC",dJ="pre-authz";function hJ(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function pJ(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function gJ(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function yJ(){return pJ()||gJ()}function Fu(){return hJ()||yJ()}function Yw(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function mJ(e){var r;let{service:t,user:n}=e;return!(!Fu()||t.endpoint===Yr.FLOW_AUTHN||t.endpoint===Yr.FLOW_AUTHZ&&((r=n==null?void 0:n.services)!=null&&r.find(i=>i.method===VT&&i.type===dJ)))}function wJ(e){if(!e)return;const t=new Image;t.src=e}async function KT(e){let{provider:t,existingPairing:n,network:r}=e;const i=r||await SA(),s={flow:{methods:[Yr.FLOW_AUTHN,Yr.FLOW_PRE_AUTHZ,Yr.FLOW_AUTHZ,Yr.FLOW_USER_SIGN],chains:[`flow:${i}`],events:["chainChanged","accountsChanged"]}};let o;const a=new Promise((u,l)=>{const f=d=>{u(d)};t.on("display_uri",f),o=()=>{t.removeListener("display_uri",f),l(new Error("WalletConnect Session Request aborted"))}}),c=t.connect({pairingTopic:n==null?void 0:n.topic,namespaces:s}).finally(()=>{o()});return{uri:await a,approval:()=>c}}const WT=async e=>{var h,p,g,v,m,_,E;let{method:t,body:n,session:r,provider:i,isExternal:s,abortSignal:o,disableNotifications:a}=e;const[c,u,l]=vJ(r),f=JSON.stringify({...n,addr:u,address:l}),d=await Promise.race([i.client.request({request:{method:t,params:[f]},chainId:c,topic:(h=i.session)==null?void 0:h.topic}),new Promise((I,O)=>{o!=null&&o.aborted&&O(new Error("WalletConnect Request aborted")),o==null||o.addEventListener("abort",()=>{O(new Error("WalletConnect Request aborted"))})})]);if(!(typeof d!="object"||d==null))switch(d.status){case"APPROVED":let I=function(O){return O.method==="WC/RPC"?{...O,params:{...O.params,...s?{externalProvider:r.topic}:{},...a?{disableNotifications:a}:{}}}:O};if(t===Yr.FLOW_AUTHN){const O=(((p=d==null?void 0:d.data)==null?void 0:p.services)??[]).map(I);return{...d.data?d.data:{},services:O}}return t===Yr.FLOW_PRE_AUTHZ?{...d.data,...(g=d.data)!=null&&g.proposer?{proposer:I(d.data.proposer)}:{},payer:[...(m=(v=d.data)==null?void 0:v.payer)==null?void 0:m.map(I)],authorization:[...(E=(_=d.data)==null?void 0:_.authorization)==null?void 0:E.map(I)]}:d.data;case"DECLINED":throw new Error(`Declined: ${d.reason||"No reason supplied"}`);case"REDIRECT":return d.data;default:throw new Error("Declined: No reason supplied")}};function vJ(e){const[t,n,r]=Object.values(e.namespaces).map(o=>o.accounts).flat().filter(o=>o.startsWith("flow:"))[0].split(":");return[`${t}:${n}`,r,r]}var bJ='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity,1))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity,1))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity,1))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity,1))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function EJ(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:s,animate:o}=e;return Ur("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${o?"animate-slideUp":""}`,role:"alert",onClick:a=>{i&&(a.stopPropagation(),i==null||i())},children:[r&&Ur("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:r,alt:t}),Ur("div",{className:"ml-3 grow",children:[Ur("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),Ur("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:n})]}),Ur("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${Fu()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:a=>{a.stopPropagation(),s==null||s()},children:[Ur("span",{className:"sr-only",children:"Close"}),Ur("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Ur("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let Dc=null,_J=0,ta=null;function SJ(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("div");t.appendChild(n),document.body.appendChild(e);const r=document.createElement("style");r.textContent=bJ,t.appendChild(r);const i=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{n.classList.toggle("dark",i.matches)};return i.addEventListener("change",s),s(),n}function IJ(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:s,debounceDelay:o=0}=e;Dc||(Dc=SJ());const a=!ta;ta&&(clearTimeout(ta),ta=null),r2(Ur(EJ,{title:t,message:n,icon:r,onClick:i,onDismiss:()=>{s==null||s(),c()},animate:a},_J++),Dc);function c(){Dc&&r2(null,Dc)}return{dismiss:()=>{ta=setTimeout(()=>{ta=null,c()},o)}}}var xJ="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function AJ(e){const t=new Set;let n=e;return{subscribe:o=>(t.add(o),()=>{t.delete(o)}),setState:o=>{n=o,t.forEach(a=>a(n))},getState:()=>n}}let af=AJ({});const OJ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{name:qT,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:VT,exec:RJ(e,t,V6(()=>import("./index-n6suXE_2.js").then(n=>n.i),[]).then(n=>n.WalletConnectModal))},services:[]}},RJ=(e,t,n)=>async r=>{var B,D,j,V,F,$;let{service:i,body:s,opts:o,abortSignal:a,user:c,config:u}=r;wJ((B=i.provider)==null?void 0:B.icon);const{wcRequestHook:l,pairingModalOverride:f,disableNotifications:d}=u,h=((D=i.params)==null?void 0:D.disableNotifications)??d,p=await kJ({provider:e,externalProviderOrTopic:(j=i.params)==null?void 0:j.externalProvider});q(!!p,"WalletConnect is not initialized");const{provider:g,isExternal:v}=p;let m=g.session??null,_;const E=i.endpoint,I=N(i);if(m!=null&&m.topic&&(m==null?void 0:m.topic)===((V=i.params)==null?void 0:V.externalProvider)&&E===Yr.FLOW_AUTHN)return c;m==null&&(m=await new Promise((L,w)=>{function S(){w("Declined: Externally Halted")}TJ(n)({service:i,onClose:S,appLink:I,provider:g,method:E,pairing:_,wcRequestHook:l,pairingModalOverride:f,abortSignal:a,network:u.client.network}).then(L,w)})),l&&l instanceof Function&&l({type:HT.SIGNING_REQUEST,method:E,service:i,session:m??null,pairing:null,uri:null}),mJ({service:i,user:c})&&Yw(I);const O=((F=m==null?void 0:m.sessionProperties)==null?void 0:F["fclWc.disableNotificationsOnMobile"])==="true",C=!h&&!O?PJ({user:c,service:i}):null;return await WT({method:E,body:s,session:m,provider:g,abortSignal:a,isExternal:v,disableNotifications:($=i.params)==null?void 0:$.disableNotifications}).finally(()=>C==null?void 0:C.dismiss());function N(L){let{uid:w}=L;return w&&/^(ftp|http|https):\/\/[^ "]+$/.test(w)||ve({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${w}`,level:De.warn}),w}};function TJ(e){return async t=>{let{service:n,onClose:r,appLink:i,provider:s,method:o,pairing:a,wcRequestHook:c,pairingModalOverride:u,abortSignal:l,network:f}=t;const d=s.providerOpts.projectId;q(!!d,"Cannot establish connection, WalletConnect projectId is undefined");let h=null,p=null;try{const{uri:g,approval:v}=await KT({provider:s,existingPairing:a,network:f});if(c&&c instanceof Function&&c({type:HT.SESSION_REQUEST,method:o,service:n,session:null,pairing:a??null,uri:g??null}),Fu()){const _=new URLSearchParams({uri:g}).toString();let E=a==null?i+"?"+_:i;Yw(E)}else if(!a)if(u)u(g,r);else{p=new(await e)({projectId:d}),p.openModal({uri:g,onClose:r});const _=p.subscribeModal(E=>{E.open===!1&&(r==null||r(),_())})}const m=await Promise.race([v(),new Promise((_,E)=>{l!=null&&l.aborted&&E(new Error("Session request aborted")),l==null||l.addEventListener("abort",()=>{E(new Error("Session request aborted"))})})]);if(m==null)throw new Error("Session request failed");return m}catch(g){throw g instanceof Error&&ve({title:`${g.name} Error establishing WalletConnect session`,message:`
          ${g.message}
          uri: ${h}
        `,level:De.error}),r(),g}finally{p==null||p.closeModal()}}}function PJ(e){var s;let{service:t,user:n}=e;const r=(s=n==null?void 0:n.services)==null?void 0:s.find(o=>o.type==="authn"),i=(r==null?void 0:r.provider)||t.provider;return IJ({title:(i==null?void 0:i.name)||"Mobile Wallet",message:Fu()?"Tap to view request in app":"Pending request on your mobile device",icon:(i==null?void 0:i.icon)||xJ,onClick:Fu()&&t.uid?()=>Yw(t.uid):void 0,debounceDelay:t.type==="pre-authz"?500:0})}async function kJ(e){var s;let{provider:t,externalProviderOrTopic:n}=e;if(!n){const o=await t;return o?{provider:o,isExternal:!1}:null}if(typeof n!="string"){const o=(s=n.session)==null?void 0:s.topic;if(!o)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return af.setState({[o]:n}),{provider:n,isExternal:!0}}const r=n;if(r){let o=af.getState()[r];if(!o){let a,c;o=await new Promise((u,l)=>{a=af.subscribe(()=>{const f=af.getState()[r];f&&u(f)}),c=setTimeout(()=>{l(new Error(`Provider for external topic ${r} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(c),a()})}return{provider:o,isExternal:!0}}const i=await t;return i?{provider:i,isExternal:!1}:null}const CJ="wss://relay.walletconnect.com",DJ="debug";let Hc=Promise.resolve(null);const NJ=async e=>{let{projectId:t,metadata:n}=e;q(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return fJ.init({logger:DJ,relayUrl:CJ,projectId:t,metadata:n})}catch(r){throw r instanceof Error&&ve({title:`${r.name} fcl-wc Init Client`,message:r.message,level:De.error}),r}},$J=e=>{const{FclWcServicePlugin:t,providerPromise:n}=BJ(e);return Q4.authn.update(),{FclWcServicePlugin:t,providerPromise:n}},BJ=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return Hc=Hc.catch(()=>null).then(n=>n||NJ({projectId:e.projectId,metadata:e.metadata})).catch(n=>{throw ve({title:"WalletConnect Client Initialization Error",message:n.message?n.message:n,level:De.error}),n}),{FclWcServicePlugin:OJ(Hc,e),providerPromise:Hc}};async function GT(){return Hc.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}let y_=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class m_ extends Error{constructor(t,n,r){super(n),this.code=t,this.message=n,this.data=r}}var Nm=function(e){return e.HELLO="rpc_hello",e}(Nm||{});class UJ{constructor(t){oe(this,"id",0);oe(this,"setSend",()=>{});oe(this,"_send",new Promise(t=>{this.setSend=t}));oe(this,"peerInfo",new Promise((t,n)=>{this.resolvePeerInfo=t,this.rejectPeerInfo=n}));oe(this,"enabledNotifications",[]);oe(this,"requestHandlers",{});oe(this,"subscriptions",{});oe(this,"messageListeners",[]);let{notifications:n}=t;this.enabledNotifications=n||[],this.on(Nm.HELLO,r=>(this.resolvePeerInfo(r),this.ownInfo()))}connect(t){let{send:n}=t;this.setSend(n),this.requestWithoutConnection(Nm.HELLO,this.ownInfo()).then(r=>{this.resolvePeerInfo(r)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){(t==null?void 0:t.jsonrpc)==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(n=>n(t)))}async handleRequest(t){const n=this.requestHandlers[t.method];if(n)try{const r=await n(t.params);this.send({jsonrpc:"2.0",id:t.id,result:r})}catch(r){r instanceof m_?this.send({jsonrpc:"2.0",id:t.id,error:{code:r.code,message:r.message,data:r.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:y_.INTERNAL_ERROR,message:r==null?void 0:r.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:y_.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(n=>n(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(n=>n!==t)}}async notify(t,n){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:n})}async request(t,n){return await this.onceConnected(),this.requestWithoutConnection(t,n)}async requestWithoutConnection(t,n){const r=this.id++;let i=()=>{};const s=new Promise((o,a)=>{i=this.onMessage(c=>{if(c.id===r&&("result"in c||"error"in c)){if(c.error){const u=new m_(c.error.code,c.error.message,c.error.data);a(u)}o(c.result)}})}).finally(i);return this.send({jsonrpc:"2.0",method:t,params:n,id:r}),s}on(t,n){this.requestHandlers[t]=n}subscribe(t,n){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(n)}unsubscribe(t,n){var r;(r=this.subscriptions[t])==null||r.delete(n)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const LJ=globalThis.AbortController||require("abort-controller");function FJ(e){const t=new LJ;return e!=null&&e.aborted&&t.abort(),e==null||e.addEventListener("abort",()=>t.abort()),t}let xg=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),w_=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const v_="APPROVED",MJ=e=>{let{onExecResult:t,execStrategyOpts:n,execStrategyArgs:r,abortSignal:i}=e;return async s=>{var a;let{service:o}=s;try{const c=await hh({...n,service:o,config:n.config,abortSignal:i},...r.slice(1));if((((a=ti(c))==null?void 0:a.status)||v_)===v_)return t(c),null;throw new Error((c==null?void 0:c.reason)||"Service was declined")}catch(c){throw new Error((c==null?void 0:c.message)||"Service execution failed")}}},jJ=e=>{let{rpc:t,network:n,onExecResult:r,authnBody:i,abortSignal:s}=e;const o=zJ({rpc:t,authnBody:i});return async a=>{if(s.aborted)throw new Error("Handler has been terminated");const c=await GT(),{uri:u,approval:l}=await KT({provider:c,network:n});return o({uri:u,approval:l,onExecResult:r}),{uri:u}}};function zJ(e){let{rpc:t,authnBody:n}=e;return r=>{let{uri:i,approval:s,onExecResult:o}=r;setTimeout(async()=>{try{const a=await GT(),c=await s();t.notify(xg.NOTIFY_QRCODE_CONNECTING,{uri:i});const u=await WT({method:Yr.FLOW_AUTHN,body:n,session:c,provider:a});t.notify(xg.NOTIFY_QRCODE_CONNECTED,{uri:i}),o(u)}catch(a){t.notify(xg.NOTIFY_QRCODE_ERROR,{uri:i,error:a==null?void 0:a.message})}},0)}}function HJ(e){let{onExecResult:t,body:n,opts:r,args:i,abortSignal:s}=e;const o=new UJ({notifications:[]});return o.on(w_.REQUEST_WALLETCONNECT_QRCODE,jJ({network:r.config.client.network,rpc:o,onExecResult:t,authnBody:n,abortSignal:s})),o.on(w_.EXEC_SERVICE,MJ({onExecResult:t,execStrategyOpts:r,execStrategyArgs:i,abortSignal:s})),{connect:o.connect.bind(o),receive:o.receive.bind(o)}}async function qJ(e){let{customRpc:t,opts:n,args:r,abortSignal:i}=e;const s={...n.config,client:{...n.config.client,discoveryRpcEnabled:!0}};return hh({...n,config:s,customRpc:t,abortSignal:i},...r.slice(1))}const b_="authn";async function VJ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t,{body:i,abortSignal:s,service:o}=r;if((o==null?void 0:o.type)!==b_)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${b_}" but got "${o==null?void 0:o.type}"`),hh(...t);const a=FJ(s);let c;const u=new Promise(async(l,f)=>{const d=HJ({onExecResult:l,body:i,opts:r,args:t,abortSignal:a.signal});c=qJ({customRpc:d,opts:r,args:t,abortSignal:a.signal}).then(l,f)});return await u.catch(()=>{}),await Promise.race([new Promise(l=>setTimeout(l,1e3)),c]).catch(()=>{}),a.abort(),u}const KJ=typeof window>"u",WJ=e=>{const t=e.appDetailTitle,n=e.appDetailIcon,r=e.appDetailDescription,i=e.appDetailUrl;return{name:t??document.title,description:r??"",url:i??window.location.origin,icons:n?[n]:[]}};let cf=null,uf=!1;function GJ(){He.subscribe(async e=>{const t={walletConnectProjectId:e["walletconnect.projectId"],walletConnectDisableNotifications:e["walletconnect.disableNotifications"],appDetailTitle:e["app.detail.title"],appDetailIcon:e["app.detail.icon"],appDetailDescription:e["app.detail.description"],appDetailUrl:e["app.detail.url"]};YJ(t)})}function YJ(e){if(KJ)return;const t=e.walletConnectProjectId,n=e.walletConnectDisableNotifications,r=cf;if(cf=JSON.stringify(e,null,2),uf){r!==cf&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${r}

Current configuration:
${cf}`);return}if(!!!t)return;if(q(!!t,"FCL Configuration value for 'walletconnect.projectId' is required"),jv.getPlugins().has(qT)){uf||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),uf=!0;return}uf=!0;const{FclWcServicePlugin:s}=$J({projectId:t,metadata:WJ(e),disableNotifications:n??void 0});jv.add([s])}const XJ={execStrategy:VJ},lf="FCL_IFRAME",ZJ=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function YT(e){q(!document.getElementById(lf),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=lf,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=ZJ,document.body.append(t);const n=()=>{document.getElementById(lf)&&document.getElementById(lf).remove()};return[t.contentWindow,n]}const QJ="FCL_POP";let $n=null,E_=null;function JJ(e,t,n,r,i){const s=n.top.outerHeight/2+n.top.screenY-i/2,o=n.top.outerWidth/2+n.top.screenX-r/2,a=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${i}, top=${s}, left=${o}`);if(!a)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return a}function XT(e){return $n==null||$n!=null&&$n.closed?$n=JJ(e,QJ,window,640,770):(E_!==e&&$n.location.replace(e),$n.focus()),E_=e,[$n,()=>{$n&&!$n.closed&&$n.close(),$n=null}]}let pn=null,__=null;function ZT(e){if(pn==null||pn!=null&&pn.closed){if(pn=window.open(e,"_blank"),!pn)throw new Error("Tab failed to open (was it blocked by the browser?)")}else __!==e&&pn.location.replace(e),pn.focus();return __=e,[pn,()=>{pn&&!pn.closed&&pn.close(),pn=null}]}const eee=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),Hs=()=>{};function tee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Hs,close:Hs};const n=t.onClose||Hs,r=t.onMessage||Hs,i=t.onReady||Hs,s=t.onResponse||Hs,o=t.onCustomRpc||Hs;let a,c;const u=gh({close:l,send:f,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o,getSource:()=>a});return window.addEventListener("message",u),[a,c]=YT(Gu(e)),{send:f,close:l};function l(){try{window.removeEventListener("message",u),c(),n()}catch(d){console.error("Frame Close Error",d)}}function f(d){try{a.postMessage(JSON.parse(JSON.stringify(d||{})),"*")}catch(h){console.error("Frame Send Error",d,h)}}}const Oo="1.21.9";function nee(e){let{service:t,body:n,config:r,customRpc:i,abortSignal:s,opts:o}=e;return new Promise((a,c)=>{const u=Z0(),l=o.includeOlderJsonRpcCall,{close:f}=tee(t,{async onReady(d,h){let{send:p}=h;try{p({type:"FCL:VIEW:READY:RESPONSE",fclVersion:Oo,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),p({fclVersion:Oo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),l&&p({jsonrpc:"2.0",id:u,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),i==null||i.connect({send:g=>{p({type:"FCL:VIEW:CUSTOM_RPC",payload:g})}})}catch(g){throw g}},onResponse(d,h){let{close:p}=h;try{if(typeof d.data!="object")return;const g=ti(d.data);switch(g.status){case"APPROVED":a(g.data),p();break;case"DECLINED":c(`Declined: ${g.reason||"No reason supplied"}`),p();break;case"REDIRECT":a(g),p();break;default:c("Declined: No reason supplied"),p();break}}catch(g){throw console.error("execIframeRPC onResponse error",g),g}},onMessage(d,h){let{close:p}=h;try{if(typeof d.data!="object"||d.data.jsonrpc!=="2.0"||d.data.id!==u)return;const g=ti(d.data.result);switch(g.status){case"APPROVED":a(g.data),p();break;case"DECLINED":c(`Declined: ${g.reason||"No reason supplied"}`),p();break;case"REDIRECT":a(g),p();break;default:c("Declined: No reason supplied"),p();break}}catch(g){throw console.error("execIframeRPC onMessage error",g),g}},onClose(){c("Declined: Externally Halted")},onCustomRpc(d){i==null||i.receive(d)}});s&&(s.aborted&&(c("Declined: Aborted"),f()),s.addEventListener("abort",()=>{c("Declined: Aborted"),f()}))})}const qs=()=>{};function ree(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:qs,close:qs};const n=t.onClose||qs,r=t.onMessage||qs,i=t.onReady||qs,s=t.onResponse||qs,o=t.onCustomRpc||qs;let a,c;const u=gh({close:f,send:d,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o,getSource:()=>a});window.addEventListener("message",u),[a,c]=XT(Gu(e));const l=setInterval(function(){a&&a.closed&&f()},500);return{send:d,close:f};function f(){try{window.removeEventListener("message",u),clearInterval(l),c(),n()}catch(h){console.error("Popup Close Error",h)}}function d(h){try{a.postMessage(JSON.parse(JSON.stringify(h||{})),"*")}catch(p){console.error("Popup Send Error",h,p)}}}function iee(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const u=Z0(),{redir:l,includeOlderJsonRpcCall:f}=o,{close:d}=ree(t,{customRpc:s,async onReady(h,p){let{send:g}=p;try{g({fclVersion:Oo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),g({fclVersion:Oo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),f&&g({jsonrpc:"2.0",id:u,method:"fcl:sign",params:[n,t.params]}),s==null||s.connect({send:v=>{g({type:"FCL:VIEW:CUSTOM_RPC",payload:v})}})}catch(v){throw v}},onResponse(h,p){let{close:g}=p;try{if(typeof h.data!="object")return;const v=ti(h.data);switch(v.status){case"APPROVED":a(v.data),!l&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onResponse error",v),v}},onMessage(h,p){let{close:g}=p;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==u)return;const v=ti(h.data.result);switch(v.status){case"APPROVED":a(v.data),!l&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onMessage error",v),v}},onClose(){c("Declined: Externally Halted")},onCustomRpc(h){s==null||s.receive(h)}});i&&(i.aborted&&(c("Declined: Aborted"),d()),i.addEventListener("abort",()=>{c("Declined: Aborted"),d()}))})}const Vs=()=>{};function see(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Vs,close:Vs};const n=t.onClose||Vs,r=t.onMessage||Vs,i=t.onReady||Vs,s=t.onResponse||Vs,o=t.onCustomRpc||Vs;let a,c;const u=gh({close:f,send:d,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o,getSource:()=>a});window.addEventListener("message",u),[a,c]=ZT(Gu(e));const l=setInterval(function(){a&&a.closed&&f()},500);return{send:d,close:f};function f(){try{window.removeEventListener("message",u),clearInterval(l),c(),n()}catch(h){console.error("Tab Close Error",h)}}function d(h){try{a.postMessage(JSON.parse(JSON.stringify(h||{})),"*")}catch(p){console.error("Tab Send Error",h,p)}}}function oee(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const u=Z0(),{redir:l,includeOlderJsonRpcCall:f}=o,{close:d}=see(t,{customRpc:s,async onReady(h,p){let{send:g}=p;try{g({fclVersion:Oo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),g({fclVersion:Oo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),f&&g({jsonrpc:"2.0",id:u,method:"fcl:sign",params:[n,t.params]}),s==null||s.connect({send:v=>{g({type:"FCL:VIEW:CUSTOM_RPC",payload:v})}})}catch(v){throw v}},onResponse(h,p){let{close:g}=p;try{if(typeof h.data!="object")return;const v=ti(h.data);switch(v.status){case"APPROVED":a(v.data),!l&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onResponse error",v),v}},onMessage(h,p){let{close:g}=p;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==u)return;const v=ti(h.data.result);switch(v.status){case"APPROVED":a(v.data),!l&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onMessage error",v),v}},onClose(){c("Declined: Externally Halted")},onCustomRpc(h){s==null||s.receive(h)}});i&&(i.aborted&&(d(),c("Declined: Aborted")),i.addEventListener("abort",()=>{d(),c("Declined: Aborted")}))})}const Ks=()=>{};function aee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Ks,close:Ks};const n=t.onClose||Ks,r=t.onMessage||Ks,i=t.onReady||Ks,s=t.onResponse||Ks,o=t.onCustomRpc||Ks,a=gh({close:c,send:u,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o});return window.addEventListener("message",a),u({service:e}),{send:u,close:c};function c(){try{window.removeEventListener("message",a),n()}catch(l){console.error("Ext Close Error",l)}}function u(l){try{window&&window.postMessage(JSON.parse(JSON.stringify(l||{})),"*")}catch(f){console.error("Ext Send Error",l,f)}}}function cee(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const{close:u}=aee(t,{async onReady(l,f){let{send:d}=f;try{d({fclVersion:Oo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),s==null||s.connect({send:h=>{d({type:"FCL:VIEW:CUSTOM_RPC",body:h})}})}catch(h){throw h}},onResponse(l,f){let{close:d}=f;try{if(typeof l.data!="object")return;const h=ti(l.data);switch(h.status){case"APPROVED":a(h.data),d();break;case"DECLINED":c(`Declined: ${h.reason||"No reason supplied"}`),d();break;case"REDIRECT":a(h),d();break;default:c("Declined: No reason supplied"),d();break}}catch(h){throw console.error("execExtRPC onResponse error",h),h}},onClose(){c("Declined: Externally Halted")},onCustomRpc(l){s==null||s.receive(l)}});i&&(i.aborted&&(u(),c("Declined: Aborted")),i.addEventListener("abort",()=>{u(),c("Declined: Aborted")}))})}const S_=()=>{throw new Error("Strategy util has not been implemented on this platform")},uee={"VIEW/IFRAME":YT,"VIEW/POP":XT,"VIEW/TAB":ZT,"VIEW/MOBILE_BROWSER":S_,"VIEW/DEEPLINK":S_};async function I_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return uee[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const lee={[jn["HTTP/RPC"]]:Vv(I_),[jn["HTTP/POST"]]:Vv(I_),[jn["IFRAME/RPC"]]:nee,[jn["POP/RPC"]]:iee,[jn["TAB/RPC"]]:oee,[jn["EXT/RPC"]]:cee},fee=()=>typeof window>"u",dee=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},hee={can:!fee()&&!!window.localStorage,get:async e=>dee(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},ul=L6({platform:"web",discovery:XJ,getStorageProvider:async()=>await He.get("fcl.storage")||hee}),pee=i6(ul),gee=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ul().authenticate(e)},yee=()=>ul().unauthenticate(),Ag=ul().authorization;He(eee());$A({coreStrategies:lee});GJ();function mee({user:e}){return re.jsx("div",{className:"wallet-connect",children:e!=null&&e.addr?re.jsxs("div",{className:"user-info",children:[re.jsxs("span",{className:"address",children:[e.addr.substring(0,6),"...",e.addr.slice(-4)]}),re.jsx("button",{onClick:()=>yee(),className:"logout-btn",children:"Disconnect"})]}):re.jsx("button",{onClick:()=>gee(),className:"connect-btn",children:"Connect Wallet"})})}function wee({prices:e}){const t=Object.entries(e).sort();return re.jsx("div",{className:"price-viewer",children:t.length===0?re.jsx("p",{className:"empty-state",children:"No prices available. Submit prices from oracle nodes."}):re.jsx("div",{className:"price-grid",children:t.map(([n,r])=>re.jsxs("div",{className:"price-card",children:[re.jsx("h3",{children:n}),re.jsxs("div",{className:"price-value",children:["$",r.toFixed(8)]}),re.jsx("p",{className:"updated-at",children:"Updated now"})]},n))})})}function vee({user:e,oracleAddress:t,onUpdate:n}){const[r,i]=Qt.useState(""),[s,o]=Qt.useState("1.0"),[a,c]=Qt.useState(!1),[u,l]=Qt.useState(""),f=async()=>{if(!r||!s){l("Please fill in all fields");return}c(!0);try{const d=await pee({cadence:`
          import FlowOracle from ${t}
          
          transaction(nodeAddress: Address, weight: UFix64) {
            let oracleRef: &FlowOracle
            
            prepare(signer: AuthAccount) {
              self.oracleRef = signer.borrow<&FlowOracle>(from: /storage/FlowOracle)
                ?? panic("No FlowOracle found")
            }
            
            execute {
              self.oracleRef.addPriceNode(address: nodeAddress, weight: weight)
            }
          }
        `,args:(h,p)=>[h(r,p.Address),h(s,p.UFix64)],payer:Ag,proposer:Ag,authorizations:[Ag],limit:100});l(`Transaction submitted: ${d}`),i(""),o("1.0"),n()}catch(d){l(`Error: ${d.message}`)}finally{c(!1)}};return re.jsxs("div",{className:"node-management",children:[re.jsx("h2",{children:"Add Price Node"}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{children:"Node Address"}),re.jsx("input",{type:"text",placeholder:"0x...",value:r,onChange:d=>i(d.target.value),className:"form-input"})]}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{children:"Weight"}),re.jsx("input",{type:"number",placeholder:"1.0",value:s,onChange:d=>o(d.target.value),step:"0.1",className:"form-input"})]}),re.jsx("button",{onClick:f,disabled:a,className:"submit-btn",children:a?"Adding Node...":"Add Node"}),u&&re.jsx("p",{className:"message",children:u})]})}function bee({oracleAddress:e}){const[t,n]=Qt.useState("FLOW/USDC"),[r,i]=Qt.useState([]),[s,o]=Qt.useState(!1),a=async c=>{o(!0);try{const u=await Oy({cadence:`
          import FlowOracle from ${e}
          
          pub fun main(pair: String): [FlowOracle.PricePoint] {
            return FlowOracle.getPriceHistory(pair: pair, limit: 20)
          }
        `,args:(l,f)=>[l(t,f.String)]});i(u||[])}catch(u){console.error("Error fetching history:",u)}finally{o(!1)}};return re.jsxs("div",{className:"price-history",children:[re.jsxs("div",{className:"history-controls",children:[re.jsx("input",{type:"text",placeholder:"Enter pair (e.g., FLOW/USDC)",value:t,onChange:c=>n(c.target.value),className:"pair-input"}),re.jsx("button",{onClick:()=>a(),className:"fetch-btn",disabled:s,children:s?"Loading...":"Load History"})]}),r.length===0?re.jsx("p",{className:"empty-state",children:"Enter a pair and click Load History"}):re.jsx("div",{className:"history-table",children:re.jsxs("table",{children:[re.jsx("thead",{children:re.jsxs("tr",{children:[re.jsx("th",{children:"Price"}),re.jsx("th",{children:"Timestamp"})]})}),re.jsx("tbody",{children:r.map((c,u)=>re.jsxs("tr",{children:[re.jsxs("td",{children:["$",c.price.toFixed(8)]}),re.jsx("td",{children:new Date(c.timestamp*1e3).toLocaleString()})]},u))})]})})]})}He().put("accessNode.api","https://rest-testnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/testnet/authn");const ff="0x791e03a1b0a978ff";function Eee(){const[e,t]=Qt.useState(null),[n,r]=Qt.useState({}),[i,s]=Qt.useState({quorumSize:0,nodeCount:0}),[o,a]=Qt.useState("prices");Qt.useEffect(()=>{ul.subscribe(t)},[]),Qt.useEffect(()=>{c(),u();const l=setInterval(()=>{c(),u()},15e3);return()=>clearInterval(l)},[]);const c=async()=>{try{const l=await Oy({cadence:`
          import FlowOracle from ${ff}
          
          pub fun main(): {String: UFix64} {
            return FlowOracle.getAllPrices()
          }
        `});r(l||{})}catch(l){console.error("Error fetching prices:",l)}},u=async()=>{try{const l=await Oy({cadence:`
          import FlowOracle from ${ff}
          
          pub fun main(): {String: UInt64} {
            return {
              "quorumSize": FlowOracle.getQuorumSize(),
              "nodeCount": FlowOracle.getNodeCount()
            }
          }
        `});s(l||{})}catch(l){console.error("Error fetching oracle stats:",l)}};return re.jsxs("div",{className:"App",children:[re.jsx("header",{className:"header",children:re.jsxs("div",{className:"container",children:[re.jsx("h1",{children:"FlowOracle"}),re.jsx("p",{className:"subtitle",children:"Decentralized Price Feed for Flow DeFi"}),re.jsx(mee,{user:e})]})}),re.jsxs("main",{className:"container",children:[re.jsxs("div",{className:"oracle-stats",children:[re.jsxs("div",{className:"stat-card",children:[re.jsx("h3",{children:"Quorum Size"}),re.jsx("p",{className:"stat-value",children:i.quorumSize||0})]}),re.jsxs("div",{className:"stat-card",children:[re.jsx("h3",{children:"Price Nodes"}),re.jsx("p",{className:"stat-value",children:i.nodeCount||0})]}),re.jsxs("div",{className:"stat-card",children:[re.jsx("h3",{children:"Active Prices"}),re.jsx("p",{className:"stat-value",children:Object.keys(n).length})]})]}),re.jsxs("div",{className:"tabs",children:[re.jsx("button",{className:`tab ${o==="prices"?"active":""}`,onClick:()=>a("prices"),children:"Current Prices"}),re.jsx("button",{className:`tab ${o==="history"?"active":""}`,onClick:()=>a("history"),children:"Price History"}),(e==null?void 0:e.addr)&&re.jsx("button",{className:`tab ${o==="nodes"?"active":""}`,onClick:()=>a("nodes"),children:"Manage Nodes"})]}),re.jsxs("div",{className:"tab-content",children:[o==="prices"&&re.jsx(wee,{prices:n}),o==="history"&&re.jsx(bee,{oracleAddress:ff}),o==="nodes"&&(e==null?void 0:e.addr)&&re.jsx(vee,{user:e,oracleAddress:ff,onUpdate:u})]})]}),re.jsx("footer",{className:"footer",children:re.jsx("p",{children:"FlowOracle  Real-time Price Feed | Testnet Beta"})})]})}const _ee=Og.createRoot(document.getElementById("root"));_ee.render(re.jsx(yP.StrictMode,{children:re.jsx(Eee,{})}));export{V6 as _};
//# sourceMappingURL=index-c5n1YWnf.js.map
