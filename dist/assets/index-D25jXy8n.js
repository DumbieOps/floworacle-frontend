(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const dR="modulepreload",fR=function(e){return"/"+e},I0={},hR=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=fR(c),c in I0)return;I0[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":dR,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var pR=Object.defineProperty,gR=(e,t,r)=>t in e?pR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oe=(e,t,r)=>gR(e,typeof t!="symbol"?t+"":t,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var J2={exports:{}},If={},e_={exports:{}},pe={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Al=Symbol.for("react.element"),mR=Symbol.for("react.portal"),bR=Symbol.for("react.fragment"),wR=Symbol.for("react.strict_mode"),vR=Symbol.for("react.profiler"),ER=Symbol.for("react.provider"),_R=Symbol.for("react.context"),SR=Symbol.for("react.forward_ref"),xR=Symbol.for("react.suspense"),IR=Symbol.for("react.memo"),OR=Symbol.for("react.lazy"),O0=Symbol.iterator;function kR(e){return e===null||typeof e!="object"?null:(e=O0&&e[O0]||e["@@iterator"],typeof e=="function"?e:null)}var t_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r_=Object.assign,n_={};function ja(e,t,r){this.props=e,this.context=t,this.refs=n_,this.updater=r||t_}ja.prototype.isReactComponent={};ja.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ja.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i_(){}i_.prototype=ja.prototype;function fm(e,t,r){this.props=e,this.context=t,this.refs=n_,this.updater=r||t_}var hm=fm.prototype=new i_;hm.constructor=fm;r_(hm,ja.prototype);hm.isPureReactComponent=!0;var k0=Array.isArray,s_=Object.prototype.hasOwnProperty,pm={current:null},o_={key:!0,ref:!0,__self:!0,__source:!0};function a_(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)s_.call(t,n)&&!o_.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Al,type:e,key:s,ref:o,props:i,_owner:pm.current}}function AR(e,t){return{$$typeof:Al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Al}function PR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var A0=/\/+/g;function Ih(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PR(""+e.key):t.toString(36)}function td(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Al:case mR:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Ih(o,0):n,k0(i)?(r="",e!=null&&(r=e.replace(A0,"$&/")+"/"),td(i,t,r,"",function(l){return l})):i!=null&&(gm(i)&&(i=AR(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(A0,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",k0(e))for(var a=0;a<e.length;a++){s=e[a];var c=n+Ih(s,a);o+=td(s,t,r,c,i)}else if(c=kR(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=n+Ih(s,a++),o+=td(s,t,r,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function nu(e,t,r){if(e==null)return e;var n=[],i=0;return td(e,n,"","",function(s){return t.call(r,s,i++)}),n}function RR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sr={current:null},rd={transition:null},TR={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:rd,ReactCurrentOwner:pm};function c_(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:nu,forEach:function(e,t,r){nu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return nu(e,function(){t++}),t},toArray:function(e){return nu(e,function(t){return t})||[]},only:function(e){if(!gm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=ja;pe.Fragment=bR;pe.Profiler=vR;pe.PureComponent=fm;pe.StrictMode=wR;pe.Suspense=xR;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TR;pe.act=c_;pe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=r_({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=pm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)s_.call(t,c)&&!o_.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:Al,type:e.type,key:i,ref:s,props:n,_owner:o}};pe.createContext=function(e){return e={$$typeof:_R,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ER,_context:e},e.Consumer=e};pe.createElement=a_;pe.createFactory=function(e){var t=a_.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:SR,render:e}};pe.isValidElement=gm;pe.lazy=function(e){return{$$typeof:OR,_payload:{_status:-1,_result:e},_init:RR}};pe.memo=function(e,t){return{$$typeof:IR,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=rd.transition;rd.transition={};try{e()}finally{rd.transition=t}};pe.unstable_act=c_;pe.useCallback=function(e,t){return sr.current.useCallback(e,t)};pe.useContext=function(e){return sr.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return sr.current.useDeferredValue(e)};pe.useEffect=function(e,t){return sr.current.useEffect(e,t)};pe.useId=function(){return sr.current.useId()};pe.useImperativeHandle=function(e,t,r){return sr.current.useImperativeHandle(e,t,r)};pe.useInsertionEffect=function(e,t){return sr.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return sr.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return sr.current.useMemo(e,t)};pe.useReducer=function(e,t,r){return sr.current.useReducer(e,t,r)};pe.useRef=function(e){return sr.current.useRef(e)};pe.useState=function(e){return sr.current.useState(e)};pe.useSyncExternalStore=function(e,t,r){return sr.current.useSyncExternalStore(e,t,r)};pe.useTransition=function(){return sr.current.useTransition()};pe.version="18.3.1";e_.exports=pe;var Qt=e_.exports;const CR=xf(Qt);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var NR=Qt,UR=Symbol.for("react.element"),BR=Symbol.for("react.fragment"),LR=Object.prototype.hasOwnProperty,DR=NR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jR={key:!0,ref:!0,__self:!0,__source:!0};function l_(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)LR.call(t,n)&&!jR.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:UR,type:e,key:s,ref:o,props:i,_owner:DR.current}}If.Fragment=BR;If.jsx=l_;If.jsxs=l_;J2.exports=If;var ne=J2.exports,sg={},u_={exports:{}},Fr={},d_={exports:{}},f_={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(e){function t(k,A){var O=k.length;k.push(A);e:for(;0<O;){var M=O-1>>>1,$=k[M];if(0<i($,A))k[M]=A,k[O]=$,O=M;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var A=k[0],O=k.pop();if(O!==A){k[0]=O;e:for(var M=0,$=k.length,Q=$>>>1;M<Q;){var H=2*(M+1)-1,G=k[H],ee=H+1,ie=k[ee];if(0>i(G,O))ee<$&&0>i(ie,G)?(k[M]=ie,k[ee]=O,M=ee):(k[M]=G,k[H]=O,M=H);else if(ee<$&&0>i(ie,O))k[M]=ie,k[ee]=O,M=ee;else break e}}return A}function i(k,A){var O=k.sortIndex-A.sortIndex;return O!==0?O:k.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(k){for(var A=r(l);A!==null;){if(A.callback===null)n(l);else if(A.startTime<=k)n(l),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(l)}}function I(k){if(g=!1,_(k),!y)if(r(c)!==null)y=!0,S(R);else{var A=r(l);A!==null&&P(I,A.startTime-k)}}function R(k,A){y=!1,g&&(g=!1,b(L),L=-1),h=!0;var O=f;try{for(_(A),d=r(c);d!==null&&(!(d.expirationTime>A)||k&&!q());){var M=d.callback;if(typeof M=="function"){d.callback=null,f=d.priorityLevel;var $=M(d.expirationTime<=A);A=e.unstable_now(),typeof $=="function"?d.callback=$:d===r(c)&&n(c),_(A)}else n(c);d=r(c)}if(d!==null)var Q=!0;else{var H=r(l);H!==null&&P(I,H.startTime-A),Q=!1}return Q}finally{d=null,f=O,h=!1}}var T=!1,C=null,L=-1,N=5,F=-1;function q(){return!(e.unstable_now()-F<N)}function j(){if(C!==null){var k=e.unstable_now();F=k;var A=!0;try{A=C(!0,k)}finally{A?B():(T=!1,C=null)}}else T=!1}var B;if(typeof w=="function")B=function(){w(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,m=D.port2;D.port1.onmessage=j,B=function(){m.postMessage(null)}}else B=function(){v(j,0)};function S(k){C=k,T||(T=!0,B())}function P(k,A){L=v(function(){k(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){y||h||(y=!0,S(R))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var O=f;f=A;try{return k()}finally{f=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,A){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var O=f;f=k;try{return A()}finally{f=O}},e.unstable_scheduleCallback=function(k,A,O){var M=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?M+O:M):O=M,k){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=O+$,k={id:u++,callback:A,priorityLevel:k,startTime:O,expirationTime:$,sortIndex:-1},O>M?(k.sortIndex=O,t(l,k),r(c)===null&&k===r(l)&&(g?(b(L),L=-1):g=!0,P(I,O-M))):(k.sortIndex=$,t(c,k),y||h||(y=!0,S(R))),k},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(k){var A=f;return function(){var O=f;f=A;try{return k.apply(this,arguments)}finally{f=O}}}})(f_);d_.exports=f_;var MR=d_.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var zR=Qt,zr=MR;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h_=new Set,Qc={};function wo(e,t){xa(e,t),xa(e+"Capture",t)}function xa(e,t){for(Qc[e]=t,e=0;e<t.length;e++)h_.add(t[e])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),og=Object.prototype.hasOwnProperty,FR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P0={},R0={};function $R(e){return og.call(R0,e)?!0:og.call(P0,e)?!1:FR.test(e)?R0[e]=!0:(P0[e]=!0,!1)}function qR(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HR(e,t,r,n){if(t===null||typeof t>"u"||qR(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function or(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new or(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new or(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new or(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new or(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new or(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new or(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new or(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new or(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new or(e,5,!1,e.toLowerCase(),null,!1,!1)});var ym=/[\-:]([a-z])/g;function mm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ym,mm);Lt[t]=new or(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ym,mm);Lt[t]=new or(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ym,mm);Lt[t]=new or(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new or(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new or(e,1,!1,e.toLowerCase(),null,!0,!0)});function bm(e,t,r,n){var i=Lt.hasOwnProperty(t)?Lt[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(HR(t,r,i,n)&&(r=null),n||i===null?$R(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ti=zR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,iu=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),g_=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),cg=Symbol.for("react.suspense"),lg=Symbol.for("react.suspense_list"),Em=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),y_=Symbol.for("react.offscreen"),T0=Symbol.iterator;function Za(e){return e===null||typeof e!="object"?null:(e=T0&&e[T0]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Oh;function xc(e){if(Oh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Oh=t&&t[1]||""}return`
`+Oh+e}var kh=!1;function Ah(e,t){if(!e||kh)return"";kh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{kh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xc(e):""}function VR(e){switch(e.tag){case 5:return xc(e.type);case 16:return xc("Lazy");case 13:return xc("Suspense");case 19:return xc("SuspenseList");case 0:case 2:case 15:return e=Ah(e.type,!1),e;case 11:return e=Ah(e.type.render,!1),e;case 1:return e=Ah(e.type,!0),e;default:return""}}function ug(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wo:return"Fragment";case Ko:return"Portal";case ag:return"Profiler";case wm:return"StrictMode";case cg:return"Suspense";case lg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g_:return(e.displayName||"Context")+".Consumer";case p_:return(e._context.displayName||"Context")+".Provider";case vm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Em:return t=e.displayName||null,t!==null?t:ug(e.type)||"Memo";case Wi:t=e._payload,e=e._init;try{return ug(e(t))}catch{}}return null}function KR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ug(t);case 8:return t===wm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function m_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function WR(e){var t=m_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function su(e){e._valueTracker||(e._valueTracker=WR(e))}function b_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=m_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Pd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dg(e,t){var r=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function C0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=bs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function w_(e,t){t=t.checked,t!=null&&bm(e,"checked",t,!1)}function fg(e,t){w_(e,t);var r=bs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hg(e,t.type,r):t.hasOwnProperty("defaultValue")&&hg(e,t.type,bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function N0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function hg(e,t,r){(t!=="number"||Pd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ic=Array.isArray;function ca(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+bs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function pg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function U0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(Ic(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bs(r)}}function v_(e,t){var r=bs(t.value),n=bs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function B0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ou,__=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ou=ou||document.createElement("div"),ou.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ou.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GR=["Webkit","ms","Moz","O"];Object.keys(Uc).forEach(function(e){GR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uc[t]=Uc[e]})});function S_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Uc.hasOwnProperty(e)&&Uc[e]?(""+t).trim():t+"px"}function x_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=S_(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var YR=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yg(e,t){if(t){if(YR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function mg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bg=null;function _m(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wg=null,la=null,ua=null;function L0(e){if(e=Tl(e)){if(typeof wg!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Rf(t),wg(e.stateNode,e.type,t))}}function I_(e){la?ua?ua.push(e):ua=[e]:la=e}function O_(){if(la){var e=la,t=ua;if(ua=la=null,L0(e),t)for(e=0;e<t.length;e++)L0(t[e])}}function k_(e,t){return e(t)}function A_(){}var Ph=!1;function P_(e,t,r){if(Ph)return e(t,r);Ph=!0;try{return k_(e,t,r)}finally{Ph=!1,(la!==null||ua!==null)&&(A_(),O_())}}function Xc(e,t){var r=e.stateNode;if(r===null)return null;var n=Rf(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var vg=!1;if(Oi)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){vg=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{vg=!1}function QR(e,t,r,n,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(u){this.onError(u)}}var Bc=!1,Rd=null,Td=!1,Eg=null,ZR={onError:function(e){Bc=!0,Rd=e}};function XR(e,t,r,n,i,s,o,a,c){Bc=!1,Rd=null,QR.apply(ZR,arguments)}function JR(e,t,r,n,i,s,o,a,c){if(XR.apply(this,arguments),Bc){if(Bc){var l=Rd;Bc=!1,Rd=null}else throw Error(Y(198));Td||(Td=!0,Eg=l)}}function vo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function R_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function D0(e){if(vo(e)!==e)throw Error(Y(188))}function eT(e){var t=e.alternate;if(!t){if(t=vo(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return D0(i),e;if(s===n)return D0(i),t;s=s.sibling}throw Error(Y(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(r.alternate!==n)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function T_(e){return e=eT(e),e!==null?C_(e):null}function C_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=C_(e);if(t!==null)return t;e=e.sibling}return null}var N_=zr.unstable_scheduleCallback,j0=zr.unstable_cancelCallback,tT=zr.unstable_shouldYield,rT=zr.unstable_requestPaint,nt=zr.unstable_now,nT=zr.unstable_getCurrentPriorityLevel,Sm=zr.unstable_ImmediatePriority,U_=zr.unstable_UserBlockingPriority,Cd=zr.unstable_NormalPriority,iT=zr.unstable_LowPriority,B_=zr.unstable_IdlePriority,Of=null,Gn=null;function sT(e){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Of,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:cT,oT=Math.log,aT=Math.LN2;function cT(e){return e>>>=0,e===0?32:31-(oT(e)/aT|0)|0}var au=64,cu=4194304;function Oc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Oc(a):(s&=o,s!==0&&(n=Oc(s)))}else o=r&~i,o!==0?n=Oc(o):s!==0&&(n=Oc(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Sn(t),i=1<<r,n|=e[r],t&=~i;return n}function lT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uT(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Sn(s),a=1<<o,c=i[o];c===-1?(!(a&r)||a&n)&&(i[o]=lT(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function _g(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L_(){var e=au;return au<<=1,!(au&4194240)&&(au=64),e}function Rh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=r}function dT(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Sn(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function xm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Sn(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var xe=0;function D_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var j_,Im,M_,z_,F_,Sg=!1,lu=[],as=null,cs=null,ls=null,Jc=new Map,el=new Map,Xi=[],fT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M0(e,t){switch(e){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Jc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(t.pointerId)}}function Ja(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Tl(t),t!==null&&Im(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function hT(e,t,r,n,i){switch(t){case"focusin":return as=Ja(as,e,t,r,n,i),!0;case"dragenter":return cs=Ja(cs,e,t,r,n,i),!0;case"mouseover":return ls=Ja(ls,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Jc.set(s,Ja(Jc.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,el.set(s,Ja(el.get(s)||null,e,t,r,n,i)),!0}return!1}function $_(e){var t=Vs(e.target);if(t!==null){var r=vo(t);if(r!==null){if(t=r.tag,t===13){if(t=R_(r),t!==null){e.blockedOn=t,F_(e.priority,function(){M_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);bg=n,r.target.dispatchEvent(n),bg=null}else return t=Tl(r),t!==null&&Im(t),e.blockedOn=r,!1;t.shift()}return!0}function z0(e,t,r){nd(e)&&r.delete(t)}function pT(){Sg=!1,as!==null&&nd(as)&&(as=null),cs!==null&&nd(cs)&&(cs=null),ls!==null&&nd(ls)&&(ls=null),Jc.forEach(z0),el.forEach(z0)}function ec(e,t){e.blockedOn===t&&(e.blockedOn=null,Sg||(Sg=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,pT)))}function tl(e){function t(i){return ec(i,e)}if(0<lu.length){ec(lu[0],e);for(var r=1;r<lu.length;r++){var n=lu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(as!==null&&ec(as,e),cs!==null&&ec(cs,e),ls!==null&&ec(ls,e),Jc.forEach(t),el.forEach(t),r=0;r<Xi.length;r++)n=Xi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Xi.length&&(r=Xi[0],r.blockedOn===null);)$_(r),r.blockedOn===null&&Xi.shift()}var da=Ti.ReactCurrentBatchConfig,Ud=!0;function gT(e,t,r,n){var i=xe,s=da.transition;da.transition=null;try{xe=1,Om(e,t,r,n)}finally{xe=i,da.transition=s}}function yT(e,t,r,n){var i=xe,s=da.transition;da.transition=null;try{xe=4,Om(e,t,r,n)}finally{xe=i,da.transition=s}}function Om(e,t,r,n){if(Ud){var i=xg(e,t,r,n);if(i===null)zh(e,t,n,Bd,r),M0(e,n);else if(hT(i,e,t,r,n))n.stopPropagation();else if(M0(e,n),t&4&&-1<fT.indexOf(e)){for(;i!==null;){var s=Tl(i);if(s!==null&&j_(s),s=xg(e,t,r,n),s===null&&zh(e,t,n,Bd,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else zh(e,t,n,null,r)}}var Bd=null;function xg(e,t,r,n){if(Bd=null,e=_m(n),e=Vs(e),e!==null)if(t=vo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=R_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bd=e,null}function q_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nT()){case Sm:return 1;case U_:return 4;case Cd:case iT:return 16;case B_:return 536870912;default:return 16}default:return 16}}var ns=null,km=null,id=null;function H_(){if(id)return id;var e,t=km,r=t.length,n,i="value"in ns?ns.value:ns.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return id=i.slice(e,1<n?1-n:void 0)}function sd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function uu(){return!0}function F0(){return!1}function $r(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?uu:F0,this.isPropagationStopped=F0,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),t}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Am=$r(Ma),Rl=Xe({},Ma,{view:0,detail:0}),mT=$r(Rl),Th,Ch,tc,kf=Xe({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tc&&(tc&&e.type==="mousemove"?(Th=e.screenX-tc.screenX,Ch=e.screenY-tc.screenY):Ch=Th=0,tc=e),Th)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),$0=$r(kf),bT=Xe({},kf,{dataTransfer:0}),wT=$r(bT),vT=Xe({},Rl,{relatedTarget:0}),Nh=$r(vT),ET=Xe({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),_T=$r(ET),ST=Xe({},Ma,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xT=$r(ST),IT=Xe({},Ma,{data:0}),q0=$r(IT),OT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AT[e])?!!t[e]:!1}function Pm(){return PT}var RT=Xe({},Rl,{key:function(e){if(e.key){var t=OT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pm,charCode:function(e){return e.type==="keypress"?sd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),TT=$r(RT),CT=Xe({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H0=$r(CT),NT=Xe({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pm}),UT=$r(NT),BT=Xe({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),LT=$r(BT),DT=Xe({},kf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jT=$r(DT),MT=[9,13,27,32],Rm=Oi&&"CompositionEvent"in window,Lc=null;Oi&&"documentMode"in document&&(Lc=document.documentMode);var zT=Oi&&"TextEvent"in window&&!Lc,V_=Oi&&(!Rm||Lc&&8<Lc&&11>=Lc),V0=" ",K0=!1;function K_(e,t){switch(e){case"keyup":return MT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Go=!1;function FT(e,t){switch(e){case"compositionend":return W_(t);case"keypress":return t.which!==32?null:(K0=!0,V0);case"textInput":return e=t.data,e===V0&&K0?null:e;default:return null}}function $T(e,t){if(Go)return e==="compositionend"||!Rm&&K_(e,t)?(e=H_(),id=km=ns=null,Go=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V_&&t.locale!=="ko"?null:t.data;default:return null}}var qT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qT[e.type]:t==="textarea"}function G_(e,t,r,n){I_(n),t=Ld(t,"onChange"),0<t.length&&(r=new Am("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Dc=null,rl=null;function HT(e){sS(e,0)}function Af(e){var t=Zo(e);if(b_(t))return e}function VT(e,t){if(e==="change")return t}var Y_=!1;if(Oi){var Uh;if(Oi){var Bh="oninput"in document;if(!Bh){var G0=document.createElement("div");G0.setAttribute("oninput","return;"),Bh=typeof G0.oninput=="function"}Uh=Bh}else Uh=!1;Y_=Uh&&(!document.documentMode||9<document.documentMode)}function Y0(){Dc&&(Dc.detachEvent("onpropertychange",Q_),rl=Dc=null)}function Q_(e){if(e.propertyName==="value"&&Af(rl)){var t=[];G_(t,rl,e,_m(e)),P_(HT,t)}}function KT(e,t,r){e==="focusin"?(Y0(),Dc=t,rl=r,Dc.attachEvent("onpropertychange",Q_)):e==="focusout"&&Y0()}function WT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Af(rl)}function GT(e,t){if(e==="click")return Af(t)}function YT(e,t){if(e==="input"||e==="change")return Af(t)}function QT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kn=typeof Object.is=="function"?Object.is:QT;function nl(e,t){if(kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!og.call(t,i)||!kn(e[i],t[i]))return!1}return!0}function Q0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Z0(e,t){var r=Q0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Q0(r)}}function Z_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Z_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function X_(){for(var e=window,t=Pd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Pd(e.document)}return t}function Tm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ZT(e){var t=X_(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Z_(r.ownerDocument.documentElement,r)){if(n!==null&&Tm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=Z0(r,s);var o=Z0(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XT=Oi&&"documentMode"in document&&11>=document.documentMode,Yo=null,Ig=null,jc=null,Og=!1;function X0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Og||Yo==null||Yo!==Pd(n)||(n=Yo,"selectionStart"in n&&Tm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),jc&&nl(jc,n)||(jc=n,n=Ld(Ig,"onSelect"),0<n.length&&(t=new Am("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Yo)))}function du(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qo={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Lh={},J_={};Oi&&(J_=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function Pf(e){if(Lh[e])return Lh[e];if(!Qo[e])return e;var t=Qo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in J_)return Lh[e]=t[r];return e}var eS=Pf("animationend"),tS=Pf("animationiteration"),rS=Pf("animationstart"),nS=Pf("transitionend"),iS=new Map,J0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(e,t){iS.set(e,t),wo(t,[e])}for(var Dh=0;Dh<J0.length;Dh++){var jh=J0[Dh],JT=jh.toLowerCase(),e3=jh[0].toUpperCase()+jh.slice(1);_s(JT,"on"+e3)}_s(eS,"onAnimationEnd");_s(tS,"onAnimationIteration");_s(rS,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(nS,"onTransitionEnd");xa("onMouseEnter",["mouseout","mouseover"]);xa("onMouseLeave",["mouseout","mouseover"]);xa("onPointerEnter",["pointerout","pointerover"]);xa("onPointerLeave",["pointerout","pointerover"]);wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t3=new Set("cancel close invalid load scroll toggle".split(" ").concat(kc));function ew(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,JR(n,t,void 0,e),e.currentTarget=null}function sS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;ew(i,a,l),s=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;ew(i,a,l),s=c}}}if(Td)throw e=Eg,Td=!1,Eg=null,e}function Me(e,t){var r=t[Tg];r===void 0&&(r=t[Tg]=new Set);var n=e+"__bubble";r.has(n)||(oS(t,e,2,!1),r.add(n))}function Mh(e,t,r){var n=0;t&&(n|=4),oS(r,e,n,t)}var fu="_reactListening"+Math.random().toString(36).slice(2);function il(e){if(!e[fu]){e[fu]=!0,h_.forEach(function(r){r!=="selectionchange"&&(t3.has(r)||Mh(r,!1,e),Mh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fu]||(t[fu]=!0,Mh("selectionchange",!1,t))}}function oS(e,t,r,n){switch(q_(t)){case 1:var i=gT;break;case 4:i=yT;break;default:i=Om}r=i.bind(null,t,r,e),i=void 0,!vg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function zh(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Vs(a),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}a=a.parentNode}}n=n.return}P_(function(){var l=s,u=_m(r),d=[];e:{var f=iS.get(e);if(f!==void 0){var h=Am,y=e;switch(e){case"keypress":if(sd(r)===0)break e;case"keydown":case"keyup":h=TT;break;case"focusin":y="focus",h=Nh;break;case"focusout":y="blur",h=Nh;break;case"beforeblur":case"afterblur":h=Nh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=wT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=UT;break;case eS:case tS:case rS:h=_T;break;case nS:h=LT;break;case"scroll":h=mT;break;case"wheel":h=jT;break;case"copy":case"cut":case"paste":h=xT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=H0}var g=(t&4)!==0,v=!g&&e==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var w=l,_;w!==null;){_=w;var I=_.stateNode;if(_.tag===5&&I!==null&&(_=I,b!==null&&(I=Xc(w,b),I!=null&&g.push(sl(w,I,_)))),v)break;w=w.return}0<g.length&&(f=new h(f,y,null,r,u),d.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&r!==bg&&(y=r.relatedTarget||r.fromElement)&&(Vs(y)||y[ki]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(y=r.relatedTarget||r.toElement,h=l,y=y?Vs(y):null,y!==null&&(v=vo(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=l),h!==y)){if(g=$0,I="onMouseLeave",b="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=H0,I="onPointerLeave",b="onPointerEnter",w="pointer"),v=h==null?f:Zo(h),_=y==null?f:Zo(y),f=new g(I,w+"leave",h,r,u),f.target=v,f.relatedTarget=_,I=null,Vs(u)===l&&(g=new g(b,w+"enter",y,r,u),g.target=_,g.relatedTarget=v,I=g),v=I,h&&y)t:{for(g=h,b=y,w=0,_=g;_;_=Po(_))w++;for(_=0,I=b;I;I=Po(I))_++;for(;0<w-_;)g=Po(g),w--;for(;0<_-w;)b=Po(b),_--;for(;w--;){if(g===b||b!==null&&g===b.alternate)break t;g=Po(g),b=Po(b)}g=null}else g=null;h!==null&&tw(d,f,h,g,!1),y!==null&&v!==null&&tw(d,v,y,g,!0)}}e:{if(f=l?Zo(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var R=VT;else if(W0(f))if(Y_)R=YT;else{R=WT;var T=KT}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=GT);if(R&&(R=R(e,l))){G_(d,R,r,u);break e}T&&T(e,f,l),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&hg(f,"number",f.value)}switch(T=l?Zo(l):window,e){case"focusin":(W0(T)||T.contentEditable==="true")&&(Yo=T,Ig=l,jc=null);break;case"focusout":jc=Ig=Yo=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,X0(d,r,u);break;case"selectionchange":if(XT)break;case"keydown":case"keyup":X0(d,r,u)}var C;if(Rm)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Go?K_(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(V_&&r.locale!=="ko"&&(Go||L!=="onCompositionStart"?L==="onCompositionEnd"&&Go&&(C=H_()):(ns=u,km="value"in ns?ns.value:ns.textContent,Go=!0)),T=Ld(l,L),0<T.length&&(L=new q0(L,e,null,r,u),d.push({event:L,listeners:T}),C?L.data=C:(C=W_(r),C!==null&&(L.data=C)))),(C=zT?FT(e,r):$T(e,r))&&(l=Ld(l,"onBeforeInput"),0<l.length&&(u=new q0("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:l}),u.data=C))}sS(d,t)})}function sl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ld(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xc(e,r),s!=null&&n.unshift(sl(e,s,i)),s=Xc(e,t),s!=null&&n.push(sl(e,s,i))),e=e.return}return n}function Po(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function tw(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&l!==null&&(a=l,i?(c=Xc(r,s),c!=null&&o.unshift(sl(r,c,a))):i||(c=Xc(r,s),c!=null&&o.push(sl(r,c,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var r3=/\r\n?/g,n3=/\u0000|\uFFFD/g;function rw(e){return(typeof e=="string"?e:""+e).replace(r3,`
`).replace(n3,"")}function hu(e,t,r){if(t=rw(t),rw(e)!==t&&r)throw Error(Y(425))}function Dd(){}var kg=null,Ag=null;function Pg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rg=typeof setTimeout=="function"?setTimeout:void 0,i3=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,s3=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(e){return nw.resolve(null).then(e).catch(o3)}:Rg;function o3(e){setTimeout(function(){throw e})}function Fh(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),tl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);tl(t)}function us(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var za=Math.random().toString(36).slice(2),$n="__reactFiber$"+za,ol="__reactProps$"+za,ki="__reactContainer$"+za,Tg="__reactEvents$"+za,a3="__reactListeners$"+za,c3="__reactHandles$"+za;function Vs(e){var t=e[$n];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ki]||r[$n]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=iw(e);e!==null;){if(r=e[$n])return r;e=iw(e)}return t}e=r,r=e.parentNode}return null}function Tl(e){return e=e[$n]||e[ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Rf(e){return e[ol]||null}var Cg=[],Xo=-1;function Ss(e){return{current:e}}function Fe(e){0>Xo||(e.current=Cg[Xo],Cg[Xo]=null,Xo--)}function Le(e,t){Xo++,Cg[Xo]=e.current,e.current=t}var ws={},Jt=Ss(ws),wr=Ss(!1),no=ws;function Ia(e,t){var r=e.type.contextTypes;if(!r)return ws;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function vr(e){return e=e.childContextTypes,e!=null}function jd(){Fe(wr),Fe(Jt)}function sw(e,t,r){if(Jt.current!==ws)throw Error(Y(168));Le(Jt,t),Le(wr,r)}function aS(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Y(108,KR(e)||"Unknown",i));return Xe({},r,n)}function Md(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ws,no=Jt.current,Le(Jt,e),Le(wr,wr.current),!0}function ow(e,t,r){var n=e.stateNode;if(!n)throw Error(Y(169));r?(e=aS(e,t,no),n.__reactInternalMemoizedMergedChildContext=e,Fe(wr),Fe(Jt),Le(Jt,e)):Fe(wr),Le(wr,r)}var fi=null,Tf=!1,$h=!1;function cS(e){fi===null?fi=[e]:fi.push(e)}function l3(e){Tf=!0,cS(e)}function xs(){if(!$h&&fi!==null){$h=!0;var e=0,t=xe;try{var r=fi;for(xe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}fi=null,Tf=!1}catch(i){throw fi!==null&&(fi=fi.slice(e+1)),N_(Sm,xs),i}finally{xe=t,$h=!1}}return null}var Jo=[],ea=0,zd=null,Fd=0,Jr=[],en=0,io=null,mi=1,bi="";function Ms(e,t){Jo[ea++]=Fd,Jo[ea++]=zd,zd=e,Fd=t}function lS(e,t,r){Jr[en++]=mi,Jr[en++]=bi,Jr[en++]=io,io=e;var n=mi;e=bi;var i=32-Sn(n)-1;n&=~(1<<i),r+=1;var s=32-Sn(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,mi=1<<32-Sn(t)+i|r<<i|n,bi=s+e}else mi=1<<s|r<<i|n,bi=e}function Cm(e){e.return!==null&&(Ms(e,1),lS(e,1,0))}function Nm(e){for(;e===zd;)zd=Jo[--ea],Jo[ea]=null,Fd=Jo[--ea],Jo[ea]=null;for(;e===io;)io=Jr[--en],Jr[en]=null,bi=Jr[--en],Jr[en]=null,mi=Jr[--en],Jr[en]=null}var Mr=null,Dr=null,Ke=!1,En=null;function uS(e,t){var r=tn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function aw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mr=e,Dr=us(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mr=e,Dr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=io!==null?{id:mi,overflow:bi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=tn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Mr=e,Dr=null,!0):!1;default:return!1}}function Ng(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ug(e){if(Ke){var t=Dr;if(t){var r=t;if(!aw(e,t)){if(Ng(e))throw Error(Y(418));t=us(r.nextSibling);var n=Mr;t&&aw(e,t)?uS(n,r):(e.flags=e.flags&-4097|2,Ke=!1,Mr=e)}}else{if(Ng(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Ke=!1,Mr=e}}}function cw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mr=e}function pu(e){if(e!==Mr)return!1;if(!Ke)return cw(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pg(e.type,e.memoizedProps)),t&&(t=Dr)){if(Ng(e))throw dS(),Error(Y(418));for(;t;)uS(e,t),t=us(t.nextSibling)}if(cw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Dr=us(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Dr=null}}else Dr=Mr?us(e.stateNode.nextSibling):null;return!0}function dS(){for(var e=Dr;e;)e=us(e.nextSibling)}function Oa(){Dr=Mr=null,Ke=!1}function Um(e){En===null?En=[e]:En.push(e)}var u3=Ti.ReactCurrentBatchConfig;function rc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var n=r.stateNode}if(!n)throw Error(Y(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function gu(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lw(e){var t=e._init;return t(e._payload)}function fS(e){function t(b,w){if(e){var _=b.deletions;_===null?(b.deletions=[w],b.flags|=16):_.push(w)}}function r(b,w){if(!e)return null;for(;w!==null;)t(b,w),w=w.sibling;return null}function n(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=ps(b,w),b.index=0,b.sibling=null,b}function s(b,w,_){return b.index=_,e?(_=b.alternate,_!==null?(_=_.index,_<w?(b.flags|=2,w):_):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function a(b,w,_,I){return w===null||w.tag!==6?(w=Yh(_,b.mode,I),w.return=b,w):(w=i(w,_),w.return=b,w)}function c(b,w,_,I){var R=_.type;return R===Wo?u(b,w,_.props.children,I,_.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Wi&&lw(R)===w.type)?(I=i(w,_.props),I.ref=rc(b,w,_),I.return=b,I):(I=fd(_.type,_.key,_.props,null,b.mode,I),I.ref=rc(b,w,_),I.return=b,I)}function l(b,w,_,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Qh(_,b.mode,I),w.return=b,w):(w=i(w,_.children||[]),w.return=b,w)}function u(b,w,_,I,R){return w===null||w.tag!==7?(w=eo(_,b.mode,I,R),w.return=b,w):(w=i(w,_),w.return=b,w)}function d(b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Yh(""+w,b.mode,_),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case iu:return _=fd(w.type,w.key,w.props,null,b.mode,_),_.ref=rc(b,null,w),_.return=b,_;case Ko:return w=Qh(w,b.mode,_),w.return=b,w;case Wi:var I=w._init;return d(b,I(w._payload),_)}if(Ic(w)||Za(w))return w=eo(w,b.mode,_,null),w.return=b,w;gu(b,w)}return null}function f(b,w,_,I){var R=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:a(b,w,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case iu:return _.key===R?c(b,w,_,I):null;case Ko:return _.key===R?l(b,w,_,I):null;case Wi:return R=_._init,f(b,w,R(_._payload),I)}if(Ic(_)||Za(_))return R!==null?null:u(b,w,_,I,null);gu(b,_)}return null}function h(b,w,_,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return b=b.get(_)||null,a(w,b,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case iu:return b=b.get(I.key===null?_:I.key)||null,c(w,b,I,R);case Ko:return b=b.get(I.key===null?_:I.key)||null,l(w,b,I,R);case Wi:var T=I._init;return h(b,w,_,T(I._payload),R)}if(Ic(I)||Za(I))return b=b.get(_)||null,u(w,b,I,R,null);gu(w,I)}return null}function y(b,w,_,I){for(var R=null,T=null,C=w,L=w=0,N=null;C!==null&&L<_.length;L++){C.index>L?(N=C,C=null):N=C.sibling;var F=f(b,C,_[L],I);if(F===null){C===null&&(C=N);break}e&&C&&F.alternate===null&&t(b,C),w=s(F,w,L),T===null?R=F:T.sibling=F,T=F,C=N}if(L===_.length)return r(b,C),Ke&&Ms(b,L),R;if(C===null){for(;L<_.length;L++)C=d(b,_[L],I),C!==null&&(w=s(C,w,L),T===null?R=C:T.sibling=C,T=C);return Ke&&Ms(b,L),R}for(C=n(b,C);L<_.length;L++)N=h(C,b,L,_[L],I),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?L:N.key),w=s(N,w,L),T===null?R=N:T.sibling=N,T=N);return e&&C.forEach(function(q){return t(b,q)}),Ke&&Ms(b,L),R}function g(b,w,_,I){var R=Za(_);if(typeof R!="function")throw Error(Y(150));if(_=R.call(_),_==null)throw Error(Y(151));for(var T=R=null,C=w,L=w=0,N=null,F=_.next();C!==null&&!F.done;L++,F=_.next()){C.index>L?(N=C,C=null):N=C.sibling;var q=f(b,C,F.value,I);if(q===null){C===null&&(C=N);break}e&&C&&q.alternate===null&&t(b,C),w=s(q,w,L),T===null?R=q:T.sibling=q,T=q,C=N}if(F.done)return r(b,C),Ke&&Ms(b,L),R;if(C===null){for(;!F.done;L++,F=_.next())F=d(b,F.value,I),F!==null&&(w=s(F,w,L),T===null?R=F:T.sibling=F,T=F);return Ke&&Ms(b,L),R}for(C=n(b,C);!F.done;L++,F=_.next())F=h(C,b,L,F.value,I),F!==null&&(e&&F.alternate!==null&&C.delete(F.key===null?L:F.key),w=s(F,w,L),T===null?R=F:T.sibling=F,T=F);return e&&C.forEach(function(j){return t(b,j)}),Ke&&Ms(b,L),R}function v(b,w,_,I){if(typeof _=="object"&&_!==null&&_.type===Wo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case iu:e:{for(var R=_.key,T=w;T!==null;){if(T.key===R){if(R=_.type,R===Wo){if(T.tag===7){r(b,T.sibling),w=i(T,_.props.children),w.return=b,b=w;break e}}else if(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Wi&&lw(R)===T.type){r(b,T.sibling),w=i(T,_.props),w.ref=rc(b,T,_),w.return=b,b=w;break e}r(b,T);break}else t(b,T);T=T.sibling}_.type===Wo?(w=eo(_.props.children,b.mode,I,_.key),w.return=b,b=w):(I=fd(_.type,_.key,_.props,null,b.mode,I),I.ref=rc(b,w,_),I.return=b,b=I)}return o(b);case Ko:e:{for(T=_.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){r(b,w.sibling),w=i(w,_.children||[]),w.return=b,b=w;break e}else{r(b,w);break}else t(b,w);w=w.sibling}w=Qh(_,b.mode,I),w.return=b,b=w}return o(b);case Wi:return T=_._init,v(b,w,T(_._payload),I)}if(Ic(_))return y(b,w,_,I);if(Za(_))return g(b,w,_,I);gu(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(r(b,w.sibling),w=i(w,_),w.return=b,b=w):(r(b,w),w=Yh(_,b.mode,I),w.return=b,b=w),o(b)):r(b,w)}return v}var ka=fS(!0),hS=fS(!1),$d=Ss(null),qd=null,ta=null,Bm=null;function Lm(){Bm=ta=qd=null}function Dm(e){var t=$d.current;Fe($d),e._currentValue=t}function Bg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function fa(e,t){qd=e,Bm=ta=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yr=!0),e.firstContext=null)}function sn(e){var t=e._currentValue;if(Bm!==e)if(e={context:e,memoizedValue:t,next:null},ta===null){if(qd===null)throw Error(Y(308));ta=e,qd.dependencies={lanes:0,firstContext:e}}else ta=ta.next=e;return t}var Ks=null;function jm(e){Ks===null?Ks=[e]:Ks.push(e)}function pS(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,jm(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ai(e,n)}function Ai(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gi=!1;function Mm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ei(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ds(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,me&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ai(e,r)}return i=n.interleaved,i===null?(t.next=t,jm(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ai(e,r)}function od(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xm(e,r)}}function uw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hd(e,t,r,n){var i=e.updateQueue;Gi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,g=a;switch(f=t,h=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(h,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(h,d,f):y,f==null)break e;d=Xe({},d,f);break e;case 2:Gi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);oo|=o,e.lanes=o,e.memoizedState=d}}function dw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Y(191,i));i.call(n)}}}var Cl={},Yn=Ss(Cl),al=Ss(Cl),cl=Ss(Cl);function Ws(e){if(e===Cl)throw Error(Y(174));return e}function zm(e,t){switch(Le(cl,t),Le(al,e),Le(Yn,Cl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gg(t,e)}Fe(Yn),Le(Yn,t)}function Aa(){Fe(Yn),Fe(al),Fe(cl)}function yS(e){Ws(cl.current);var t=Ws(Yn.current),r=gg(t,e.type);t!==r&&(Le(al,e),Le(Yn,r))}function Fm(e){al.current===e&&(Fe(Yn),Fe(al))}var Qe=Ss(0);function Vd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function $m(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var ad=Ti.ReactCurrentDispatcher,Hh=Ti.ReactCurrentBatchConfig,so=0,Ze=null,gt=null,St=null,Kd=!1,Mc=!1,ll=0,d3=0;function Ft(){throw Error(Y(321))}function qm(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kn(e[r],t[r]))return!1;return!0}function Hm(e,t,r,n,i,s){if(so=s,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ad.current=e===null||e.memoizedState===null?g3:y3,e=r(n,i),Mc){s=0;do{if(Mc=!1,ll=0,25<=s)throw Error(Y(301));s+=1,St=gt=null,t.updateQueue=null,ad.current=m3,e=r(n,i)}while(Mc)}if(ad.current=Wd,t=gt!==null&&gt.next!==null,so=0,St=gt=Ze=null,Kd=!1,t)throw Error(Y(300));return e}function Vm(){var e=ll!==0;return ll=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ze.memoizedState=St=e:St=St.next=e,St}function on(){if(gt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=St===null?Ze.memoizedState:St.next;if(t!==null)St=t,gt=e;else{if(e===null)throw Error(Y(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},St===null?Ze.memoizedState=St=e:St=St.next=e}return St}function ul(e,t){return typeof t=="function"?t(e):t}function Vh(e){var t=on(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var n=gt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((so&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=n):c=c.next=d,Ze.lanes|=u,oo|=u}l=l.next}while(l!==null&&l!==s);c===null?o=n:c.next=a,kn(n,t.memoizedState)||(yr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,Ze.lanes|=s,oo|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Kh(e){var t=on(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);kn(s,t.memoizedState)||(yr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function mS(){}function bS(e,t){var r=Ze,n=on(),i=t(),s=!kn(n.memoizedState,i);if(s&&(n.memoizedState=i,yr=!0),n=n.queue,Km(ES.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||St!==null&&St.memoizedState.tag&1){if(r.flags|=2048,dl(9,vS.bind(null,r,n,i,t),void 0,null),Ot===null)throw Error(Y(349));so&30||wS(r,t,i)}return i}function wS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function vS(e,t,r,n){t.value=r,t.getSnapshot=n,_S(t)&&SS(e)}function ES(e,t,r){return r(function(){_S(t)&&SS(e)})}function _S(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kn(e,r)}catch{return!0}}function SS(e){var t=Ai(e,1);t!==null&&xn(t,e,1,-1)}function fw(e){var t=Dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:e},t.queue=e,e=e.dispatch=p3.bind(null,Ze,e),[t.memoizedState,e]}function dl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function xS(){return on().memoizedState}function cd(e,t,r,n){var i=Dn();Ze.flags|=e,i.memoizedState=dl(1|t,r,void 0,n===void 0?null:n)}function Cf(e,t,r,n){var i=on();n=n===void 0?null:n;var s=void 0;if(gt!==null){var o=gt.memoizedState;if(s=o.destroy,n!==null&&qm(n,o.deps)){i.memoizedState=dl(t,r,s,n);return}}Ze.flags|=e,i.memoizedState=dl(1|t,r,s,n)}function hw(e,t){return cd(8390656,8,e,t)}function Km(e,t){return Cf(2048,8,e,t)}function IS(e,t){return Cf(4,2,e,t)}function OS(e,t){return Cf(4,4,e,t)}function kS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AS(e,t,r){return r=r!=null?r.concat([e]):null,Cf(4,4,kS.bind(null,t,e),r)}function Wm(){}function PS(e,t){var r=on();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qm(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function RS(e,t){var r=on();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qm(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function TS(e,t,r){return so&21?(kn(r,t)||(r=L_(),Ze.lanes|=r,oo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yr=!0),e.memoizedState=r)}function f3(e,t){var r=xe;xe=r!==0&&4>r?r:4,e(!0);var n=Hh.transition;Hh.transition={};try{e(!1),t()}finally{xe=r,Hh.transition=n}}function CS(){return on().memoizedState}function h3(e,t,r){var n=hs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},NS(e))US(t,r);else if(r=pS(e,t,r,n),r!==null){var i=tr();xn(r,e,n,i),BS(r,t,n)}}function p3(e,t,r){var n=hs(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(NS(e))US(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,kn(a,o)){var c=t.interleaved;c===null?(i.next=i,jm(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=pS(e,t,i,n),r!==null&&(i=tr(),xn(r,e,n,i),BS(r,t,n))}}function NS(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function US(e,t){Mc=Kd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function BS(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xm(e,r)}}var Wd={readContext:sn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},g3={readContext:sn,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:sn,useEffect:hw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,cd(4194308,4,kS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return cd(4194308,4,e,t)},useInsertionEffect:function(e,t){return cd(4,2,e,t)},useMemo:function(e,t){var r=Dn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Dn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=h3.bind(null,Ze,e),[n.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:fw,useDebugValue:Wm,useDeferredValue:function(e){return Dn().memoizedState=e},useTransition:function(){var e=fw(!1),t=e[0];return e=f3.bind(null,e[1]),Dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ze,i=Dn();if(Ke){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),Ot===null)throw Error(Y(349));so&30||wS(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,hw(ES.bind(null,n,s,e),[e]),n.flags|=2048,dl(9,vS.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Dn(),t=Ot.identifierPrefix;if(Ke){var r=bi,n=mi;r=(n&~(1<<32-Sn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ll++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=d3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y3={readContext:sn,useCallback:PS,useContext:sn,useEffect:Km,useImperativeHandle:AS,useInsertionEffect:IS,useLayoutEffect:OS,useMemo:RS,useReducer:Vh,useRef:xS,useState:function(){return Vh(ul)},useDebugValue:Wm,useDeferredValue:function(e){var t=on();return TS(t,gt.memoizedState,e)},useTransition:function(){var e=Vh(ul)[0],t=on().memoizedState;return[e,t]},useMutableSource:mS,useSyncExternalStore:bS,useId:CS,unstable_isNewReconciler:!1},m3={readContext:sn,useCallback:PS,useContext:sn,useEffect:Km,useImperativeHandle:AS,useInsertionEffect:IS,useLayoutEffect:OS,useMemo:RS,useReducer:Kh,useRef:xS,useState:function(){return Kh(ul)},useDebugValue:Wm,useDeferredValue:function(e){var t=on();return gt===null?t.memoizedState=e:TS(t,gt.memoizedState,e)},useTransition:function(){var e=Kh(ul)[0],t=on().memoizedState;return[e,t]},useMutableSource:mS,useSyncExternalStore:bS,useId:CS,unstable_isNewReconciler:!1};function bn(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Lg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Xe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Nf={isMounted:function(e){return(e=e._reactInternals)?vo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tr(),i=hs(e),s=Ei(n,i);s.payload=t,r!=null&&(s.callback=r),t=ds(e,s,i),t!==null&&(xn(t,e,i,n),od(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tr(),i=hs(e),s=Ei(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=ds(e,s,i),t!==null&&(xn(t,e,i,n),od(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tr(),n=hs(e),i=Ei(r,n);i.tag=2,t!=null&&(i.callback=t),t=ds(e,i,n),t!==null&&(xn(t,e,n,r),od(t,e,n))}};function pw(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!nl(r,n)||!nl(i,s):!0}function LS(e,t,r){var n=!1,i=ws,s=t.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=vr(t)?no:Jt.current,n=t.contextTypes,s=(n=n!=null)?Ia(e,i):ws),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function gw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Nf.enqueueReplaceState(t,t.state,null)}function Dg(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Mm(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=vr(t)?no:Jt.current,i.context=Ia(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Lg(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Nf.enqueueReplaceState(i,i.state,null),Hd(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Pa(e,t){try{var r="",n=t;do r+=VR(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Wh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var b3=typeof WeakMap=="function"?WeakMap:Map;function DS(e,t,r){r=Ei(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Yd||(Yd=!0,Wg=n),jg(e,t)},r}function jS(e,t,r){r=Ei(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){jg(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){jg(e,t),typeof n!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function yw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new b3;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=C3.bind(null,e,t,r),t.then(e,e))}function mw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bw(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ei(-1,1),t.tag=2,ds(r,t,1))),r.lanes|=1),e)}var w3=Ti.ReactCurrentOwner,yr=!1;function er(e,t,r,n){t.child=e===null?hS(t,null,r,n):ka(t,e.child,r,n)}function ww(e,t,r,n,i){r=r.render;var s=t.ref;return fa(t,i),n=Hm(e,t,r,n,s,i),r=Vm(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pi(e,t,i)):(Ke&&r&&Cm(t),t.flags|=1,er(e,t,n,i),t.child)}function vw(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!tb(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,MS(e,t,s,n,i)):(e=fd(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:nl,r(o,n)&&e.ref===t.ref)return Pi(e,t,i)}return t.flags|=1,e=ps(s,n),e.ref=t.ref,e.return=t,t.child=e}function MS(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(nl(s,n)&&e.ref===t.ref)if(yr=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(yr=!0);else return t.lanes=e.lanes,Pi(e,t,i)}return Mg(e,t,r,n,i)}function zS(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(na,Tr),Tr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(na,Tr),Tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Le(na,Tr),Tr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Le(na,Tr),Tr|=n;return er(e,t,i,r),t.child}function FS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Mg(e,t,r,n,i){var s=vr(r)?no:Jt.current;return s=Ia(t,s),fa(t,i),r=Hm(e,t,r,n,s,i),n=Vm(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pi(e,t,i)):(Ke&&n&&Cm(t),t.flags|=1,er(e,t,r,i),t.child)}function Ew(e,t,r,n,i){if(vr(r)){var s=!0;Md(t)}else s=!1;if(fa(t,i),t.stateNode===null)ld(e,t),LS(t,r,n),Dg(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=sn(l):(l=vr(r)?no:Jt.current,l=Ia(t,l));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==l)&&gw(t,o,n,l),Gi=!1;var f=t.memoizedState;o.state=f,Hd(t,n,o,i),c=t.memoizedState,a!==n||f!==c||wr.current||Gi?(typeof u=="function"&&(Lg(t,r,u,n),c=t.memoizedState),(a=Gi||pw(t,r,a,n,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,gS(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:bn(t.type,a),o.props=l,d=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=vr(r)?no:Jt.current,c=Ia(t,c));var h=r.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&gw(t,o,n,c),Gi=!1,f=t.memoizedState,o.state=f,Hd(t,n,o,i);var y=t.memoizedState;a!==d||f!==y||wr.current||Gi?(typeof h=="function"&&(Lg(t,r,h,n),y=t.memoizedState),(l=Gi||pw(t,r,l,n,f,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return zg(e,t,r,n,s,i)}function zg(e,t,r,n,i,s){FS(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&ow(t,r,!1),Pi(e,t,s);n=t.stateNode,w3.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ka(t,e.child,null,s),t.child=ka(t,null,a,s)):er(e,t,a,s),t.memoizedState=n.state,i&&ow(t,r,!0),t.child}function $S(e){var t=e.stateNode;t.pendingContext?sw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sw(e,t.context,!1),zm(e,t.containerInfo)}function _w(e,t,r,n,i){return Oa(),Um(i),t.flags|=256,er(e,t,r,n),t.child}var Fg={dehydrated:null,treeContext:null,retryLane:0};function $g(e){return{baseLanes:e,cachePool:null,transitions:null}}function qS(e,t,r){var n=t.pendingProps,i=Qe.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Le(Qe,i&1),e===null)return Ug(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lf(o,n,0,null),e=eo(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=$g(r),t.memoizedState=Fg,e):Gm(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return v3(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ps(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ps(a,s):(s=eo(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?$g(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Fg,n}return s=e.child,e=s.sibling,n=ps(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Gm(e,t){return t=Lf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yu(e,t,r,n){return n!==null&&Um(n),ka(t,e.child,null,r),e=Gm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function v3(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=Wh(Error(Y(422))),yu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Lf({mode:"visible",children:n.children},i,0,null),s=eo(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&ka(t,e.child,null,o),t.child.memoizedState=$g(o),t.memoizedState=Fg,s);if(!(t.mode&1))return yu(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Y(419)),n=Wh(s,n,void 0),yu(e,t,o,n)}if(a=(o&e.childLanes)!==0,yr||a){if(n=Ot,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ai(e,i),xn(n,e,i,-1))}return eb(),n=Wh(Error(Y(421))),yu(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=N3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Dr=us(i.nextSibling),Mr=t,Ke=!0,En=null,e!==null&&(Jr[en++]=mi,Jr[en++]=bi,Jr[en++]=io,mi=e.id,bi=e.overflow,io=t),t=Gm(t,n.children),t.flags|=4096,t)}function Sw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Bg(e.return,t,r)}function Gh(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function HS(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(er(e,t,n.children,r),n=Qe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sw(e,r,t);else if(e.tag===19)Sw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Le(Qe,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Vd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Gh(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Vd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Gh(t,!0,r,null,s);break;case"together":Gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ld(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),oo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=ps(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ps(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function E3(e,t,r){switch(t.tag){case 3:$S(t),Oa();break;case 5:yS(t);break;case 1:vr(t.type)&&Md(t);break;case 4:zm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Le($d,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Le(Qe,Qe.current&1),t.flags|=128,null):r&t.child.childLanes?qS(e,t,r):(Le(Qe,Qe.current&1),e=Pi(e,t,r),e!==null?e.sibling:null);Le(Qe,Qe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return HS(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Qe,Qe.current),n)break;return null;case 22:case 23:return t.lanes=0,zS(e,t,r)}return Pi(e,t,r)}var VS,qg,KS,WS;VS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};qg=function(){};KS=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ws(Yn.current);var s=null;switch(r){case"input":i=dg(e,i),n=dg(e,n),s=[];break;case"select":i=Xe({},i,{value:void 0}),n=Xe({},n,{value:void 0}),s=[];break;case"textarea":i=pg(e,i),n=pg(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Dd)}yg(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qc.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var c=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Qc.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Me("scroll",e),s||a===c||(s=[])):(s=s||[]).push(l,c))}r&&(s=s||[]).push("style",r);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};WS=function(e,t,r,n){r!==n&&(t.flags|=4)};function nc(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $t(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _3(e,t,r){var n=t.pendingProps;switch(Nm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(t),null;case 1:return vr(t.type)&&jd(),$t(t),null;case 3:return n=t.stateNode,Aa(),Fe(wr),Fe(Jt),$m(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(pu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,En!==null&&(Qg(En),En=null))),qg(e,t),$t(t),null;case 5:Fm(t);var i=Ws(cl.current);if(r=t.type,e!==null&&t.stateNode!=null)KS(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Y(166));return $t(t),null}if(e=Ws(Yn.current),pu(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[$n]=t,n[ol]=s,e=(t.mode&1)!==0,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(i=0;i<kc.length;i++)Me(kc[i],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":C0(n,s),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Me("invalid",n);break;case"textarea":U0(n,s),Me("invalid",n)}yg(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&hu(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hu(n.textContent,a,e),i=["children",""+a]):Qc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",n)}switch(r){case"input":su(n),N0(n,s,!0);break;case"textarea":su(n),B0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Dd)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[$n]=t,e[ol]=n,VS(e,t,!1,!1),t.stateNode=e;e:{switch(o=mg(r,n),r){case"dialog":Me("cancel",e),Me("close",e),i=n;break;case"iframe":case"object":case"embed":Me("load",e),i=n;break;case"video":case"audio":for(i=0;i<kc.length;i++)Me(kc[i],e);i=n;break;case"source":Me("error",e),i=n;break;case"img":case"image":case"link":Me("error",e),Me("load",e),i=n;break;case"details":Me("toggle",e),i=n;break;case"input":C0(e,n),i=dg(e,n),Me("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Xe({},n,{value:void 0}),Me("invalid",e);break;case"textarea":U0(e,n),i=pg(e,n),Me("invalid",e);break;default:i=n}yg(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?x_(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&__(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zc(e,c):typeof c=="number"&&Zc(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qc.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Me("scroll",e):c!=null&&bm(e,s,c,o))}switch(r){case"input":su(e),N0(e,n,!1);break;case"textarea":su(e),B0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+bs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?ca(e,!!n.multiple,s,!1):n.defaultValue!=null&&ca(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Dd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $t(t),null;case 6:if(e&&t.stateNode!=null)WS(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Y(166));if(r=Ws(cl.current),Ws(Yn.current),pu(t)){if(n=t.stateNode,r=t.memoizedProps,n[$n]=t,(s=n.nodeValue!==r)&&(e=Mr,e!==null))switch(e.tag){case 3:hu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hu(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$n]=t,t.stateNode=n}return $t(t),null;case 13:if(Fe(Qe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Dr!==null&&t.mode&1&&!(t.flags&128))dS(),Oa(),t.flags|=98560,s=!1;else if(s=pu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(Y(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[$n]=t}else Oa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$t(t),s=!1}else En!==null&&(Qg(En),En=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?mt===0&&(mt=3):eb())),t.updateQueue!==null&&(t.flags|=4),$t(t),null);case 4:return Aa(),qg(e,t),e===null&&il(t.stateNode.containerInfo),$t(t),null;case 10:return Dm(t.type._context),$t(t),null;case 17:return vr(t.type)&&jd(),$t(t),null;case 19:if(Fe(Qe),s=t.memoizedState,s===null)return $t(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)nc(s,!1);else{if(mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vd(e),o!==null){for(t.flags|=128,nc(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Le(Qe,Qe.current&1|2),t.child}e=e.sibling}s.tail!==null&&nt()>Ra&&(t.flags|=128,n=!0,nc(s,!1),t.lanes=4194304)}else{if(!n)if(e=Vd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),nc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return $t(t),null}else 2*nt()-s.renderingStartTime>Ra&&r!==1073741824&&(t.flags|=128,n=!0,nc(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=nt(),t.sibling=null,r=Qe.current,Le(Qe,n?r&1|2:r&1),t):($t(t),null);case 22:case 23:return Jm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Tr&1073741824&&($t(t),t.subtreeFlags&6&&(t.flags|=8192)):$t(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function S3(e,t){switch(Nm(t),t.tag){case 1:return vr(t.type)&&jd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Aa(),Fe(wr),Fe(Jt),$m(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fm(t),null;case 13:if(Fe(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Oa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(Qe),null;case 4:return Aa(),null;case 10:return Dm(t.type._context),null;case 22:case 23:return Jm(),null;case 24:return null;default:return null}}var mu=!1,Zt=!1,x3=typeof WeakSet=="function"?WeakSet:Set,re=null;function ra(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tt(e,t,n)}else r.current=null}function GS(e,t,r){try{r()}catch(n){tt(e,t,n)}}var xw=!1;function I3(e,t){if(kg=Ud,e=X_(),Tm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===r&&++l===i&&(a=o),f===s&&++u===n&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ag={focusedElem:e,selectionRange:r},Ud=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,b=t.stateNode,w=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:bn(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(I){tt(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return y=xw,xw=!1,y}function zc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&GS(t,r,s)}i=i.next}while(i!==n)}}function Uf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Hg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function YS(e){var t=e.alternate;t!==null&&(e.alternate=null,YS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$n],delete t[ol],delete t[Tg],delete t[a3],delete t[c3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QS(e){return e.tag===5||e.tag===3||e.tag===4}function Iw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Dd));else if(n!==4&&(e=e.child,e!==null))for(Vg(e,t,r),e=e.sibling;e!==null;)Vg(e,t,r),e=e.sibling}function Kg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Kg(e,t,r),e=e.sibling;e!==null;)Kg(e,t,r),e=e.sibling}var Ut=null,vn=!1;function Ni(e,t,r){for(r=r.child;r!==null;)ZS(e,t,r),r=r.sibling}function ZS(e,t,r){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Of,r)}catch{}switch(r.tag){case 5:Zt||ra(r,t);case 6:var n=Ut,i=vn;Ut=null,Ni(e,t,r),Ut=n,vn=i,Ut!==null&&(vn?(e=Ut,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ut.removeChild(r.stateNode));break;case 18:Ut!==null&&(vn?(e=Ut,r=r.stateNode,e.nodeType===8?Fh(e.parentNode,r):e.nodeType===1&&Fh(e,r),tl(e)):Fh(Ut,r.stateNode));break;case 4:n=Ut,i=vn,Ut=r.stateNode.containerInfo,vn=!0,Ni(e,t,r),Ut=n,vn=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&GS(r,t,o),i=i.next}while(i!==n)}Ni(e,t,r);break;case 1:if(!Zt&&(ra(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){tt(r,t,a)}Ni(e,t,r);break;case 21:Ni(e,t,r);break;case 22:r.mode&1?(Zt=(n=Zt)||r.memoizedState!==null,Ni(e,t,r),Zt=n):Ni(e,t,r);break;default:Ni(e,t,r)}}function Ow(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new x3),t.forEach(function(n){var i=U3.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function dn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ut=a.stateNode,vn=!1;break e;case 3:Ut=a.stateNode.containerInfo,vn=!0;break e;case 4:Ut=a.stateNode.containerInfo,vn=!0;break e}a=a.return}if(Ut===null)throw Error(Y(160));ZS(s,o,i),Ut=null,vn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){tt(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)XS(t,e),t=t.sibling}function XS(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dn(t,e),Pn(e),n&4){try{zc(3,e,e.return),Uf(3,e)}catch(g){tt(e,e.return,g)}try{zc(5,e,e.return)}catch(g){tt(e,e.return,g)}}break;case 1:dn(t,e),Pn(e),n&512&&r!==null&&ra(r,r.return);break;case 5:if(dn(t,e),Pn(e),n&512&&r!==null&&ra(r,r.return),e.flags&32){var i=e.stateNode;try{Zc(i,"")}catch(g){tt(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&w_(i,s),mg(a,o);var l=mg(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?x_(i,d):u==="dangerouslySetInnerHTML"?__(i,d):u==="children"?Zc(i,d):bm(i,u,d,l)}switch(a){case"input":fg(i,s);break;case"textarea":v_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ca(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?ca(i,!!s.multiple,s.defaultValue,!0):ca(i,!!s.multiple,s.multiple?[]:"",!1))}i[ol]=s}catch(g){tt(e,e.return,g)}}break;case 6:if(dn(t,e),Pn(e),n&4){if(e.stateNode===null)throw Error(Y(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){tt(e,e.return,g)}}break;case 3:if(dn(t,e),Pn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{tl(t.containerInfo)}catch(g){tt(e,e.return,g)}break;case 4:dn(t,e),Pn(e);break;case 13:dn(t,e),Pn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zm=nt())),n&4&&Ow(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Zt=(l=Zt)||u,dn(t,e),Zt=l):dn(t,e),Pn(e),n&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(re=e,u=e.child;u!==null;){for(d=re=u;re!==null;){switch(f=re,h=f.child,f.tag){case 0:case 11:case 14:case 15:zc(4,f,f.return);break;case 1:ra(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){tt(n,r,g)}}break;case 5:ra(f,f.return);break;case 22:if(f.memoizedState!==null){Aw(d);continue}}h!==null?(h.return=f,re=h):Aw(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=S_("display",o))}catch(g){tt(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){tt(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dn(t,e),Pn(e),n&4&&Ow(e);break;case 21:break;default:dn(t,e),Pn(e)}}function Pn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(QS(r)){var n=r;break e}r=r.return}throw Error(Y(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Zc(i,""),n.flags&=-33);var s=Iw(e);Kg(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Iw(e);Vg(e,a,o);break;default:throw Error(Y(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O3(e,t,r){re=e,JS(e)}function JS(e,t,r){for(var n=(e.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||mu;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Zt;a=mu;var l=Zt;if(mu=o,(Zt=c)&&!l)for(re=i;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?Pw(i):c!==null?(c.return=o,re=c):Pw(i);for(;s!==null;)re=s,JS(s),s=s.sibling;re=i,mu=a,Zt=l}kw(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):kw(e)}}function kw(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zt||Uf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Zt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:bn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&dw(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}dw(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&tl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Zt||t.flags&512&&Hg(t)}catch(f){tt(t,t.return,f)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function Aw(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function Pw(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Uf(4,t)}catch(c){tt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){tt(t,i,c)}}var s=t.return;try{Hg(t)}catch(c){tt(t,s,c)}break;case 5:var o=t.return;try{Hg(t)}catch(c){tt(t,o,c)}}}catch(c){tt(t,t.return,c)}if(t===e){re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,re=a;break}re=t.return}}var k3=Math.ceil,Gd=Ti.ReactCurrentDispatcher,Ym=Ti.ReactCurrentOwner,nn=Ti.ReactCurrentBatchConfig,me=0,Ot=null,lt=null,Bt=0,Tr=0,na=Ss(0),mt=0,fl=null,oo=0,Bf=0,Qm=0,Fc=null,gr=null,Zm=0,Ra=1/0,ui=null,Yd=!1,Wg=null,fs=null,bu=!1,is=null,Qd=0,$c=0,Gg=null,ud=-1,dd=0;function tr(){return me&6?nt():ud!==-1?ud:ud=nt()}function hs(e){return e.mode&1?me&2&&Bt!==0?Bt&-Bt:u3.transition!==null?(dd===0&&(dd=L_()),dd):(e=xe,e!==0||(e=window.event,e=e===void 0?16:q_(e.type)),e):1}function xn(e,t,r,n){if(50<$c)throw $c=0,Gg=null,Error(Y(185));Pl(e,r,n),(!(me&2)||e!==Ot)&&(e===Ot&&(!(me&2)&&(Bf|=r),mt===4&&Ji(e,Bt)),Er(e,n),r===1&&me===0&&!(t.mode&1)&&(Ra=nt()+500,Tf&&xs()))}function Er(e,t){var r=e.callbackNode;uT(e,t);var n=Nd(e,e===Ot?Bt:0);if(n===0)r!==null&&j0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&j0(r),t===1)e.tag===0?l3(Rw.bind(null,e)):cS(Rw.bind(null,e)),s3(function(){!(me&6)&&xs()}),r=null;else{switch(D_(n)){case 1:r=Sm;break;case 4:r=U_;break;case 16:r=Cd;break;case 536870912:r=B_;break;default:r=Cd}r=ax(r,ex.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ex(e,t){if(ud=-1,dd=0,me&6)throw Error(Y(327));var r=e.callbackNode;if(ha()&&e.callbackNode!==r)return null;var n=Nd(e,e===Ot?Bt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zd(e,n);else{t=n;var i=me;me|=2;var s=rx();(Ot!==e||Bt!==t)&&(ui=null,Ra=nt()+500,Js(e,t));do try{R3();break}catch(a){tx(e,a)}while(!0);Lm(),Gd.current=s,me=i,lt!==null?t=0:(Ot=null,Bt=0,t=mt)}if(t!==0){if(t===2&&(i=_g(e),i!==0&&(n=i,t=Yg(e,i))),t===1)throw r=fl,Js(e,0),Ji(e,n),Er(e,nt()),r;if(t===6)Ji(e,n);else{if(i=e.current.alternate,!(n&30)&&!A3(i)&&(t=Zd(e,n),t===2&&(s=_g(e),s!==0&&(n=s,t=Yg(e,s))),t===1))throw r=fl,Js(e,0),Ji(e,n),Er(e,nt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Y(345));case 2:zs(e,gr,ui);break;case 3:if(Ji(e,n),(n&130023424)===n&&(t=Zm+500-nt(),10<t)){if(Nd(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){tr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Rg(zs.bind(null,e,gr,ui),t);break}zs(e,gr,ui);break;case 4:if(Ji(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Sn(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=nt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*k3(n/1960))-n,10<n){e.timeoutHandle=Rg(zs.bind(null,e,gr,ui),n);break}zs(e,gr,ui);break;case 5:zs(e,gr,ui);break;default:throw Error(Y(329))}}}return Er(e,nt()),e.callbackNode===r?ex.bind(null,e):null}function Yg(e,t){var r=Fc;return e.current.memoizedState.isDehydrated&&(Js(e,t).flags|=256),e=Zd(e,t),e!==2&&(t=gr,gr=r,t!==null&&Qg(t)),e}function Qg(e){gr===null?gr=e:gr.push.apply(gr,e)}function A3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!kn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ji(e,t){for(t&=~Qm,t&=~Bf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Sn(t),n=1<<r;e[r]=-1,t&=~n}}function Rw(e){if(me&6)throw Error(Y(327));ha();var t=Nd(e,0);if(!(t&1))return Er(e,nt()),null;var r=Zd(e,t);if(e.tag!==0&&r===2){var n=_g(e);n!==0&&(t=n,r=Yg(e,n))}if(r===1)throw r=fl,Js(e,0),Ji(e,t),Er(e,nt()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zs(e,gr,ui),Er(e,nt()),null}function Xm(e,t){var r=me;me|=1;try{return e(t)}finally{me=r,me===0&&(Ra=nt()+500,Tf&&xs())}}function ao(e){is!==null&&is.tag===0&&!(me&6)&&ha();var t=me;me|=1;var r=nn.transition,n=xe;try{if(nn.transition=null,xe=1,e)return e()}finally{xe=n,nn.transition=r,me=t,!(me&6)&&xs()}}function Jm(){Tr=na.current,Fe(na)}function Js(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,i3(r)),lt!==null)for(r=lt.return;r!==null;){var n=r;switch(Nm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jd();break;case 3:Aa(),Fe(wr),Fe(Jt),$m();break;case 5:Fm(n);break;case 4:Aa();break;case 13:Fe(Qe);break;case 19:Fe(Qe);break;case 10:Dm(n.type._context);break;case 22:case 23:Jm()}r=r.return}if(Ot=e,lt=e=ps(e.current,null),Bt=Tr=t,mt=0,fl=null,Qm=Bf=oo=0,gr=Fc=null,Ks!==null){for(t=0;t<Ks.length;t++)if(r=Ks[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Ks=null}return e}function tx(e,t){do{var r=lt;try{if(Lm(),ad.current=Wd,Kd){for(var n=Ze.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Kd=!1}if(so=0,St=gt=Ze=null,Mc=!1,ll=0,Ym.current=null,r===null||r.return===null){mt=1,fl=t,lt=null;break}e:{var s=e,o=r.return,a=r,c=t;if(t=Bt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=mw(o);if(h!==null){h.flags&=-257,bw(h,o,a,s,t),h.mode&1&&yw(s,l,t),t=h,c=l;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){yw(s,l,t),eb();break e}c=Error(Y(426))}}else if(Ke&&a.mode&1){var v=mw(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),bw(v,o,a,s,t),Um(Pa(c,a));break e}}s=c=Pa(c,a),mt!==4&&(mt=2),Fc===null?Fc=[s]:Fc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=DS(s,c,t);uw(s,b);break e;case 1:a=c;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fs===null||!fs.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var I=jS(s,a,t);uw(s,I);break e}}s=s.return}while(s!==null)}ix(r)}catch(R){t=R,lt===r&&r!==null&&(lt=r=r.return);continue}break}while(!0)}function rx(){var e=Gd.current;return Gd.current=Wd,e===null?Wd:e}function eb(){(mt===0||mt===3||mt===2)&&(mt=4),Ot===null||!(oo&268435455)&&!(Bf&268435455)||Ji(Ot,Bt)}function Zd(e,t){var r=me;me|=2;var n=rx();(Ot!==e||Bt!==t)&&(ui=null,Js(e,t));do try{P3();break}catch(i){tx(e,i)}while(!0);if(Lm(),me=r,Gd.current=n,lt!==null)throw Error(Y(261));return Ot=null,Bt=0,mt}function P3(){for(;lt!==null;)nx(lt)}function R3(){for(;lt!==null&&!tT();)nx(lt)}function nx(e){var t=ox(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,t===null?ix(e):lt=t,Ym.current=null}function ix(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=S3(r,t),r!==null){r.flags&=32767,lt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,lt=null;return}}else if(r=_3(r,t,Tr),r!==null){lt=r;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);mt===0&&(mt=5)}function zs(e,t,r){var n=xe,i=nn.transition;try{nn.transition=null,xe=1,T3(e,t,r,n)}finally{nn.transition=i,xe=n}return null}function T3(e,t,r,n){do ha();while(is!==null);if(me&6)throw Error(Y(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(dT(e,s),e===Ot&&(lt=Ot=null,Bt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bu||(bu=!0,ax(Cd,function(){return ha(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var o=xe;xe=1;var a=me;me|=4,Ym.current=null,I3(e,r),XS(r,e),ZT(Ag),Ud=!!kg,Ag=kg=null,e.current=r,O3(r),rT(),me=a,xe=o,nn.transition=s}else e.current=r;if(bu&&(bu=!1,is=e,Qd=i),s=e.pendingLanes,s===0&&(fs=null),sT(r.stateNode),Er(e,nt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Yd)throw Yd=!1,e=Wg,Wg=null,e;return Qd&1&&e.tag!==0&&ha(),s=e.pendingLanes,s&1?e===Gg?$c++:($c=0,Gg=e):$c=0,xs(),null}function ha(){if(is!==null){var e=D_(Qd),t=nn.transition,r=xe;try{if(nn.transition=null,xe=16>e?16:e,is===null)var n=!1;else{if(e=is,is=null,Qd=0,me&6)throw Error(Y(331));var i=me;for(me|=4,re=e.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(re=l;re!==null;){var u=re;switch(u.tag){case 0:case 11:case 15:zc(8,u,s)}var d=u.child;if(d!==null)d.return=u,re=d;else for(;re!==null;){u=re;var f=u.sibling,h=u.return;if(YS(u),u===l){re=null;break}if(f!==null){f.return=h,re=f;break}re=h}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zc(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,re=b;break e}re=s.return}}var w=e.current;for(re=w;re!==null;){o=re;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,re=_;else e:for(o=w;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uf(9,a)}}catch(R){tt(a,a.return,R)}if(a===o){re=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,re=I;break e}re=a.return}}if(me=i,xs(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Of,e)}catch{}n=!0}return n}finally{xe=r,nn.transition=t}}return!1}function Tw(e,t,r){t=Pa(r,t),t=DS(e,t,1),e=ds(e,t,1),t=tr(),e!==null&&(Pl(e,1,t),Er(e,t))}function tt(e,t,r){if(e.tag===3)Tw(e,e,r);else for(;t!==null;){if(t.tag===3){Tw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(fs===null||!fs.has(n))){e=Pa(r,e),e=jS(t,e,1),t=ds(t,e,1),e=tr(),t!==null&&(Pl(t,1,e),Er(t,e));break}}t=t.return}}function C3(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=tr(),e.pingedLanes|=e.suspendedLanes&r,Ot===e&&(Bt&r)===r&&(mt===4||mt===3&&(Bt&130023424)===Bt&&500>nt()-Zm?Js(e,0):Qm|=r),Er(e,t)}function sx(e,t){t===0&&(e.mode&1?(t=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):t=1);var r=tr();e=Ai(e,t),e!==null&&(Pl(e,t,r),Er(e,r))}function N3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),sx(e,r)}function U3(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(t),sx(e,r)}var ox;ox=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wr.current)yr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yr=!1,E3(e,t,r);yr=!!(e.flags&131072)}else yr=!1,Ke&&t.flags&1048576&&lS(t,Fd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ld(e,t),e=t.pendingProps;var i=Ia(t,Jt.current);fa(t,r),i=Hm(null,t,n,e,i,r);var s=Vm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)?(s=!0,Md(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mm(t),i.updater=Nf,t.stateNode=i,i._reactInternals=t,Dg(t,n,e,r),t=zg(null,t,n,!0,s,r)):(t.tag=0,Ke&&s&&Cm(t),er(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ld(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=L3(n),e=bn(n,e),i){case 0:t=Mg(null,t,n,e,r);break e;case 1:t=Ew(null,t,n,e,r);break e;case 11:t=ww(null,t,n,e,r);break e;case 14:t=vw(null,t,n,bn(n.type,e),r);break e}throw Error(Y(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bn(n,i),Mg(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bn(n,i),Ew(e,t,n,i,r);case 3:e:{if($S(t),e===null)throw Error(Y(387));n=t.pendingProps,s=t.memoizedState,i=s.element,gS(e,t),Hd(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Pa(Error(Y(423)),t),t=_w(e,t,n,r,i);break e}else if(n!==i){i=Pa(Error(Y(424)),t),t=_w(e,t,n,r,i);break e}else for(Dr=us(t.stateNode.containerInfo.firstChild),Mr=t,Ke=!0,En=null,r=hS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Oa(),n===i){t=Pi(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return yS(t),e===null&&Ug(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Pg(n,i)?o=null:s!==null&&Pg(n,s)&&(t.flags|=32),FS(e,t),er(e,t,o,r),t.child;case 6:return e===null&&Ug(t),null;case 13:return qS(e,t,r);case 4:return zm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ka(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bn(n,i),ww(e,t,n,i,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Le($d,n._currentValue),n._currentValue=o,s!==null)if(kn(s.value,o)){if(s.children===i.children&&!wr.current){t=Pi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Ei(-1,r&-r),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Bg(s.return,r,t),a.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Bg(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}er(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,fa(t,r),i=sn(i),n=n(i),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,i=bn(n,t.pendingProps),i=bn(n.type,i),vw(e,t,n,i,r);case 15:return MS(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bn(n,i),ld(e,t),t.tag=1,vr(n)?(e=!0,Md(t)):e=!1,fa(t,r),LS(t,n,i),Dg(t,n,i,r),zg(null,t,n,!0,e,r);case 19:return HS(e,t,r);case 22:return zS(e,t,r)}throw Error(Y(156,t.tag))};function ax(e,t){return N_(e,t)}function B3(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(e,t,r,n){return new B3(e,t,r,n)}function tb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L3(e){if(typeof e=="function")return tb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vm)return 11;if(e===Em)return 14}return 2}function ps(e,t){var r=e.alternate;return r===null?(r=tn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fd(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")tb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Wo:return eo(r.children,i,s,t);case wm:o=8,i|=8;break;case ag:return e=tn(12,r,t,i|2),e.elementType=ag,e.lanes=s,e;case cg:return e=tn(13,r,t,i),e.elementType=cg,e.lanes=s,e;case lg:return e=tn(19,r,t,i),e.elementType=lg,e.lanes=s,e;case y_:return Lf(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p_:o=10;break e;case g_:o=9;break e;case vm:o=11;break e;case Em:o=14;break e;case Wi:o=16,n=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=tn(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function eo(e,t,r,n){return e=tn(7,e,n,t),e.lanes=r,e}function Lf(e,t,r,n){return e=tn(22,e,n,t),e.elementType=y_,e.lanes=r,e.stateNode={isHidden:!1},e}function Yh(e,t,r){return e=tn(6,e,null,t),e.lanes=r,e}function Qh(e,t,r){return t=tn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D3(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rb(e,t,r,n,i,s,o,a,c){return e=new D3(e,t,r,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=tn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mm(s),e}function j3(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function cx(e){if(!e)return ws;e=e._reactInternals;e:{if(vo(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(vr(r))return aS(e,r,t)}return t}function lx(e,t,r,n,i,s,o,a,c){return e=rb(r,n,!0,e,i,s,o,a,c),e.context=cx(null),r=e.current,n=tr(),i=hs(r),s=Ei(n,i),s.callback=t??null,ds(r,s,i),e.current.lanes=i,Pl(e,i,n),Er(e,n),e}function Df(e,t,r,n){var i=t.current,s=tr(),o=hs(i);return r=cx(r),t.context===null?t.context=r:t.pendingContext=r,t=Ei(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ds(i,t,o),e!==null&&(xn(e,i,o,s),od(e,i,o)),o}function Xd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nb(e,t){Cw(e,t),(e=e.alternate)&&Cw(e,t)}function M3(){return null}var ux=typeof reportError=="function"?reportError:function(e){console.error(e)};function ib(e){this._internalRoot=e}jf.prototype.render=ib.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Df(e,t,null,null)};jf.prototype.unmount=ib.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ao(function(){Df(null,e,null,null)}),t[ki]=null}};function jf(e){this._internalRoot=e}jf.prototype.unstable_scheduleHydration=function(e){if(e){var t=z_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xi.length&&t!==0&&t<Xi[r].priority;r++);Xi.splice(r,0,e),r===0&&$_(e)}};function sb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Mf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function z3(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=Xd(o);s.call(l)}}var o=lx(t,n,e,0,null,!1,!1,"",Nw);return e._reactRootContainer=o,e[ki]=o.current,il(e.nodeType===8?e.parentNode:e),ao(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=Xd(c);a.call(l)}}var c=rb(e,0,!1,null,null,!1,!1,"",Nw);return e._reactRootContainer=c,e[ki]=c.current,il(e.nodeType===8?e.parentNode:e),ao(function(){Df(t,c,r,n)}),c}function zf(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Xd(o);a.call(c)}}Df(t,o,e,i)}else o=z3(r,t,e,i,n);return Xd(o)}j_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Oc(t.pendingLanes);r!==0&&(xm(t,r|1),Er(t,nt()),!(me&6)&&(Ra=nt()+500,xs()))}break;case 13:ao(function(){var n=Ai(e,1);if(n!==null){var i=tr();xn(n,e,1,i)}}),nb(e,1)}};Im=function(e){if(e.tag===13){var t=Ai(e,134217728);if(t!==null){var r=tr();xn(t,e,134217728,r)}nb(e,134217728)}};M_=function(e){if(e.tag===13){var t=hs(e),r=Ai(e,t);if(r!==null){var n=tr();xn(r,e,t,n)}nb(e,t)}};z_=function(){return xe};F_=function(e,t){var r=xe;try{return xe=e,t()}finally{xe=r}};wg=function(e,t,r){switch(t){case"input":if(fg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Rf(n);if(!i)throw Error(Y(90));b_(n),fg(n,i)}}}break;case"textarea":v_(e,r);break;case"select":t=r.value,t!=null&&ca(e,!!r.multiple,t,!1)}};k_=Xm;A_=ao;var F3={usingClientEntryPoint:!1,Events:[Tl,Zo,Rf,I_,O_,Xm]},ic={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$3={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=T_(e),e===null?null:e.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||M3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{Of=wu.inject($3),Gn=wu}catch{}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F3;Fr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sb(t))throw Error(Y(200));return j3(e,t,null,r)};Fr.createRoot=function(e,t){if(!sb(e))throw Error(Y(299));var r=!1,n="",i=ux;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=rb(e,1,!1,null,null,r,!1,n,i),e[ki]=t.current,il(e.nodeType===8?e.parentNode:e),new ib(t)};Fr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=T_(t),e=e===null?null:e.stateNode,e};Fr.flushSync=function(e){return ao(e)};Fr.hydrate=function(e,t,r){if(!Mf(t))throw Error(Y(200));return zf(null,e,t,!0,r)};Fr.hydrateRoot=function(e,t,r){if(!sb(e))throw Error(Y(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=ux;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=lx(t,null,e,1,r??null,i,!1,s,o),e[ki]=t.current,il(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new jf(t)};Fr.render=function(e,t,r){if(!Mf(t))throw Error(Y(200));return zf(null,e,t,!1,r)};Fr.unmountComponentAtNode=function(e){if(!Mf(e))throw Error(Y(40));return e._reactRootContainer?(ao(function(){zf(null,null,e,!1,function(){e._reactRootContainer=null,e[ki]=null})}),!0):!1};Fr.unstable_batchedUpdates=Xm;Fr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Mf(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return zf(e,t,r,!1,n)};Fr.version="18.3.1-next-f1338f8080-20240426";function dx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dx)}catch(e){console.error(e)}}dx(),u_.exports=Fr;var q3=u_.exports,Uw=q3;sg.createRoot=Uw.createRoot,sg.hydrateRoot=Uw.hydrateRoot;let Zg=null;const H3=e=>{Zg=e};let Re=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const V3=e=>{const{title:t,message:r}=e;return[`
    %c${t}
    ============================

    ${r}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},be=async e=>{var t;const{title:r,message:n,level:i,always:s}=e,o=await((t=Zg==null?void 0:Zg())==null?void 0:t.get("logger.level"))??Re.warn;if(!s&&o<i)return;const a=V3({title:r,message:n});switch(i){case Re.debug:console.debug(...a);break;case Re.info:console.info(...a);break;case Re.warn:console.warn(...a);break;case Re.error:console.error(...a);break;default:console.log(...a)}};be.deprecate=e=>{const{pkg:t,subject:r,transition:n,level:i=Re.warn,message:s="",callback:o=null}=e,a=l=>l.charAt(0).toUpperCase()+l.slice(1),c=()=>be({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${r?`${a(r)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${n?`
You can learn more (including a guide on common transition paths) here: ${n}`:""}
    `.trim(),level:i});return typeof o=="function"?async function(){return await c(),await o(...arguments)}:c()};function V(e,t){var r,n,i;if(!e){const c=new Error(`INVARIANT ${t}`);c.stack=(i=(n=(r=c.stack)==null?void 0:r.split(`
`))==null?void 0:n.filter(l=>!/at invariant/.test(l)))==null?void 0:i.join(`
`);for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];throw console.error(`

---

`,c,`

`,...o,`

---

`),c}}let vu;const K3=new Uint8Array(16);function W3(){if(!vu&&(vu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vu(K3)}const Nt=[];for(let e=0;e<256;++e)Nt.push((e+256).toString(16).slice(1));function G3(e,t=0){return Nt[e[t+0]]+Nt[e[t+1]]+Nt[e[t+2]]+Nt[e[t+3]]+"-"+Nt[e[t+4]]+Nt[e[t+5]]+"-"+Nt[e[t+6]]+Nt[e[t+7]]+"-"+Nt[e[t+8]]+Nt[e[t+9]]+"-"+Nt[e[t+10]]+Nt[e[t+11]]+Nt[e[t+12]]+Nt[e[t+13]]+Nt[e[t+14]]+Nt[e[t+15]]}const Y3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bw={randomUUID:Y3};function ob(e,t,r){if(Bw.randomUUID&&!e)return Bw.randomUUID();e=e||{};const n=e.random||(e.rng||W3)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,G3(n)}var Oe=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),Nl=function(e){return e.BAD="BAD",e.OK="OK",e}({}),hl=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),Ff=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({});(function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e})({});var Fa=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({});(function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e})({});const Q3=()=>{const e=[];let t;return{async deliver(r){e.push(r),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const n=e.shift();if(n)return r(n);t=r})}}};let Lw;const Z3=e=>(Lw||(Lw=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),Jd="INIT",Ul="SUBSCRIBE",Ta="UNSUBSCRIBE",X3="UPDATED",J3="SNAPSHOT",Xg="EXIT",Dw="TERMINATE",hd=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};hd.FCL_REGISTRY=hd.FCL_REGISTRY==null?{}:hd.FCL_REGISTRY;const Pe=hd.FCL_REGISTRY;let Zh=0;const e8=5e3;function bt(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((i,s)=>{const o=n.expectReply||!1,a=n.timeout!=null?n.timeout:e8;o&&a&&setTimeout(()=>s(new Error(`Timeout: ${a}ms passed without a response.`)),a);const c={to:e,from:n.from,tag:t,data:r,timeout:a,reply:i,reject:s};try{Pe[e]&&Pe[e].mailbox.deliver(c),o||i(!0)}catch(l){console.error("FCL.Actor -- Could Not Deliver Message",c,Pe[e],l),s(l)}})}const t8=e=>{delete Pe[e]},r8=e=>async t=>{var r;typeof e[Jd]=="function"&&await e[Jd](t);e:for(;;){const n=await t.receive();try{if(n.tag===Xg){typeof e[Dw]=="function"&&await e[Dw](t,n,n.data||{});break e}await((r=e[n.tag])==null?void 0:r.call(e,t,n,n.data||{}))}catch(i){console.error(`${t.self()} Error`,n,i)}finally{continue e}}},n8=e=>{if(e==null){for(;Pe[String(Zh)];)Zh++;return String(Zh)}return String(e)},$a=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const r=n8(t);if(Pe[r]!=null)return r;Pe[r]={addr:r,mailbox:Q3(),subs:new Set,kvs:{},error:null};const n=i8(r);let i;return typeof e=="object"?i=r8(e):i=e,Z3(async()=>{await i(n),t8(r)}),r},i8=e=>({self:()=>e,receive:()=>Pe[e].mailbox.receive(),send:function(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return i.from=e,bt(t,r,n,i)},sendSelf:function(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pe[e]&&bt(e,t,r,n)},broadcast:function(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.from=e;for(const i of Pe[e].subs)bt(i,t,r,n)},subscribe:t=>t!=null&&Pe[e].subs.add(t),unsubscribe:t=>t!=null&&Pe[e].subs.delete(t),subscriberCount:()=>Pe[e].subs.size,hasSubs:()=>!!Pe[e].subs.size,put:(t,r)=>{t!=null&&(Pe[e].kvs[t]=r)},get:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return Pe[e].kvs[t]??r},delete:t=>{delete Pe[e].kvs[t]},update:(t,r)=>{t!=null&&(Pe[e].kvs[t]=r(Pe[e].kvs[t]))},keys:()=>Object.keys(Pe[e].kvs),all:()=>Pe[e].kvs,where:t=>Object.keys(Pe[e].kvs).reduce((r,n)=>t.test(n)?{...r,[n]:Pe[e].kvs[n]}:r,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(r=>Pe[e].kvs[r]=t[r])},fatalError:t=>{Pe[e].error=t;for(const r of Pe[e].subs)bt(r,X3)}});function fx(e,t,r){t(e);const n=$a(async i=>{for(i.send(e,Ul);;){const s=await i.receive(),o=Pe[e].error;if(s.tag===Xg){i.send(e,Ta);return}if(o){r(null,o),i.send(e,Ta);return}r(s.data,null)}});return()=>bt(n,Xg)}function s8(e,t){return t(e),bt(e,J3,null,{expectReply:!0,timeout:0})}const Eu=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>t.reduce((i,s)=>s(i),n)},o8=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>t.reduce((i,s)=>({...i,...s(n)}),{})},Xh=e=>e&&typeof e=="object"&&!Array.isArray(e),Jg=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;const i=r.shift();if(Xh(e)&&Xh(i))for(const s in i)Xh(i[s])?(e[s]||Object.assign(e,{[s]:{}}),Jg(e[s],i[s])):Object.assign(e,{[s]:i[s]});return Jg(e,...r)},a8=e=>Array.isArray(e)?Jg({},...e):e,jw=e=>e.contracts?e.contracts:{},Mw=e=>e.dependencies?e.dependencies:{},c8=(e,t)=>r=>Object.entries(r).reduce((n,i)=>{var s,o;let[a,c]=i;const l=((s=c==null?void 0:c.aliases)==null?void 0:s[e])||t&&((o=c==null?void 0:c.aliases)==null?void 0:o[t]);return l&&(n[a]=l),n},{}),l8=(e,t)=>r=>Object.entries(r).reduce((n,i)=>{var s,o;let[a,c]=i;const l=((s=c==null?void 0:c.aliases)==null?void 0:s[e])||t&&((o=c==null?void 0:c.aliases)==null?void 0:o[t]);return l&&(n[a]=l),n},{}),u8=e=>Object.entries(e).reduce((t,r)=>{let[n,i]=r;return i!=null&&i.canonical&&(t[`${n}.canonical`]=i.canonical),t},{}),d8=e=>Object.entries(e).reduce((t,r)=>{let[n,i]=r;return i!=null&&i.canonical&&(t[`${n}.canonical`]=i.canonical),t},{}),f8=e=>t=>{let{deployments:r={},accounts:n={}}=t;const i=r==null?void 0:r[e];return i?Object.entries(i).reduce((s,o)=>{var a;let[c,l]=o;const u=(a=n[c])==null?void 0:a.address;return u?l.reduce((d,f)=>({...d,[f]:u}),s):s},{}):{}},h8=(e,t)=>{var r;const n=a8(e),i=(r=n.networks)==null?void 0:r[t],s=i&&typeof i=="object"&&"fork"in i?i.fork:void 0;return o8(f8(t),Eu(jw,c8(t,s)),Eu(Mw,l8(t,s)),Eu(jw,u8),Eu(Mw,d8))(n)},p8=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),zw=e=>Object.entries((e==null?void 0:e.accounts)??[]).reduce((t,r)=>{let[,n]=r;return t?!0:n&&Object.prototype.hasOwnProperty.call(n,"key")&&p8(n==null?void 0:n.key)},!1),g8=e=>Array.isArray(e)?e.some(zw):zw(e),y8=e=>(e==null?void 0:e.toLowerCase())==="local"?"emulator":e==null?void 0:e.toLowerCase();H3($e);const Xn="config",hx="PUT_CONFIG",px="GET_CONFIG",gx="GET_ALL_CONFIG",yx="UPDATE_CONFIG",mx="DELETE_CONFIG",bx="CLEAR_CONFIG",wx="WHERE_CONFIG",sc="CONFIG/UPDATED",vx=e=>e,Ex={[hx]:(e,t,r)=>{let{key:n,value:i}=r;if(n==null)throw new Error("Missing 'key' for config/put.");e.put(n,i),e.broadcast(sc,{...e.all()})},[px]:(e,t,r)=>{let{key:n,fallback:i}=r;if(n==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(n,i))},[gx]:(e,t)=>{t.reply({...e.all()})},[yx]:(e,t,r)=>{let{key:n,fn:i}=r;if(n==null)throw new Error("Missing 'key' for config/update");e.update(n,i||vx),e.broadcast(sc,{...e.all()})},[mx]:(e,t,r)=>{let{key:n}=r;if(n==null)throw new Error("Missing 'key' for config/delete");e.delete(n),e.broadcast(sc,{...e.all()})},[bx]:e=>{const t=Object.keys(e.all());for(const r of t)e.delete(r);e.broadcast(sc,{...e.all()})},[wx]:(e,t,r)=>{let{pattern:n}=r;if(n==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(n))},[Ul]:(e,t)=>{e.subscribe(t.from),e.send(t.from,sc,{...e.all()})},[Ta]:(e,t)=>{e.unsubscribe(t.from)}};$a(Ex,Xn);function pl(e,t){return bt(Xn,hx,{key:e,value:t}),$e()}function pa(e,t){return bt(Xn,px,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function ab(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[r,...n]=e;return await pa(r)??ab(n,t)}function ef(){return bt(Xn,gx,null,{expectReply:!0,timeout:10})}function _x(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vx;return bt(Xn,yx,{key:e,fn:t}),$e()}function Sx(e){return bt(Xn,mx,{key:e}),$e()}function xx(e){return bt(Xn,wx,{pattern:e},{expectReply:!0,timeout:10})}function Ix(e){return fx(Xn,()=>$a(Ex,Xn),e)}async function m8(){await bt(Xn,bx)}async function b8(e){return m8().then(()=>$e(e))}async function Ox(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=await pa("flow.network"),n=y8(r),{flowJSON:i}=e;if(V(!!i,"config.load -- 'flowJSON' must be defined"),V(!!n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),g8(i)){const s=n==="emulator";be({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:s?Re.warn:Re.error}),V(s,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[s,o]of Object.entries(h8(i,n))){const a=`0x${s}`,c=await pa(a);c&&c!==o&&!t?be({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:Re.warn}):pl(a,o);const l=`system.contracts.${s}`,u=await pa(l);u&&u!==o&&!t?be({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:Re.warn}):pl(l,o)}}function $e(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>pl(t,e[t])),{put:pl,get:pa,all:ef,first:ab,update:_x,delete:Sx,where:xx,subscribe:Ix,overload:kx,load:Ox}}$e.put=pl;$e.get=pa;$e.all=ef;$e.first=ab;$e.update=_x;$e.delete=Sx;$e.where=xx;$e.subscribe=Ix;$e.overload=kx;$e.load=Ox;async function kx(e,t){const r=await ef();try{return $e(e),await t(await ef())}finally{await b8(r)}}var Be={},$f={};$f.byteLength=E8;$f.toByteArray=S8;$f.fromByteArray=O8;var qn=[],Yr=[],w8=typeof Uint8Array<"u"?Uint8Array:Array,Jh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ro=0,v8=Jh.length;Ro<v8;++Ro)qn[Ro]=Jh[Ro],Yr[Jh.charCodeAt(Ro)]=Ro;Yr[45]=62;Yr[95]=63;function Ax(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function E8(e){var t=Ax(e),r=t[0],n=t[1];return(r+n)*3/4-n}function _8(e,t,r){return(t+r)*3/4-r}function S8(e){var t,r=Ax(e),n=r[0],i=r[1],s=new w8(_8(e,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)t=Yr[e.charCodeAt(c)]<<18|Yr[e.charCodeAt(c+1)]<<12|Yr[e.charCodeAt(c+2)]<<6|Yr[e.charCodeAt(c+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Yr[e.charCodeAt(c)]<<2|Yr[e.charCodeAt(c+1)]>>4,s[o++]=t&255),i===1&&(t=Yr[e.charCodeAt(c)]<<10|Yr[e.charCodeAt(c+1)]<<4|Yr[e.charCodeAt(c+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function x8(e){return qn[e>>18&63]+qn[e>>12&63]+qn[e>>6&63]+qn[e&63]}function I8(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(x8(n));return i.join("")}function O8(e){for(var t,r=e.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(I8(e,o,o+s>a?a:o+s));return n===1?(t=e[r-1],i.push(qn[t>>2]+qn[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(qn[t>>10]+qn[t>>4&63]+qn[t<<2&63]+"=")),i.join("")}var cb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cb.read=function(e,t,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+e[t+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+e[t+d],d+=f,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(h?-1:1)*o*Math.pow(2,s-n)};cb.write=function(e,t,r,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,y=n?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*c-1)*Math.pow(2,i),o=o+d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=a&255,h+=y,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[r+h]=o&255,h+=y,o/=256,l-=8);e[r+h-y]|=g*128};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/(function(e){const t=$f,r=cb,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=w,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const p=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(p,E),p.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');const E=new Uint8Array(p);return Object.setPrototypeOf(E,a.prototype),E}function a(p,E,x){if(typeof p=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(p)}return c(p,E,x)}a.poolSize=8192;function c(p,E,x){if(typeof p=="string")return f(p,E);if(ArrayBuffer.isView(p))return y(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(kr(p,ArrayBuffer)||p&&kr(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(kr(p,SharedArrayBuffer)||p&&kr(p.buffer,SharedArrayBuffer)))return g(p,E,x);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=p.valueOf&&p.valueOf();if(U!=null&&U!==p)return a.from(U,E,x);const z=v(p);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return a.from(p[Symbol.toPrimitive]("string"),E,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}a.from=function(p,E,x){return c(p,E,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function u(p,E,x){return l(p),p<=0?o(p):E!==void 0?typeof x=="string"?o(p).fill(E,x):o(p).fill(E):o(p)}a.alloc=function(p,E,x){return u(p,E,x)};function d(p){return l(p),o(p<0?0:b(p)|0)}a.allocUnsafe=function(p){return d(p)},a.allocUnsafeSlow=function(p){return d(p)};function f(p,E){if((typeof E!="string"||E==="")&&(E="utf8"),!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);const x=_(p,E)|0;let U=o(x);const z=U.write(p,E);return z!==x&&(U=U.slice(0,z)),U}function h(p){const E=p.length<0?0:b(p.length)|0,x=o(E);for(let U=0;U<E;U+=1)x[U]=p[U]&255;return x}function y(p){if(kr(p,Uint8Array)){const E=new Uint8Array(p);return g(E.buffer,E.byteOffset,E.byteLength)}return h(p)}function g(p,E,x){if(E<0||p.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<E+(x||0))throw new RangeError('"length" is outside of buffer bounds');let U;return E===void 0&&x===void 0?U=new Uint8Array(p):x===void 0?U=new Uint8Array(p,E):U=new Uint8Array(p,E,x),Object.setPrototypeOf(U,a.prototype),U}function v(p){if(a.isBuffer(p)){const E=b(p.length)|0,x=o(E);return x.length===0||p.copy(x,0,0,E),x}if(p.length!==void 0)return typeof p.length!="number"||Ao(p.length)?o(0):h(p);if(p.type==="Buffer"&&Array.isArray(p.data))return h(p.data)}function b(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function w(p){return+p!=p&&(p=0),a.alloc(+p)}a.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==a.prototype},a.compare=function(p,E){if(kr(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),kr(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(p)||!a.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===E)return 0;let x=p.length,U=E.length;for(let z=0,K=Math.min(x,U);z<K;++z)if(p[z]!==E[z]){x=p[z],U=E[z];break}return x<U?-1:U<x?1:0},a.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(p,E){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return a.alloc(0);let x;if(E===void 0)for(E=0,x=0;x<p.length;++x)E+=p[x].length;const U=a.allocUnsafe(E);let z=0;for(x=0;x<p.length;++x){let K=p[x];if(kr(K,Uint8Array))z+K.length>U.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(U,z)):Uint8Array.prototype.set.call(U,K,z);else if(a.isBuffer(K))K.copy(U,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=K.length}return U};function _(p,E){if(a.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||kr(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const x=p.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&x===0)return 0;let z=!1;for(;;)switch(E){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return Ya(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return Qa(p).length;default:if(z)return U?-1:Ya(p).length;E=(""+E).toLowerCase(),z=!0}}a.byteLength=_;function I(p,E,x){let U=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,E>>>=0,x<=E))return"";for(p||(p="utf8");;)switch(p){case"hex":return A(this,E,x);case"utf8":case"utf-8":return D(this,E,x);case"ascii":return P(this,E,x);case"latin1":case"binary":return k(this,E,x);case"base64":return B(this,E,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,E,x);default:if(U)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),U=!0}}a.prototype._isBuffer=!0;function R(p,E,x){const U=p[E];p[E]=p[x],p[x]=U}a.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<p;E+=2)R(this,E,E+1);return this},a.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<p;E+=4)R(this,E,E+3),R(this,E+1,E+2);return this},a.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<p;E+=8)R(this,E,E+7),R(this,E+1,E+6),R(this,E+2,E+5),R(this,E+3,E+4);return this},a.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?D(this,0,p):I.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(p){if(!a.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:a.compare(this,p)===0},a.prototype.inspect=function(){let p="";const E=e.INSPECT_MAX_BYTES;return p=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(p+=" ... "),"<Buffer "+p+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(p,E,x,U,z){if(kr(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(E===void 0&&(E=0),x===void 0&&(x=p?p.length:0),U===void 0&&(U=0),z===void 0&&(z=this.length),E<0||x>p.length||U<0||z>this.length)throw new RangeError("out of range index");if(U>=z&&E>=x)return 0;if(U>=z)return-1;if(E>=x)return 1;if(E>>>=0,x>>>=0,U>>>=0,z>>>=0,this===p)return 0;let K=z-U,X=x-E;const je=Math.min(K,X),kt=this.slice(U,z),He=p.slice(E,x);for(let Ce=0;Ce<je;++Ce)if(kt[Ce]!==He[Ce]){K=kt[Ce],X=He[Ce];break}return K<X?-1:X<K?1:0};function T(p,E,x,U,z){if(p.length===0)return-1;if(typeof x=="string"?(U=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,Ao(x)&&(x=z?0:p.length-1),x<0&&(x=p.length+x),x>=p.length){if(z)return-1;x=p.length-1}else if(x<0)if(z)x=0;else return-1;if(typeof E=="string"&&(E=a.from(E,U)),a.isBuffer(E))return E.length===0?-1:C(p,E,x,U,z);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(p,E,x):Uint8Array.prototype.lastIndexOf.call(p,E,x):C(p,[E],x,U,z);throw new TypeError("val must be string, number or Buffer")}function C(p,E,x,U,z){let K=1,X=p.length,je=E.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(p.length<2||E.length<2)return-1;K=2,X/=2,je/=2,x/=2}function kt(Ce,st){return K===1?Ce[st]:Ce.readUInt16BE(st*K)}let He;if(z){let Ce=-1;for(He=x;He<X;He++)if(kt(p,He)===kt(E,Ce===-1?0:He-Ce)){if(Ce===-1&&(Ce=He),He-Ce+1===je)return Ce*K}else Ce!==-1&&(He-=He-Ce),Ce=-1}else for(x+je>X&&(x=X-je),He=x;He>=0;He--){let Ce=!0;for(let st=0;st<je;st++)if(kt(p,He+st)!==kt(E,st)){Ce=!1;break}if(Ce)return He}return-1}a.prototype.includes=function(p,E,x){return this.indexOf(p,E,x)!==-1},a.prototype.indexOf=function(p,E,x){return T(this,p,E,x,!0)},a.prototype.lastIndexOf=function(p,E,x){return T(this,p,E,x,!1)};function L(p,E,x,U){x=Number(x)||0;const z=p.length-x;U?(U=Number(U),U>z&&(U=z)):U=z;const K=E.length;U>K/2&&(U=K/2);let X;for(X=0;X<U;++X){const je=parseInt(E.substr(X*2,2),16);if(Ao(je))return X;p[x+X]=je}return X}function N(p,E,x,U){return Ci(Ya(E,p.length-x),p,x,U)}function F(p,E,x,U){return Ci(xh(E),p,x,U)}function q(p,E,x,U){return Ci(Qa(E),p,x,U)}function j(p,E,x,U){return Ci(eu(E,p.length-x),p,x,U)}a.prototype.write=function(p,E,x,U){if(E===void 0)U="utf8",x=this.length,E=0;else if(x===void 0&&typeof E=="string")U=E,x=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(x)?(x=x>>>0,U===void 0&&(U="utf8")):(U=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-E;if((x===void 0||x>z)&&(x=z),p.length>0&&(x<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let K=!1;for(;;)switch(U){case"hex":return L(this,p,E,x);case"utf8":case"utf-8":return N(this,p,E,x);case"ascii":case"latin1":case"binary":return F(this,p,E,x);case"base64":return q(this,p,E,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,p,E,x);default:if(K)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(p,E,x){return E===0&&x===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(E,x))}function D(p,E,x){x=Math.min(p.length,x);const U=[];let z=E;for(;z<x;){const K=p[z];let X=null,je=K>239?4:K>223?3:K>191?2:1;if(z+je<=x){let kt,He,Ce,st;switch(je){case 1:K<128&&(X=K);break;case 2:kt=p[z+1],(kt&192)===128&&(st=(K&31)<<6|kt&63,st>127&&(X=st));break;case 3:kt=p[z+1],He=p[z+2],(kt&192)===128&&(He&192)===128&&(st=(K&15)<<12|(kt&63)<<6|He&63,st>2047&&(st<55296||st>57343)&&(X=st));break;case 4:kt=p[z+1],He=p[z+2],Ce=p[z+3],(kt&192)===128&&(He&192)===128&&(Ce&192)===128&&(st=(K&15)<<18|(kt&63)<<12|(He&63)<<6|Ce&63,st>65535&&st<1114112&&(X=st))}}X===null?(X=65533,je=1):X>65535&&(X-=65536,U.push(X>>>10&1023|55296),X=56320|X&1023),U.push(X),z+=je}return S(U)}const m=4096;function S(p){const E=p.length;if(E<=m)return String.fromCharCode.apply(String,p);let x="",U=0;for(;U<E;)x+=String.fromCharCode.apply(String,p.slice(U,U+=m));return x}function P(p,E,x){let U="";x=Math.min(p.length,x);for(let z=E;z<x;++z)U+=String.fromCharCode(p[z]&127);return U}function k(p,E,x){let U="";x=Math.min(p.length,x);for(let z=E;z<x;++z)U+=String.fromCharCode(p[z]);return U}function A(p,E,x){const U=p.length;(!E||E<0)&&(E=0),(!x||x<0||x>U)&&(x=U);let z="";for(let K=E;K<x;++K)z+=tu[p[K]];return z}function O(p,E,x){const U=p.slice(E,x);let z="";for(let K=0;K<U.length-1;K+=2)z+=String.fromCharCode(U[K]+U[K+1]*256);return z}a.prototype.slice=function(p,E){const x=this.length;p=~~p,E=E===void 0?x:~~E,p<0?(p+=x,p<0&&(p=0)):p>x&&(p=x),E<0?(E+=x,E<0&&(E=0)):E>x&&(E=x),E<p&&(E=p);const U=this.subarray(p,E);return Object.setPrototypeOf(U,a.prototype),U};function M(p,E,x){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+E>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(p,E,x){p=p>>>0,E=E>>>0,x||M(p,E,this.length);let U=this[p],z=1,K=0;for(;++K<E&&(z*=256);)U+=this[p+K]*z;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(p,E,x){p=p>>>0,E=E>>>0,x||M(p,E,this.length);let U=this[p+--E],z=1;for(;E>0&&(z*=256);)U+=this[p+--E]*z;return U},a.prototype.readUint8=a.prototype.readUInt8=function(p,E){return p=p>>>0,E||M(p,1,this.length),this[p]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(p,E){return p=p>>>0,E||M(p,2,this.length),this[p]|this[p+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(p,E){return p=p>>>0,E||M(p,2,this.length),this[p]<<8|this[p+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(p,E){return p=p>>>0,E||M(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(p,E){return p=p>>>0,E||M(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},a.prototype.readBigUInt64LE=un(function(p){p=p>>>0,qe(p,"offset");const E=this[p],x=this[p+7];(E===void 0||x===void 0)&&Ye(p,this.length-8);const U=E+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,z=this[++p]+this[++p]*2**8+this[++p]*2**16+x*2**24;return BigInt(U)+(BigInt(z)<<BigInt(32))}),a.prototype.readBigUInt64BE=un(function(p){p=p>>>0,qe(p,"offset");const E=this[p],x=this[p+7];(E===void 0||x===void 0)&&Ye(p,this.length-8);const U=E*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],z=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+x;return(BigInt(U)<<BigInt(32))+BigInt(z)}),a.prototype.readIntLE=function(p,E,x){p=p>>>0,E=E>>>0,x||M(p,E,this.length);let U=this[p],z=1,K=0;for(;++K<E&&(z*=256);)U+=this[p+K]*z;return z*=128,U>=z&&(U-=Math.pow(2,8*E)),U},a.prototype.readIntBE=function(p,E,x){p=p>>>0,E=E>>>0,x||M(p,E,this.length);let U=E,z=1,K=this[p+--U];for(;U>0&&(z*=256);)K+=this[p+--U]*z;return z*=128,K>=z&&(K-=Math.pow(2,8*E)),K},a.prototype.readInt8=function(p,E){return p=p>>>0,E||M(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},a.prototype.readInt16LE=function(p,E){p=p>>>0,E||M(p,2,this.length);const x=this[p]|this[p+1]<<8;return x&32768?x|4294901760:x},a.prototype.readInt16BE=function(p,E){p=p>>>0,E||M(p,2,this.length);const x=this[p+1]|this[p]<<8;return x&32768?x|4294901760:x},a.prototype.readInt32LE=function(p,E){return p=p>>>0,E||M(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},a.prototype.readInt32BE=function(p,E){return p=p>>>0,E||M(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},a.prototype.readBigInt64LE=un(function(p){p=p>>>0,qe(p,"offset");const E=this[p],x=this[p+7];(E===void 0||x===void 0)&&Ye(p,this.length-8);const U=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(x<<24);return(BigInt(U)<<BigInt(32))+BigInt(E+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),a.prototype.readBigInt64BE=un(function(p){p=p>>>0,qe(p,"offset");const E=this[p],x=this[p+7];(E===void 0||x===void 0)&&Ye(p,this.length-8);const U=(E<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(U)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+x)}),a.prototype.readFloatLE=function(p,E){return p=p>>>0,E||M(p,4,this.length),r.read(this,p,!0,23,4)},a.prototype.readFloatBE=function(p,E){return p=p>>>0,E||M(p,4,this.length),r.read(this,p,!1,23,4)},a.prototype.readDoubleLE=function(p,E){return p=p>>>0,E||M(p,8,this.length),r.read(this,p,!0,52,8)},a.prototype.readDoubleBE=function(p,E){return p=p>>>0,E||M(p,8,this.length),r.read(this,p,!1,52,8)};function $(p,E,x,U,z,K){if(!a.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>z||E<K)throw new RangeError('"value" argument is out of bounds');if(x+U>p.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(p,E,x,U){if(p=+p,E=E>>>0,x=x>>>0,!U){const X=Math.pow(2,8*x)-1;$(this,p,E,x,X,0)}let z=1,K=0;for(this[E]=p&255;++K<x&&(z*=256);)this[E+K]=p/z&255;return E+x},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(p,E,x,U){if(p=+p,E=E>>>0,x=x>>>0,!U){const X=Math.pow(2,8*x)-1;$(this,p,E,x,X,0)}let z=x-1,K=1;for(this[E+z]=p&255;--z>=0&&(K*=256);)this[E+z]=p/K&255;return E+x},a.prototype.writeUint8=a.prototype.writeUInt8=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,1,255,0),this[E]=p&255,E+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,2,65535,0),this[E]=p&255,this[E+1]=p>>>8,E+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,2,65535,0),this[E]=p>>>8,this[E+1]=p&255,E+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,4,4294967295,0),this[E+3]=p>>>24,this[E+2]=p>>>16,this[E+1]=p>>>8,this[E]=p&255,E+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,4,4294967295,0),this[E]=p>>>24,this[E+1]=p>>>16,this[E+2]=p>>>8,this[E+3]=p&255,E+4};function Q(p,E,x,U,z){Je(E,U,z,p,x,7);let K=Number(E&BigInt(4294967295));p[x++]=K,K=K>>8,p[x++]=K,K=K>>8,p[x++]=K,K=K>>8,p[x++]=K;let X=Number(E>>BigInt(32)&BigInt(4294967295));return p[x++]=X,X=X>>8,p[x++]=X,X=X>>8,p[x++]=X,X=X>>8,p[x++]=X,x}function H(p,E,x,U,z){Je(E,U,z,p,x,7);let K=Number(E&BigInt(4294967295));p[x+7]=K,K=K>>8,p[x+6]=K,K=K>>8,p[x+5]=K,K=K>>8,p[x+4]=K;let X=Number(E>>BigInt(32)&BigInt(4294967295));return p[x+3]=X,X=X>>8,p[x+2]=X,X=X>>8,p[x+1]=X,X=X>>8,p[x]=X,x+8}a.prototype.writeBigUInt64LE=un(function(p,E=0){return Q(this,p,E,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=un(function(p,E=0){return H(this,p,E,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(p,E,x,U){if(p=+p,E=E>>>0,!U){const je=Math.pow(2,8*x-1);$(this,p,E,x,je-1,-je)}let z=0,K=1,X=0;for(this[E]=p&255;++z<x&&(K*=256);)p<0&&X===0&&this[E+z-1]!==0&&(X=1),this[E+z]=(p/K>>0)-X&255;return E+x},a.prototype.writeIntBE=function(p,E,x,U){if(p=+p,E=E>>>0,!U){const je=Math.pow(2,8*x-1);$(this,p,E,x,je-1,-je)}let z=x-1,K=1,X=0;for(this[E+z]=p&255;--z>=0&&(K*=256);)p<0&&X===0&&this[E+z+1]!==0&&(X=1),this[E+z]=(p/K>>0)-X&255;return E+x},a.prototype.writeInt8=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,1,127,-128),p<0&&(p=255+p+1),this[E]=p&255,E+1},a.prototype.writeInt16LE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,2,32767,-32768),this[E]=p&255,this[E+1]=p>>>8,E+2},a.prototype.writeInt16BE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,2,32767,-32768),this[E]=p>>>8,this[E+1]=p&255,E+2},a.prototype.writeInt32LE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,4,2147483647,-2147483648),this[E]=p&255,this[E+1]=p>>>8,this[E+2]=p>>>16,this[E+3]=p>>>24,E+4},a.prototype.writeInt32BE=function(p,E,x){return p=+p,E=E>>>0,x||$(this,p,E,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[E]=p>>>24,this[E+1]=p>>>16,this[E+2]=p>>>8,this[E+3]=p&255,E+4},a.prototype.writeBigInt64LE=un(function(p,E=0){return Q(this,p,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=un(function(p,E=0){return H(this,p,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(p,E,x,U,z,K){if(x+U>p.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function ee(p,E,x,U,z){return E=+E,x=x>>>0,z||G(p,E,x,4),r.write(p,E,x,U,23,4),x+4}a.prototype.writeFloatLE=function(p,E,x){return ee(this,p,E,!0,x)},a.prototype.writeFloatBE=function(p,E,x){return ee(this,p,E,!1,x)};function ie(p,E,x,U,z){return E=+E,x=x>>>0,z||G(p,E,x,8),r.write(p,E,x,U,52,8),x+8}a.prototype.writeDoubleLE=function(p,E,x){return ie(this,p,E,!0,x)},a.prototype.writeDoubleBE=function(p,E,x){return ie(this,p,E,!1,x)},a.prototype.copy=function(p,E,x,U){if(!a.isBuffer(p))throw new TypeError("argument should be a Buffer");if(x||(x=0),!U&&U!==0&&(U=this.length),E>=p.length&&(E=p.length),E||(E=0),U>0&&U<x&&(U=x),U===x||p.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),p.length-E<U-x&&(U=p.length-E+x);const z=U-x;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,x,U):Uint8Array.prototype.set.call(p,this.subarray(x,U),E),z},a.prototype.fill=function(p,E,x,U){if(typeof p=="string"){if(typeof E=="string"?(U=E,E=0,x=this.length):typeof x=="string"&&(U=x,x=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(p.length===1){const K=p.charCodeAt(0);(U==="utf8"&&K<128||U==="latin1")&&(p=K)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(E<0||this.length<E||this.length<x)throw new RangeError("Out of range index");if(x<=E)return this;E=E>>>0,x=x===void 0?this.length:x>>>0,p||(p=0);let z;if(typeof p=="number")for(z=E;z<x;++z)this[z]=p;else{const K=a.isBuffer(p)?p:a.from(p,U),X=K.length;if(X===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(z=0;z<x-E;++z)this[z+E]=K[z%X]}return this};const ce={};function se(p,E,x){ce[p]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(p,E){return`The "${p}" argument must be of type number. Received type ${typeof E}`},TypeError),se("ERR_OUT_OF_RANGE",function(p,E,x){let U=`The value of "${p}" is out of range.`,z=x;return Number.isInteger(x)&&Math.abs(x)>2**32?z=de(String(x)):typeof x=="bigint"&&(z=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(z=de(z)),z+="n"),U+=` It must be ${E}. Received ${z}`,U},RangeError);function de(p){let E="",x=p.length;const U=p[0]==="-"?1:0;for(;x>=U+4;x-=3)E=`_${p.slice(x-3,x)}${E}`;return`${p.slice(0,x)}${E}`}function Te(p,E,x){qe(E,"offset"),(p[E]===void 0||p[E+x]===void 0)&&Ye(E,p.length-(x+1))}function Je(p,E,x,U,z,K){if(p>x||p<E){const X=typeof E=="bigint"?"n":"";let je;throw E===0||E===BigInt(0)?je=`>= 0${X} and < 2${X} ** ${(K+1)*8}${X}`:je=`>= -(2${X} ** ${(K+1)*8-1}${X}) and < 2 ** ${(K+1)*8-1}${X}`,new ce.ERR_OUT_OF_RANGE("value",je,p)}Te(U,z,K)}function qe(p,E){if(typeof p!="number")throw new ce.ERR_INVALID_ARG_TYPE(E,"number",p)}function Ye(p,E,x){throw Math.floor(p)!==p?(qe(p,x),new ce.ERR_OUT_OF_RANGE("offset","an integer",p)):E<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${E}`,p)}const ln=/[^+/0-9A-Za-z-_]/g;function ko(p){if(p=p.split("=")[0],p=p.trim().replace(ln,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function Ya(p,E){E=E||1/0;let x;const U=p.length;let z=null;const K=[];for(let X=0;X<U;++X){if(x=p.charCodeAt(X),x>55295&&x<57344){if(!z){if(x>56319){(E-=3)>-1&&K.push(239,191,189);continue}else if(X+1===U){(E-=3)>-1&&K.push(239,191,189);continue}z=x;continue}if(x<56320){(E-=3)>-1&&K.push(239,191,189),z=x;continue}x=(z-55296<<10|x-56320)+65536}else z&&(E-=3)>-1&&K.push(239,191,189);if(z=null,x<128){if((E-=1)<0)break;K.push(x)}else if(x<2048){if((E-=2)<0)break;K.push(x>>6|192,x&63|128)}else if(x<65536){if((E-=3)<0)break;K.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((E-=4)<0)break;K.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return K}function xh(p){const E=[];for(let x=0;x<p.length;++x)E.push(p.charCodeAt(x)&255);return E}function eu(p,E){let x,U,z;const K=[];for(let X=0;X<p.length&&!((E-=2)<0);++X)x=p.charCodeAt(X),U=x>>8,z=x%256,K.push(z),K.push(U);return K}function Qa(p){return t.toByteArray(ko(p))}function Ci(p,E,x,U){let z;for(z=0;z<U&&!(z+x>=E.length||z>=p.length);++z)E[z+x]=p[z];return z}function kr(p,E){return p instanceof E||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===E.name}function Ao(p){return p!==p}const tu=function(){const p="0123456789abcdef",E=new Array(256);for(let x=0;x<16;++x){const U=x*16;for(let z=0;z<16;++z)E[U+z]=p[x]+p[z]}return E}();function un(p){return typeof BigInt>"u"?ru:p}function ru(){throw new Error("BigInt not supported")}})(Be);function lb(e){if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(lb(e[n]));const r=Be.Buffer.concat(t);return Be.Buffer.concat([Fw(r.length,192),r])}else{const t=R8(e);return t.length===1&&t[0]<128?t:Be.Buffer.concat([Fw(t.length,128),t])}}function Fw(e,t){if(e<56)return Be.Buffer.from([e+t]);{const r=ey(e),n=r.length/2,i=ey(t+55+n);return Be.Buffer.from(i+r,"hex")}}function Px(e){return e.slice(0,2)==="0x"}function k8(e){return typeof e!="string"?e:Px(e)?e.slice(2):e}function ey(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function A8(e){return e.length%2?"0"+e:e}function P8(e){const t=ey(e);return Be.Buffer.from(t,"hex")}function R8(e){if(!Be.Buffer.isBuffer(e)){if(typeof e=="string")return Px(e)?Be.Buffer.from(A8(k8(e)),"hex"):Be.Buffer.from(e);if(typeof e=="number")return e?P8(e):Be.Buffer.from([]);if(e==null)return Be.Buffer.from([]);if(e instanceof Uint8Array)return Be.Buffer.from(e);throw new Error("invalid type")}return e}function ut(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Xt(e){return e==null?null:"0x"+ut(e)}var ub={exports:{}},ga=typeof Reflect=="object"?Reflect:null,$w=ga&&typeof ga.apply=="function"?ga.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},pd;ga&&typeof ga.ownKeys=="function"?pd=ga.ownKeys:Object.getOwnPropertySymbols?pd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pd=function(e){return Object.getOwnPropertyNames(e)};function T8(e){console&&console.warn&&console.warn(e)}var Rx=Number.isNaN||function(e){return e!==e};function ke(){ke.init.call(this)}ub.exports=ke;ub.exports.once=B8;ke.EventEmitter=ke;ke.prototype._events=void 0;ke.prototype._eventsCount=0;ke.prototype._maxListeners=void 0;var qw=10;function qf(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ke,"defaultMaxListeners",{enumerable:!0,get:function(){return qw},set:function(e){if(typeof e!="number"||e<0||Rx(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");qw=e}});ke.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ke.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Rx(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Tx(e){return e._maxListeners===void 0?ke.defaultMaxListeners:e._maxListeners}ke.prototype.getMaxListeners=function(){return Tx(this)};ke.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(a===void 0)return!1;if(typeof a=="function")$w(a,this,t);else for(var c=a.length,l=Lx(a,c),r=0;r<c;++r)$w(l[r],this,t);return!0};function Cx(e,t,r,n){var i,s,o;if(qf(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),o===void 0)o=s[t]=r,++e._eventsCount;else if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Tx(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,T8(a)}return e}ke.prototype.addListener=function(e,t){return Cx(this,e,t,!1)};ke.prototype.on=ke.prototype.addListener;ke.prototype.prependListener=function(e,t){return Cx(this,e,t,!0)};function C8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Nx(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=C8.bind(n);return i.listener=r,n.wrapFn=i,i}ke.prototype.once=function(e,t){return qf(t),this.on(e,Nx(this,e,t)),this};ke.prototype.prependOnceListener=function(e,t){return qf(t),this.prependListener(e,Nx(this,e,t)),this};ke.prototype.removeListener=function(e,t){var r,n,i,s,o;if(qf(t),n=this._events,n===void 0)return this;if(r=n[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():N8(r,i),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this};ke.prototype.off=ke.prototype.removeListener;ke.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function Ux(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?U8(i):Lx(i,i.length)}ke.prototype.listeners=function(e){return Ux(this,e,!0)};ke.prototype.rawListeners=function(e){return Ux(this,e,!1)};ke.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Bx.call(e,t)};ke.prototype.listenerCount=Bx;function Bx(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ke.prototype.eventNames=function(){return this._eventsCount>0?pd(this._events):[]};function Lx(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function N8(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function U8(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function B8(e,t){return new Promise(function(r,n){function i(o){e.removeListener(t,s),n(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}Dx(e,t,s,{once:!0}),t!=="error"&&L8(e,i,{once:!0})})}function L8(e,t,r){typeof e.on=="function"&&Dx(e,"error",t,r)}function Dx(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){n.once&&e.removeEventListener(t,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Sr=ub.exports;const Hf=xf(Sr);var ty={exports:{}};(function(e,t){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Lr<"u"&&Lr,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Lr<"u"&&Lr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(m){return m&&DataView.prototype.isPrototypeOf(m)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(m){return m&&u.indexOf(Object.prototype.toString.call(m))>-1};function f(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(m)||m==="")throw new TypeError('Invalid character in header field name: "'+m+'"');return m.toLowerCase()}function h(m){return typeof m!="string"&&(m=String(m)),m}function y(m){var S={next:function(){var P=m.shift();return{done:P===void 0,value:P}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(m){this.map={},m instanceof g?m.forEach(function(S,P){this.append(P,S)},this):Array.isArray(m)?m.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(S){this.append(S,m[S])},this)}g.prototype.append=function(m,S){m=f(m),S=h(S);var P=this.map[m];this.map[m]=P?P+", "+S:S},g.prototype.delete=function(m){delete this.map[f(m)]},g.prototype.get=function(m){return m=f(m),this.has(m)?this.map[m]:null},g.prototype.has=function(m){return this.map.hasOwnProperty(f(m))},g.prototype.set=function(m,S){this.map[f(m)]=h(S)},g.prototype.forEach=function(m,S){for(var P in this.map)this.map.hasOwnProperty(P)&&m.call(S,this.map[P],P,this)},g.prototype.keys=function(){var m=[];return this.forEach(function(S,P){m.push(P)}),y(m)},g.prototype.values=function(){var m=[];return this.forEach(function(S){m.push(S)}),y(m)},g.prototype.entries=function(){var m=[];return this.forEach(function(S,P){m.push([P,S])}),y(m)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(m){if(!m._noBody){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}}function b(m){return new Promise(function(S,P){m.onload=function(){S(m.result)},m.onerror=function(){P(m.error)}})}function w(m){var S=new FileReader,P=b(S);return S.readAsArrayBuffer(m),P}function _(m){var S=new FileReader,P=b(S),k=/charset=([A-Za-z0-9_-]+)/.exec(m.type),A=k?k[1]:"utf-8";return S.readAsText(m,A),P}function I(m){for(var S=new Uint8Array(m),P=new Array(S.length),k=0;k<S.length;k++)P[k]=String.fromCharCode(S[k]);return P.join("")}function R(m){if(m.slice)return m.slice(0);var S=new Uint8Array(m.byteLength);return S.set(new Uint8Array(m)),S.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(m){this.bodyUsed=this.bodyUsed,this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:c.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:c.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():c.arrayBuffer&&c.blob&&l(m)?(this._bodyArrayBuffer=R(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||d(m))?this._bodyArrayBuffer=R(m):this._bodyText=m=Object.prototype.toString.call(m):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var m=v(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var m=v(this);return m||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var m=v(this);if(m)return m;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var C=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(m){var S=m.toUpperCase();return C.indexOf(S)>-1?S:m}function N(m,S){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var P=S.body;if(m instanceof N){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,S.headers||(this.headers=new g(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!P&&m._bodyInit!=null&&(P=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=L(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var O=new AbortController;return O.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var A=/\?/;this.url+=(A.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function F(m){var S=new FormData;return m.trim().split("&").forEach(function(P){if(P){var k=P.split("="),A=k.shift().replace(/\+/g," "),O=k.join("=").replace(/\+/g," ");S.append(decodeURIComponent(A),decodeURIComponent(O))}}),S}function q(m){var S=new g,P=m.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var A=k.split(":"),O=A.shift().trim();if(O){var M=A.join(":").trim();try{S.append(O,M)}catch($){console.warn("Response "+$.message)}}}),S}T.call(N.prototype);function j(m,S){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(m)}T.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var m=new j(null,{status:200,statusText:""});return m.ok=!1,m.status=0,m.type="error",m};var B=[301,302,303,307,308];j.redirect=function(m,S){if(B.indexOf(S)===-1)throw new RangeError("Invalid status code");return new j(null,{status:S,headers:{location:m}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,S){this.message=m,this.name=S;var P=Error(m);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function D(m,S){return new Promise(function(P,k){var A=new N(m,S);if(A.signal&&A.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function M(){O.abort()}O.onload=function(){var H={statusText:O.statusText,headers:q(O.getAllResponseHeaders()||"")};A.url.indexOf("file://")===0&&(O.status<200||O.status>599)?H.status=200:H.status=O.status,H.url="responseURL"in O?O.responseURL:H.headers.get("X-Request-URL");var G="response"in O?O.response:O.responseText;setTimeout(function(){P(new j(G,H))},0)},O.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},O.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},O.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function $(H){try{return H===""&&a.location.href?a.location.href:H}catch{return H}}if(O.open(A.method,$(A.url),!0),A.credentials==="include"?O.withCredentials=!0:A.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&(c.blob?O.responseType="blob":c.arrayBuffer&&(O.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(S.headers).forEach(function(H){Q.push(f(H)),O.setRequestHeader(H,h(S.headers[H]))}),A.headers.forEach(function(H,G){Q.indexOf(G)===-1&&O.setRequestHeader(G,H)})}else A.headers.forEach(function(H,G){O.setRequestHeader(G,H)});A.signal&&(A.signal.addEventListener("abort",M),O.onreadystatechange=function(){O.readyState===4&&A.signal.removeEventListener("abort",M)}),O.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return D.polyfill=!0,a.fetch||(a.fetch=D,a.Headers=g,a.Request=N,a.Response=j),o.Headers=g,o.Request=N,o.Response=j,o.fetch=D,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(ty,ty.exports);var D8=ty.exports;const jx=xf(D8);var Vo=null;typeof WebSocket<"u"?Vo=WebSocket:typeof MozWebSocket<"u"?Vo=MozWebSocket:typeof global<"u"?Vo=global.WebSocket||global.MozWebSocket:typeof window<"u"?Vo=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Vo=self.WebSocket||self.MozWebSocket);const j8=Vo;function Mx(e){try{return JSON.parse(e)}catch{return null}}function zx(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const M8=globalThis.AbortController||require("abort-controller");class ep extends Error{constructor(t){let{error:r,hostname:n,path:i,method:s,requestBody:o,responseBody:a,responseStatusText:c,statusCode:l}=t;const u=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${r?`error=${r}`:""}
      ${n?`hostname=${n}`:""}
      ${i?`path=${i}`:""}
      ${s?`method=${s}`:""}
      ${o?`requestBody=${o}`:""}
      ${a?`responseBody=${a}`:""}
      ${c?`responseStatusText=${c}`:""}
      ${l?`statusCode=${l}`:""}
    `;super(u),this.name="HTTP Request Error",this.statusCode=l,this.errorMessage=r}}async function dt(e){let{hostname:t,path:r,method:n,body:i,headers:s,retryLimit:o=5,retryIntervalMs:a=1e3,timeoutLimit:c=3e4,enableRequestLogging:l=!0}=e;const u=i?JSON.stringify(i):null;function d(){const h=new M8,y=setTimeout(()=>{h.abort()},c);return jx(zx(t,r).toString(),{method:n,body:u,headers:s,signal:h.signal}).then(async g=>{if(g.ok)return g.json();const v=await g.text().catch(()=>null),b=Mx(v);throw new ep({error:b==null?void 0:b.message,hostname:t,path:r,method:n,requestBody:u,responseBody:v,responseStatusText:g.statusText,statusCode:g.status})}).catch(async g=>{throw g instanceof ep||g.name==="AbortError"?g:(l&&await be({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:Re.error}),new ep({error:g==null?void 0:g.message,hostname:t,path:r,method:n,requestBody:u}))}).finally(()=>{clearTimeout(y)})}async function f(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await d()}catch(y){const g=[408,429,500,502,503,504];if(y.name==="AbortError"||g.includes(y.statusCode))return await new Promise((v,b)=>{h<o?(l&&console.warn(`Access node unavailable, retrying in ${a} ms...`),setTimeout(()=>{v(f(h+1))},a)):b(y)});throw y}}return await f()}async function z8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(i=>t.Buffer.from(JSON.stringify(e.arguments[i].asArgument)).toString("base64"))}});return db(e,t,n)}async function F8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(i=>t.Buffer.from(JSON.stringify(e.arguments[i].asArgument)).toString("base64"))}});return db(e,t,n)}async function $8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(i=>t.Buffer.from(JSON.stringify(e.arguments[i].asArgument)).toString("base64"))}});return db(e,t,n)}function db(e,t,r){let n=t.response();return n.tag=e.tag,n.encodedData=JSON.parse(t.Buffer.from(r,"base64").toString()),n}async function q8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V(r.node,"SDK Send Execute Script Error: opts.node must be defined."),V(t.response,"SDK Send Execute Script Error: context.response must be defined."),V(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await z8(e,t,r):e.block.height?await F8(e,t,r):await $8(e,t,r)}const H8={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},V8={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function K8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return Fx(e,t,n)}async function W8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return Fx(e,t,n)}function Fx(e,t,r){var n;let i=t.response();i.tag=e.tag;const s=o=>{const a={};if(!o)return a;for(let c of Object.keys(o))a[c]=t.Buffer.from(o[c],"base64").toString();return a};return i.account={address:r.address,balance:Number(r.balance),code:"",contracts:s(r.contracts),keys:((n=r.keys)==null?void 0:n.map(o=>({index:Number(o.index),publicKey:o.public_key.replace(/^0x/,""),signAlgo:V8[o.signing_algorithm],signAlgoString:o.signing_algorithm,hashAlgo:H8[o.hashing_algorithm],hashAlgoString:o.hashing_algorithm,sequenceNumber:Number(o.sequence_number),weight:Number(o.weight),revoked:o.revoked})))??[]},i}async function G8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V(r.node,"SDK Send Get Account Error: opts.node must be defined."),V(t.response,"SDK Send Get Account Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await K8(e,t,r):await W8(e,t,r)}async function Y8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return fb(e,t,n)}async function Q8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return fb(e,t,n)}async function Z8(e,t,r){var n;const i=r.httpRequest||dt,s=(n=e.block)!=null&&n.isSealed?"sealed":"final",o=await i({hostname:r.node,path:`/v1/blocks?height=${s}`,method:"GET",body:null});return fb(e,t,o)}function fb(e,t,r){const n=r.length?r[0]:null,i=t.response();return i.tag=e.tag,i.blockHeader={id:n.header.id,parentId:n.header.parent_id,height:Number(n.header.height),timestamp:n.header.timestamp},i}async function X8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Block Header Error: opts.node must be defined."),V(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const n=e.block.id!==null,i=e.block.height!==null;return n?await Y8(e,t,r):i?await Q8(e,t,r):await Z8(e,t,r)}async function J8(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return hb(e,t,n)}async function eC(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return hb(e,t,n)}async function tC(e,t,r){var n;const i=r.httpRequest||dt,s=(n=e.block)!=null&&n.isSealed?"sealed":"final",o=await i({hostname:r.node,path:`/v1/blocks?height=${s}&expand=payload`,method:"GET",body:null});return hb(e,t,o)}function hb(e,t,r){const n=r.length?r[0]:null,i=t.response();return i.tag=e.tag,i.block={id:n.header.id,parentId:n.header.parent_id,height:Number(n.header.height),timestamp:n.header.timestamp,parentVoterSignature:n.header.parent_voter_signature,collectionGuarantees:n.payload.collection_guarantees.map(s=>({collectionId:s.collection_id,signerIds:s.signer_ids})),blockSeals:n.payload.block_seals.map(s=>({blockId:s.block_id,executionReceiptId:s.result_id}))},i}async function rC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Block Error: opts.node must be defined."),V(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const n=e.block.id!==null,i=e.block.height!==null;return n?await J8(e,t,r):i?await eC(e,t,r):await tC(e,t,r)}async function nC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Collection Error: opts.node must be defined."),V(t.response,"SDK Send Get Collection Error: context.response must be defined.");const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),i=t.response();return i.tag=e.tag,i.collection={id:n.id,transactionIds:n.transactions.map(s=>s.id)},i}async function iC(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return $x(e,t,n)}async function sC(e,t,r){const n=await(r.httpRequest||dt)({hostname:r.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return $x(e,t,n)}function $x(e,t,r){let n=t.response();return n.tag=e.tag,n.events=[],r.forEach(i=>i.events?i.events.forEach(s=>n.events.push({blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(t.Buffer.from(s.payload,"base64").toString())})):null),n}async function oC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Events Error: opts.node must be defined."),V(t.response,"SDK Send Get Events Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const n=e.events.start!==null,i=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return V(n||i,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),n?await iC(e,t,r):await sC(e,t,r)}async function aC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Transaction Error: opts.node must be defined."),V(t.response,"SDK Send Get Transaction Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const n=r.httpRequest||dt;e=await e;const i=await n({hostname:r.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),s=l=>({address:l.address,keyId:Number(l.key_index),sequenceNumber:Number(l.sequence_number)}),o=l=>({address:l.address,keyId:Number(l.key_index),signature:l.signature,...l.extension_data?{extensionData:t.Buffer.from(l.extension_data,"base64").toString("hex")}:{}}),a=l=>JSON.parse(t.Buffer.from(l,"base64").toString());let c=t.response();return c.tag=e.tag,c.transaction={script:t.Buffer.from(i.script,"base64").toString(),args:[...i.arguments.map(a)],referenceBlockId:i.reference_block_id,gasLimit:Number(i.gas_limit),payer:i.payer,proposalKey:i.proposal_key?s(i.proposal_key):i.proposal_key,authorizers:i.authorizers,payloadSignatures:[...i.payload_signatures.map(o)],envelopeSignatures:[...i.envelope_signatures.map(o)]},c}const cC={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function lC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),V(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const n=r.httpRequest||dt;e=await e;const i=e&&e.block&&e.block.id,s=i?`/v1/transaction_results/${e.transaction.id}?block_id=${encodeURIComponent(i)}`:`/v1/transaction_results/${e.transaction.id}`,o=await n({hostname:r.node,path:s,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:o.block_id,status:cC[o.status.toUpperCase()]||"",statusString:o.status.toUpperCase(),statusCode:o.status_code,errorMessage:o.error_message,events:o.events.map(c=>({type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(t.Buffer.from(c.payload,"base64").toString())}))},a}async function uC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(!!r.node,"SDK Send Ping Error: opts.node must be defined."),V(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(r.httpRequest||dt)({hostname:r.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let n=typeof(t==null?void 0:t.response)=="function"?t.response():{};return n.tag=e.tag,n}const dC=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function fC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Transaction Error: opts.node must be defined."),V(t.response,"SDK Send Transaction Error: context.response must be defined."),V(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const n=r.httpRequest||dt;e=await e;let i=[];for(let u of Object.values(e.accounts))try{if(!u.role.payer&&u.signature!=null){const d={address:ut(u.addr),key_index:String(u.keyId),signature:t.Buffer.from(u.signature,"hex").toString("base64")};if(u.extensionData!=null){const f=t.Buffer.from(u.extensionData,"hex").toString("base64");f!=null&&(d.extension_data=f)}i.find(f=>f.address===d.address&&f.key_index===d.key_index&&f.signature===d.signature)||i.push(d)}}catch(d){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:u,ix:e}),d}let s={};for(let u of Object.values(e.accounts))try{if(u.role.payer&&u.signature!=null){let d=u.tempId||dC(u);if(s[d]=s[d]||{address:ut(u.addr),key_index:String(u.keyId),signature:t.Buffer.from(u.signature,"hex").toString("base64")},u.extensionData!=null){const f=t.Buffer.from(u.extensionData,"hex").toString("base64");f!=null&&(s[d].extension_data=f)}}}catch(d){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:u,ix:e}),d}s=Object.values(s);var o=Date.now();const a=await n({hostname:r.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(u=>t.Buffer.from(JSON.stringify(e.arguments[u].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:ut(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:ut(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(u=>e.accounts[u].addr).reduce((u,d)=>u.find(f=>f===d)?u:[...u,d],[]).map(ut),payload_signatures:i,envelope_signatures:s}});var c=Date.now();let l=t.response();return l.tag=e.tag,l.transactionId=a.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:l.transactionId,delta:c-o}})),l}async function hC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),V(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const n=r.httpRequest||dt;e=await e;const i=await n({hostname:r.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:r.enableRequestLogging??!0});let s=t.response();return s.tag=e.tag,s.networkParameters={chainId:i.chain_id},s}async function pC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),V(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const n=r.httpRequest||dt;e=await e;const i=await n({hostname:r.node,path:"/v1/node_version_info",method:"GET"});let s=t.response();return s.tag=e.tag,s.nodeVersionInfo={semver:i.semver,commit:i.commit,sporkId:i.spork_id,protocolVersion:parseInt(i.protocol_version),sporkRootBlockHeight:parseInt(i.spork_root_block_height),nodeRootBlockHeight:parseInt(i.node_root_block_height)},s}const qx=j8;class Hw extends Error{constructor(t){let{code:r,reason:n,message:i,wasClean:s}=t;const o=`
      connectWs: connection closed with error${i?`: ${i}`:""}
      ${r?`code: ${r}`:""}
      ${n?`reason: ${n}`:""}
      ${s?`wasClean: ${s}`:""}
    `;super(o),this.name="WebsocketError",this.code=r,this.reason=n,this.wasClean=!1}}function gC(e){let{hostname:t,path:r,params:n,getParams:i,retryLimit:s=5,retryIntervalMs:o=1e3}=e;if(i&&n)throw new Error("connectWs: cannot specify both params and getParams");let a=new Sr.EventEmitter,c=0;const l=i||(()=>n);let u=()=>{};return function d(){let f=!1,h=!1;const y=yC(t,r,l()),g=new qx(y);g.onmessage=function(v){const b=Mx(v.data);b?a.emit("data",b):(a.emit("error",new Hw({message:"invalid JSON data"})),this.close())},g.onclose=function(v){if(f){a.emit("close"),a.removeAllListeners();return}h?setTimeout(d,o):c<s?(c++,setTimeout(d,o)):(a.emit("error",new Hw({wasClean:v.wasClean,code:v.code,reason:v.reason,message:"failed to connect"})),setTimeout(()=>{a.emit("close"),a.removeAllListeners()}))},g.onopen=function(){h=!0,c=0},u=()=>{f=!0,g.close()}}(),{on(d,f){return a.on(d,f),this},off(d,f){return a.off(d,f),this},close(){u()}}}function yC(e,t,r){const n=new URL(t||"",e);return n.protocol==="https:"?n.protocol="wss:":n.protocol==="http:"&&(n.protocol="ws:"),Object.entries(r||{}).forEach(i=>{let[s,o]=i;if(o){let a;Array.isArray(o)?a=o.join(","):a=o.toString(),n.searchParams.append(s,a)}}),n.toString()}function mC(e,t,r){var n;const i=t.response();return i.tag=e.tag,i.events=((n=r.Events)==null?void 0:n.length)>0?r.Events.map(s=>({blockId:r.BlockID,blockHeight:Number(r.Height),blockTimestamp:r.BlockTimestamp,type:s.Type,transactionId:s.TransactionID,transactionIndex:Number(s.TransactionIndex),eventIndex:Number(s.EventIndex),payload:JSON.parse(t.Buffer.from(s.Payload,"base64").toString())})):null,i.heartbeat={blockId:r.BlockID,blockHeight:Number(r.Height),blockTimestamp:r.BlockTimestamp},i}function bC(e,t,r){const n=t.response();return n.tag=e.tag,n.streamConnection=r,n}async function wC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(r.node,"SDK Send Get Events Error: opts.node must be defined."),V(t.response,"SDK Send Get Events Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const n=await e,i=r.connectWs||gC,s=new Sr.EventEmitter;let o=null;const a=i({hostname:r.node,path:"/v1/subscribe_events",getParams:()=>{var c,l,u,d,f,h;const y={event_types:(c=n.subscribeEvents)==null?void 0:c.eventTypes,addresses:(l=n.subscribeEvents)==null?void 0:l.addresses,contracts:(u=n.subscribeEvents)==null?void 0:u.contracts,heartbeat_interval:(d=n.subscribeEvents)==null?void 0:d.heartbeatInterval};return o?y.start_height=o+1:(y.start_block_id=(f=n.subscribeEvents)==null?void 0:f.startBlockId,y.start_height=(h=n.subscribeEvents)==null?void 0:h.startHeight),y}});return a.on("data",c=>{const l=mC(n,t,c);o=l.heartbeat.blockHeight,s.emit("data",l)}),a.on("error",c=>{s.emit("error",c)}),a.on("close",()=>{s.emit("close")}),bC(n,t,{on(c,l){return s.on(c,l),this},off(c,l){return s.off(c,l),this},close(){a.close()}})}const vC=async function(e,t){var r,n,i,s;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(V(!!(o!=null&&o.node),'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),V(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return o.sendTransaction?o.sendTransaction(e,t,o):fC(e,t,o);case t.ix.isGetTransactionStatus(e):return o.sendGetTransactionStatus?o.sendGetTransactionStatus(e,t,o):lC(e,t,o);case t.ix.isGetTransaction(e):return o.sendGetTransaction?o.sendGetTransaction(e,t,o):aC(e,t,o);case t.ix.isScript(e):return o.sendExecuteScript?o.sendExecuteScript(e,t,o):q8(e,t,o);case t.ix.isGetAccount(e):return o.sendGetAccount?o.sendGetAccount(e,t,o):G8(e,t,o);case t.ix.isGetEvents(e):return o.sendGetEvents?o.sendGetEvents(e,t,o):oC(e,t,o);case((n=(r=t.ix).isSubscribeEvents)==null?void 0:n.call(r,e)):return o.connectSubscribeEvents?o.connectSubscribeEvents(e,t,o):wC(e,t,o);case t.ix.isGetBlock(e):return o.sendGetBlock?o.sendGetBlock(e,t,o):rC(e,t,o);case t.ix.isGetBlockHeader(e):return o.sendGetBlockHeader?o.sendGetBlockHeader(e,t,o):X8(e,t,o);case t.ix.isGetCollection(e):return o.sendGetCollection?o.sendGetCollection(e,t,o):nC(e,t,o);case t.ix.isPing(e):return o.sendPing?o.sendPing(e,t,o):uC(e,t,o);case t.ix.isGetNetworkParameters(e):return o.sendGetNetworkParameters?o.sendGetNetworkParameters(e,t,o):hC(e,t,o);case((s=(i=t.ix).isGetNodeVersionInfo)==null?void 0:s.call(i,e)):return o.sendGetNodeVersionInfo?o.sendGetNodeVersionInfo(e,t,o):pC(e,t,o);default:return e}};let Vw=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class qc extends Error{constructor(t,r){super(r),this.name="SocketError",this.code=t}static fromMessage(t){return new qc(t.code,t.message)}}const EC=1;class _C{constructor(t,r){oe(this,"counter",0),oe(this,"socket",null),oe(this,"subscriptions",[]),oe(this,"reconnectAttempts",0),oe(this,"connectPromise",null),oe(this,"closeConnection",null),this.config={...r,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...r.reconnectOptions}},this.handlers=t}subscribe(t){const r=this._subscribe(t);return{unsubscribe:()=>{r.then(n=>n&&this.unsubscribe(n))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let n=null;try{await this.connect(),n={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(n);const i=await this.sendSubscribe(n);if(i.error)throw new Error(`Failed to subscribe to topic ${n.topic}`,{cause:qc.fromMessage(i.error)})}catch(i){return r.onError(i instanceof Error?i:new Error(String(i))),n&&this.unsubscribe(n.id),null}return n.id}unsubscribe(t){var r;const n=this.subscriptions.find(i=>i.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(i=>i.id!==t),this.subscriptions.length===0){(r=this.closeConnection)==null||r.call(this);return}this.sendUnsubscribe(n).catch(i=>{console.error(`Error while unsubscribing from topic: ${i}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,r)=>{var n;if(((n=this.socket)==null?void 0:n.readyState)===EC){t();return}this.socket=new qx(this.config.node);const i=a=>{const c=JSON.parse(a.data);if("action"in c&&c.error){const u=this.subscriptions.find(d=>d.id===c.subscription_id);u&&(u.subscriber.onError(new Error(`Failed to subscribe to topic ${u.topic}: ${c.error.message}`)),this.subscriptions=this.subscriptions.filter(d=>d.id!==c.subscription_id));return}const l=this.subscriptions.find(u=>u.id===c.subscription_id);l&&!("action"in c)&&c.subscription_id===l.id&&l.subscriber.onData(c.payload)},s=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(a=>{r(a)})},o=()=>{t()};this.socket.addEventListener("message",i),this.socket.addEventListener("close",s),this.socket.addEventListener("open",o),this.closeConnection=()=>{var a,c,l,u;(a=this.socket)==null||a.removeEventListener("message",i),(c=this.socket)==null||c.removeEventListener("close",s),(l=this.socket)==null||l.removeEventListener("open",o),(u=this.socket)==null||u.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){var r;if((r=this.closeConnection)==null||r.call(this),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw be({level:Re.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(n=>{n.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;be({level:Re.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(n=>setTimeout(n,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async n=>{await this.sendSubscribe(n).catch(i=>{n.subscriber.onError(new Error(`Failed to restore subscription: ${i}`)),this.subscriptions=this.subscriptions.filter(s=>s.id!==n.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const r={action:Vw.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},n=await this.request(r);if(n.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:qc.fromMessage(n.error)});return n}async sendUnsubscribe(t){var r;const n={action:Vw.UNSUBSCRIBE,subscription_id:t.id};(r=this.socket)==null||r.send(JSON.stringify(n));const i=await this.request(n);if(i.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:qc.fromMessage(i.error)});return i}async request(t){let r=()=>{};return await new Promise((n,i)=>{if(!this.socket){i(new Error("WebSocket is not connected"));return}r=()=>{var c,l,u;(c=this.socket)==null||c.removeEventListener("error",s),(l=this.socket)==null||l.removeEventListener("message",a),(u=this.socket)==null||u.removeEventListener("close",o)},this.socket.addEventListener("error",s),this.socket.addEventListener("message",a),this.socket.addEventListener("close",o),this.socket.send(JSON.stringify(t));function s(c){i(new Error(`WebSocket error: ${c}`))}function o(){i(new Error("WebSocket closed"))}function a(c){const l=JSON.parse(c.data);l.subscription_id===t.subscription_id&&n(l)}}).finally(()=>{r()})}getHandler(t){const r=this.handlers.find(n=>n.topic===t);if(!r)throw new Error(`No handler found for topic ${t}`);return r}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const SC={topic:Fa.BLOCKS,createSubscriber:(e,t,r)=>{let n={...e};return{onData(i){const s={block:{id:i.header.id,parentId:i.header.parent_id,height:Number(i.header.height),timestamp:i.header.timestamp,parentVoterSignature:i.header.parent_voter_signature,collectionGuarantees:i.payload.collection_guarantees.map(o=>({collectionId:o.collection_id,signerIds:o.signer_indices})),blockSeals:i.payload.block_seals.map(o=>({blockId:o.block_id,executionReceiptId:o.result_id}))}};n={blockStatus:n.blockStatus,startBlockHeight:Number(BigInt(i.header.height)+BigInt(1))},t(s)},onError(i){r(i)},getConnectionArgs(){let i={block_status:n.blockStatus};return"startBlockHeight"in n&&n.startBlockHeight?{...i,start_block_height:String(n.startBlockHeight)}:"startBlockId"in n&&n.startBlockId?{...i,start_block_id:n.startBlockId}:i}}}},xC={topic:Fa.BLOCK_HEADERS,createSubscriber:(e,t,r)=>{let n={...e};return{onData(i){const s={blockHeader:{id:i.id,parentId:i.parent_id,height:Number(i.height),timestamp:i.timestamp,parentVoterSignature:i.parent_voter_signature}};n={blockStatus:n.blockStatus,startBlockHeight:Number(BigInt(i.height)+BigInt(1))},t(s)},onError(i){r(i)},getConnectionArgs(){let i={block_status:n.blockStatus};return"startBlockHeight"in n&&n.startBlockHeight?{...i,start_block_height:n.startBlockHeight}:"startBlockId"in n&&n.startBlockId?{...i,start_block_id:n.startBlockId}:i}}}},IC={topic:Fa.BLOCK_DIGESTS,createSubscriber:(e,t,r)=>{let n={...e};return{onData(i){const s={blockDigest:{id:i.block_id,height:Number(i.height),timestamp:i.timestamp}};n={blockStatus:n.blockStatus,startBlockId:String(BigInt(i.height)+BigInt(1))},t(s)},onError(i){r(i)},getConnectionArgs(){let i={block_status:n.blockStatus};return"startBlockHeight"in n&&n.startBlockHeight?{...i,start_block_height:n.startBlockHeight}:"startBlockId"in n&&n.startBlockId?{...i,start_block_id:n.startBlockId}:i}}}},OC={topic:Fa.ACCOUNT_STATUSES,createSubscriber:(e,t,r)=>{let n={...e};return{onData(i){if(i.account_events){const s=[];for(const[o,a]of Object.entries(i.account_events))for(const c of a){const l={accountStatusEvent:{accountAddress:o,blockId:i.block_id,blockHeight:Number(i.height),type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(Buffer.from(c.payload,"base64").toString())}};s.push(l)}s.sort((o,a)=>{const c=o.accountStatusEvent.transactionIndex-a.accountStatusEvent.transactionIndex;return c!==0?c:o.accountStatusEvent.eventIndex-a.accountStatusEvent.eventIndex});for(const o of s)t(o)}n={...n,startBlockHeight:Number(BigInt(i.height)+BigInt(1)),startBlockId:void 0}},onError(i){r(i)},getConnectionArgs(){let i={event_types:n.eventTypes,addresses:n.addresses,account_addresses:n.accountAddresses};return"startBlockHeight"in n&&n.startBlockHeight?{...i,start_block_height:n.startBlockHeight}:"startBlockId"in n&&n.startBlockId?{...i,start_block_id:n.startBlockId}:i}}}},kC={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},AC={topic:Fa.TRANSACTION_STATUSES,createSubscriber:(e,t,r)=>{let n={...e};return{onData(i){const s={transactionStatus:{blockId:i.transaction_result.block_id,status:kC[i.transaction_result.status.toUpperCase()],statusString:i.transaction_result.status.toUpperCase(),statusCode:i.transaction_result.status_code,errorMessage:i.transaction_result.error_message,events:i.transaction_result.events.map(o=>({type:o.type,transactionId:o.transaction_id,transactionIndex:Number(o.transaction_index),eventIndex:Number(o.event_index),payload:JSON.parse(Be.Buffer.from(o.payload,"base64").toString())}))}};t(s)},onError(i){r(i)},getConnectionArgs(){return{tx_id:n.transactionId}}}}},PC={topic:Fa.EVENTS,createSubscriber:(e,t,r)=>{let n={...e};return"startHeight"in n&&n.startHeight&&(n.startBlockHeight=n.startHeight,delete n.startHeight),{onData(i){if(i.events&&Array.isArray(i.events))for(const s of i.events){const o={event:{blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(Buffer.from(s.payload,"base64").toString())}};t(o)}n={...n,startBlockHeight:Number(BigInt(i.block_height)+BigInt(1)),startBlockId:void 0}},onError(i){r(i)},getConnectionArgs(){let i={event_types:n.eventTypes,addresses:n.addresses,contracts:n.contracts};return"startBlockHeight"in n&&n.startBlockHeight?{...i,start_block_height:String(n.startBlockHeight)}:"startBlockId"in n&&n.startBlockId?{...i,start_block_id:String(n.startBlockId)}:i}}}},RC=[SC,xC,IC,OC,AC,PC];let Kw=new Map;function TC(e,t){let{topic:r,args:n,onData:i,onError:s}=e;const o=CC(t.node),a=Kw.get(o)||new _C(RC,{node:o});return Kw.set(o,a),a.subscribe({topic:r,args:n,onData:i,onError:s})}function CC(e){const t=new URL(zx(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const NC={send:vC,subscribe:TC};var UC={},Hx={},Vx={},Kx={},BC=function(e,t){return function(r,n){var i=n*2,s=t*2;r[i]=e[s],r[i+1]=e[s+1]}},pb=BC;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(pb);function r(s){return s&&s.__esModule?s:{default:s}}var n=function(s){for(var o=s.A,a=s.C,c=0;c<25;c+=5){for(var l=0;l<5;l++)(0,t.default)(o,c+l)(a,l);for(var u=0;u<5;u++){var d=(c+u)*2,f=(u+1)%5*2,h=(u+2)%5*2;o[d]^=~a[f]&a[h],o[d+1]^=~a[f+1]&a[h+1]}}},i=n;e.default=i})(Kx);var Wx={},Gx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),r=t;e.default=r})(Gx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Gx);function r(s){return s&&s.__esModule?s:{default:s}}var n=function(s){var o=s.A,a=s.roundIndex,c=a*2;o[0]^=t.default[c],o[1]^=t.default[c+1]},i=n;e.default=i})(Wx);var Yx={},Qx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],r=t;e.default=r})(Qx);var Zx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],r=t;e.default=r})(Zx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Qx),r=i(Zx),n=i(pb);function i(a){return a&&a.__esModule?a:{default:a}}var s=function(a){var c=a.A,l=a.C,u=a.W;(0,n.default)(c,1)(u,0);for(var d=0,f=0,h=0,y=32,g=0;g<24;g++){var v=t.default[g],b=r.default[g];(0,n.default)(c,v)(l,0),d=u[0],f=u[1],y=32-b,h=b<32?0:1,u[h]=d<<b|f>>>y,u[(h+1)%2]=f<<b|d>>>y,(0,n.default)(u,0)(c,v),(0,n.default)(l,0)(u,0)}},o=s;e.default=o})(Yx);var Xx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(pb);function r(s){return s&&s.__esModule?s:{default:s}}var n=function(s){for(var o=s.A,a=s.C,c=s.D,l=s.W,u=0,d=0,f=0;f<5;f++){var h=f*2,y=(f+5)*2,g=(f+10)*2,v=(f+15)*2,b=(f+20)*2;a[h]=o[h]^o[y]^o[g]^o[v]^o[b],a[h+1]=o[h+1]^o[y+1]^o[g+1]^o[v+1]^o[b+1]}for(var w=0;w<5;w++){(0,t.default)(a,(w+1)%5)(l,0),u=l[0],d=l[1],l[0]=u<<1|d>>>31,l[1]=d<<1|u>>>31,c[w*2]=a[(w+4)%5*2]^l[0],c[w*2+1]=a[(w+4)%5*2+1]^l[1];for(var _=0;_<25;_+=5)o[(_+w)*2]^=c[w*2],o[(_+w)*2+1]^=c[w*2+1]}},i=n;e.default=i})(Xx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(Kx),r=s(Wx),n=s(Yx),i=s(Xx);function s(c){return c&&c.__esModule?c:{default:c}}var o=function(){var c=new Uint32Array(10),l=new Uint32Array(10),u=new Uint32Array(2);return function(d){for(var f=0;f<24;f++)(0,i.default)({A:d,C:c,D:l,W:u}),(0,n.default)({A:d,C:c,W:u}),(0,t.default)({A:d,C:c}),(0,r.default)({A:d,roundIndex:f});c.fill(0),l.fill(0),u.fill(0)}},a=o;e.default=a})(Vx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Be,r=n(Vx);function n(c){return c&&c.__esModule?c:{default:c}}var i=function(c,l){for(var u=0;u<c.length;u+=8){var d=u/4;l[d]^=c[u+7]<<24|c[u+6]<<16|c[u+5]<<8|c[u+4],l[d+1]^=c[u+3]<<24|c[u+2]<<16|c[u+1]<<8|c[u]}return l},s=function(c,l){for(var u=0;u<l.length;u+=8){var d=u/4;l[u]=c[d+1],l[u+1]=c[d+1]>>>8,l[u+2]=c[d+1]>>>16,l[u+3]=c[d+1]>>>24,l[u+4]=c[d],l[u+5]=c[d]>>>8,l[u+6]=c[d]>>>16,l[u+7]=c[d]>>>24}return l},o=function(c){var l=this,u=c.capacity,d=c.padding,f=(0,r.default)(),h=200,y=u/8,g=h-u/4,v=0,b=new Uint32Array(h/4),w=t.Buffer.allocUnsafe(g);return this.absorb=function(_){for(var I=0;I<_.length;I++)w[v]=_[I],v+=1,v>=g&&(i(w,b),f(b),v=0);return l},this.squeeze=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I={buffer:_.buffer||t.Buffer.allocUnsafe(y),padding:_.padding||d,queue:t.Buffer.allocUnsafe(w.length),state:new Uint32Array(b.length)};w.copy(I.queue);for(var R=0;R<b.length;R++)I.state[R]=b[R];I.queue.fill(0,v),I.queue[v]|=I.padding,I.queue[g-1]|=128,i(I.queue,I.state);for(var T=0;T<I.buffer.length;T+=g)f(I.state),s(I.state,I.buffer.slice(T,T+g));return I.buffer},this.reset=function(){return w.fill(0),b.fill(0),v=0,l},this},a=o;e.default=a})(Hx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=Be,r=n(Hx);function n(u){return u&&u.__esModule?u:{default:u}}var i=function(u){var d=u.allowedSizes,f=u.defaultSize,h=u.padding;return function y(){var g=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f;if(!this||this.constructor!==y)return new y(v);if(d&&!d.includes(v))throw new Error("Unsupported hash length");var b=new r.default({capacity:v});return this.update=function(w){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(w))return b.absorb(w),g;if(typeof w=="string")return g.update(t.Buffer.from(w,_));throw new TypeError("Not a string or buffer")},this.digest=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",_=typeof w=="string"?{format:w}:w,I=b.squeeze({buffer:_.buffer,padding:_.padding||h});return _.format&&_.format!=="binary"?I.toString(_.format):I},this.reset=function(){return b.reset(),g},this}},s=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=s;var o=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=o;var a=i({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=a;var c=s;e.SHA3Hash=c,o.SHA3Hash=c;var l=o;e.default=l})(UC);function Jx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return r;if(!t.length)return r.push(...e),r;const[n,...i]=e,[s,...o]=t;return n!==void 0&&r.push(n),s!==void 0&&r.push(s),Jx(i,o,r)}function eI(e){return function(t){return typeof t=="function"?(be.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),eI(e)(t(e))):String(t)}}function tI(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return typeof e=="string"?()=>e:typeof e=="function"?e:i=>Jx([...e],r.map(eI(i))).join("").trim()}const fe=(e,t,r)=>({label:e,asArgument:t,asInjection:n=>(be.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),r(n))}),co=e=>Array.isArray(e),Is=e=>typeof e=="object",rI=e=>e==null,LC=e=>typeof e=="boolean",Ge=e=>typeof e=="number",ft=e=>Number.isInteger(e),Ie=e=>typeof e=="string",ae=e=>{throw new Error("Type Error: "+e)},ht=e=>{be.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let Ww=!1;const DC={label:"Identity",asArgument:e=>(Ww||(be.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),Ww=!0),e),asInjection:e=>e},jC=fe("UInt",e=>Ge(e)&&ft(e)?(ht("UInt"),{type:"UInt",value:e.toString()}):Ie(e)?{type:"UInt",value:e}:ae("Expected Positive Integer for type Unsigned Int"),e=>e),MC=fe("Int",e=>Ge(e)&&ft(e)?(ht("Int"),{type:"Int",value:e.toString()}):Ie(e)?{type:"Int",value:e}:ae("Expected Integer for type Int"),e=>e),zC=fe("UInt8",e=>Ge(e)&&ft(e)?(ht("UInt8"),{type:"UInt8",value:e.toString()}):Ie(e)?{type:"UInt8",value:e}:ae("Expected integer for UInt8"),e=>e),FC=fe("Int8",e=>Ge(e)&&ft(e)?(ht("Int8"),{type:"Int8",value:e.toString()}):Ie(e)?{type:"Int8",value:e}:ae("Expected positive integer for Int8"),e=>e),$C=fe("UInt16",e=>Ge(e)&&ft(e)?(ht("UInt16"),{type:"UInt16",value:e.toString()}):Ie(e)?{type:"UInt16",value:e}:ae("Expected integer for UInt16"),e=>e),qC=fe("Int16",e=>Ge(e)&&ft(e)?(ht("Int16"),{type:"Int16",value:e.toString()}):Ie(e)?{type:"Int16",value:e}:ae("Expected positive integer for Int16"),e=>e),HC=fe("UInt32",e=>Ge(e)&&ft(e)?(ht("UInt32"),{type:"UInt32",value:e.toString()}):Ie(e)?{type:"UInt32",value:e}:ae("Expected integer for UInt32"),e=>e),VC=fe("Int32",e=>Ge(e)&&ft(e)?(ht("Int32"),{type:"Int32",value:e.toString()}):Ie(e)?{type:"Int32",value:e}:ae("Expected positive integer for Int32"),e=>e),KC=fe("UInt64",e=>Ge(e)&&ft(e)?(ht("UInt64"),{type:"UInt64",value:e.toString()}):Ie(e)?{type:"UInt64",value:e}:ae("Expected integer for UInt64"),e=>e),WC=fe("Int64",e=>Ge(e)&&ft(e)?(ht("Int64"),{type:"Int64",value:e.toString()}):Ie(e)?{type:"Int64",value:e}:ae("Expected positive integer for Int64"),e=>e),GC=fe("UInt128",e=>Ge(e)&&ft(e)?(ht("UInt128"),{type:"UInt128",value:e.toString()}):Ie(e)?{type:"UInt128",value:e}:ae("Expected integer for UInt128"),e=>e),YC=fe("Int128",e=>Ge(e)&&ft(e)?(ht("Int128"),{type:"Int128",value:e.toString()}):Ie(e)?{type:"Int128",value:e}:ae("Expected positive integer for Int128"),e=>e),QC=fe("UInt256",e=>Ge(e)&&ft(e)?(ht("UInt256"),{type:"UInt256",value:e.toString()}):Ie(e)?{type:"UInt256",value:e}:ae("Expected integer for UInt256"),e=>e),ZC=fe("Int256",e=>Ge(e)&&ft(e)?(ht("Int256"),{type:"Int256",value:e.toString()}):Ie(e)?{type:"Int256",value:e}:ae("Expected integer for Int256"),e=>e),XC=fe("Word8",e=>Ge(e)&&ft(e)?(ht("Word8"),{type:"Word8",value:e.toString()}):Ie(e)?{type:"Word8",value:e}:ae("Expected positive number for Word8"),e=>e),JC=fe("Word16",e=>Ge(e)&&ft(e)?(ht("Word16"),{type:"Word16",value:e.toString()}):Ie(e)?{type:"Word16",value:e}:ae("Expected positive number for Word16"),e=>e),e4=fe("Word32",e=>Ge(e)&&ft(e)?(ht("Word32"),{type:"Word32",value:e.toString()}):Ie(e)?{type:"Word32",value:e}:ae("Expected positive number for Word32"),e=>e),t4=fe("Word64",e=>Ge(e)&&ft(e)?(ht("Word64"),{type:"Word64",value:e.toString()}):Ie(e)?{type:"Word64",value:e}:ae("Expected positive number for Word64"),e=>e),r4=fe("Word128",e=>Ge(e)&&ft(e)?(ht("Word128"),{type:"Word128",value:e.toString()}):Ie(e)?{type:"Word128",value:e}:ae("Expected positive number for Word128"),e=>e),n4=fe("Word256",e=>Ge(e)&&ft(e)?(ht("Word256"),{type:"Word256",value:e.toString()}):Ie(e)?{type:"Word256",value:e}:ae("Expected positive number for Word256"),e=>e),Vf=()=>{be.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},i4=fe("UFix64",e=>{if(Ie(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?ae(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if(Ge(e))return Vf(),{type:"UFix64",value:e.toString()};return ae("Expected String for UFix64")},e=>e),s4=fe("Fix64",e=>{if(Ie(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?ae(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if(Ge(e))return Vf(),{type:"Fix64",value:e.toString()};return ae("Expected String for Fix64")},e=>e),o4=fe("UFix128",e=>{if(Ie(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix128 value. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):t[1].length==0||t[1].length>24?ae(`Expected at least one digit, and at most 24 digits following the decimal of the [U]Fix128 value but found ${t[1].length} digits. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):(t[1]=t[1].padEnd(24,"0"),e=t.join("."),{type:"UFix128",value:e})}else if(Ge(e))return Vf(),{type:"UFix128",value:e.toString()};return ae("Expected String for UFix128")},e=>e),a4=fe("Fix128",e=>{if(Ie(e)){const t=e.split(".");return t.length!==2?ae(`Expected one decimal but found ${t.length} in the [U]Fix128 value. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):t[1].length==0||t[1].length>24?ae(`Expected at least one digit, and at most 24 digits following the decimal of the [U]Fix128 value but found ${t[1].length} digits. Find out more about [U]Fix128 types here: https://cadencelanguage.com/docs/language/values-and-types/fixed-point-nums-ints`):(t[1]=t[1].padEnd(24,"0"),e=t.join("."),{type:"Fix128",value:e})}else if(Ge(e))return Vf(),{type:"Fix128",value:e.toString()};return ae("Expected String for Fix128")},e=>e),c4=fe("String",e=>Ie(e)?{type:"String",value:e}:ae("Expected String for type String"),e=>e),l4=fe("Character",e=>Ie(e)?{type:"Character",value:e}:ae("Expected Character for type Character"),e=>e),u4=fe("Bool",e=>LC(e)?{type:"Bool",value:e}:ae("Expected Boolean for type Bool"),e=>e),nI=fe("Address",e=>Ie(e)?{type:"Address",value:e}:ae("Expected Address for type Address"),e=>e),d4=fe("Void",e=>!e||rI(e)?{type:"Void",value:null}:ae("Expected Void for type Void"),e=>e),f4=e=>fe("Optional",t=>({type:"Optional",value:rI(t)?null:e.asArgument(t)}),t=>t),h4=fe("Reference",e=>Is(e)?{type:"Reference",value:e}:ae("Expected Object for type Reference"),e=>e),Gw=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return fe("Array",t=>({type:"Array",value:co(e)?e.map((r,n)=>r.asArgument(t[n])):t.map(r=>e.asArgument(r))}),t=>t)},p4=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return fe("Dictionary",t=>{const r=co(t),n=co(e);return Is(t)?{type:"Dictionary",value:n&&r?e.map((i,s)=>({key:i.key.asArgument(t[s].key),value:i.value.asArgument(t[s].value)})):r&&!n?t.map(i=>({key:e.key.asArgument(i.key),value:e.value.asArgument(i.value)})):!r&&!n?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:ae("Invalid arguments for Dictionary.")}:ae("Expected Object for type Dictionary")},t=>t)},g4=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return fe("Event",r=>Is(r)?{type:"Event",value:{id:e,fields:co(t)?t.map((n,i)=>({name:r.fields[i].name,value:n.value.asArgument(r.fields[i].value)})):r.fields.map(n=>({name:n.name,value:t.value.asArgument(n.value)}))}}:ae("Expected Object for type Event"),r=>r)},y4=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return fe("Resource",r=>Is(r)?{type:"Resource",value:{id:e,fields:co(t)?t.map((n,i)=>({name:r.fields[i].name,value:n.value.asArgument(r.fields[i].value)})):r.fields.map(n=>({name:n.name,value:t.value.asArgument(n.value)}))}}:ae("Expected Object for type Resource"),r=>r)},m4=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return fe("Struct",r=>Is(r)?{type:"Struct",value:{id:e,fields:co(t)?t.map((n,i)=>({name:r.fields[i].name,value:n.value.asArgument(r.fields[i].value)})):r.fields.map(n=>({name:n.name,value:t.value.asArgument(n.value)}))}}:ae("Expected Object for type Struct"),r=>r)},b4=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return fe("Enum",r=>Is(r)?{type:"Enum",value:{id:e,fields:co(t)?t.map((n,i)=>({name:r.fields[i].name,value:n.value.asArgument(r.fields[i].value)})):r.fields.map(n=>({name:n.name,value:t.value.asArgument(n.value)}))}}:ae("Expected Object for type Enum"),r=>r)},w4=fe("Path",e=>Is(e)?Ie(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?Ie(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:ae(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):ae(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):ae(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):ae("Expected Object for type Path"),e=>e),v4=e=>fe("InclusiveRange",t=>{if(Is(t)){const{start:r,end:n,step:i}=t;return{type:"InclusiveRange",value:{start:e.asArgument(r),end:e.asArgument(n),step:e.asArgument(i)}}}return ae("Expected Object for type InclusiveRange")},t=>t),E4=Object.freeze(Object.defineProperty({__proto__:null,Address:nI,Array:Gw,Bool:u4,Character:l4,Dictionary:p4,Enum:b4,Event:g4,Fix128:a4,Fix64:s4,Identity:DC,InclusiveRange:v4,Int:MC,Int128:YC,Int16:qC,Int256:ZC,Int32:VC,Int64:WC,Int8:FC,Optional:f4,Path:w4,Reference:h4,Resource:y4,String:c4,Struct:m4,UFix128:o4,UFix64:i4,UInt:jC,UInt128:GC,UInt16:$C,UInt256:QC,UInt32:HC,UInt64:KC,UInt8:zC,Void:d4,Word128:r4,Word16:JC,Word256:n4,Word32:e4,Word64:t4,Word8:XC,_Array:Gw},Symbol.toStringTag,{value:"Module"})),_4=`{
  "kind":"${Ff.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,S4=`{
  "kind":"${Ff.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,iI=`{
  "tag":"${Oe.UNKNOWN}",
  "assigns":{},
  "status":"${Nl.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,sI=new Set(Object.keys(JSON.parse(iI))),Kf=()=>JSON.parse(iI),x4=()=>(be.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:Re.warn}),Kf()),oI=e=>typeof e=="number",aI=e=>Array.isArray(e),cI=e=>e!==null&&typeof e=="object",gb=e=>e==null,Ca=e=>typeof e=="function",lI=e=>{if(!cI(e)||gb(e)||oI(e))return!1;for(let t of sI)if(!e.hasOwnProperty(t))return!1;return!0},cn=e=>(e.status=Nl.OK,e),uI=(e,t)=>(e.status=Nl.BAD,e.reason=t,e),xr=e=>t=>(t.tag=e,cn(t)),Yw=e=>e.keyId==null?e:(V(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),dI=()=>JSON.parse(_4),Wf=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=>{V(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),V(t.role!=null,"Account must have a role");const n=dI(),i=t.role,s=ob();let o={...e};e.authorization&&Ca(e.authorization)&&(o={resolve:e.authorization}),!e.authorization&&Ca(e)&&(o={resolve:e});const a=o.resolve;return a&&(o.resolve=function(c){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return[a,Yw].reduce(async(f,h)=>h(await f,...u),c)}),o=Yw(o),r.accounts[s]={...n,tempId:s,...o,role:{...n.role,...typeof e.role=="object"?e.role:{},...i?{[i]:!0}:{}}},i===hl.AUTHORIZER?r.authorizations.push(s):i===hl.PAYER?r.payer.push(s):i&&(r[i]=s),r}},fI=e=>t=>{let r=ob();return t.message.arguments.push(r),t.arguments[r]=JSON.parse(S4),t.arguments[r].tempId=r,t.arguments[r].value=e.value,t.arguments[r].asArgument=e.asArgument,t.arguments[r].xform=e.xform,t.arguments[r].resolve=e.resolve,t.arguments[r].resolveArgument=Ca(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,cn(t)},I4=xr(Oe.UNKNOWN),hI=xr(Oe.SCRIPT),pI=xr(Oe.TRANSACTION),O4=xr(Oe.GET_TRANSACTION_STATUS),k4=xr(Oe.GET_TRANSACTION),gI=xr(Oe.GET_ACCOUNT),A4=xr(Oe.GET_EVENTS),P4=xr(Oe.PING),yI=xr(Oe.GET_BLOCK),R4=xr(Oe.GET_BLOCK_HEADER),T4=xr(Oe.GET_COLLECTION),mI=xr(Oe.GET_NETWORK_PARAMETERS),C4=xr(Oe.SUBSCRIBE_EVENTS),N4=xr(Oe.GET_NODE_VERSION_INFO),Ir=e=>t=>t.tag===e,U4=Ir(Oe.UNKNOWN),yb=Ir(Oe.SCRIPT),Os=Ir(Oe.TRANSACTION),B4=Ir(Oe.GET_TRANSACTION_STATUS),L4=Ir(Oe.GET_TRANSACTION),bI=Ir(Oe.GET_ACCOUNT),D4=Ir(Oe.GET_EVENTS),j4=Ir(Oe.PING),M4=Ir(Oe.GET_BLOCK),z4=Ir(Oe.GET_BLOCK_HEADER),F4=Ir(Oe.GET_COLLECTION),$4=Ir(Oe.GET_NETWORK_PARAMETERS),q4=Ir(Oe.GET_NODE_VERSION_INFO),H4=Ir(Oe.SUBSCRIBE_EVENTS),V4=e=>e.status===Nl.OK,wI=e=>e.status===Nl.BAD,K4=e=>e.reason,W4=e=>e.kind===Ff.ACCOUNT,G4=e=>e.kind===Ff.ARGUMENT,Y4=e=>{for(let t of Object.keys(e))if(!sI.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},gd=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=Y4(await e),wI(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[r,...n]=t,i=await r;if(Ca(i))return gd(i(e),n);if(gb(i)||!i)return gd(e,n);if(lI(i))return gd(i,n);throw new Error("Invalid Interaction Composition")}catch(r){throw r}};function Dt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[n,i]=t;return aI(n)?s=>Dt(s,n):gd(n,i)}const Q4=function(e){return e},Gf=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?r:e.assigns[t]},mb=(e,t)=>r=>(r.assigns[e]=t,cn(r)),vI=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q4;return r=>(r.assigns[e]=t(r.assigns[e],r),cn(r))},Z4=e=>t=>(delete t.assigns[e],cn(t));var bb=Object.freeze({__proto__:null,Bad:uI,Ok:cn,destroy:Z4,get:Gf,initAccount:dI,initInteraction:Kf,interaction:x4,isAccount:W4,isArgument:G4,isArray:aI,isBad:wI,isFn:Ca,isGetAccount:bI,isGetBlock:M4,isGetBlockHeader:z4,isGetCollection:F4,isGetEvents:D4,isGetNetworkParameters:$4,isGetNodeVersionInfo:q4,isGetTransaction:L4,isGetTransactionStatus:B4,isInteraction:lI,isNull:gb,isNumber:oI,isObj:cI,isOk:V4,isPing:j4,isScript:yb,isSubscribeEvents:H4,isTransaction:Os,isUnknown:U4,makeArgument:fI,makeGetAccount:gI,makeGetBlock:yI,makeGetBlockHeader:R4,makeGetCollection:T4,makeGetEvents:A4,makeGetNetworkParameters:mI,makeGetNodeVerionInfo:N4,makeGetTransaction:k4,makeGetTransactionStatus:O4,makePing:P4,makeScript:hI,makeSubscribeEvents:C4,makeTransaction:pI,makeUnknown:I4,pipe:Dt,prepAccount:Wf,put:mb,update:vI,why:K4});function EI(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Dt(Kf(),e)}const X4={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},wb=()=>({...X4});function yd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Dt([yI,t=>(t.block.isSealed=e,cn(t))])}function md(e){return Dt([gI,t=>(t.account.addr=ut(e),cn(t))])}const J4=(e,t,r)=>{const n=new Hf;let i=eN();e.on("data",async o=>{const a=Object.keys(o).filter(l=>o[l]!=null&&l!=="tag");let c=Promise.all(a.map(async l=>{const u={[l]:o[l]},d=await t(u,r);return{channel:l,message:d}}));i.push(async()=>{(await c).forEach(l=>{let{channel:u,message:d}=l;n.emit(u,d)})})});function s(o){e.on(o,a=>{i.push(async()=>{n.emit(o,a)})})}return s("close"),s("error"),{on(o,a){return n.on(o,a),this},off(o,a){return n.off(o,a),this},close:()=>{e.close()}}};function eN(){let e=[],t=!1;async function r(){if(!t){for(t=!0;e.length>0;){const n=e.shift();await(n==null?void 0:n())}t=!1}}return{push:n=>{e.push(n),r()}}}const tN=()=>{be.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},Ee=async e=>e,rN=async()=>null,nN=async e=>e.staticType,iN=async(e,t,r)=>e?await lo(e,t,r):null,sN=async(e,t,r)=>await Promise.all(e.map(n=>new Promise(async i=>i(await lo(n,t,[...r,n.type]))))),oN=async(e,t,r)=>await e.reduce(async(n,i)=>(n=await n,n[await lo(i.key,t,[...r,i.key])]=await lo(i.value,t,[...r,i.key]),n),Promise.resolve({})),_u=async(e,t,r)=>{const n=await e.fields.reduce(async(s,o)=>(s=await s,s[o.name]=await lo(o.value,t,[...r,o.name]),s),Promise.resolve({})),i=e.id&&_I(t,e.id);return i?await i(n):n},aN=async(e,t,r)=>{const n=["start","end","step"];return await Object.keys(e).reduce(async(i,s)=>(i=await i,n.includes(s)&&(i[s]=await lo(e[s],t,[...r,s])),i),Promise.resolve({}))},Qw={UInt:Ee,Int:Ee,UInt8:Ee,Int8:Ee,UInt16:Ee,Int16:Ee,UInt32:Ee,Int32:Ee,UInt64:Ee,Int64:Ee,UInt128:Ee,Int128:Ee,UInt256:Ee,Int256:Ee,Word8:Ee,Word16:Ee,Word32:Ee,Word64:Ee,Word128:Ee,Word256:Ee,UFix64:Ee,Fix64:Ee,UFix128:Ee,Fix128:Ee,String:Ee,Character:Ee,Bool:Ee,Address:Ee,Void:rN,Optional:iN,Reference:Ee,Array:sN,Dictionary:oN,Event:_u,Resource:_u,Struct:_u,Enum:_u,Type:nN,Path:Ee,Capability:Ee,InclusiveRange:aN},_I=(e,t)=>{const r=Object.keys(e).find(n=>/^\/.*\/$/.test(n)?new RegExp(n.substring(1,n.length-1)).test(t):n===t);return t&&r&&e[r]},lo=async(e,t,r)=>{let n=_I(t,e.type);if(!n)throw new Error(`Undefined Decoder Error: ${e.type}@${r.join(".")}`);return await n(e.value,t,r)},oc=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const n={...Object.keys(Qw).filter(i=>!Object.keys(t).find(s=>new RegExp(s).test(i))).reduce((i,s)=>(i[s]=Qw[s],i),t),...t};return lo(e,n,r)},In=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return oc(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await oc(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await oc(r.payload,t)}}));if(e.event){const{payload:r,...n}=e.event;return{...n,data:await oc(r,t)}}else if(e.accountStatusEvent){const{payload:r,...n}=e.accountStatusEvent;return{...n,data:await oc(r,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return tN(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const r=/^flow-/,n=e.networkParameters.chainId;let i;return n==="flow-emulator"?i="local":r.test(n)?i=n.replace(r,""):i=n,{chainId:i}}else{if(e.streamConnection)return J4(e.streamConnection,In,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null};class cN extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}function lN(e){const t=e["sdk.transport"]||e["sdk.send"]||NC;return uN(t)?t:{send:t,subscribe:()=>{throw new cN}}}function uN(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const dN=10;let Su;async function Zw(){const e=await $e().all();return{get transport(){return lN(e)},get accessNodeUrl(){const t=e["accessNode.api"];return V(!!t,'Either opts.node or "accessNode.api" in config must be defined.'),t},get computeLimit(){return e["fcl.limit"]||(be.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),dN)},get customResolver(){return e["sdk.resolve"]},get customDecoders(){return Object.fromEntries(Object.entries(e).filter(t=>{let[r]=t;return r.startsWith("decoder.")}))},get contracts(){return Object.fromEntries(Object.entries(e).filter(t=>{let[r]=t;return r.startsWith("system.contracts.")}).map(t=>{let[r,n]=t;return[r.replace("system.contracts.",""),n]}))},get debug(){return Object.fromEntries(Object.entries(e).filter(t=>{let[r]=t;return r.startsWith("debug.")}))},get legacyContractIdentifiers(){return Object.fromEntries(Object.entries(e).filter(t=>{let[r]=t;return r.startsWith("0x")}))}}}async function vb(){return Su||($e().subscribe(()=>{Su=Zw()}),Su=Zw()),Su}function Bl(e){return async function(){const t=await vb();return e(t)(...arguments)}}const Xw=e=>typeof e=="function",Jw=e=>typeof e=="string",fN=()=>/\b(0x\w+)\b/g;function ev(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=e.matchAll(fN());for(const n of r){const i=n[0];if(t[i])return!0}return!1}const SI=()=>/import\s+"(\w+)"/g;function tv(e){return SI().test(e)}function hN(e){return e.matchAll(SI())}function pN(e){return async function(t){if(!Os(t)&&!yb(t))return t;var r=Gf(t,"ix.cadence");if(V(Xw(r)||Jw(r),"Cadence needs to be a function or a string."),Xw(r)&&(r=await r({})),V(Jw(r),"Cadence needs to be a string at this point."),V(!ev(r,e.legacyContractIdentifiers)||!tv(r),"Both account identifier and contract identifier syntax not simultaneously supported."),ev(r,e.legacyContractIdentifiers)&&(r=Object.entries(e.legacyContractIdentifiers||{}).reduce((n,i)=>{let[s,o]=i;const a=new RegExp("(\\b"+s+"\\b)","g");return n.replace(a,o)},r)),tv(r))for(const[n,i]of hN(r)){const s=e.contracts[i]||null;if(s){const o=e.contracts[i+".canonical"]||null,a=o?`import ${o} as ${i} from ${Xt(s)}`:`import ${i} from ${Xt(s)}`;r=r.replace(n,a)}else be({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${i}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:Re.warn})}return t.message.cadence=r,t}}const ry=e=>typeof e=="function";function gN(e){if(V(typeof e.xform!=null,`No type specified for argument: ${e.value}`),ry(e.xform))return e.xform(e.value);if(ry(e.xform.asArgument))return e.xform.asArgument(e.value);V(!1,"Invalid Argument",e)}async function xI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(V(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),ry(e.resolveArgument)){const r=await e.resolveArgument();return xI(r,t-1)}else return e}async function yN(e){if(Os(e)||yb(e))for(let[t,r]of Object.entries(e.arguments)){const n=await xI(r);e.arguments[t].asArgument=gN(n)}return e}const mN=e=>OI(kI(AI(e))),bN=e=>OI(kI(ON(e))),wN=(e,t)=>Be.Buffer.from(e.padEnd(t*2,"0"),"hex"),II=(e,t)=>Be.Buffer.from(e.padStart(t*2,"0"),"hex"),vN=wN(Be.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),OI=e=>vN+e,tp=e=>II(e,8),EN=e=>II(e,32),_N=e=>Be.Buffer.from(JSON.stringify(e),"utf8"),SN=e=>Be.Buffer.from(e,"utf8"),xN=e=>Be.Buffer.from(e,"hex"),IN=e=>{if(e!=null)return Be.Buffer.from(e,"hex")},kI=e=>lb(e).toString("hex"),AI=e=>(PN(e),[SN(e.cadence||""),e.arguments.map(_N),EN(e.refBlock||""),e.computeLimit,tp(ut(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,tp(ut(e.payer)),e.authorizers.map(t=>tp(ut(t)))]),ON=e=>(RN(e),[AI(e),kN(e)]),kN=e=>{var t;const r=AN(e);return(t=e.payloadSigs)==null?void 0:t.map(n=>({signerIndex:r.get(ut(n.address))||"",keyId:n.keyId,sig:n.sig,sigExt:IN(n.extensionData)})).sort((n,i)=>n.signerIndex>i.signerIndex?1:n.signerIndex<i.signerIndex?-1:n.keyId>i.keyId?1:n.keyId<i.keyId?-1:0).map(n=>{const i=[n.signerIndex,n.keyId,xN(n.sig)];return n.sigExt!=null&&i.push(n.sigExt),i})},AN=e=>{const t=new Map;let r=0;const n=i=>{t.has(i)||(t.set(i,r),r++)};return e.proposalKey.address&&n(e.proposalKey.address),n(e.payer),e.authorizers.forEach(n),t},PN=e=>{TN.forEach(t=>rf(e,t)),CN.forEach(t=>rf(e.proposalKey,t,"proposalKey"))},RN=e=>{var t;NN.forEach(r=>rf(e,r)),(t=e.payloadSigs)==null||t.forEach((r,n)=>{UN.forEach(i=>rf(r,i,"payloadSigs",n))})},tf=e=>typeof e=="number",ya=e=>typeof e=="string",PI=e=>e!==null&&typeof e=="object",ny=e=>PI(e)&&e instanceof Array,TN=[{name:"cadence",check:ya},{name:"arguments",check:ny},{name:"refBlock",check:ya,defaultVal:"0"},{name:"computeLimit",check:tf},{name:"proposalKey",check:PI},{name:"payer",check:ya},{name:"authorizers",check:ny}],CN=[{name:"address",check:ya},{name:"keyId",check:tf},{name:"sequenceNum",check:tf}],NN=[{name:"payloadSigs",check:ny}],UN=[{name:"address",check:ya},{name:"keyId",check:tf},{name:"sig",check:ya}],rf=(e,t,r,n)=>{const{name:i,check:s,defaultVal:o}=t;if(e[i]==null&&o!=null&&(e[i]=o),e[i]==null)throw BN(i,r,n);if(!s(e[i]))throw LN(i,r,n)},RI=(e,t,r)=>t?r==null?`${t}.${e}`:`${t}.${r}.${e}`:e,BN=(e,t,r)=>new Error(`Missing field ${RI(e,t,r)}`),LN=(e,t,r)=>new Error(`Invalid field ${RI(e,t,r)}`);function TI(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(r=>t.delete(r)):t.delete(e.payer),Array.from(t)}function CI(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const Eb=e=>{const t=()=>e.authorizations.map(s=>Xt(e.accounts[s].addr)).reduce((s,o)=>s.find(a=>a===o)?s:[...s,o],[]),r=()=>TI(e).map(s=>{const o={address:Xt(e.accounts[s].addr),keyId:e.accounts[s].keyId,sig:e.accounts[s].signature},a=e.accounts[s].extensionData;return a!=null&&(o.extensionData=a),o}),n=()=>CI(e).map(s=>{const o={address:Xt(e.accounts[s].addr),keyId:e.accounts[s].keyId,sig:e.accounts[s].signature},a=e.accounts[s].extensionData;return a!=null&&(o.extensionData=a),o}),i=e.proposer?{address:Xt(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(s=>e.arguments[s].asArgument),proposalKey:i,payer:Xt(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:r(),envelopeSigs:n()}},zn=5,DN=e=>`${Xt(e.addr)}-${e.keyId}`,jN=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),MN=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("-")};var Ur=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(Ur||{});function zN(){const e=" ",t=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;t.push(Array(n*4).fill(e).join("-")+r)},function(){return t.reduce((r,n)=>r+`
`+n)}]}function _b(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:_b(e.flatMap(r=>r),t-1)}function FN(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(r=>t.arguments[r].asArgument),data:{},interaction:t,voucher:Eb(t)}}catch(r){throw console.error("buildPreSignable",r),r}}async function $N(e,t){const r=Array.isArray(e.payer)?e.payer:[e.payer],n=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],i=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],s=Object.keys(e.accounts),o=[...new Set(r.concat(n,i))];for(const a of s)o.find(c=>c===a)||delete e.accounts[a]}function rv(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=DN(t):t.tempId=t.tempId||ob();const r=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=r.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=r.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=r.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function qN(e){const t=_b(e),r=new Set;return t.map(n=>{const i=MN(n.tempId,n.role.payer,n.role.proposer,n.role.authorizer,n.role.param);return r.has(i)?null:(r.add(i),n)}).filter(n=>n!==null)}async function HN(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zn,{debugLogger:n}=arguments.length>3?arguments[3]:void 0;if(r<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${zn}) reached. Ensure your authorization functions resolve to an account after ${zn} resolves.`);let i=e.accounts[t];if(!i)return[[],!1];if(n(`account: ${i.tempId}`,Math.max(zn-r,0)),i!=null&&i.resolve)if(jN(i==null?void 0:i.resolve)){n(`account: ${i.tempId} -- cache MISS`,Math.max(zn-r,0));const{resolve:s,...o}=i;let a=await s(o,FN(o,e));a=Array.isArray(a)?a:[a];let c=_b(a);return c=c.map(l=>rv(e,l)),i.resolve=c.map(l=>l.tempId),i=rv(e,i),[c.map(l=>l.tempId),!0]}else return n(`account: ${i.tempId} -- cache HIT`,Math.max(zn-r,0)),[i.resolve,!1];return[i.tempId?[i.tempId]:[],!1]}const Ac=e=>e===null?[]:Array.isArray(e)?e:[e];async function VN(e,t,r){var n;for(let i of Object.values(Ur))if(i===Ur.AUTHORIZATIONS||i===Ur.PAYER)e[i]=Ac(e[i]).reduce((s,o)=>o===t?s.concat(...r.filter(a=>i===Ur.PAYER&&a.role.payer||i===Ur.AUTHORIZATIONS&&a.role.authorizer).map(a=>a.tempId)):s.concat(o),[]);else if(i===Ur.PROPOSER){const s=r.filter(o=>o.role.proposer);if(s.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[i]=((n=s[0])==null?void 0:n.tempId)??e[i]}}async function KN(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zn,{debugLogger:n}=arguments.length>3?arguments[3]:void 0;V(e&&typeof e=="object","resolveAccountType Error: ix not defined");let i=new Set;for(let o of t){let a=e.accounts[o];V(!!a,"resolveAccountType Error: account not found");const[c,l]=await HN(e,o,r,{debugLogger:n});if(l){const u=c.map(f=>e.accounts[f]),d=qN(u);d.forEach(f=>i.add(f.tempId)),VN(e,o,d)}}let s;for(const o of e[Ur.PAYER]){let a=e.accounts[o];if(!s)s=a.addr;else if(s!==a.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return i}async function WN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Os(e)){Array.isArray(e.payer)||be.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[r,n]=zN();try{let i=zn,s=new Set([...Ac(e[Ur.PAYER]),...Ac(e[Ur.PROPOSER]),...Ac(e[Ur.AUTHORIZATIONS])]);for(;s.size>0;){if(i<=0)throw new Error(`resolveAccounts Error: Depth limit (${zn}) reached. Ensure your authorization functions resolve to an account after ${zn} resolves.`);s=await KN(e,s,i,{debugLogger:r}),i--}await $N(e,{debugLogger:r});for(const o of Object.values(Ur))V(Ac(e[o]).length>0||o===Ur.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${o}" found`);t.enableDebug&&console.debug(n())}catch(i){throw console.error(`=== SAD PANDA ===

`,i,`

=== SAD PANDA ===`),i}}return e}async function GN(e){if(Os(e))try{let t=TI(e);const r=mN(iv(e));await Promise.all(t.map(nv(e,r)));let n=CI(e);const i=bN({...iv(e),payloadSigs:t.map(s=>{const o={address:e.accounts[s].addr||"",keyId:e.accounts[s].keyId||0,sig:e.accounts[s].signature||""},a=e.accounts[s].extensionData;return a!=null&&(o.extensionData=a),o})});await Promise.all(n.map(nv(e,i)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function nv(e,t){return async function(r){const n=e.accounts[r];if(n.signature!=null&&n.signature!==void 0)return;const{signature:i,extensionData:s}=await n.signingFunction(YN(n,t,e));e.accounts[r].signature=i,s!=null&&(e.accounts[r].extensionData=s)}}function YN(e,t,r){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:ut(e.addr),keyId:e.keyId,roles:e.role,cadence:r.message.cadence,args:r.message.arguments.map(n=>r.arguments[n].asArgument),data:{},interaction:r,voucher:Eb(r)}}catch(n){throw console.error("buildSignable",n),n}}function iv(e){const t=ut((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),r=e.proposer?{address:ut(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(n=>e.arguments[n].asArgument),proposalKey:r,payer:t,authorizers:e.authorizations.map(n=>ut(e.accounts[n].addr)||"").reduce((n,i)=>n.find(s=>s===i)?n:[...n,i],[])}}async function QN(e){const t=Gf(e,"ix.validators",[]);return Dt(e,t.map(r=>n=>r(n,{Ok:cn,Bad:uI})))}async function ZN(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=ut(e.accounts[t].addr);return e}async function XN(e){const t=Gf(e,"ix.voucher-intercept");return Ca(t)&&await t(Eb(e)),e}function JN(e){return async function(t){return Os(t)&&(t.message.computeLimit=t.message.computeLimit||e.computeLimit),t}}const e6=e=>e,To=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e6;return async r=>{const n=s=>[`
Accounts:`,{proposer:s.proposer,authorizations:s.authorizations,payer:s.payer},`

Details:`,s.accounts].filter(Boolean),i=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];console.log(`debug[${e}] ---
`,...o,`


---`)};return await $e.get(`debug.${e}`)&&await t(r,i,n),r}};function NI(e){return async t=>Dt([pN(e),To("cadence",(r,n)=>n(r.message.cadence)),JN(e),To("compute limit",(r,n)=>n(r.message.computeLimit)),yN,To("arguments",(r,n)=>n(r.message.arguments,r.message)),WN,To("accounts",(r,n,i)=>n(...i(r))),r6(e),n6(e),GN,To("signatures",(r,n,i)=>n(...i(r))),ZN,QN,XN,To("resolved",(r,n)=>n(r))])(t)}const t6=Bl(NI);function r6(e){return async function(t){if(Os(t)&&t.message.refBlock==null){const r=e.transport.send;t.message.refBlock=(await r(EI([yd()]),{response:wb,Buffer:Be.Buffer,ix:bb},{get node(){return e.accessNodeUrl}}).then(In)).id}return t}}function n6(e){return async function(t){if(Os(t)){var r=Object.values(t.accounts).find(n=>n.role.proposer);if(V(r!==void 0,"Transactions require a proposer"),r&&r.sequenceNum==null){const n=e.transport.send;t.accounts[r.tempId].sequenceNum=await n(await EI([md(r.addr)]),{response:wb,Buffer:Be.Buffer,ix:bb},{get node(){return e.accessNodeUrl}}).then(In).then(i=>i.keys).then(i=>i.find(s=>s.index===r.keyId)).then(i=>i.sequenceNumber)}}return t}}function to(e){async function t(){var r,n;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=s.transport||e.transport,a=(n=(r=o.send)==null?void 0:r.bind)==null?void 0:n.call(r,o);V(!!a,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const c=s.resolve||e.customResolver||NI(e);return s.node=s.node||e.accessNodeUrl,Array.isArray(i)&&(i=Dt(Kf(),i)),a(await c(i),{response:wb,ix:bb,Buffer:Be.Buffer},s)}return t}const i6=Bl(to);function UI(e){function t(r){let{topic:n,args:i,onData:s,onError:o}=r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function c(){try{const u=await e,d=a.transport||u.transport,f=a.node||u.accessNodeUrl;return V(!!f,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),d.subscribe({topic:n,args:i,onData:s,onError:o},{node:f,...a})}catch(u){o(u instanceof Error?u:new Error(String(u)));return}}let l=c();return{unsubscribe:()=>{l.then(u=>{var d;return(d=u==null?void 0:u.unsubscribe)==null?void 0:d.call(u)})}}}return t}function s6(e){let{topic:t,args:r,onData:n,onError:i}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=vb();return UI(o)({topic:t,args:r,onData:n,onError:i},s)}function o6(e){let{topic:t,args:r,onData:n,onError:i}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=vb(),a=UI(o)({topic:t,args:r,onData:c=>{In(c).then(n).catch(l=>{var u;i(new Error(`Failed to decode response: ${l.message}`)),(u=a==null?void 0:a.unsubscribe)==null||u.call(a)})},onError:i},s);return a}function a6(e){async function t(r){return In(r,e.customDecoders)}return t}const c6=Bl(a6);function Sb(e){return vI("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function BI(e){return Dt([t=>(t.block.height=e,t),Sb(t=>{if(typeof t.block.isSealed=="boolean")throw new Error("Unable to specify both block height and isSealed.");if(t.block.id)throw new Error("Unable to specify both block height and block id.");return t})])}function LI(e){return Dt([t=>(t.block.id=e,cn(t)),Sb((t,r)=>{let{Ok:n,Bad:i}=r;return bI(t)?i(t,"Unable to specify a block id with a Get Account interaction."):typeof t.block.isSealed=="boolean"?i(t,"Unable to specify both block id and isSealed."):t.block.height?i(t,"Unable to specify both block id and block height."):n(t)})])}function DI(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Dt([t=>(t.block.isSealed=e,t),Sb(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function l6(e){async function t(r){let{height:n,id:i,isSealed:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return V(!(i&&n||i&&s||n&&s),"Method: account -- Only one of the following parameters can be provided: id, height, isSealed"),i?await to(e)([md(r),LI(i)],o).then(In):n?await to(e)([md(r),BI(n)],o).then(In):await to(e)([md(r),DI(s??!1)],o).then(In)}return t}const u6=Bl(l6);function d6(e){async function t(){let{sealed:r=!1,id:n,height:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return V(!(r&&n||r&&i),'Method: block -- Cannot pass "sealed" with "id" or "height"'),V(!(n&&i),'Method: block -- Cannot pass "id" and "height" simultaneously'),n?await to(e)([yd(),LI(n)],s).then(In):i?await to(e)([yd(),BI(i)],s).then(In):await to(e)([yd(r)],s).then(In)}return t}const f6=Bl(d6);function h6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Dt(e.map(t=>Wf(t,{role:hl.AUTHORIZER})))}function p6(){return Dt([mI,e=>cn(e)])}function jI(e){return t=>(t.message.computeLimit=e,t)}function MI(e){return Dt(e.map(fI))}function zI(e,t){return{value:e,xform:t}}function g6(e){return Wf(e,{role:hl.PROPOSER})}function y6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),Dt(e.map(t=>Wf(t,{role:hl.PAYER})))}function m6(){return Dt([hI,mb("ix.cadence",tI(...arguments))])}const b6=[],w6=null;function v6(){return Dt([pI,mb("ix.cadence",tI(...arguments)),e=>(e.message.refBlock=e.message.refBlock||w6,e.authorizations=e.authorizations||b6,cn(e))])}var E6={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Lr,function(){return r={418:function(i,s){(function(o,a){for(var c in a)o[c]=a[c]})(s,function(o){var a={};function c(l){if(a[l])return a[l].exports;var u=a[l]={i:l,l:!1,exports:{}};return o[l].call(u.exports,u,u.exports,c),u.l=!0,u.exports}return c.m=o,c.c=a,c.i=function(l){return l},c.d=function(l,u,d){c.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:d})},c.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return c.d(u,"a",u),u},c.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},c.p="",c(c.s=1)}([function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var l=c(3),u=function(){function d(f,h){f===void 0&&(f={}),h===void 0&&(h={splitValues:!1});var y,g=this;this.headersMap={},f&&(typeof Headers<"u"&&f instanceof Headers?l.getHeaderKeys(f).forEach(function(v){l.getHeaderValues(f,v).forEach(function(b){h.splitValues?g.append(v,l.splitHeaderValue(b)):g.append(v,b)})}):typeof(y=f)=="object"&&typeof y.headersMap=="object"&&typeof y.forEach=="function"?f.forEach(function(v,b){g.append(v,b)}):typeof Map<"u"&&f instanceof Map?f.forEach(function(v,b){g.append(b,v)}):typeof f=="string"?this.appendFromString(f):typeof f=="object"&&Object.getOwnPropertyNames(f).forEach(function(v){var b=f[v];Array.isArray(b)?b.forEach(function(w){g.append(v,w)}):g.append(v,b)}))}return d.prototype.appendFromString=function(f){for(var h=f.split(`\r
`),y=0;y<h.length;y++){var g=h[y],v=g.indexOf(":");if(v>0){var b=g.substring(0,v).trim(),w=g.substring(v+1).trim();this.append(b,w)}}},d.prototype.delete=function(f,h){var y=l.normalizeName(f);if(h===void 0)delete this.headersMap[y];else{var g=this.headersMap[y];if(g){var v=g.indexOf(h);v>=0&&g.splice(v,1),g.length===0&&delete this.headersMap[y]}}},d.prototype.append=function(f,h){var y=this,g=l.normalizeName(f);Array.isArray(this.headersMap[g])||(this.headersMap[g]=[]),Array.isArray(h)?h.forEach(function(v){y.headersMap[g].push(l.normalizeValue(v))}):this.headersMap[g].push(l.normalizeValue(h))},d.prototype.set=function(f,h){var y=l.normalizeName(f);if(Array.isArray(h)){var g=[];h.forEach(function(v){g.push(l.normalizeValue(v))}),this.headersMap[y]=g}else this.headersMap[y]=[l.normalizeValue(h)]},d.prototype.has=function(f,h){var y=this.headersMap[l.normalizeName(f)];if(!Array.isArray(y))return!1;if(h!==void 0){var g=l.normalizeValue(h);return y.indexOf(g)>=0}return!0},d.prototype.get=function(f){var h=this.headersMap[l.normalizeName(f)];return h!==void 0?h.concat():[]},d.prototype.forEach=function(f){var h=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(y){f(y,h.headersMap[y])},this)},d.prototype.toHeaders=function(){if(typeof Headers<"u"){var f=new Headers;return this.forEach(function(h,y){y.forEach(function(g){f.append(h,g)})}),f}throw new Error("Headers class is not defined")},d}();a.BrowserHeaders=u},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var l=c(0);a.BrowserHeaders=l.BrowserHeaders},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.iterateHeaders=function(l,u){for(var d=l[Symbol.iterator](),f=d.next();!f.done;)u(f.value[0]),f=d.next()},a.iterateHeadersKeys=function(l,u){for(var d=l.keys(),f=d.next();!f.done;)u(f.value),f=d.next()}},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var l=c(2);a.normalizeName=function(u){if(typeof u!="string"&&(u=String(u)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(u))throw new TypeError("Invalid character in header field name");return u.toLowerCase()},a.normalizeValue=function(u){return typeof u!="string"&&(u=String(u)),u},a.getHeaderValues=function(u,d){var f=u;if(f instanceof Headers&&f.getAll)return f.getAll(d);var h=f.get(d);return h&&typeof h=="string"?[h]:h},a.getHeaderKeys=function(u){var d=u,f={},h=[];return d.keys?l.iterateHeadersKeys(d,function(y){f[y]||(f[y]=!0,h.push(y))}):d.forEach?d.forEach(function(y,g){f[g]||(f[g]=!0,h.push(g))}):l.iterateHeaders(d,function(y){var g=y[0];f[g]||(f[g]=!0,h.push(g))}),h},a.splitHeaderValue=function(u){var d=[];return u.split(", ").forEach(function(f){f.split(",").forEach(function(h){d.push(h)})}),d}}]))},617:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.ChunkParser=s.ChunkType=s.encodeASCII=s.decodeASCII=void 0;var a,c=o(65);function l(v){return(b=v)===9||b===10||b===13||v>=32&&v<=126;var b}function u(v){for(var b=0;b!==v.length;++b)if(!l(v[b]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(v))}function d(v){return(128&v.getUint8(0))==128}function f(v){return v.getUint32(1,!1)}function h(v,b,w){return v.byteLength-b>=w}function y(v,b,w){if(v.slice)return v.slice(b,w);var _=v.length;w!==void 0&&(_=w);for(var I=new Uint8Array(_-b),R=0,T=b;T<_;T++)I[R++]=v[T];return I}s.decodeASCII=u,s.encodeASCII=function(v){for(var b=new Uint8Array(v.length),w=0;w!==v.length;++w){var _=v.charCodeAt(w);if(!l(_))throw new Error("Metadata contains invalid ASCII");b[w]=_}return b},function(v){v[v.MESSAGE=1]="MESSAGE",v[v.TRAILERS=2]="TRAILERS"}(a=s.ChunkType||(s.ChunkType={}));var g=function(){function v(){this.buffer=null,this.position=0}return v.prototype.parse=function(b,w){if(b.length===0&&w)return[];var _,I=[];if(this.buffer==null)this.buffer=b,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=b,this.position=0;else{var R=this.buffer.byteLength-this.position,T=new Uint8Array(R+b.byteLength),C=y(this.buffer,this.position);T.set(C,0);var L=new Uint8Array(b);T.set(L,R),this.buffer=T,this.position=0}for(;;){if(!h(this.buffer,this.position,5))return I;var N=y(this.buffer,this.position,this.position+5),F=new DataView(N.buffer,N.byteOffset,N.byteLength),q=f(F);if(!h(this.buffer,this.position,5+q))return I;var j=y(this.buffer,this.position+5,this.position+5+q);if(this.position+=5+q,d(F))return I.push({chunkType:a.TRAILERS,trailers:(_=j,new c.Metadata(u(_)))}),I;I.push({chunkType:a.MESSAGE,data:j})}},v}();s.ChunkParser=g},8:function(i,s){var o;Object.defineProperty(s,"__esModule",{value:!0}),s.httpStatusToCode=s.Code=void 0,function(a){a[a.OK=0]="OK",a[a.Canceled=1]="Canceled",a[a.Unknown=2]="Unknown",a[a.InvalidArgument=3]="InvalidArgument",a[a.DeadlineExceeded=4]="DeadlineExceeded",a[a.NotFound=5]="NotFound",a[a.AlreadyExists=6]="AlreadyExists",a[a.PermissionDenied=7]="PermissionDenied",a[a.ResourceExhausted=8]="ResourceExhausted",a[a.FailedPrecondition=9]="FailedPrecondition",a[a.Aborted=10]="Aborted",a[a.OutOfRange=11]="OutOfRange",a[a.Unimplemented=12]="Unimplemented",a[a.Internal=13]="Internal",a[a.Unavailable=14]="Unavailable",a[a.DataLoss=15]="DataLoss",a[a.Unauthenticated=16]="Unauthenticated"}(o=s.Code||(s.Code={})),s.httpStatusToCode=function(a){switch(a){case 0:return o.Internal;case 200:return o.OK;case 400:return o.InvalidArgument;case 401:return o.Unauthenticated;case 403:return o.PermissionDenied;case 404:return o.NotFound;case 409:return o.Aborted;case 412:return o.FailedPrecondition;case 429:return o.ResourceExhausted;case 499:return o.Canceled;case 500:return o.Unknown;case 501:return o.Unimplemented;case 503:return o.Unavailable;case 504:return o.DeadlineExceeded;default:return o.Unknown}}},934:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.client=void 0;var a=o(65),c=o(617),l=o(8),u=o(346),d=o(57),f=o(882);s.client=function(g,v){return new h(g,v)};var h=function(){function g(v,b){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new c.ChunkParser,this.methodDefinition=v,this.props=b,this.createTransport()}return g.prototype.createTransport=function(){var v=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,b={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:v,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(b):this.transport=d.makeDefaultTransport(b)},g.prototype.onTransportHeaders=function(v,b){if(this.props.debug&&u.debug("onHeaders",v,b),this.closed)this.props.debug&&u.debug("grpc.onHeaders received after request was closed - ignoring");else if(b!==0){this.responseHeaders=v,this.props.debug&&u.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var w=y(v);this.props.debug&&u.debug("onHeaders.gRPCStatus",w);var _=w&&w>=0?w:l.httpStatusToCode(b);this.props.debug&&u.debug("onHeaders.code",_);var I=v.get("grpc-message")||[];if(this.props.debug&&u.debug("onHeaders.gRPCMessage",I),this.rawOnHeaders(v),_!==l.Code.OK){var R=this.decodeGRPCStatus(I[0]);this.rawOnError(_,R,v)}}},g.prototype.onTransportChunk=function(v){var b=this;if(this.closed)this.props.debug&&u.debug("grpc.onChunk received after request was closed - ignoring");else{var w=[];try{w=this.parser.parse(v)}catch(_){return this.props.debug&&u.debug("onChunk.parsing error",_,_.message),void this.rawOnError(l.Code.Internal,"parsing error: "+_.message)}w.forEach(function(_){if(_.chunkType===c.ChunkType.MESSAGE){var I=b.methodDefinition.responseType.deserializeBinary(_.data);b.rawOnMessage(I)}else _.chunkType===c.ChunkType.TRAILERS&&(b.responseHeaders?(b.responseTrailers=new a.Metadata(_.trailers),b.props.debug&&u.debug("onChunk.trailers",b.responseTrailers)):(b.responseHeaders=new a.Metadata(_.trailers),b.rawOnHeaders(b.responseHeaders)))})}},g.prototype.onTransportEnd=function(){if(this.props.debug&&u.debug("grpc.onEnd"),this.closed)this.props.debug&&u.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var v=y(this.responseTrailers);if(v!==null){var b=this.responseTrailers.get("grpc-message"),w=this.decodeGRPCStatus(b[0]);this.rawOnEnd(v,w,this.responseTrailers)}else this.rawOnError(l.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(l.Code.Unknown,"Response closed without headers");var _=y(this.responseHeaders),I=this.responseHeaders.get("grpc-message");if(this.props.debug&&u.debug("grpc.headers only response ",_,I),_===null)return void this.rawOnEnd(l.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var R=this.decodeGRPCStatus(I[0]);this.rawOnEnd(_,R,this.responseHeaders)}},g.prototype.decodeGRPCStatus=function(v){if(!v)return"";try{return decodeURIComponent(v)}catch{return v}},g.prototype.rawOnEnd=function(v,b,w){var _=this;this.props.debug&&u.debug("rawOnEnd",v,b,w),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(I){if(!_.closed)try{I(v,b,w)}catch(R){setTimeout(function(){throw R},0)}}))},g.prototype.rawOnHeaders=function(v){this.props.debug&&u.debug("rawOnHeaders",v),this.completed||this.onHeadersCallbacks.forEach(function(b){try{b(v)}catch(w){setTimeout(function(){throw w},0)}})},g.prototype.rawOnError=function(v,b,w){var _=this;w===void 0&&(w=new a.Metadata),this.props.debug&&u.debug("rawOnError",v,b),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(I){if(!_.closed)try{I(v,b,w)}catch(R){setTimeout(function(){throw R},0)}}))},g.prototype.rawOnMessage=function(v){var b=this;this.props.debug&&u.debug("rawOnMessage",v.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(w){if(!b.closed)try{w(v)}catch(_){setTimeout(function(){throw _},0)}})},g.prototype.onHeaders=function(v){this.onHeadersCallbacks.push(v)},g.prototype.onMessage=function(v){this.onMessageCallbacks.push(v)},g.prototype.onEnd=function(v){this.onEndCallbacks.push(v)},g.prototype.start=function(v){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var b=new a.Metadata(v||{});b.set("content-type","application/grpc-web+proto"),b.set("x-grpc-web","1"),this.transport.start(b)},g.prototype.send=function(v){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var b=f.frameRequest(v);this.transport.sendMessage(b)},g.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},g.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&u.debug("request.abort aborting request"),this.transport.cancel()},g}();function y(g){var v=g.get("grpc-status")||[];if(v.length>0)try{var b=v[0];return parseInt(b,10)}catch{return null}return null}},346:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.debug=void 0,s.debug=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];console.debug?console.debug.apply(null,o):console.log.apply(null,o)}},607:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.grpc=void 0;var a,c=o(418),l=o(57),u=o(229),d=o(540),f=o(210),h=o(859),y=o(8),g=o(938),v=o(35),b=o(934);(a=s.grpc||(s.grpc={})).setDefaultTransport=l.setDefaultTransportFactory,a.CrossBrowserHttpTransport=h.CrossBrowserHttpTransport,a.FetchReadableStreamTransport=u.FetchReadableStreamTransport,a.XhrTransport=f.XhrTransport,a.WebsocketTransport=d.WebsocketTransport,a.Code=y.Code,a.Metadata=c.BrowserHeaders,a.client=function(w,_){return b.client(w,_)},a.invoke=g.invoke,a.unary=v.unary},938:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.invoke=void 0;var a=o(934);s.invoke=function(c,l){if(c.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var u=a.client(c,{host:l.host,transport:l.transport,debug:l.debug});return l.onHeaders&&u.onHeaders(l.onHeaders),l.onMessage&&u.onMessage(l.onMessage),l.onEnd&&u.onEnd(l.onEnd),u.start(l.metadata),u.send(l.request),u.finishSend(),{close:function(){u.close()}}}},65:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=o(418);Object.defineProperty(s,"Metadata",{enumerable:!0,get:function(){return a.BrowserHeaders}})},57:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.makeDefaultTransport=s.setDefaultTransportFactory=void 0;var a=o(859),c=function(l){return a.CrossBrowserHttpTransport({withCredentials:!1})(l)};s.setDefaultTransportFactory=function(l){c=l},s.makeDefaultTransport=function(l){return c(l)}},229:function(i,s,o){var a=this&&this.__assign||function(){return(a=Object.assign||function(d){for(var f,h=1,y=arguments.length;h<y;h++)for(var g in f=arguments[h])Object.prototype.hasOwnProperty.call(f,g)&&(d[g]=f[g]);return d}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.detectFetchSupport=s.FetchReadableStreamTransport=void 0;var c=o(65),l=o(346);s.FetchReadableStreamTransport=function(d){return function(f){return function(h,y){return h.debug&&l.debug("fetchRequest",h),new u(h,y)}(f,d)}};var u=function(){function d(f,h){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=f,this.init=h}return d.prototype.pump=function(f,h){var y=this;if(this.reader=f,this.cancelled)return this.options.debug&&l.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(g){y.options.debug&&l.debug("Fetch.pump.reader.cancel exception",g)});this.reader.read().then(function(g){if(g.done)return y.options.onEnd(),h;y.options.onChunk(g.value),y.pump(y.reader,h)}).catch(function(g){y.cancelled?y.options.debug&&l.debug("Fetch.catch - request cancelled"):(y.cancelled=!0,y.options.debug&&l.debug("Fetch.catch",g.message),y.options.onEnd(g))})},d.prototype.send=function(f){var h=this;fetch(this.options.url,a(a({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:f,signal:this.controller&&this.controller.signal})).then(function(y){if(h.options.debug&&l.debug("Fetch.response",y),h.options.onHeaders(new c.Metadata(y.headers),y.status),!y.body)return y;h.pump(y.body.getReader(),y)}).catch(function(y){h.cancelled?h.options.debug&&l.debug("Fetch.catch - request cancelled"):(h.cancelled=!0,h.options.debug&&l.debug("Fetch.catch",y.message),h.options.onEnd(y))})},d.prototype.sendMessage=function(f){this.send(f)},d.prototype.finishSend=function(){},d.prototype.start=function(f){this.metadata=f},d.prototype.cancel=function(){var f=this;this.cancelled?this.options.debug&&l.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&l.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&l.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&l.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(h){f.options.debug&&l.debug("Fetch.cancel.reader.cancel exception",h)})):this.options.debug&&l.debug("Fetch.cancel before reader"))},d}();s.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.CrossBrowserHttpTransport=void 0;var a=o(229),c=o(210);s.CrossBrowserHttpTransport=function(l){if(a.detectFetchSupport()){var u={credentials:l.withCredentials?"include":"same-origin"};return a.FetchReadableStreamTransport(u)}return c.XhrTransport({withCredentials:l.withCredentials})}},210:function(i,s,o){var a,c=this&&this.__extends||(a=function(v,b){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var I in _)Object.prototype.hasOwnProperty.call(_,I)&&(w[I]=_[I])})(v,b)},function(v,b){function w(){this.constructor=v}a(v,b),v.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)});Object.defineProperty(s,"__esModule",{value:!0}),s.stringToArrayBuffer=s.MozChunkedArrayBufferXHR=s.XHR=s.XhrTransport=void 0;var l=o(65),u=o(346),d=o(849);s.XhrTransport=function(v){return function(b){if(d.detectMozXHRSupport())return new h(b,v);if(d.detectXHROverrideMimeTypeSupport())return new f(b,v);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var f=function(){function v(b,w){this.options=b,this.init=w}return v.prototype.onProgressEvent=function(){this.options.debug&&u.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var b=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var w=g(b);this.options.onChunk(w)},v.prototype.onLoadEvent=function(){this.options.debug&&u.debug("XHR.onLoadEvent"),this.options.onEnd()},v.prototype.onStateChange=function(){this.options.debug&&u.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new l.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},v.prototype.sendMessage=function(b){this.xhr.send(b)},v.prototype.finishSend=function(){},v.prototype.start=function(b){var w=this;this.metadata=b;var _=new XMLHttpRequest;this.xhr=_,_.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(I,R){_.setRequestHeader(I,R.join(", "))}),_.withCredentials=!!this.init.withCredentials,_.addEventListener("readystatechange",this.onStateChange.bind(this)),_.addEventListener("progress",this.onProgressEvent.bind(this)),_.addEventListener("loadend",this.onLoadEvent.bind(this)),_.addEventListener("error",function(I){w.options.debug&&u.debug("XHR.error",I),w.options.onEnd(I.error)})},v.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},v.prototype.cancel=function(){this.options.debug&&u.debug("XHR.abort"),this.xhr.abort()},v}();s.XHR=f;var h=function(v){function b(){return v!==null&&v.apply(this,arguments)||this}return c(b,v),b.prototype.configureXhr=function(){this.options.debug&&u.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},b.prototype.onProgressEvent=function(){var w=this.xhr.response;this.options.debug&&u.debug("MozXHR.onProgressEvent: ",new Uint8Array(w)),this.options.onChunk(new Uint8Array(w))},b}(f);function y(v,b){var w=v.charCodeAt(b);if(w>=55296&&w<=56319){var _=v.charCodeAt(b+1);_>=56320&&_<=57343&&(w=65536+(w-55296<<10)+(_-56320))}return w}function g(v){for(var b=new Uint8Array(v.length),w=0,_=0;_<v.length;_++){var I=String.prototype.codePointAt?v.codePointAt(_):y(v,_);b[w++]=255&I}return b}s.MozChunkedArrayBufferXHR=h,s.stringToArrayBuffer=g},849:function(i,s){var o;function a(){if(o!==void 0)return o;if(XMLHttpRequest){o=new XMLHttpRequest;try{o.open("GET","https://localhost")}catch{}}return o}function c(l){var u=a();if(!u)return!1;try{return u.responseType=l,u.responseType===l}catch{}return!1}Object.defineProperty(s,"__esModule",{value:!0}),s.detectXHROverrideMimeTypeSupport=s.detectMozXHRSupport=s.xhrSupportsResponseType=void 0,s.xhrSupportsResponseType=c,s.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&c("moz-chunked-arraybuffer")},s.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.WebsocketTransport=void 0;var a,c=o(346),l=o(617);(function(d){d[d.FINISH_SEND=1]="FINISH_SEND"})(a||(a={}));var u=new Uint8Array([1]);s.WebsocketTransport=function(){return function(d){return function(f){f.debug&&c.debug("websocketRequest",f);var h,y=function(b){if(b.substr(0,8)==="https://")return"wss://"+b.substr(8);if(b.substr(0,7)==="http://")return"ws://"+b.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(f.url),g=[];function v(b){if(b===a.FINISH_SEND)h.send(u);else{var w=b,_=new Int8Array(w.byteLength+1);_.set(new Uint8Array([0])),_.set(w,1),h.send(_)}}return{sendMessage:function(b){h&&h.readyState!==h.CONNECTING?v(b):g.push(b)},finishSend:function(){h&&h.readyState!==h.CONNECTING?v(a.FINISH_SEND):g.push(a.FINISH_SEND)},start:function(b){(h=new WebSocket(y,["grpc-websockets"])).binaryType="arraybuffer",h.onopen=function(){var w;f.debug&&c.debug("websocketRequest.onopen"),h.send((w="",b.forEach(function(_,I){w+=_+": "+I.join(", ")+`\r
`}),l.encodeASCII(w))),g.forEach(function(_){v(_)})},h.onclose=function(w){f.debug&&c.debug("websocketRequest.onclose",w),f.onEnd()},h.onerror=function(w){f.debug&&c.debug("websocketRequest.onerror",w)},h.onmessage=function(w){f.onChunk(new Uint8Array(w.data))}},cancel:function(){f.debug&&c.debug("websocket.abort"),h.close()}}}(d)}}},35:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.unary=void 0;var a=o(65),c=o(934);s.unary=function(l,u){if(l.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(l.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var d=null,f=null,h=c.client(l,{host:u.host,transport:u.transport,debug:u.debug});return h.onHeaders(function(y){d=y}),h.onMessage(function(y){f=y}),h.onEnd(function(y,g,v){u.onEnd({status:y,statusMessage:g,headers:d||new a.Metadata,message:f,trailers:v})}),h.start(u.metadata),h.send(u.request),h.finishSend(),{close:function(){h.close()}}}},882:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.frameRequest=void 0,s.frameRequest=function(o){var a=o.serializeBinary(),c=new ArrayBuffer(a.byteLength+5);return new DataView(c,1,4).setUint32(0,a.length,!1),new Uint8Array(c,5).set(a),new Uint8Array(c)}}},n={},function i(s){if(n[s])return n[s].exports;var o=n[s]={exports:{}};return r[s].call(o.exports,o,o.exports,i),o.exports}(607);var r,n})})(E6);var sv=/^[0-9]+$/,_6=function(e,t){var r=sv.test(e),n=sv.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},ov=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,S6=function(e,t){if(typeof e!="string"||typeof t!="string")throw new Error("Invalid input");var r=e.match(ov),n=t.match(ov);if(!r||!n)throw new Error("Invalid input");for(var i=1;i<=3;i++){if(parseInt(r[i])>parseInt(n[i]))return 1;if(parseInt(r[i])<parseInt(n[i]))return-1}if(r[4]&&n[4])for(var s=(r[4]||"").split("."),o=(n[4]||"").split("."),a=0;a<Math.max(s.length,o.length);a++){if(s[a]===void 0)return-1;if(o[a]===void 0)return 1;var c=_6(s[a],o[a]);if(c!==0)return c}return 0};const xb="1.30.1",Yf=e=>t=>typeof t===e,gi=e=>e!=null,x6=Yf("object"),ma=Yf("string"),FI=Yf("function"),I6=Yf("number");function $I(e){return FI(e)?e(zI,E4):[]}async function qI(e,t,r){V(gi(r),`${t}(opts) -- opts is required`),V(x6(r),`${t}(opts) -- opts must be an object`),V(!(r.cadence&&r.template),`${t}({ template, cadence }) -- cannot pass both cadence and template`),V(gi(r.cadence||(r==null?void 0:r.template)),`${t}({ cadence }) -- cadence is required`),V(ma(r.cadence)||(r==null?void 0:r.template),`${t}({ cadence }) -- cadence must be a string`),V(await e.config.get("accessNode.api"),`${t}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function O6(e,t){return qI(e,"mutate",t)}async function k6(e,t){return qI(e,"query",t)}async function av(e){let{url:t}=e;V(typeof t<"u","retrieve({ url }) -- url must be defined");let r;try{r=await jx(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return r.ok?await r.json():null}const cv=new Map([["http",av],["https",av]]);async function A6(e,t){let{url:r}=t;V(typeof r<"u","retrieve({ url }) -- url must be defined"),V(typeof r=="string","retrieve({ url }) -- url must be a string");const n=await e.config.where(/^document\.resolver\./);Object.keys(n).map(a=>{const c=n[a],l=a.replace(/^document\.resolver\./,"");cv.set(l,c)});const i=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(r);V(i,"Failed to parse URL");const s=i[1];V(i,"Failed to parse URL protocol");const o=cv.get(s);return V(o,`No resolver found for protcol=${s}`),await o({url:r})}async function P6(e){var t;let{network:r,template:n}=e;return V(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys((t=n==null?void 0:n.data)==null?void 0:t.dependencies).map(i=>{var s,o;const a=Object.values((o=(s=n==null?void 0:n.data)==null?void 0:s.dependencies)==null?void 0:o[i]);V(a!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${i}`),V(a.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${i}`);const c=a[0],l=c==null?void 0:c[r];return V(l,`deriveCadenceByNetwork100 -- Could not find ${r} network information for dependency: ${i}`),[i,l==null?void 0:l.address]}).reduce((i,s)=>{let[o,a]=s;const c=new RegExp("(\\b"+o+"\\b)","g");return i.replace(c,a)},n.data.cadence)}function R6(e){let{cadence:t,networkDependencies:r}=e;return Object.keys(r).reduce((n,i)=>{const s=r[i],o=new RegExp(`import "\\b${i}\\b"`,"g");return n.replace(o,`import ${i} from ${s}`)},t)}async function T6(e){var t,r,n,i,s,o;let{network:a,template:c}=e;V(c.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.1.0");const l={};return(t=c==null?void 0:c.data)==null||t.dependencies.forEach(u=>{u.contracts.forEach(d=>{const f=d.contract;d.networks.forEach(h=>{h.network===a&&(l[f]=h.address)}),V(l[f]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${a} ${f}`)})}),V(Object.keys(l).length===((r=c==null?void 0:c.data)==null?void 0:r.dependencies.length),`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${l}`),V(Object.keys(l).length===Object.values(l).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${a} dependencies:  ${l}`),V(!!((i=(n=c==null?void 0:c.data)==null?void 0:n.cadence)!=null&&i.body),`no cadence found -- Could not replace import dependencies: ${l}`),R6({cadence:(o=(s=c==null?void 0:c.data)==null?void 0:s.cadence)==null?void 0:o.body,networkDependencies:l})}async function C6(e){let{network:t,template:r}=e;switch(V(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),V(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),V(r!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),V(typeof r=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),V(r.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),r.f_version){case"1.1.0":return await T6({network:t,template:r});case"1.0.0":return await P6({network:t,template:r});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function N6(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(await e.sdk.send([p6()],t).then(e.sdk.decode)).chainId}function ar(){return{config:$e(),sdk:{send:i6,decode:c6,subscribe:o6,subscribeRaw:s6,account:u6,block:f6,resolve:t6}}}let Co={},lv=!1;function Ll(e){async function t(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=await e.config.get("flow.network"),i=await e.config.get("env");i&&!lv&&(be.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),lv=!0);const s=r.node||await e.config.get("accessNode.api");if(!s){if(n)return n;if(i)return i;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(Co[s])try{return await Co[s]}catch{}Co[s]||(Co[s]=N6(e,r).catch(o=>{throw Co[s]=null,o}));try{return await Co[s]}catch(o){if(n)return n;if(i)return i;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${o.message}`)}}return t}const HI=Ll(ar());function U6(e){return e||(e=ar()),e.config.subscribe(()=>{Ll(e)({enableRequestLogging:!1}).catch(()=>{})})}async function VI(e,t){ma(t==null?void 0:t.template)&&(t.template=await A6(e,{url:t==null?void 0:t.template}));const r=t.cadence||await C6({template:t.template,network:await Ll(e)(t)});return t.cadence=r,t}function B6(e){async function t(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await k6(e,r),r=await VI(e,r),e.sdk.send([m6(r.cadence),MI($I(r.args||[])),DI(r.isSealed??!1),r.limit&&typeof r.limit=="number"&&jI(r.limit)])}return t}ar();function KI(e){async function t(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return B6(e)(r).then(e.sdk.decode)}return t}const iy=KI(ar()),Br={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},qa={f_type:"Service",f_vsn:"1.0.0"},WI={f_type:"Identity",f_vsn:"1.0.0"},L6={f_type:"USER",f_vsn:"1.0.0"},D6={f_type:"PollingResponse",f_vsn:"1.0.0"},j6={f_type:"CompositeSignature",f_vsn:"1.0.0"},M6="USER_SIGNATURE",z6=e=>{if(e.appIdentifier){const{appIdentifier:t,address:r,nonce:n,signatures:i}=e;return V(ma(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),V(ma(r)&&ut(r).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),V(/^[0-9a-f]+$/i.test(n),"nonce must be a hex string"),V(Array.isArray(i)&&i.every((s,o,a)=>s.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),V(i.map(s=>s.addr).every((s,o,a)=>s===a[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:r,compSigs:n}=e;return V(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),V(ma(r)&&ut(r).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),V(Array.isArray(n)&&n.every((i,s,o)=>i.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),V(n.map(i=>i.addr).every((i,s,o)=>i===o[0]),"User signatures to be verified must be from a single account address"),!0}},F6=async(e,t,r)=>{const n="verifyUserSignatures",i=await Ll(e)(r),s={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},o=r.fclCryptoContract||s[i];return V(o,`${n}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${i}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${o}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};function $6(e){async function t(r,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Xt(n[0].addr);z6({message:r,address:s,compSigs:n});const o=[],a=[];for(const c of n)o.push(c.signature),a.push(c.keyId.toString());return KI(e)({cadence:await F6(e,M6,i),args:(c,l)=>[c(s,l.Address),c(r,l.String),c(a,l.Array(l.Int)),c(o,l.Array(l.String))]})}return t}ar();const q6=$6(ar());be.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(e,t){return q6(e,t)}});ar();async function uv(e,t){return Object.fromEntries(Object.entries(await e.config.where(t)).map(r=>{let[n,i]=r;return[n.replace(t,""),i]}))}ar();ar();const No=()=>{throw new Error("Platform specific Core Strategies are not initialized")},H6={[Br["EXT/RPC"]]:No,[Br["HTTP/POST"]]:No,[Br["IFRAME/RPC"]]:No,[Br["POP/RPC"]]:No,[Br["TAB/RPC"]]:No,[Br["EXT/RPC"]]:No},V6=["ServicePlugin"],K6=["discovery-service"],W6=e=>{const{services:t=[],serviceStrategy:r}=e;V(Array.isArray(t),"Services must be an array");for(const n of t)V(gi(n.f_type)&&n.f_type==="Service","Service is required"),V(gi(n.type)&&n.type==="authn",`Service must be type authn. Received ${n.type}`),V(n.method in Br||r.method===n.method,`Service method ${n.method} is not supported`);return V(gi(r),"Service strategy is required"),V(gi(r.method)&&ma(r.method),"Service strategy method is required"),V(gi(r.exec)&&FI(r.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:r}},G6=e=>{let{coreStrategies:t}=e,r=new Set,n=new Map(Object.entries(t));const i=o=>{if(V(K6.includes(o.type),`Service Plugin type ${o.type} is not supported`),o.type==="discovery-service"){const{discoveryServices:a,serviceStrategy:c}=W6(o);s(a),n.has(c.method)?be({title:"Add Service Plugin",message:`Service strategy for ${c.method} already exists`,level:Re.warn}):n.set(c.method,c.exec)}},s=o=>r=new Set([...o]);return Object.freeze({add:i,getServices:()=>[...r],getStrategy:o=>n.get(o),getStrategies:()=>[...n.keys()]})},Y6=e=>{let t;V(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const r of t)V(gi(r.name),"Plugin name is required"),V(gi(r.f_type),"Plugin f_type is required"),V(V6.includes(r.f_type),`Plugin type ${r.f_type} is not supported`);return t},Q6=()=>{const e=new Map;return Object.freeze({add:t=>{const r=Y6(t);for(const n of r)e.set(n.name,n),n.f_type==="ServicePlugin"&&gl.add(n)},getPlugins:()=>e})};let gl;const GI=()=>typeof gl<"u",YI=e=>{let{coreStrategies:t}=e;if(GI())return gl;const r=G6({coreStrategies:t});return gl=r,r},Dl=()=>GI()?gl:(console.warn("Registry is not initialized, it will be initialized with stub core strategies"),YI({coreStrategies:H6})),dv=Q6(),QI=async()=>[...(window==null?void 0:window.fcl_extensions)||[],...Dl().getServices()];async function Z6(e,t){const r=await e.config.get("discovery.authn.include",[]),n=await e.config.get("discovery.authn.exclude",[]),i=await e.config.get("discovery.features.suggested",[]),s=await e.config.first(["discovery.wallet.method","discovery.wallet.method.default"],void 0),o=t!=null&&t.method?t.method:s,a=(t==null?void 0:t.endpoint)??await e.config.first(["discovery.wallet","challenge.handshake"],void 0);return V(a,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...t,type:"authn",endpoint:a,method:o,discoveryAuthnInclude:r,discoveryAuthnExclude:n,discoveryFeaturesSuggested:i}}const X6=globalThis.URL;let Ib=class extends X6{constructor(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];super(e,t,...n)}};async function J6(e){var t;let{context:r,types:n}=e;const i=await r.config.get("discovery.authn.endpoint");V(!!i,'"discovery.authn.endpoint" in config must be defined.');const s=await r.config.get("discovery.authn.include",[]),o=await r.config.get("discovery.authn.exclude",[]),a=new Ib(i);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,fclVersion:xb,include:s,exclude:o,features:{suggested:await r.config.get("discovery.features.suggested",[])},clientServices:await QI(),supportedStrategies:Dl().getStrategies(),userAgent:(t=window==null?void 0:window.navigator)==null?void 0:t.userAgent,network:await HI()})}).then(c=>c.json())}const Vn={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},e5=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},sy=async e=>{try{const t=await J6({context:e,types:[Vn.AUTHN]});bt(Vn.AUTHN,Vn.UPDATE_RESULTS,{results:t})}catch(t){be({title:`${t.name} Error fetching Discovery API services.`,message:t.message,level:Re.error})}};function t5(e){return{[Jd]:async t=>{e5(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?sy(e):window.addEventListener("load",()=>{sy(e)})},[Vn.UPDATE_RESULTS]:(t,r,n)=>{t.merge(n),t.broadcast(Vn.UPDATED,{...t.all()})},[Ul]:(t,r)=>{t.subscribe(r.from),t.send(r.from,Vn.UPDATED,{...t.all()})},[Ta]:(t,r)=>t.unsubscribe(r.from),[Vn.SNAPSHOT]:async(t,r)=>r.reply({...t.all()})}}const fv=e=>$a(t5(e),Vn.AUTHN);function r5(e){return{subscribe:t=>fx(Vn.AUTHN,()=>fv(e),t),snapshot:()=>s8(Vn.AUTHN,()=>fv(e)),update:()=>{document.readyState==="complete"&&sy(e)}}}const n5=r5(ar()),i5={authn:n5};ar();ar();ar();const s5=e=>async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await O6(e,t),t=await VI(e,t);const n=await e.config.get("fcl.authz",e.currentUser.authorization);return r=e.sdk.send([v6(t.cadence),MI($I(t.args||[])),t.limit&&I6(t.limit)&&jI(t.limit),g6(t.proposer||t.authz||n),y6(t.payer||t.authz||n),h6(t.authorizations||[t.authz||n])]).then(e.sdk.decode),r}catch(n){throw n}},o5=e=>{const t={...ar(),currentUser:e};return s5(t)};function oy(e){if(e==null)return null;if(!e.f_vsn)return{...j6,addr:ut(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId,...e.extensionData?{extensionData:e.extensionData}:{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function a5(e){if(e==null)return null;if(!e.f_vsn)return{...qa,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Xt(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function c5(e){if(e==null)return null;if(!e.f_vsn)return{...qa,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...WI,address:Xt(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function l5(e){if(e==null)return null;if(!e.f_vsn)return{...qa,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...WI,address:Xt(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function ZI(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...qa,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function XI(e){if(e==null)return null;if(!e.f_vsn)return{...qa,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function u5(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function d5(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function JI(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...qa,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function f5(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function h5(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function p5(e,t){return e.map(r=>y5(r,t)).filter(Boolean)}const g5={"back-channel-rpc":XI,"pre-authz":l5,authz:c5,authn:a5,frame:ZI,"open-id":u5,"user-signature":d5,"local-view":JI,"account-proof":f5,"authn-refresh":h5};function y5(e,t){try{return g5[e.type](e,t)}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}async function m5(e,t){if(e==null||t==null)return[];const r=new Ib(e);r.searchParams.append("code",t);const n=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json());if(Array.isArray(n))return n;const i=[];if(Array.isArray(n.authorizations))for(let s of n.authorizations)i.push({type:"authz",keyId:n.keyId,...s});return n.provider!=null&&i.push({type:"authn",id:"wallet-provider#authn",...n.provider}),i}function b5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function yl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((r,n)=>n.type===t&&(!r||S6(n.f_vsn,r.f_vsn)>0)?n:r,null)}function w5(e){var t,r;return lb([((t=e.provider)==null?void 0:t.address)||((r=e.provider)==null?void 0:r.name)||"UNSPECIFIED",e.id]).toString("hex")}function v5(e){return e.addr=e.addr?Xt(e.addr):null,e.paddr=e.paddr?Xt(e.paddr):null,e}async function hv(e){e=v5(e);var t=p5(b5(e.services||[],await m5(e.hks,e.code)));const r=yl(t,"authn");return{...L6,addr:Xt(e.addr),cid:w5(r),loggedIn:!0,services:t,expiresAt:e.expires}}const E5="WC/RPC",_5=typeof window>"u";function S5(){_5||Dl().getStrategies().includes(E5)||be({title:"FCL WalletConnect Service Plugin",level:Re.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const x5=globalThis.AbortController||require("abort-controller"),Qf=async e=>{let{service:t,body:r,config:n,abortSignal:i,customRpc:s,user:o,opts:a}=e;return Dl().getStrategy(t.method)({service:t,body:r,config:n,abortSignal:i,customRpc:s,opts:a,user:o})};async function uo(e,t){var r;let{service:n,msg:i={},config:s={},opts:o={},platform:a,abortSignal:c=new x5().signal,execStrategy:l,user:u}=t;S5(),i.data=n.data;const d={services:await uv(e,/^service\./),app:await uv(e,/^app\.detail\./),client:{...s.client,platform:a,fclVersion:xb,fclLibrary:"https://github.com/onflow/fcl-js",hostname:((r=window==null?void 0:window.location)==null?void 0:r.hostname)??null,network:await Ll(e)(o)}};try{const f=await(l||Qf)({service:n,body:i,config:d,opts:o,user:u,abortSignal:c});return f.status==="REDIRECT"?(V(n.type===f.data.type,"Cannot shift recursive service type in execService"),await uo(e,{service:f.data,msg:i,config:d,opts:o,abortSignal:c,platform:a,user:u})):f}catch(f){throw be({title:`Error on execService ${n==null?void 0:n.type}`,message:f,level:Re.error}),f}}const I5=e=>typeof e=="function",ml="CURRENT_USER",rp="CURRENT_USER/UPDATED",eO="SNAPSHOT",ay="SET_CURRENT_USER",tO="DEL_CURRENT_USER",cy=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,O5=async e=>{const t=JSON.parse(cy),r=await e.get(ml);return r!=null&&t.f_vsn!==r.f_vsn?(e.removeItem(ml),t):r||t},k5=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await e.config.first(["fcl.storage","fcl.storage.default"],void 0);return{[Jd]:async r=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),r.merge(JSON.parse(cy));const n=await t();if(n.can){const i=await O5(n);A5(i)&&r.merge(i)}},[Ul]:(r,n)=>{r.subscribe(n.from),r.send(n.from,rp,{...r.all()})},[Ta]:(r,n)=>{r.unsubscribe(n.from)},[eO]:async(r,n)=>{n.reply({...r.all()})},[ay]:async(r,n,i)=>{r.merge(i);const s=await t();s.can&&s.put(ml,r.all()),r.broadcast(rp,{...r.all()})},[tO]:async(r,n)=>{r.merge(JSON.parse(cy));const i=await t();i.can&&i.put(ml,r.all()),r.broadcast(rp,{...r.all()})}}},Ha=e=>{$a(k5(e),e.actorName)};function A5(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function P5(e){var t;let r=await e.config.get("fcl.accountProof.resolver");if(r==null)return;if(!I5(r)){be({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof r}
                `,level:Re.warn});return}const n={...await r()},i=(t=window==null?void 0:window.location)==null?void 0:t.origin;return n.appIdentifier?i&&(be.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),V(typeof n.appIdentifier=="string","appIdentifier must be a string")):(V(i,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),n.appIdentifier=i),V(/^[0-9a-f]+$/i.test(n.nonce),"Nonce must be a hex string"),n}const R5=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:r,discoveryFeaturesSuggested:n}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:r,discoveryFeaturesSuggested:n,clientServices:await QI(),supportedStrategies:Dl().getStrategies()}}},Zf=e=>async function(){var t,r,n;let{service:i,redir:s=!1,forceReauth:o=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(i&&!((t=i==null?void 0:i.provider)!=null&&t.is_installed)&&(r=i==null?void 0:i.provider)!=null&&r.requires_install){window.location.href=(n=i==null?void 0:i.provider)==null?void 0:n.install_link;return}return new Promise(async(a,c)=>{var l;Ha(e);const u={redir:s},d=await bd(e)(),f=yl(d.services,"authn-refresh");let h;if(d.loggedIn&&!o)if(f)try{const y=await uo(e,{service:f,msg:h,opts:u,platform:e.platform,user:d});bt(e.actorName,ay,await hv(y))}catch(y){be({title:`${y.name} Could not refresh wallet authentication.`,message:y.message,level:Re.error})}finally{return a(await bd(e)())}else return a(d);try{h=await P5(e)}catch(y){return be({title:`${y.name} On Authentication: Could not resolve account proof data.`,message:y.message,level:Re.error}),c(y)}try{const y=await Z6(e,i),g=await uo(e,{service:y,msg:h,config:await R5(y),opts:u,platform:e.platform,execStrategy:(l=e.discovery)==null?void 0:l.execStrategy,user:d});bt(e.actorName,ay,await hv(g))}catch(y){be({title:`${y} On Authentication`,message:y,level:Re.error})}finally{a(await bd(e)())}})};function T5(e){return function(){Ha(e),bt(e.actorName,tO)}}const C5=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),N5=e=>(t,r)=>{let{user:n}=r;const i=C5(t),s=[];i.proposer!=null&&s.push(["PROPOSER",i.proposer]);for(let a of i.payer||[])s.push(["PAYER",a]);for(let a of i.authorization||[])s.push(["AUTHORIZER",a]);var o=s.map(a=>{let[c,l]=a;return{tempId:[l.identity.address,l.identity.keyId].join("|"),addr:l.identity.address,keyId:l.identity.keyId,signingFunction(u){return uo(e,{service:l,msg:u,platform:e.platform,user:n})},role:{proposer:c==="PROPOSER",payer:c==="PAYER",authorizer:c==="AUTHORIZER"}}});return o},U5=e=>async t=>(Ha(e),{...t,tempId:"CURRENT_USER",async resolve(r,n){const i=await Zf(e)({redir:!0}),s=yl(i.services,"authz"),o=yl(i.services,"pre-authz");if(o)return N5(e)(await uo(e,{service:o,msg:n,platform:e.platform,user:i}),{user:i});if(s)return{...r,tempId:"CURRENT_USER",resolve:null,addr:ut(s.identity.address),keyId:s.identity.keyId,sequenceNum:null,signature:null,async signingFunction(a){return oy(await uo(e,{service:s,msg:a,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:i}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function B5(e){return function(t){Ha(e);const r="@EXIT",n=$a(async i=>{for(i.send(e.actorName,Ul);;){const s=await i.receive();if(s.tag===r){i.send(e.actorName,Ta);return}t(s.data)}});return()=>bt(n,r)}}function bd(e){return function(){return Ha(e),bt(e.actorName,eO,null,{expectReply:!0,timeout:0})}}const L5=e=>async()=>{const{addr:t}=await Zf(e)();return zI(Xt(t),nI)},D5=e=>(V(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),j5=e=>async t=>{Ha(e);const r=await Zf(e)({redir:!0}),n=yl(r.services,"user-signature");V(n,"Current user must have authorized a signing service.");try{const i=await uo(e,{service:n,msg:D5(t),platform:e.platform,user:r});return Array.isArray(i)?i.map(s=>oy(s)):[oy(i)]}catch(i){return i}},M5=e=>{const t={authenticate:Zf(e),unauthenticate:T5(e),authorization:U5(e),signUserMessage:j5(e),subscribe:B5(e),snapshot:bd(e),resolveArgument:L5(e)};return Object.assign(()=>({...t}),{...t})},z5=e=>{const t=ar();return M5({...t,getStorageProvider:async()=>e.getStorageProvider?await e.getStorageProvider():await $e.first(["fcl.storage","fcl.storage.default"],void 0),platform:e.platform,actorName:ml,discovery:e.discovery})};function jl(e){var t;const r=new Ib(e.endpoint);if((t=window==null?void 0:window.location)!=null&&t.origin&&r.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[n,i]of Object.entries(e.params||{}))r.searchParams.append(n,i);return r}function rO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=t.method||"POST",n=r==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(jl(e),{method:r,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:n}).then(i=>i.json())}function Jn(e){if(e==null)return null;if(!e.f_vsn)return{...D6,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:XI(e.authorizationUpdates),local:ZI((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const pv={"HTTP/GET":"GET","HTTP/POST":"POST"},F5=e=>(V(pv[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),pv[e.method]);async function ly(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(V(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(n=>setTimeout(n,500)),ly(e,t);r=await rO(e,{method:F5(e)}).then(Jn)}catch(n){throw n}switch(r==null?void 0:r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(n=>setTimeout(n,500)),ly(r==null?void 0:r.updates,t)}}const gv=e=>async t=>{let{service:r,body:n,config:i,opts:s}=t;const o=await rO(r,{data:{fclVersion:xb,service:{params:r.params,data:r.data,type:r.type},config:i,...n}}).then(Jn);if((o==null?void 0:o.status)==="APPROVED")return o.data;if((o==null?void 0:o.status)==="DECLINED")throw new Error(`Declined: ${o.reason||"No reason supplied."}`);if((o==null?void 0:o.status)==="REDIRECT")return o;if((o==null?void 0:o.status)==="PENDING"){let a=!0,c=!0;const[l,u]=await e(JI(o.local),{serviceEndpoint:jl,onClose:()=>c=!1}),d=()=>{try{u(),c=!1}catch(h){console.error("Frame Close Error",h)}},f=()=>{const h=a;return a=c,h};return ly(o.updates,f).then(h=>(d(),h)).catch(h=>{throw console.error(h),d(),h})}else throw console.error("Auto Decline: Invalid Response",{service:r,resp:o}),new Error("Auto Decline: Invalid Response")},xu="FCL:VIEW:CLOSE",np="FCL:VIEW:READY",ip="FCL:VIEW:RESPONSE",$5="FCL:VIEW:CUSTOM_RPC",et=e=>typeof e=="string"&&e.toLowerCase(),q5=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),Ps=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),Xf=e=>{let{close:t,send:r,onReady:n,onResponse:i,onMessage:s,onCustomRpc:o,getSource:a}=e,c;return l=>{try{c=(a==null?void 0:a())||c}catch{c=null}try{if(typeof l.data!="object"||q5.has(l.data.type)||c!=null&&l.source!==c)return;et(l.data.type)===et(xu)&&t(),et(l.data.type)===et(np)&&(n(l,{send:r,close:t}),c||(c=l.source)),et(l.data.type)===et(ip)&&i(l,{send:r,close:t}),et(l.data.type)===et($5)&&o(l.data.payload,{send:r,close:t}),s(l,{send:r,close:t}),et(l.data.type)===et("FCL:FRAME:READY")&&(Ps(l.data.type,np),n(l,{send:r,close:t}),c||(c=l.source)),et(l.data.type)===et("FCL:FRAME:RESPONSE")&&(Ps(l.data.type,ip),i(l,{send:r,close:t})),et(l.data.type)===et("FCL:FRAME:CLOSE")&&(Ps(l.data.type,xu),t()),et(l.data.type)===et("FCL::CHALLENGE::RESPONSE")&&(Ps(l.data.type,ip),i(l,{send:r,close:t})),et(l.data.type)===et("FCL::AUTHZ_READY")&&(Ps(l.data.type,np),n(l,{send:r,close:t}),c||(c=l.source)),et(l.data.type)===et("FCL::CHALLENGE::CANCEL")&&(Ps(l.data.type,xu),t()),et(l.data.type)===et("FCL::CANCEL")&&(Ps(l.data.type,xu),t())}catch(u){console.error("Frame Callback Error",u),t()}}};U6();const nO="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",H5=nO.length;function Ob(){let e="",t=32;for(;t--;)e+=nO[Math.random()*H5|0];return e}const V5="modulepreload",K5=function(e){return"/"+e},yv={},W5=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.allSettled(t.map(a=>{if(a=K5(a),a in yv)return;yv[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":V5,c||(u.as="script"),u.crossOrigin="",u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),c)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return n.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var mv=function(e,t,r){for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},G5=function(){function e(t,r,n){this.name=t,this.version=r,this.os=n,this.type="browser"}return e}(),Y5=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Q5=function(){function e(t,r,n,i){this.name=t,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return e}(),Z5=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),X5=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),J5=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,eU=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,bv=3,tU=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",J5]],wv=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rU(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new X5:typeof navigator<"u"?iU(navigator.userAgent):oU()}function nU(e){return e!==""&&tU.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]},!1)}function iU(e){var t=nU(e);if(!t)return null;var r=t[0],n=t[1];if(r==="searchbot")return new Z5;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<bv&&(i=mv(mv([],i,!0),aU(bv-i.length))):i=[];var s=i.join("."),o=sU(e),a=eU.exec(e);return a&&a[1]?new Q5(r,s,o,a[1]):new G5(r,s,o)}function sU(e){for(var t=0,r=wv.length;t<r;t++){var n=wv[t],i=n[0],s=n[1],o=s.exec(e);if(o)return i}return null}function oU(){var e=typeof process<"u"&&process.version;return e?new Y5(process.version.slice(1)):null}function aU(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uy=function(e,t){return uy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},uy(e,t)};function cU(e,t){uy(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var dy=function(){return dy=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dy.apply(this,arguments)};function lU(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function uU(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function dU(e,t){return function(r,n){t(r,n,e)}}function fU(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function hU(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(e,t||[])).next())})}function pU(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function gU(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function yU(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function fy(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function iO(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function mU(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(iO(arguments[t]));return e}function bU(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function bl(e){return this instanceof bl?(this.v=e,this):new bl(e)}function wU(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){n[f]&&(i[f]=function(h){return new Promise(function(y,g){s.push([f,h,y,g])>1||a(f,h)})})}function a(f,h){try{c(n[f](h))}catch(y){d(s[0][3],y)}}function c(f){f.value instanceof bl?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function vU(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:bl(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function EU(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof fy=="function"?fy(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function _U(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function SU(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function xU(e){return e&&e.__esModule?e:{default:e}}function IU(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function OU(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const kU=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return dy},__asyncDelegator:vU,__asyncGenerator:wU,__asyncValues:EU,__await:bl,__awaiter:hU,__classPrivateFieldGet:IU,__classPrivateFieldSet:OU,__createBinding:gU,__decorate:uU,__exportStar:yU,__extends:cU,__generator:pU,__importDefault:xU,__importStar:SU,__makeTemplateObject:_U,__metadata:fU,__param:dU,__read:iO,__rest:lU,__spread:mU,__spreadArrays:bU,__values:fy},Symbol.toStringTag,{value:"Module"})),Ml=yR(kU);var vv={},ac={},Ev;function AU(){if(Ev)return ac;Ev=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return ac.delay=e,ac}var Rs={},_v={},Uo={},Sv;function PU(){return Sv||(Sv=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.ONE_THOUSAND=Uo.ONE_HUNDRED=void 0,Uo.ONE_HUNDRED=100,Uo.ONE_THOUSAND=1e3),Uo}var xv={},Iv;function RU(){return Iv||(Iv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(xv)),xv}var Ov;function sO(){return Ov||(Ov=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ml;t.__exportStar(PU(),e),t.__exportStar(RU(),e)}(_v)),_v}var kv;function TU(){if(kv)return Rs;kv=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.fromMiliseconds=Rs.toMiliseconds=void 0;const e=sO();function t(n){return n*e.ONE_THOUSAND}Rs.toMiliseconds=t;function r(n){return Math.floor(n/e.ONE_THOUSAND)}return Rs.fromMiliseconds=r,Rs}var Av;function CU(){return Av||(Av=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ml;t.__exportStar(AU(),e),t.__exportStar(TU(),e)}(vv)),vv}var Bo={},Pv;function NU(){if(Pv)return Bo;Pv=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Bo.Watch=e,Bo.default=e,Bo}var Rv={},cc={},Tv;function UU(){if(Tv)return cc;Tv=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.IWatch=void 0;class e{}return cc.IWatch=e,cc}var Cv;function BU(){return Cv||(Cv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Ml.__exportStar(UU(),e)}(Rv)),Rv}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ml;t.__exportStar(CU(),e),t.__exportStar(NU(),e),t.__exportStar(BU(),e),t.__exportStar(sO(),e)})(Z);var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getLocalStorage=Ue.getLocalStorageOrThrow=Ue.getCrypto=Ue.getCryptoOrThrow=oO=Ue.getLocation=Ue.getLocationOrThrow=kb=Ue.getNavigator=Ue.getNavigatorOrThrow=fo=Ue.getDocument=Ue.getDocumentOrThrow=Ue.getFromWindowOrThrow=Ue.getFromWindow=void 0;function Eo(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Ue.getFromWindow=Eo;function Va(e){const t=Eo(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Ue.getFromWindowOrThrow=Va;function LU(){return Va("document")}Ue.getDocumentOrThrow=LU;function DU(){return Eo("document")}var fo=Ue.getDocument=DU;function jU(){return Va("navigator")}Ue.getNavigatorOrThrow=jU;function MU(){return Eo("navigator")}var kb=Ue.getNavigator=MU;function zU(){return Va("location")}Ue.getLocationOrThrow=zU;function FU(){return Eo("location")}var oO=Ue.getLocation=FU;function $U(){return Va("crypto")}Ue.getCryptoOrThrow=$U;function qU(){return Eo("crypto")}Ue.getCrypto=qU;function HU(){return Va("localStorage")}Ue.getLocalStorageOrThrow=HU;function VU(){return Eo("localStorage")}Ue.getLocalStorage=VU;var Ab={};Object.defineProperty(Ab,"__esModule",{value:!0});var aO=Ab.getWindowMetadata=void 0;const Nv=Ue;function KU(){let e,t;try{e=Nv.getDocumentOrThrow(),t=Nv.getLocationOrThrow()}catch{return null}function r(){const u=e.getElementsByTagName("link"),d=[];for(let f=0;f<u.length;f++){const h=u[f],y=h.getAttribute("rel");if(y&&y.toLowerCase().indexOf("icon")>-1){const g=h.getAttribute("href");if(g)if(g.toLowerCase().indexOf("https:")===-1&&g.toLowerCase().indexOf("http:")===-1&&g.indexOf("//")!==0){let v=t.protocol+"//"+t.host;if(g.indexOf("/")===0)v+=g;else{const b=t.pathname.split("/");b.pop();const w=b.join("/");v+=w+"/"+g}d.push(v)}else if(g.indexOf("//")===0){const v=t.protocol+g;d.push(v)}else d.push(g)}}return d}function n(...u){const d=e.getElementsByTagName("meta");for(let f=0;f<d.length;f++){const h=d[f],y=["itemprop","property","name"].map(g=>h.getAttribute(g)).filter(g=>g?u.includes(g):!1);if(y.length&&y){const g=h.getAttribute("content");if(g)return g}}return""}function i(){let u=n("name","og:site_name","og:title","twitter:title");return u||(u=e.title),u}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=t.origin,l=r();return{description:a,url:c,icons:l,name:o}}aO=Ab.getWindowMetadata=KU;const WU="0.1.1";function GU(){return WU}class We extends Error{constructor(t,r={}){const n=(()=>{var a;if(r.cause instanceof We){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:(a=r.cause)!=null&&a.message?r.cause.message:r.details})(),i=r.cause instanceof We&&r.cause.docsPath||r.docsPath,s=`https://oxlib.sh${i??""}`,o=[t||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${s}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${GU()}`}),this.cause=r.cause,this.details=n,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return cO(this,t)}}function cO(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?cO(e.cause,t):t?null:e}const Lo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function YU(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function wl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ho(e,...t){if(!YU(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function QU(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");wl(e.outputLen),wl(e.blockLen)}function Na(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function lO(e,t){ho(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function ZU(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ua(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function sp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Rn(e,t){return e<<32-t|e>>>t}const XU=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function JU(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function eB(e){for(let t=0;t<e.length;t++)e[t]=JU(e[t]);return e}const Uv=XU?e=>e:eB;function tB(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Jf(e){return typeof e=="string"&&(e=tB(e)),ho(e),e}function rB(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];ho(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}class Pb{}function uO(e){const t=n=>e().update(Jf(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function nB(e=32){if(Lo&&typeof Lo.getRandomValues=="function")return Lo.getRandomValues(new Uint8Array(e));if(Lo&&typeof Lo.randomBytes=="function")return Uint8Array.from(Lo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function iB(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}function sB(e,t,r){return e&t^~e&r}function oB(e,t,r){return e&t^e&r^t&r}class aB extends Pb{constructor(t,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=sp(this.buffer)}update(t){Na(this),t=Jf(t),ho(t);const{view:r,buffer:n,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=sp(t);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Na(this),lO(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,Ua(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;iB(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=sp(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Ui=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Iu=BigInt(2**32-1),Bv=BigInt(32);function cB(e,t=!1){return t?{h:Number(e&Iu),l:Number(e>>Bv&Iu)}:{h:Number(e>>Bv&Iu)|0,l:Number(e&Iu)|0}}function lB(e,t=!1){const r=e.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=cB(e[s],t);[n[s],i[s]]=[o,a]}return[n,i]}const uB=(e,t,r)=>e<<r|t>>>32-r,dB=(e,t,r)=>t<<r|e>>>32-r,fB=(e,t,r)=>t<<r-32|e>>>64-r,hB=(e,t,r)=>e<<r-32|t>>>64-r,pB=BigInt(0),lc=BigInt(1),gB=BigInt(2),yB=BigInt(7),mB=BigInt(256),bB=BigInt(113),dO=[],fO=[],hO=[];for(let e=0,t=lc,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],dO.push(2*(5*n+r)),fO.push((e+1)*(e+2)/2%64);let i=pB;for(let s=0;s<7;s++)t=(t<<lc^(t>>yB)*bB)%mB,t&gB&&(i^=lc<<(lc<<BigInt(s))-lc);hO.push(i)}const pO=lB(hO,!0),wB=pO[0],vB=pO[1],Lv=(e,t,r)=>r>32?fB(e,t,r):uB(e,t,r),Dv=(e,t,r)=>r>32?hB(e,t,r):dB(e,t,r);function EB(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=Lv(l,u,1)^r[a],f=Dv(l,u,1)^r[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=f}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=fO[o],c=Lv(i,s,a),l=Dv(i,s,a),u=dO[o];i=e[u],s=e[u+1],e[u]=c,e[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=wB[n],e[1]^=vB[n]}Ua(r)}class Rb extends Pb{constructor(t,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,wl(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ZU(this.state)}clone(){return this._cloneInto()}keccak(){Uv(this.state32),EB(this.state32,this.rounds),Uv(this.state32),this.posOut=0,this.pos=0}update(t){Na(this),t=Jf(t),ho(t);const{blockLen:r,state:n}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Na(this,!1),ho(t),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=t.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);t.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return wl(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(lO(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ua(this.state)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new Rb(r,n,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const _B=(e,t,r)=>uO(()=>new Rb(t,e,r)),SB=_B(1,136,256/8),xB=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bi=new Uint32Array(64);class IB extends aB{constructor(t=32){super(64,t,8,!1),this.A=Ui[0]|0,this.B=Ui[1]|0,this.C=Ui[2]|0,this.D=Ui[3]|0,this.E=Ui[4]|0,this.F=Ui[5]|0,this.G=Ui[6]|0,this.H=Ui[7]|0}get(){const{A:t,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[t,r,n,i,s,o,a,c]}set(t,r,n,i,s,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)Bi[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const f=Bi[d-15],h=Bi[d-2],y=Rn(f,7)^Rn(f,18)^f>>>3,g=Rn(h,17)^Rn(h,19)^h>>>10;Bi[d]=g+Bi[d-7]+y+Bi[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Rn(a,6)^Rn(a,11)^Rn(a,25),h=u+f+sB(a,c,l)+xB[d]+Bi[d]|0,y=(Rn(n,2)^Rn(n,13)^Rn(n,22))+oB(n,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=n,n=h+y|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){Ua(Bi)}destroy(){this.set(0,0,0,0,0,0,0,0),Ua(this.buffer)}}const OB=uO(()=>new IB);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tb=BigInt(0),hy=BigInt(1);function zl(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Cb(e){if(!zl(e))throw new Error("Uint8Array expected")}function vl(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Ou(e){const t=e.toString(16);return t.length&1?"0"+t:t}function gO(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Tb:BigInt("0x"+e)}const yO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",kB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function El(e){if(Cb(e),yO)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=kB[e[r]];return t}const ti={_0:48,_9:57,A:65,F:70,a:97,f:102};function jv(e){if(e>=ti._0&&e<=ti._9)return e-ti._0;if(e>=ti.A&&e<=ti.F)return e-(ti.A-10);if(e>=ti.a&&e<=ti.f)return e-(ti.a-10)}function nf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(yO)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=jv(e.charCodeAt(s)),a=jv(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function ro(e){return gO(El(e))}function mO(e){return Cb(e),gO(El(Uint8Array.from(e).reverse()))}function Fl(e,t){return nf(e.toString(16).padStart(t*2,"0"))}function bO(e,t){return Fl(e,t).reverse()}function Qr(e,t,r){let n;if(typeof t=="string")try{n=nf(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(zl(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function sf(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Cb(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}const op=e=>typeof e=="bigint"&&Tb<=e;function Nb(e,t,r){return op(e)&&op(t)&&op(r)&&t<=e&&e<r}function ba(e,t,r,n){if(!Nb(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function AB(e){let t;for(t=0;e>Tb;e>>=hy,t+=1);return t}const eh=e=>(hy<<BigInt(e))-hy,ap=e=>new Uint8Array(e),Mv=e=>Uint8Array.from(e);function PB(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ap(e),i=ap(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...u)=>r(i,n,...u),c=(u=ap(0))=>{i=a(Mv([0]),u),n=a(),u.length!==0&&(i=a(Mv([1]),u),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<t;){n=a();const f=n.slice();d.push(f),u+=n.length}return sf(...d)};return(u,d)=>{o(),c(u);let f;for(;!(f=d(l()));)c();return o(),f}}const RB={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||zl(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function th(e,t,r={}){const n=(i,s,o)=>{const a=RB[s];if(typeof a!="function")throw new Error("invalid validator function");const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return e}function zv(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const s=e(r,...n);return t.set(r,s),s}}function TB(e,t){if(Hv(e)>t)throw new XB({givenSize:Hv(e),maxSize:t})}const ri={zero:48,nine:57,A:65,F:70,a:97,f:102};function Fv(e){if(e>=ri.zero&&e<=ri.nine)return e-ri.zero;if(e>=ri.A&&e<=ri.F)return e-(ri.A-10);if(e>=ri.a&&e<=ri.f)return e-(ri.a-10)}function CB(e,t={}){const{dir:r,size:n=32}=t;if(n===0)return e;if(e.length>n)throw new JB({size:e.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=e[o?s:e.length-s-1]}return i}function wO(e,t){if(vs(e)>t)throw new $B({givenSize:vs(e),maxSize:t})}function NB(e,t){if(typeof t=="number"&&t>0&&t>vs(e)-1)throw new _O({offset:t,position:"start",size:vs(e)})}function UB(e,t,r){if(typeof t=="number"&&typeof r=="number"&&vs(e)!==r-t)throw new _O({offset:r,position:"end",size:vs(e)})}function vO(e,t={}){const{dir:r,size:n=32}=t;if(n===0)return e;const i=e.replace("0x","");if(i.length>n*2)throw new qB({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const BB="#__bigint";function Ub(e,t,r){return JSON.stringify(e,(n,i)=>typeof i=="bigint"?i.toString()+BB:i,r)}const LB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function DB(e,t={}){const{strict:r=!1}=t;if(!e)throw new $v(e);if(typeof e!="string")throw new $v(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e))throw new qv(e);if(!e.startsWith("0x"))throw new qv(e)}function jB(...e){return`0x${e.reduce((t,r)=>t+r.replace("0x",""),"")}`}function Bb(e){return e instanceof Uint8Array?of(e):Array.isArray(e)?of(new Uint8Array(e)):e}function of(e,t={}){let r="";for(let i=0;i<e.length;i++)r+=LB[e[i]];const n=`0x${r}`;return typeof t.size=="number"?(wO(n,t.size),EO(n,t.size)):n}function cp(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof e=="bigint"?"n":"";throw new FB({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${e}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?MB(a,n):a}function MB(e,t){return vO(e,{dir:"left",size:t})}function EO(e,t){return vO(e,{dir:"right",size:t})}function di(e,t,r,n={}){const{strict:i}=n;NB(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return i&&UB(s,t,r),s}function vs(e){return Math.ceil((e.length-2)/2)}function zB(e,t={}){const{strict:r=!1}=t;try{return DB(e,{strict:r}),!0}catch{return!1}}class FB extends We{constructor({max:t,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${t?`(\`${r}\` to \`${t}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class $v extends We{constructor(t){super(`Value \`${typeof t=="object"?Ub(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class qv extends We{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let $B=class extends We{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class _O extends We{constructor({offset:t,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let qB=class extends We{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const HB=new TextEncoder;function VB(e){if(!(e instanceof Uint8Array)){if(!e)throw new ku(e);if(typeof e!="object")throw new ku(e);if(!("BYTES_PER_ELEMENT"in e))throw new ku(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new ku(e)}}function KB(e){return e instanceof Uint8Array?e:typeof e=="string"?GB(e):WB(e)}function WB(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function GB(e,t={}){const{size:r}=t;let n=e;r&&(wO(e,r),n=EO(e,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=Fv(i.charCodeAt(c++)),u=Fv(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new We(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function YB(e,t={}){const{size:r}=t,n=HB.encode(e);return typeof r=="number"?(TB(n,r),QB(n,r)):n}function QB(e,t){return CB(e,{dir:"right",size:t})}function Hv(e){return e.length}function ZB(e){try{return VB(e),!0}catch{return!1}}class ku extends We{constructor(t){super(`Value \`${typeof t=="object"?Ub(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class XB extends We{constructor({givenSize:t,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class JB extends We{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function SO(e,t={}){const{as:r=typeof e=="string"?"Hex":"Bytes"}=t,n=SB(KB(e));return r==="Bytes"?n:of(n)}class eL extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const tL={checksum:new eL(8192)},lp=tL.checksum;function xO(e,t={}){const{compressed:r}=t,{prefix:n,x:i,y:s}=e;if(r===!1||typeof i=="bigint"&&typeof s=="bigint"){if(n!==4)throw new Vv({prefix:n,cause:new aL});return}if(r===!0||typeof i=="bigint"&&typeof s>"u"){if(n!==3&&n!==2)throw new Vv({prefix:n,cause:new oL});return}throw new sL({publicKey:e})}function rL(e){const t=(()=>{if(zB(e))return IO(e);if(ZB(e))return nL(e);const{prefix:r,x:n,y:i}=e;return typeof n=="bigint"&&typeof i=="bigint"?{prefix:r??4,x:n,y:i}:{prefix:r,x:n}})();return xO(t),t}function nL(e){return IO(of(e))}function IO(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new cL({publicKey:e});if(e.length===130){const n=BigInt(di(e,0,32)),i=BigInt(di(e,32,64));return{prefix:4,x:n,y:i}}if(e.length===132){const n=Number(di(e,0,1)),i=BigInt(di(e,1,33)),s=BigInt(di(e,33,65));return{prefix:n,x:i,y:s}}const t=Number(di(e,0,1)),r=BigInt(di(e,1,33));return{prefix:t,x:r}}function iL(e,t={}){xO(e);const{prefix:r,x:n,y:i}=e,{includePrefix:s=!0}=t;return jB(s?cp(r,{size:1}):"0x",cp(n,{size:32}),typeof i=="bigint"?cp(i,{size:32}):"0x")}class sL extends We{constructor({publicKey:t}){super(`Value \`${Ub(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class Vv extends We{constructor({prefix:t,cause:r}){super(`Prefix "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class oL extends We{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class aL extends We{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let cL=class extends We{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${vs(Bb(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const lL=/^0x[a-fA-F0-9]{40}$/;function OO(e,t={}){const{strict:r=!0}=t;if(!lL.test(e))throw new Kv({address:e,cause:new fL});if(r){if(e.toLowerCase()===e)return;if(kO(e)!==e)throw new Kv({address:e,cause:new hL})}}function kO(e){if(lp.has(e))return lp.get(e);OO(e,{strict:!1});const t=e.substring(2).toLowerCase(),r=SO(YB(t),{as:"Bytes"}),n=t.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return lp.set(e,i),i}function uL(e,t={}){const{checksum:r=!1}=t;return OO(e),r?kO(e):e}function dL(e,t={}){const r=SO(`0x${iL(e).slice(4)}`).substring(26);return uL(`0x${r}`,t)}class Kv extends We{constructor({address:t,cause:r}){super(`Address "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class fL extends We{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class hL extends We{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class AO extends Pb{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,QU(t);const n=Jf(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ua(s)}update(t){return Na(this),this.iHash.update(t),this}digestInto(t){Na(this),ho(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const PO=(e,t,r)=>new AO(e,t).update(r).digest();PO.create=(e,t)=>new AO(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mr=BigInt(0),rr=BigInt(1),Gs=BigInt(2),pL=BigInt(3),RO=BigInt(4),TO=BigInt(5),CO=BigInt(8);function fr(e,t){const r=e%t;return r>=mr?r:t+r}function Hr(e,t,r){let n=e;for(;t-- >mr;)n*=n,n%=r;return n}function py(e,t){if(e===mr)throw new Error("invert: expected non-zero number");if(t<=mr)throw new Error("invert: expected positive modulus, got "+t);let r=fr(e,t),n=t,i=mr,s=rr;for(;r!==mr;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==rr)throw new Error("invert: does not exist");return fr(i,t)}function NO(e,t){const r=(e.ORDER+rr)/RO,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}function gL(e,t){const r=(e.ORDER-TO)/CO,n=e.mul(t,Gs),i=e.pow(n,r),s=e.mul(t,i),o=e.mul(e.mul(s,Gs),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function yL(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-rr,r=0;for(;t%Gs===mr;)t/=Gs,r++;let n=Gs;const i=Lb(e);for(;Wv(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return NO;let s=i.pow(n,t);const o=(t+rr)/Gs;return function(a,c){if(a.is0(c))return c;if(Wv(a,c)!==1)throw new Error("Cannot find square root");let l=r,u=a.mul(a.ONE,s),d=a.pow(c,t),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,y=a.sqr(d);for(;!a.eql(y,a.ONE);)if(h++,y=a.sqr(y),h===l)throw new Error("Cannot find square root");const g=rr<<BigInt(l-h-1),v=a.pow(u,g);l=h,u=a.sqr(v),d=a.mul(d,u),f=a.mul(f,v)}return f}}function mL(e){return e%RO===pL?NO:e%CO===TO?gL:yL(e)}const bL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wL(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=bL.reduce((n,i)=>(n[i]="function",n),t);return th(e,r)}function vL(e,t,r){if(r<mr)throw new Error("invalid exponent, negatives unsupported");if(r===mr)return e.ONE;if(r===rr)return t;let n=e.ONE,i=t;for(;r>mr;)r&rr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=rr;return n}function UO(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((o,a,c)=>e.is0(a)?o:(n[c]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,c)=>e.is0(a)?o:(n[c]=e.mul(o,n[c]),e.mul(o,a)),s),n}function Wv(e,t){const r=(e.ORDER-rr)/Gs,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),o=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function BO(e,t){t!==void 0&&wl(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Lb(e,t,r=!1,n={}){if(e<=mr)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=BO(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:eh(i),ZERO:mr,ONE:rr,create:c=>fr(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return mr<=c&&c<e},is0:c=>c===mr,isOdd:c=>(c&rr)===rr,neg:c=>fr(-c,e),eql:(c,l)=>c===l,sqr:c=>fr(c*c,e),add:(c,l)=>fr(c+l,e),sub:(c,l)=>fr(c-l,e),mul:(c,l)=>fr(c*l,e),pow:(c,l)=>vL(a,c,l),div:(c,l)=>fr(c*py(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>py(c,e),sqrt:n.sqrt||(c=>(o||(o=mL(e)),o(a,c))),toBytes:c=>r?bO(c,s):Fl(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?mO(c):ro(c)},invertBatch:c=>UO(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function LO(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function DO(e){const t=LO(e);return t+Math.ceil(t/2)}function EL(e,t,r=!1){const n=e.length,i=LO(t),s=DO(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?mO(e):ro(e),a=fr(o,t-rr)+rr;return r?bO(a,i):Fl(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gv=BigInt(0),gy=BigInt(1);function up(e,t){const r=t.negate();return e?r:t}function jO(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function dp(e,t){jO(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e,s=eh(e),o=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function Yv(e,t,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(e&i),c=e>>o;a>n&&(a-=s,c+=gy);const l=t*n,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=t%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function _L(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function SL(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const fp=new WeakMap,MO=new WeakMap;function hp(e){return MO.get(e)||1}function xL(e,t){return{constTimeNegate:up,hasPrecomputes(r){return hp(r)!==1},unsafeLadder(r,n,i=e.ZERO){let s=r;for(;n>Gv;)n&gy&&(i=i.add(s)),s=s.double(),n>>=gy;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=dp(n,t),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){let s=e.ZERO,o=e.BASE;const a=dp(r,t);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:y}=Yv(i,c,a);i=l,d?o=o.add(up(h,n[y])):s=s.add(up(f,n[u]))}return{p:s,f:o}},wNAFUnsafe(r,n,i,s=e.ZERO){const o=dp(r,t);for(let a=0;a<o.windows&&i!==Gv;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Yv(i,a,o);if(i=c,!u){const f=n[l];s=s.add(d?f.negate():f)}}return s},getPrecomputes(r,n,i){let s=fp.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&fp.set(n,i(s))),s},wNAFCached(r,n,i){const s=hp(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=hp(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){jO(n,t),MO.set(r,n),fp.delete(r)}}}function IL(e,t,r,n){_L(r,e),SL(n,t);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=AB(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=eh(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((t.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let g=0;g<s;g++){const v=n[g],b=Number(v>>BigInt(h)&l);u[b]=u[b].add(r[g])}let y=o;for(let g=u.length-1,v=o;g>0;g--)v=v.add(u[g]),y=y.add(v);if(f=f.add(y),h!==0)for(let g=0;g<c;g++)f=f.double()}return f}function zO(e){return wL(e.Fp),th(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...BO(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Qv(e){e.lowS!==void 0&&vl("lowS",e.lowS),e.prehash!==void 0&&vl("prehash",e.prehash)}function OL(e){const t=zO(e);th(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class kL extends Error{constructor(t=""){super(t)}}const hi={Err:kL,_tlv:{encode:(e,t)=>{const{Err:r}=hi;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=Ou(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Ou(i.length/2|128):"";return Ou(e)+s+i+t},decode(e,t){const{Err:r}=hi;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=t.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=hi;if(e<yi)throw new t("integer: negative integers are not allowed");let r=Ou(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=hi;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return ro(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=hi,i=Qr("signature",e),{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=hi,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),s=n+i;return t.encode(48,s)}};function pp(e,t){return El(Fl(e,t))}const yi=BigInt(0),_t=BigInt(1);BigInt(2);const gp=BigInt(3),AL=BigInt(4);function PL(e){const t=OL(e),{Fp:r}=t,n=Lb(t.n,t.nBitLength),i=t.toBytes||((_,I,R)=>{const T=I.toAffine();return sf(Uint8Array.from([4]),r.toBytes(T.x),r.toBytes(T.y))}),s=t.fromBytes||(_=>{const I=_.subarray(1),R=r.fromBytes(I.subarray(0,r.BYTES)),T=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:R,y:T}});function o(_){const{a:I,b:R}=t,T=r.sqr(_),C=r.mul(T,_);return r.add(r.add(C,r.mul(_,I)),R)}function a(_,I){const R=r.sqr(I),T=o(_);return r.eql(R,T)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=r.mul(r.pow(t.a,gp),AL),l=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(c,l)))throw new Error("bad curve params: a or b");function u(_){return Nb(_,_t,t.n)}function d(_){const{allowedPrivateKeyLengths:I,nByteLength:R,wrapPrivateKey:T,n:C}=t;if(I&&typeof _!="bigint"){if(zl(_)&&(_=El(_)),typeof _!="string"||!I.includes(_.length))throw new Error("invalid private key");_=_.padStart(R*2,"0")}let L;try{L=typeof _=="bigint"?_:ro(Qr("private key",_,R))}catch{throw new Error("invalid private key, expected hex or "+R+" bytes, got "+typeof _)}return T&&(L=fr(L,C)),ba("private key",L,_t,C),L}function f(_){if(!(_ instanceof g))throw new Error("ProjectivePoint expected")}const h=zv((_,I)=>{const{px:R,py:T,pz:C}=_;if(r.eql(C,r.ONE))return{x:R,y:T};const L=_.is0();I==null&&(I=L?r.ONE:r.inv(C));const N=r.mul(R,I),F=r.mul(T,I),q=r.mul(C,I);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(q,r.ONE))throw new Error("invZ was invalid");return{x:N,y:F}}),y=zv(_=>{if(_.is0()){if(t.allowInfinityPoint&&!r.is0(_.py))return;throw new Error("bad point: ZERO")}const{x:I,y:R}=_.toAffine();if(!r.isValid(I)||!r.isValid(R))throw new Error("bad point: x or y not FE");if(!a(I,R))throw new Error("bad point: equation left != right");if(!_.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(I,R,T){if(I==null||!r.isValid(I))throw new Error("x required");if(R==null||!r.isValid(R)||r.is0(R))throw new Error("y required");if(T==null||!r.isValid(T))throw new Error("z required");this.px=I,this.py=R,this.pz=T,Object.freeze(this)}static fromAffine(I){const{x:R,y:T}=I||{};if(!I||!r.isValid(R)||!r.isValid(T))throw new Error("invalid affine point");if(I instanceof g)throw new Error("projective point not allowed");const C=L=>r.eql(L,r.ZERO);return C(R)&&C(T)?g.ZERO:new g(R,T,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const R=UO(r,I.map(T=>T.pz));return I.map((T,C)=>T.toAffine(R[C])).map(g.fromAffine)}static fromHex(I){const R=g.fromAffine(s(Qr("pointHex",I)));return R.assertValidity(),R}static fromPrivateKey(I){return g.BASE.multiply(d(I))}static msm(I,R){return IL(g,n,I,R)}_setWindowSize(I){w.setWindowSize(this,I)}assertValidity(){y(this)}hasEvenY(){const{y:I}=this.toAffine();if(r.isOdd)return!r.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){f(I);const{px:R,py:T,pz:C}=this,{px:L,py:N,pz:F}=I,q=r.eql(r.mul(R,F),r.mul(L,C)),j=r.eql(r.mul(T,F),r.mul(N,C));return q&&j}negate(){return new g(this.px,r.neg(this.py),this.pz)}double(){const{a:I,b:R}=t,T=r.mul(R,gp),{px:C,py:L,pz:N}=this;let F=r.ZERO,q=r.ZERO,j=r.ZERO,B=r.mul(C,C),D=r.mul(L,L),m=r.mul(N,N),S=r.mul(C,L);return S=r.add(S,S),j=r.mul(C,N),j=r.add(j,j),F=r.mul(I,j),q=r.mul(T,m),q=r.add(F,q),F=r.sub(D,q),q=r.add(D,q),q=r.mul(F,q),F=r.mul(S,F),j=r.mul(T,j),m=r.mul(I,m),S=r.sub(B,m),S=r.mul(I,S),S=r.add(S,j),j=r.add(B,B),B=r.add(j,B),B=r.add(B,m),B=r.mul(B,S),q=r.add(q,B),m=r.mul(L,N),m=r.add(m,m),B=r.mul(m,S),F=r.sub(F,B),j=r.mul(m,D),j=r.add(j,j),j=r.add(j,j),new g(F,q,j)}add(I){f(I);const{px:R,py:T,pz:C}=this,{px:L,py:N,pz:F}=I;let q=r.ZERO,j=r.ZERO,B=r.ZERO;const D=t.a,m=r.mul(t.b,gp);let S=r.mul(R,L),P=r.mul(T,N),k=r.mul(C,F),A=r.add(R,T),O=r.add(L,N);A=r.mul(A,O),O=r.add(S,P),A=r.sub(A,O),O=r.add(R,C);let M=r.add(L,F);return O=r.mul(O,M),M=r.add(S,k),O=r.sub(O,M),M=r.add(T,C),q=r.add(N,F),M=r.mul(M,q),q=r.add(P,k),M=r.sub(M,q),B=r.mul(D,O),q=r.mul(m,k),B=r.add(q,B),q=r.sub(P,B),B=r.add(P,B),j=r.mul(q,B),P=r.add(S,S),P=r.add(P,S),k=r.mul(D,k),O=r.mul(m,O),P=r.add(P,k),k=r.sub(S,k),k=r.mul(D,k),O=r.add(O,k),S=r.mul(P,O),j=r.add(j,S),S=r.mul(M,O),q=r.mul(A,q),q=r.sub(q,S),S=r.mul(A,P),B=r.mul(M,B),B=r.add(B,S),new g(q,j,B)}subtract(I){return this.add(I.negate())}is0(){return this.equals(g.ZERO)}wNAF(I){return w.wNAFCached(this,I,g.normalizeZ)}multiplyUnsafe(I){const{endo:R,n:T}=t;ba("scalar",I,yi,T);const C=g.ZERO;if(I===yi)return C;if(this.is0()||I===_t)return this;if(!R||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,I,g.normalizeZ);let{k1neg:L,k1:N,k2neg:F,k2:q}=R.splitScalar(I),j=C,B=C,D=this;for(;N>yi||q>yi;)N&_t&&(j=j.add(D)),q&_t&&(B=B.add(D)),D=D.double(),N>>=_t,q>>=_t;return L&&(j=j.negate()),F&&(B=B.negate()),B=new g(r.mul(B.px,R.beta),B.py,B.pz),j.add(B)}multiply(I){const{endo:R,n:T}=t;ba("scalar",I,_t,T);let C,L;if(R){const{k1neg:N,k1:F,k2neg:q,k2:j}=R.splitScalar(I);let{p:B,f:D}=this.wNAF(F),{p:m,f:S}=this.wNAF(j);B=w.constTimeNegate(N,B),m=w.constTimeNegate(q,m),m=new g(r.mul(m.px,R.beta),m.py,m.pz),C=B.add(m),L=D.add(S)}else{const{p:N,f:F}=this.wNAF(I);C=N,L=F}return g.normalizeZ([C,L])[0]}multiplyAndAddUnsafe(I,R,T){const C=g.BASE,L=(F,q)=>q===yi||q===_t||!F.equals(C)?F.multiplyUnsafe(q):F.multiply(q),N=L(this,R).add(L(I,T));return N.is0()?void 0:N}toAffine(I){return h(this,I)}isTorsionFree(){const{h:I,isTorsionFree:R}=t;if(I===_t)return!0;if(R)return R(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:R}=t;return I===_t?this:R?R(g,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return vl("isCompressed",I),this.assertValidity(),i(g,this,I)}toHex(I=!0){return vl("isCompressed",I),El(this.toRawBytes(I))}}g.BASE=new g(t.Gx,t.Gy,r.ONE),g.ZERO=new g(r.ZERO,r.ONE,r.ZERO);const{endo:v,nBitLength:b}=t,w=xL(g,v?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function RL(e){const t=zO(e);return th(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function TL(e){const t=RL(e),{Fp:r,n,nByteLength:i,nBitLength:s}=t,o=r.BYTES+1,a=2*r.BYTES+1;function c(m){return fr(m,n)}function l(m){return py(m,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=PL({...t,toBytes(m,S,P){const k=S.toAffine(),A=r.toBytes(k.x),O=sf;return vl("isCompressed",P),P?O(Uint8Array.from([S.hasEvenY()?2:3]),A):O(Uint8Array.from([4]),A,r.toBytes(k.y))},fromBytes(m){const S=m.length,P=m[0],k=m.subarray(1);if(S===o&&(P===2||P===3)){const A=ro(k);if(!Nb(A,_t,r.ORDER))throw new Error("Point is not on curve");const O=f(A);let M;try{M=r.sqrt(O)}catch(Q){const H=Q instanceof Error?": "+Q.message:"";throw new Error("Point is not on curve"+H)}const $=(M&_t)===_t;return(P&1)===1!==$&&(M=r.neg(M)),{x:A,y:M}}else if(S===a&&P===4){const A=r.fromBytes(k.subarray(0,r.BYTES)),O=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:A,y:O}}else{const A=o,O=a;throw new Error("invalid Point, expected length of "+A+", or uncompressed "+O+", got "+S)}}});function y(m){const S=n>>_t;return m>S}function g(m){return y(m)?c(-m):m}const v=(m,S,P)=>ro(m.slice(S,P));class b{constructor(S,P,k){ba("r",S,_t,n),ba("s",P,_t,n),this.r=S,this.s=P,k!=null&&(this.recovery=k),Object.freeze(this)}static fromCompact(S){const P=i;return S=Qr("compactSignature",S,P*2),new b(v(S,0,P),v(S,P,2*P))}static fromDER(S){const{r:P,s:k}=hi.toSig(Qr("DER",S));return new b(P,k)}assertValidity(){}addRecoveryBit(S){return new b(this.r,this.s,S)}recoverPublicKey(S){const{r:P,s:k,recovery:A}=this,O=C(Qr("msgHash",S));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");const M=A===2||A===3?P+t.n:P;if(M>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const $=A&1?"03":"02",Q=u.fromHex($+pp(M,r.BYTES)),H=l(M),G=c(-O*H),ee=c(k*H),ie=u.BASE.multiplyAndAddUnsafe(Q,G,ee);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return nf(this.toDERHex())}toDERHex(){return hi.hexFromSig(this)}toCompactRawBytes(){return nf(this.toCompactHex())}toCompactHex(){const S=i;return pp(this.r,S)+pp(this.s,S)}}const w={isValidPrivateKey(m){try{return d(m),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const m=DO(t.n);return EL(t.randomBytes(m),t.n)},precompute(m=8,S=u.BASE){return S._setWindowSize(m),S.multiply(BigInt(3)),S}};function _(m,S=!0){return u.fromPrivateKey(m).toRawBytes(S)}function I(m){if(typeof m=="bigint")return!1;if(m instanceof u)return!0;const S=Qr("key",m).length,P=r.BYTES,k=P+1,A=2*P+1;if(!(t.allowedPrivateKeyLengths||i===k))return S===k||S===A}function R(m,S,P=!0){if(I(m)===!0)throw new Error("first arg must be private key");if(I(S)===!1)throw new Error("second arg must be public key");return u.fromHex(S).multiply(d(m)).toRawBytes(P)}const T=t.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const S=ro(m),P=m.length*8-s;return P>0?S>>BigInt(P):S},C=t.bits2int_modN||function(m){return c(T(m))},L=eh(s);function N(m){return ba("num < 2^"+s,m,yi,L),Fl(m,i)}function F(m,S,P=q){if(["recovered","canonical"].some(se=>se in P))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:A}=t;let{lowS:O,prehash:M,extraEntropy:$}=P;O==null&&(O=!0),m=Qr("msgHash",m),Qv(P),M&&(m=Qr("prehashed msgHash",k(m)));const Q=C(m),H=d(S),G=[N(H),N(Q)];if($!=null&&$!==!1){const se=$===!0?A(r.BYTES):$;G.push(Qr("extraEntropy",se))}const ee=sf(...G),ie=Q;function ce(se){const de=T(se);if(!h(de))return;const Te=l(de),Je=u.BASE.multiply(de).toAffine(),qe=c(Je.x);if(qe===yi)return;const Ye=c(Te*c(ie+qe*H));if(Ye===yi)return;let ln=(Je.x===qe?0:2)|Number(Je.y&_t),ko=Ye;return O&&y(Ye)&&(ko=g(Ye),ln^=1),new b(qe,ko,ln)}return{seed:ee,k2sig:ce}}const q={lowS:t.lowS,prehash:!1},j={lowS:t.lowS,prehash:!1};function B(m,S,P=q){const{seed:k,k2sig:A}=F(m,S,P),O=t;return PB(O.hash.outputLen,O.nByteLength,O.hmac)(k,A)}u.BASE._setWindowSize(8);function D(m,S,P,k=j){var A;const O=m;S=Qr("msgHash",S),P=Qr("publicKey",P);const{lowS:M,prehash:$,format:Q}=k;if(Qv(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(Q!==void 0&&Q!=="compact"&&Q!=="der")throw new Error("format must be compact or der");const H=typeof O=="string"||zl(O),G=!H&&!Q&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!H&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ee,ie;try{if(G&&(ee=new b(O.r,O.s)),H){try{Q!=="compact"&&(ee=b.fromDER(O))}catch(ln){if(!(ln instanceof hi.Err))throw ln}!ee&&Q!=="der"&&(ee=b.fromCompact(O))}ie=u.fromHex(P)}catch{return!1}if(!ee||M&&ee.hasHighS())return!1;$&&(S=t.hash(S));const{r:ce,s:se}=ee,de=C(S),Te=l(se),Je=c(de*Te),qe=c(ce*Te),Ye=(A=u.BASE.multiplyAndAddUnsafe(ie,Je,qe))==null?void 0:A.toAffine();return Ye?c(Ye.x)===ce:!1}return{CURVE:t,getPublicKey:_,getSharedSecret:R,sign:B,verify:D,ProjectivePoint:u,Signature:b,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function CL(e){return{hash:e,hmac:(t,...r)=>PO(e,t,rB(...r)),randomBytes:nB}}function NL(e,t){const r=n=>TL({...e,...CL(n)});return{...r(t),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FO=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zv=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),UL=BigInt(0),BL=BigInt(1),yy=BigInt(2),Xv=(e,t)=>(e+t/yy)/t;function LL(e){const t=FO,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,d=Hr(u,r,t)*u%t,f=Hr(d,r,t)*u%t,h=Hr(f,yy,t)*l%t,y=Hr(h,i,t)*h%t,g=Hr(y,s,t)*y%t,v=Hr(g,a,t)*g%t,b=Hr(v,c,t)*v%t,w=Hr(b,a,t)*g%t,_=Hr(w,r,t)*u%t,I=Hr(_,o,t)*y%t,R=Hr(I,n,t)*l%t,T=Hr(R,yy,t);if(!my.eql(my.sqr(T),e))throw new Error("Cannot find square root");return T}const my=Lb(FO,void 0,void 0,{sqrt:LL}),DL=NL({a:UL,b:BigInt(7),Fp:my,n:Zv,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Zv,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-BL*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Xv(s*e,t),c=Xv(-n*e,t);let l=fr(e-a*r-c*i,t),u=fr(-a*n-c*s,t);const d=l>o,f=u>o;if(d&&(l=t-l),f&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:l,k2neg:f,k2:u}}}},OB);function jL(e){if(e.length!==130&&e.length!==132)throw new zL({signature:e});const t=BigInt(di(e,0,32)),r=BigInt(di(e,32,64)),n=(()=>{const i=+`0x${e.slice(130)}`;if(!Number.isNaN(i))try{return ML(i)}catch{throw new FL({value:i})}})();return typeof n>"u"?{r:t,s:r}:{r:t,s:r,yParity:n}}function ML(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new $L({value:e})}class zL extends We{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${vs(Bb(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class FL extends We{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class $L extends We{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $O(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function qO(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(r=>typeof r=="string"):t.every(r=>Number.isSafeInteger(r)):!1}function af(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function $l(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function cf(e){if(!Array.isArray(e))throw new Error("array expected")}function lf(e,t){if(!qO(!0,t))throw new Error(`${e}: array of strings expected`)}function HO(e,t){if(!qO(!1,t))throw new Error(`${e}: array of numbers expected`)}function VO(...e){const t=s=>s,r=(s,o)=>a=>s(o(a)),n=e.map(s=>s.encode).reduceRight(r,t),i=e.map(s=>s.decode).reduce(r,t);return{encode:n,decode:i}}function KO(e){const t=typeof e=="string"?e.split(""):e,r=t.length;lf("alphabet",t);const n=new Map(t.map((i,s)=>[i,s]));return{encode:i=>(cf(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${e}`);return t[s]})),decode:i=>(cf(i),i.map(s=>{af("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${e}`);return o}))}}function WO(e=""){return af("join",e),{encode:t=>(lf("join.decode",t),t.join(e)),decode:t=>(af("join.decode",t),t.split(e))}}function qL(e,t="="){return $l(e),af("padding",t),{encode(r){for(lf("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){lf("padding.decode",r);let n=r.length;if(n*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function Jv(e,t,r){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(cf(e),!e.length)return[];let n=0;const i=[],s=Array.from(e,a=>{if($l(a),a<0||a>=t)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,c=!0;for(let l=n;l<o;l++){const u=s[l],d=t*a,f=d+u;if(!Number.isSafeInteger(f)||d/t!==a||f-u!==d)throw new Error("convertRadix: carry overflow");const h=f/r;a=f%r;const y=Math.floor(h);if(s[l]=y,!Number.isSafeInteger(y)||y*r+a!==f)throw new Error("convertRadix: carry overflow");if(c)y?c=!1:n=l;else continue}if(i.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}const GO=(e,t)=>t===0?e:GO(t,e%t),uf=(e,t)=>e+(t-GO(e,t)),yp=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function e1(e,t,r,n){if(cf(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(uf(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${uf(t,r)}`);let i=0,s=0;const o=yp[t],a=yp[r]-1,c=[];for(const l of e){if($l(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)c.push((i>>s-r&a)>>>0);const u=yp[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<r-s&a,!n&&s>=t)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&c.push(i>>>0),c}function HL(e){$l(e);const t=2**8;return{encode:r=>{if(!$O(r))throw new Error("radix.encode input should be Uint8Array");return Jv(Array.from(r),t,e)},decode:r=>(HO("radix.decode",r),Uint8Array.from(Jv(r,e,t)))}}function VL(e,t=!1){if($l(e),e>32,uf(8,e)>32||uf(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!$O(r))throw new Error("radix2.encode input should be Uint8Array");return e1(Array.from(r),8,e,!t)},decode:r=>(HO("radix2.decode",r),Uint8Array.from(e1(r,e,8,t)))}}const KL=VO(VL(5),KO("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),qL(5),WO("")),WL=e=>VO(HL(58),KO(e),WO("")),ql=WL("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function GL(e){return dL(YL(e))}function YL(e){const{payload:t,signature:r}=e,{r:n,s:i,yParity:s}=r,o=new DL.Signature(BigInt(n),BigInt(i)).addRecoveryBit(s).recoverPublicKey(Bb(t).substring(2));return rL(o)}function QL(e){const t=e.length;let r=0,n=0;for(;n<t;){let i=e.charCodeAt(n++);if(i&4294967168)if(!(i&4294965248))r+=2;else{if(i>=55296&&i<=56319&&n<t){const s=e.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}i&4294901760?r+=4:r+=3}else{r++;continue}}return r}function ZL(e,t,r){const n=e.length;let i=r,s=0;for(;s<n;){let o=e.charCodeAt(s++);if(o&4294967168)if(!(o&4294965248))t[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){const a=e.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(t[i++]=o>>18&7|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128):(t[i++]=o>>12&15|224,t[i++]=o>>6&63|128)}else{t[i++]=o;continue}t[i++]=o&63|128}}const XL=new TextEncoder,JL=50;function eD(e,t,r){XL.encodeInto(e,t.subarray(r))}function tD(e,t,r){e.length>JL?eD(e,t,r):ZL(e,t,r)}const rD=4096;function YO(e,t,r){let n=t;const i=n+r,s=[];let o="";for(;n<i;){const a=e[n++];if(!(a&128))s.push(a);else if((a&224)===192){const c=e[n++]&63;s.push((a&31)<<6|c)}else if((a&240)===224){const c=e[n++]&63,l=e[n++]&63;s.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=e[n++]&63,l=e[n++]&63,u=e[n++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=rD&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const nD=new TextDecoder,iD=200;function sD(e,t,r){const n=e.subarray(t,t+r);return nD.decode(n)}function oD(e,t,r){return r>iD?sD(e,t,r):YO(e,t,r)}class Au{constructor(t,r){oe(this,"type"),oe(this,"data"),this.type=t,this.data=r}}class Cr extends Error{constructor(t){super(t);const r=Object.create(Cr.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Cr.name})}}const uc=4294967295;function aD(e,t,r){const n=r/4294967296,i=r;e.setUint32(t,n),e.setUint32(t+4,i)}function QO(e,t,r){const n=Math.floor(r/4294967296),i=r;e.setUint32(t,n),e.setUint32(t+4,i)}function ZO(e,t){const r=e.getInt32(t),n=e.getUint32(t+4);return r*4294967296+n}function cD(e,t){const r=e.getUint32(t),n=e.getUint32(t+4);return r*4294967296+n}const lD=-1,uD=4294967296-1,dD=17179869184-1;function fD({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=dD)if(t===0&&e<=uD){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e),r}else{const r=e/4294967296,n=e&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,t<<2|r&3),s.setUint32(4,n),i}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,t),QO(n,4,e),r}}function hD(e){const t=e.getTime(),r=Math.floor(t/1e3),n=(t-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}function pD(e){if(e instanceof Date){const t=hD(e);return fD(t)}else return null}function gD(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const r=t.getUint32(0),n=t.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{const r=ZO(t,4),n=t.getUint32(0);return{sec:r,nsec:n}}default:throw new Cr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function yD(e){const t=gD(e);return new Date(t.sec*1e3+t.nsec/1e6)}const mD={type:lD,encode:pD,decode:yD},by=class{constructor(){oe(this,"__brand"),oe(this,"builtInEncoders",[]),oe(this,"builtInDecoders",[]),oe(this,"encoders",[]),oe(this,"decoders",[]),this.register(mD)}register({type:t,encode:r,decode:n}){if(t>=0)this.encoders[t]=r,this.decoders[t]=n;else{const i=-1-t;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(t,r){for(let n=0;n<this.builtInEncoders.length;n++){const i=this.builtInEncoders[n];if(i!=null){const s=i(t,r);if(s!=null){const o=-1-n;return new Au(o,s)}}}for(let n=0;n<this.encoders.length;n++){const i=this.encoders[n];if(i!=null){const s=i(t,r);if(s!=null){const o=n;return new Au(o,s)}}}return t instanceof Au?t:null}decode(t,r,n){const i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(t,r,n):new Au(r,t)}};oe(by,"defaultCodec",new by);let XO=by;function bD(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function wy(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):bD(e)?new Uint8Array(e):Uint8Array.from(e)}const wD=100,vD=2048;let ED=class JO{constructor(t){oe(this,"extensionCodec"),oe(this,"context"),oe(this,"useBigInt64"),oe(this,"maxDepth"),oe(this,"initialBufferSize"),oe(this,"sortKeys"),oe(this,"forceFloat32"),oe(this,"ignoreUndefined"),oe(this,"forceIntegerToFloat"),oe(this,"pos"),oe(this,"view"),oe(this,"bytes"),oe(this,"entered",!1),this.extensionCodec=(t==null?void 0:t.extensionCodec)??XO.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(t==null?void 0:t.useBigInt64)??!1,this.maxDepth=(t==null?void 0:t.maxDepth)??wD,this.initialBufferSize=(t==null?void 0:t.initialBufferSize)??vD,this.sortKeys=(t==null?void 0:t.sortKeys)??!1,this.forceFloat32=(t==null?void 0:t.forceFloat32)??!1,this.ignoreUndefined=(t==null?void 0:t.ignoreUndefined)??!1,this.forceIntegerToFloat=(t==null?void 0:t.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new JO({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,r)}ensureBufferSizeToWrite(t){const r=this.pos+t;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(t){const r=new ArrayBuffer(t),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=QL(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),tD(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,r){const n=this.extensionCodec.tryToEncode(t,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(t))this.encodeArray(t,r);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const r=t.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=wy(t);this.writeU8a(n)}encodeArray(t,r){const n=t.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const i of t)this.doEncode(i,r+1)}countWithoutUndefined(t,r){let n=0;for(const i of r)t[i]!==void 0&&n++;return n}encodeMap(t,r){const n=Object.keys(t);this.sortKeys&&n.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of n){const o=t[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(t){if(typeof t.data=="function"){const n=t.data(this.pos+6),i=n.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(n);return}const r=t.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const r=t.length;this.ensureBufferSizeToWrite(r),this.bytes.set(t,this.pos),this.pos+=r}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),aD(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),QO(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function _D(e,t){return new ED(t).encodeSharedRef(e)}function mp(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const SD=16,xD=16;class ID{constructor(t=SD,r=xD){oe(this,"hit",0),oe(this,"miss",0),oe(this,"caches"),oe(this,"maxKeyLength"),oe(this,"maxLengthPerKey"),this.maxKeyLength=t,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,r,n){const i=this.caches[n-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<n;a++)if(o[a]!==t[r+a])continue e;return s.str}return null}store(t,r){const n=this.caches[t.length-1],i={bytes:t,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(t,r,n){const i=this.find(t,r,n);if(i!=null)return this.hit++,i;this.miss++;const s=YO(t,r,n),o=Uint8Array.prototype.slice.call(t,r,r+n);return this.store(o,s),s}}const vy="array",Hc="map_key",ek="map_value",OD=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Cr("The type of key must be string or number but "+typeof e)};class kD{constructor(){oe(this,"stack",[]),oe(this,"stackHeadPosition",-1)}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const r=this.getUninitializedStateFromPool();r.type=vy,r.position=0,r.size=t,r.array=new Array(t)}pushMapState(t){const r=this.getUninitializedStateFromPool();r.type=Hc,r.readCount=0,r.size=t,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===vy){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===Hc||t.type===ek){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const dc=-1,Db=new DataView(new ArrayBuffer(0)),AD=new Uint8Array(Db.buffer);try{Db.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const t1=new RangeError("Insufficient data"),PD=new ID;let RD=class tk{constructor(t){oe(this,"extensionCodec"),oe(this,"context"),oe(this,"useBigInt64"),oe(this,"rawStrings"),oe(this,"maxStrLength"),oe(this,"maxBinLength"),oe(this,"maxArrayLength"),oe(this,"maxMapLength"),oe(this,"maxExtLength"),oe(this,"keyDecoder"),oe(this,"mapKeyConverter"),oe(this,"totalPos",0),oe(this,"pos",0),oe(this,"view",Db),oe(this,"bytes",AD),oe(this,"headByte",dc),oe(this,"stack",new kD),oe(this,"entered",!1),this.extensionCodec=(t==null?void 0:t.extensionCodec)??XO.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(t==null?void 0:t.useBigInt64)??!1,this.rawStrings=(t==null?void 0:t.rawStrings)??!1,this.maxStrLength=(t==null?void 0:t.maxStrLength)??uc,this.maxBinLength=(t==null?void 0:t.maxBinLength)??uc,this.maxArrayLength=(t==null?void 0:t.maxArrayLength)??uc,this.maxMapLength=(t==null?void 0:t.maxMapLength)??uc,this.maxExtLength=(t==null?void 0:t.maxExtLength)??uc,this.keyDecoder=(t==null?void 0:t.keyDecoder)!==void 0?t.keyDecoder:PD,this.mapKeyConverter=(t==null?void 0:t.mapKeyConverter)??OD}clone(){return new tk({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=dc,this.stack.reset()}setBuffer(t){const r=wy(t);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===dc&&!this.hasRemaining(1))this.setBuffer(t);else{const r=this.bytes.subarray(this.pos),n=wy(t),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let r=!1,n;for await(const a of t){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${mp(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,r){if(this.entered){yield*this.clone().decodeMultiAsync(t,r);return}try{this.entered=!0;let n=r,i=-1;for await(const s of t){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let r;if(t>=224)r=t-256;else if(t<192)if(t<128)r=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{const i=t-160;r=this.decodeString(i,0)}else if(t===192)r=null;else if(t===194)r=!1;else if(t===195)r=!0;else if(t===202)r=this.readF32();else if(t===203)r=this.readF64();else if(t===204)r=this.readU8();else if(t===205)r=this.readU16();else if(t===206)r=this.readU32();else if(t===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(t===208)r=this.readI8();else if(t===209)r=this.readI16();else if(t===210)r=this.readI32();else if(t===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(t===217){const i=this.lookU8();r=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();r=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();r=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(t===196){const i=this.lookU8();r=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();r=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();r=this.decodeBinary(i,4)}else if(t===212)r=this.decodeExtension(1,0);else if(t===213)r=this.decodeExtension(2,0);else if(t===214)r=this.decodeExtension(4,0);else if(t===215)r=this.decodeExtension(8,0);else if(t===216)r=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();r=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();r=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();r=this.decodeExtension(i,4)}else throw new Cr(`Unrecognized type byte: ${mp(t)}`);this.complete();const n=this.stack;for(;n.length>0;){const i=n.top();if(i.type===vy)if(i.array[i.position]=r,i.position++,i.position===i.size)r=i.array,n.release(i);else continue e;else if(i.type===Hc){if(r==="__proto__")throw new Cr("The key __proto__ is not allowed");i.key=this.mapKeyConverter(r),i.type=ek;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)r=i.map,n.release(i);else{i.key=null,i.type=Hc;continue e}}return r}}readHeadByte(){return this.headByte===dc&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=dc}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Cr(`Unrecognized array type byte: ${mp(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Cr(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Cr(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,r):this.decodeBinary(t,r)}decodeUtf8String(t,r){var n;if(t>this.maxStrLength)throw new Cr(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+t)throw t1;const i=this.pos+r;let s;return this.stateIsMapKey()&&(n=this.keyDecoder)!=null&&n.canBeCached(t)?s=this.keyDecoder.decode(this.bytes,i,t):s=oD(this.bytes,i,t),this.pos+=r+t,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Hc:!1}decodeBinary(t,r){if(t>this.maxBinLength)throw new Cr(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+r))throw t1;const n=this.pos+r,i=this.bytes.subarray(n,n+t);return this.pos+=r+t,i}decodeExtension(t,r){if(t>this.maxExtLength)throw new Cr(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),i=this.decodeBinary(t,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=cD(this.view,this.pos);return this.pos+=8,t}readI64(){const t=ZO(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function TD(e,t){return new RD(t).decode(e)}const CD=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),ND=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function po(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return ND(e)}catch{return e}}function go(e){return typeof e=="string"?e:CD(e)||""}function UD(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function rk(e,...t){if(!UD(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function r1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function BD(e,t){rk(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Do=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bp=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function LD(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function nk(e){return typeof e=="string"&&(e=LD(e)),rk(e),e}let DD=class{clone(){return this._cloneInto()}};function jD(e){const t=n=>e().update(nk(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ik(e=32){if(Do&&typeof Do.getRandomValues=="function")return Do.getRandomValues(new Uint8Array(e));if(Do&&typeof Do.randomBytes=="function")return Do.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function MD(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}let zD=class extends DD{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bp(this.buffer)}update(e){r1(this);const{view:t,buffer:r,blockLen:n}=this;e=nk(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){const a=bp(e);for(;n<=i-s;s+=n)this.process(a,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){r1(this),BD(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let u=s;u<n;u++)t[u]=0;MD(r,n-8,BigInt(this.length*8),i),this.process(r,0);const o=bp(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}};const Pu=BigInt(2**32-1),Ey=BigInt(32);function sk(e,t=!1){return t?{h:Number(e&Pu),l:Number(e>>Ey&Pu)}:{h:Number(e>>Ey&Pu)|0,l:Number(e&Pu)|0}}function FD(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=sk(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const $D=(e,t)=>BigInt(e>>>0)<<Ey|BigInt(t>>>0),qD=(e,t,r)=>e>>>r,HD=(e,t,r)=>e<<32-r|t>>>r,VD=(e,t,r)=>e>>>r|t<<32-r,KD=(e,t,r)=>e<<32-r|t>>>r,WD=(e,t,r)=>e<<64-r|t>>>r-32,GD=(e,t,r)=>e>>>r-32|t<<64-r,YD=(e,t)=>t,QD=(e,t)=>e,ZD=(e,t,r)=>e<<r|t>>>32-r,XD=(e,t,r)=>t<<r|e>>>32-r,JD=(e,t,r)=>t<<r-32|e>>>64-r,ej=(e,t,r)=>e<<r-32|t>>>64-r;function tj(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const rj=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),nj=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,ij=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),sj=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,oj=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),aj=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,ue={fromBig:sk,split:FD,toBig:$D,shrSH:qD,shrSL:HD,rotrSH:VD,rotrSL:KD,rotrBH:WD,rotrBL:GD,rotr32H:YD,rotr32L:QD,rotlSH:ZD,rotlSL:XD,rotlBH:JD,rotlBL:ej,add:tj,add3L:rj,add3H:nj,add4L:ij,add4H:sj,add5H:aj,add5L:oj},[cj,lj]=ue.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Li=new Uint32Array(80),Di=new Uint32Array(80);let uj=class extends zD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:d,Gh:f,Gl:h,Hh:y,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,l,u,d,f,h,y,g]}set(e,t,r,n,i,s,o,a,c,l,u,d,f,h,y,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=n|0,this.Ch=i|0,this.Cl=s|0,this.Dh=o|0,this.Dl=a|0,this.Eh=c|0,this.El=l|0,this.Fh=u|0,this.Fl=d|0,this.Gh=f|0,this.Gl=h|0,this.Hh=y|0,this.Hl=g|0}process(e,t){for(let w=0;w<16;w++,t+=4)Li[w]=e.getUint32(t),Di[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const _=Li[w-15]|0,I=Di[w-15]|0,R=ue.rotrSH(_,I,1)^ue.rotrSH(_,I,8)^ue.shrSH(_,I,7),T=ue.rotrSL(_,I,1)^ue.rotrSL(_,I,8)^ue.shrSL(_,I,7),C=Li[w-2]|0,L=Di[w-2]|0,N=ue.rotrSH(C,L,19)^ue.rotrBH(C,L,61)^ue.shrSH(C,L,6),F=ue.rotrSL(C,L,19)^ue.rotrBL(C,L,61)^ue.shrSL(C,L,6),q=ue.add4L(T,F,Di[w-7],Di[w-16]),j=ue.add4H(q,R,N,Li[w-7],Li[w-16]);Li[w]=j|0,Di[w]=q|0}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:d,Fh:f,Fl:h,Gh:y,Gl:g,Hh:v,Hl:b}=this;for(let w=0;w<80;w++){const _=ue.rotrSH(u,d,14)^ue.rotrSH(u,d,18)^ue.rotrBH(u,d,41),I=ue.rotrSL(u,d,14)^ue.rotrSL(u,d,18)^ue.rotrBL(u,d,41),R=u&f^~u&y,T=d&h^~d&g,C=ue.add5L(b,I,T,lj[w],Di[w]),L=ue.add5H(C,v,_,R,cj[w],Li[w]),N=C|0,F=ue.rotrSH(r,n,28)^ue.rotrBH(r,n,34)^ue.rotrBH(r,n,39),q=ue.rotrSL(r,n,28)^ue.rotrBL(r,n,34)^ue.rotrBL(r,n,39),j=r&i^r&o^i&o,B=n&s^n&a^s&a;v=y|0,b=g|0,y=f|0,g=h|0,f=u|0,h=d|0,{h:u,l:d}=ue.add(c|0,l|0,L|0,N|0),c=o|0,l=a|0,o=i|0,a=s|0,i=r|0,s=n|0;const D=ue.add3L(N,q,B);r=ue.add3H(D,L,F,j),n=D|0}({h:r,l:n}=ue.add(this.Ah|0,this.Al|0,r|0,n|0)),{h:i,l:s}=ue.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:o,l:a}=ue.add(this.Ch|0,this.Cl|0,o|0,a|0),{h:c,l}=ue.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:u,l:d}=ue.add(this.Eh|0,this.El|0,u|0,d|0),{h:f,l:h}=ue.add(this.Fh|0,this.Fl|0,f|0,h|0),{h:y,l:g}=ue.add(this.Gh|0,this.Gl|0,y|0,g|0),{h:v,l:b}=ue.add(this.Hh|0,this.Hl|0,v|0,b|0),this.set(r,n,i,s,o,a,c,l,u,d,f,h,y,g,v,b)}roundClean(){Li.fill(0),Di.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const dj=jD(()=>new uj);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jb=BigInt(0),ok=BigInt(1),fj=BigInt(2);function Mb(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function zb(e){if(!Mb(e))throw new Error("Uint8Array expected")}function wp(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const hj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Fb(e){zb(e);let t="";for(let r=0;r<e.length;r++)t+=hj[e[r]];return t}function ak(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?jb:BigInt("0x"+e)}const ni={_0:48,_9:57,A:65,F:70,a:97,f:102};function n1(e){if(e>=ni._0&&e<=ni._9)return e-ni._0;if(e>=ni.A&&e<=ni.F)return e-(ni.A-10);if(e>=ni.a&&e<=ni.f)return e-(ni.a-10)}function ck(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=n1(e.charCodeAt(s)),a=n1(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function pj(e){return ak(Fb(e))}function wd(e){return zb(e),ak(Fb(Uint8Array.from(e).reverse()))}function lk(e,t){return ck(e.toString(16).padStart(t*2,"0"))}function _y(e,t){return lk(e,t).reverse()}function ii(e,t,r){let n;if(typeof t=="string")try{n=ck(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Mb(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function i1(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];zb(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}const vp=e=>typeof e=="bigint"&&jb<=e;function gj(e,t,r){return vp(e)&&vp(t)&&vp(r)&&t<=e&&e<r}function fc(e,t,r,n){if(!gj(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function yj(e){let t;for(t=0;e>jb;e>>=ok,t+=1);return t}const mj=e=>(fj<<BigInt(e-1))-ok,bj={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Mb(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function $b(e,t,r={}){const n=(i,s,o)=>{const a=bj[s];if(typeof a!="function")throw new Error("invalid validator function");const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return e}function s1(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const s=e(r,...n);return t.set(r,s),s}}const It=BigInt(0),it=BigInt(1),$s=BigInt(2),wj=BigInt(3),Sy=BigInt(4),o1=BigInt(5),a1=BigInt(8);function yt(e,t){const r=e%t;return r>=It?r:t+r}function vj(e,t,r){if(t<It)throw new Error("invalid exponent, negatives unsupported");if(r<=It)throw new Error("invalid modulus");if(r===it)return It;let n=it;for(;t>It;)t&it&&(n=n*e%r),e=e*e%r,t>>=it;return n}function Tn(e,t,r){let n=e;for(;t-- >It;)n*=n,n%=r;return n}function c1(e,t){if(e===It)throw new Error("invert: expected non-zero number");if(t<=It)throw new Error("invert: expected positive modulus, got "+t);let r=yt(e,t),n=t,i=It,s=it;for(;r!==It;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==it)throw new Error("invert: does not exist");return yt(i,t)}function Ej(e){const t=(e-it)/$s;let r,n,i;for(r=e-it,n=0;r%$s===It;r/=$s,n++);for(i=$s;i<e&&vj(i,t,e)!==e-it;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(e+it)/Sy;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+it)/$s;return function(o,a){if(o.pow(a,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let y=o.sqr(d);f<c&&!o.eql(y,o.ONE);f++)y=o.sqr(y);const h=o.pow(l,it<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function _j(e){if(e%Sy===wj){const t=(e+it)/Sy;return function(r,n){const i=r.pow(n,t);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(e%a1===o1){const t=(e-o1)/a1;return function(r,n){const i=r.mul(n,$s),s=r.pow(i,t),o=r.mul(n,s),a=r.mul(r.mul(o,$s),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return Ej(e)}const Sj=(e,t)=>(yt(e,t)&it)===it,xj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ij(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=xj.reduce((n,i)=>(n[i]="function",n),t);return $b(e,r)}function Oj(e,t,r){if(r<It)throw new Error("invalid exponent, negatives unsupported");if(r===It)return e.ONE;if(r===it)return t;let n=e.ONE,i=t;for(;r>It;)r&it&&(n=e.mul(n,i)),i=e.sqr(i),r>>=it;return n}function kj(e,t){const r=new Array(t.length),n=t.reduce((s,o,a)=>e.is0(o)?s:(r[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return t.reduceRight((s,o,a)=>e.is0(o)?s:(r[a]=e.mul(s,r[a]),e.mul(s,o)),i),r}function uk(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function dk(e,t,r=!1,n={}){if(e<=It)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=uk(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:mj(i),ZERO:It,ONE:it,create:c=>yt(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return It<=c&&c<e},is0:c=>c===It,isOdd:c=>(c&it)===it,neg:c=>yt(-c,e),eql:(c,l)=>c===l,sqr:c=>yt(c*c,e),add:(c,l)=>yt(c+l,e),sub:(c,l)=>yt(c-l,e),mul:(c,l)=>yt(c*l,e),pow:(c,l)=>Oj(a,c,l),div:(c,l)=>yt(c*c1(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>c1(c,e),sqrt:n.sqrt||(c=>(o||(o=_j(e)),o(a,c))),invertBatch:c=>kj(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?_y(c,s):lk(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?wd(c):pj(c)}});return Object.freeze(a)}const l1=BigInt(0),Ru=BigInt(1);function Ep(e,t){const r=t.negate();return e?r:t}function fk(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function _p(e,t){fk(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function Aj(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function Pj(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const Sp=new WeakMap,hk=new WeakMap;function xp(e){return hk.get(e)||1}function Rj(e,t){return{constTimeNegate:Ep,hasPrecomputes(r){return xp(r)!==1},unsafeLadder(r,n,i=e.ZERO){let s=r;for(;n>l1;)n&Ru&&(i=i.add(s)),s=s.double(),n>>=Ru;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=_p(n,t),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=_p(r,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let f=0;f<s;f++){const h=f*o;let y=Number(i&l);i>>=d,y>o&&(y-=u,i+=Ru);const g=h,v=h+Math.abs(y)-1,b=f%2!==0,w=y<0;y===0?c=c.add(Ep(b,n[g])):a=a.add(Ep(w,n[v]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=_p(r,t),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const f=d*a;if(i===l1)break;let h=Number(i&c);if(i>>=u,h>a&&(h-=l,i+=Ru),h===0)continue;let y=n[f+Math.abs(h)-1];h<0&&(y=y.negate()),s=s.add(y)}return s},getPrecomputes(r,n,i){let s=Sp.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Sp.set(n,i(s))),s},wNAFCached(r,n,i){const s=xp(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=xp(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){fk(n,t),hk.set(r,n),Sp.delete(r)}}}function Tj(e,t,r,n){if(Aj(r,e),Pj(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=yj(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((t.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let h=0;h<n.length;h++){const y=n[h],g=Number(y>>BigInt(d)&BigInt(a));c[g]=c[g].add(r[h])}let f=i;for(let h=c.length-1,y=i;h>0;h--)y=y.add(c[h]),f=f.add(y);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function Cj(e){return Ij(e.Fp),$b(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uk(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const fn=BigInt(0),cr=BigInt(1),Tu=BigInt(2),Nj=BigInt(8),Uj={zip215:!0};function Bj(e){const t=Cj(e);return $b(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Lj(e){const t=Bj(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,l=Tu<<BigInt(a*8)-cr,u=r.create,d=dk(t.n,t.nBitLength),f=t.uvRatio||((m,S)=>{try{return{isValid:!0,value:r.sqrt(m*r.inv(S))}}catch{return{isValid:!1,value:fn}}}),h=t.adjustScalarBytes||(m=>m),y=t.domain||((m,S,P)=>{if(wp("phflag",P),S.length||P)throw new Error("Contexts/pre-hash are not supported");return m});function g(m,S){fc("coordinate "+m,S,fn,l)}function v(m){if(!(m instanceof _))throw new Error("ExtendedPoint expected")}const b=s1((m,S)=>{const{ex:P,ey:k,ez:A}=m,O=m.is0();S==null&&(S=O?Nj:r.inv(A));const M=u(P*S),$=u(k*S),Q=u(A*S);if(O)return{x:fn,y:cr};if(Q!==cr)throw new Error("invZ was invalid");return{x:M,y:$}}),w=s1(m=>{const{a:S,d:P}=t;if(m.is0())throw new Error("bad point: ZERO");const{ex:k,ey:A,ez:O,et:M}=m,$=u(k*k),Q=u(A*A),H=u(O*O),G=u(H*H),ee=u($*S),ie=u(H*u(ee+Q)),ce=u(G+u(P*u($*Q)));if(ie!==ce)throw new Error("bad point: equation left != right (1)");const se=u(k*A),de=u(O*M);if(se!==de)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(S,P,k,A){this.ex=S,this.ey=P,this.ez=k,this.et=A,g("x",S),g("y",P),g("z",k),g("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof _)throw new Error("extended point not allowed");const{x:P,y:k}=S||{};return g("x",P),g("y",k),new _(P,k,cr,u(P*k))}static normalizeZ(S){const P=r.invertBatch(S.map(k=>k.ez));return S.map((k,A)=>k.toAffine(P[A])).map(_.fromAffine)}static msm(S,P){return Tj(_,d,S,P)}_setWindowSize(S){T.setWindowSize(this,S)}assertValidity(){w(this)}equals(S){v(S);const{ex:P,ey:k,ez:A}=this,{ex:O,ey:M,ez:$}=S,Q=u(P*$),H=u(O*A),G=u(k*$),ee=u(M*A);return Q===H&&G===ee}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=t,{ex:P,ey:k,ez:A}=this,O=u(P*P),M=u(k*k),$=u(Tu*u(A*A)),Q=u(S*O),H=P+k,G=u(u(H*H)-O-M),ee=Q+M,ie=ee-$,ce=Q-M,se=u(G*ie),de=u(ee*ce),Te=u(G*ce),Je=u(ie*ee);return new _(se,de,Je,Te)}add(S){v(S);const{a:P,d:k}=t,{ex:A,ey:O,ez:M,et:$}=this,{ex:Q,ey:H,ez:G,et:ee}=S;if(P===BigInt(-1)){const eu=u((O-A)*(H+Q)),Qa=u((O+A)*(H-Q)),Ci=u(Qa-eu);if(Ci===fn)return this.double();const kr=u(M*Tu*ee),Ao=u($*Tu*G),tu=Ao+kr,un=Qa+eu,ru=Ao-kr,p=u(tu*Ci),E=u(un*ru),x=u(tu*ru),U=u(Ci*un);return new _(p,E,U,x)}const ie=u(A*Q),ce=u(O*H),se=u($*k*ee),de=u(M*G),Te=u((A+O)*(Q+H)-ie-ce),Je=de-se,qe=de+se,Ye=u(ce-P*ie),ln=u(Te*Je),ko=u(qe*Ye),Ya=u(Te*Ye),xh=u(Je*qe);return new _(ln,ko,xh,Ya)}subtract(S){return this.add(S.negate())}wNAF(S){return T.wNAFCached(this,S,_.normalizeZ)}multiply(S){const P=S;fc("scalar",P,cr,n);const{p:k,f:A}=this.wNAF(P);return _.normalizeZ([k,A])[0]}multiplyUnsafe(S,P=_.ZERO){const k=S;return fc("scalar",k,fn,n),k===fn?R:this.is0()||k===cr?this:T.wNAFCachedUnsafe(this,k,_.normalizeZ,P)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,n).is0()}toAffine(S){return b(this,S)}clearCofactor(){const{h:S}=t;return S===cr?this:this.multiplyUnsafe(S)}static fromHex(S,P=!1){const{d:k,a:A}=t,O=r.BYTES;S=ii("pointHex",S,O),wp("zip215",P);const M=S.slice(),$=S[O-1];M[O-1]=$&-129;const Q=wd(M),H=P?l:r.ORDER;fc("pointHex.y",Q,fn,H);const G=u(Q*Q),ee=u(G-cr),ie=u(k*G-A);let{isValid:ce,value:se}=f(ee,ie);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const de=(se&cr)===cr,Te=($&128)!==0;if(!P&&se===fn&&Te)throw new Error("Point.fromHex: x=0 and x_0=1");return Te!==de&&(se=u(-se)),_.fromAffine({x:se,y:Q})}static fromPrivateKey(S){return N(S).point}toRawBytes(){const{x:S,y:P}=this.toAffine(),k=_y(P,r.BYTES);return k[k.length-1]|=S&cr?128:0,k}toHex(){return Fb(this.toRawBytes())}}_.BASE=new _(t.Gx,t.Gy,cr,u(t.Gx*t.Gy)),_.ZERO=new _(fn,cr,cr,fn);const{BASE:I,ZERO:R}=_,T=Rj(_,a*8);function C(m){return yt(m,n)}function L(m){return C(wd(m))}function N(m){const S=r.BYTES;m=ii("private key",m,S);const P=ii("hashed private key",s(m),2*S),k=h(P.slice(0,S)),A=P.slice(S,2*S),O=L(k),M=I.multiply(O),$=M.toRawBytes();return{head:k,prefix:A,scalar:O,point:M,pointBytes:$}}function F(m){return N(m).pointBytes}function q(m=new Uint8Array,...S){const P=i1(...S);return L(s(y(P,ii("context",m),!!i)))}function j(m,S,P={}){m=ii("message",m),i&&(m=i(m));const{prefix:k,scalar:A,pointBytes:O}=N(S),M=q(P.context,k,m),$=I.multiply(M).toRawBytes(),Q=q(P.context,$,O,m),H=C(M+Q*A);fc("signature.s",H,fn,n);const G=i1($,_y(H,r.BYTES));return ii("result",G,r.BYTES*2)}const B=Uj;function D(m,S,P,k=B){const{context:A,zip215:O}=k,M=r.BYTES;m=ii("signature",m,2*M),S=ii("message",S),P=ii("publicKey",P,M),O!==void 0&&wp("zip215",O),i&&(S=i(S));const $=wd(m.slice(M,2*M));let Q,H,G;try{Q=_.fromHex(P,O),H=_.fromHex(m.slice(0,M),O),G=I.multiplyUnsafe($)}catch{return!1}if(!O&&Q.isSmallOrder())return!1;const ee=q(A,H.toRawBytes(),Q.toRawBytes(),S);return H.add(Q.multiplyUnsafe(ee)).subtract(G).clearCofactor().equals(_.ZERO)}return I._setWindowSize(8),{CURVE:t,getPublicKey:F,sign:j,verify:D,ExtendedPoint:_,utils:{getExtendedPublicKey:N,randomPrivateKey:()=>o(r.BYTES),precompute(m=8,S=_.BASE){return S._setWindowSize(m),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const qb=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),u1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Dj=BigInt(1),d1=BigInt(2);BigInt(3);const jj=BigInt(5),Mj=BigInt(8);function zj(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=qb,o=e*e%s*e%s,a=Tn(o,d1,s)*o%s,c=Tn(a,Dj,s)*e%s,l=Tn(c,jj,s)*c%s,u=Tn(l,t,s)*l%s,d=Tn(u,r,s)*u%s,f=Tn(d,n,s)*d%s,h=Tn(f,i,s)*f%s,y=Tn(h,i,s)*f%s,g=Tn(y,t,s)*l%s;return{pow_p_5_8:Tn(g,d1,s)*e%s,b2:o}}function Fj(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function $j(e,t){const r=qb,n=yt(t*t*t,r),i=yt(n*n*t,r),s=zj(e*i).pow_p_5_8;let o=yt(e*n*s,r);const a=yt(t*o*o,r),c=o,l=yt(o*u1,r),u=a===e,d=a===yt(-e,r),f=a===yt(-e*u1,r);return u&&(o=c),(d||f)&&(o=l),Sj(o,r)&&(o=yt(-o,r)),{isValid:u||d,value:o}}const qj=dk(qb,void 0,!0),Hj={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qj,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Mj,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:dj,randomBytes:ik,adjustScalarBytes:Fj,uvRatio:$j},pk=Lj(Hj),Vj="EdDSA",Kj="JWT",df=".",rh="base64url",gk="utf8",yk="utf8",Wj=":",Gj="did",Yj="key",f1="base58btc",Qj="z",Zj="K36",Xj=32;function Hb(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function mk(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Hb(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function bk(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const r=mk(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return Hb(r)}function Jj(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var g=0,v=0,b=0,w=y.length;b!==w&&y[b]===0;)b++,g++;for(var _=(w-b)*u+1>>>0,I=new Uint8Array(_);b!==w;){for(var R=y[b],T=0,C=_-1;(R!==0||T<v)&&C!==-1;C--,T++)R+=256*I[C]>>>0,I[C]=R%a>>>0,R=R/a>>>0;if(R!==0)throw new Error("Non-zero carry");v=T,b++}for(var L=_-v;L!==_&&I[L]===0;)L++;for(var N=c.repeat(g);L<_;++L)N+=e.charAt(I[L]);return N}function f(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var g=0;if(y[g]!==" "){for(var v=0,b=0;y[g]===c;)v++,g++;for(var w=(y.length-g)*l+1>>>0,_=new Uint8Array(w);y[g];){var I=r[y.charCodeAt(g)];if(I===255)return;for(var R=0,T=w-1;(I!==0||R<b)&&T!==-1;T--,R++)I+=a*_[T]>>>0,_[T]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");b=R,g++}if(y[g]!==" "){for(var C=w-b;C!==w&&_[C]===0;)C++;for(var L=new Uint8Array(v+(w-C)),N=v;C!==w;)L[N++]=_[C++];return L}}}function h(y){var g=f(y);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var e9=Jj,t9=e9;const wk=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},r9=e=>new TextEncoder().encode(e),n9=e=>new TextDecoder().decode(e);let i9=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},s9=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vk(this,e)}},o9=class{constructor(e){this.decoders=e}or(e){return vk(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const vk=(e,t)=>new o9({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let a9=class{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new i9(e,t,r),this.decoder=new s9(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const nh=({name:e,prefix:t,encode:r,decode:n})=>new a9(e,t,r,n),Hl=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=t9(r,t);return nh({prefix:e,name:t,encode:n,decode:s=>wk(i(s))})},c9=(e,t,r,n)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},l9=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},jt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>nh({prefix:t,name:e,encode(i){return l9(i,n,r)},decode(i){return c9(i,n,r,e)}}),u9=nh({prefix:"\0",name:"identity",encode:e=>n9(e),decode:e=>r9(e)});var d9=Object.freeze({__proto__:null,identity:u9});const f9=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var h9=Object.freeze({__proto__:null,base2:f9});const p9=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var g9=Object.freeze({__proto__:null,base8:p9});const y9=Hl({prefix:"9",name:"base10",alphabet:"0123456789"});var m9=Object.freeze({__proto__:null,base10:y9});const b9=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),w9=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v9=Object.freeze({__proto__:null,base16:b9,base16upper:w9});const E9=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_9=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),S9=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x9=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),I9=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),O9=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),k9=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),A9=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),P9=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var R9=Object.freeze({__proto__:null,base32:E9,base32upper:_9,base32pad:S9,base32padupper:x9,base32hex:I9,base32hexupper:O9,base32hexpad:k9,base32hexpadupper:A9,base32z:P9});const T9=Hl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),C9=Hl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var N9=Object.freeze({__proto__:null,base36:T9,base36upper:C9});const U9=Hl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B9=Hl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var L9=Object.freeze({__proto__:null,base58btc:U9,base58flickr:B9});const D9=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),j9=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),M9=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),z9=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var F9=Object.freeze({__proto__:null,base64:D9,base64pad:j9,base64url:M9,base64urlpad:z9});const Ek=Array.from(""),$9=Ek.reduce((e,t,r)=>(e[r]=t,e),[]),q9=Ek.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function H9(e){return e.reduce((t,r)=>(t+=$9[r],t),"")}function V9(e){const t=[];for(const r of e){const n=q9[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const K9=nh({prefix:"",name:"base256emoji",encode:H9,decode:V9});var W9=Object.freeze({__proto__:null,base256emoji:K9}),G9=_k,h1=128,Y9=-128,Q9=Math.pow(2,31);function _k(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Q9;)t[r++]=e&255|h1,e/=128;for(;e&Y9;)t[r++]=e&255|h1,e>>>=7;return t[r]=e|0,_k.bytes=r-n+1,t}var Z9=xy,X9=128,p1=127;function xy(e,n){var r=0,n=n||0,i=0,s=n,o,a=e.length;do{if(s>=a)throw xy.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=i<28?(o&p1)<<i:(o&p1)*Math.pow(2,i),i+=7}while(o>=X9);return xy.bytes=s-n,r}var J9=Math.pow(2,7),eM=Math.pow(2,14),tM=Math.pow(2,21),rM=Math.pow(2,28),nM=Math.pow(2,35),iM=Math.pow(2,42),sM=Math.pow(2,49),oM=Math.pow(2,56),aM=Math.pow(2,63),cM=function(e){return e<J9?1:e<eM?2:e<tM?3:e<rM?4:e<nM?5:e<iM?6:e<sM?7:e<oM?8:e<aM?9:10},lM={encode:G9,decode:Z9,encodingLength:cM},Sk=lM;const g1=(e,t,r=0)=>(Sk.encode(e,t,r),t),y1=e=>Sk.encodingLength(e),Iy=(e,t)=>{const r=t.byteLength,n=y1(e),i=n+y1(r),s=new Uint8Array(i+r);return g1(e,s,0),g1(r,s,n),s.set(t,i),new uM(e,r,t,s)};let uM=class{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}};const xk=({name:e,code:t,encode:r})=>new dM(e,t,r);let dM=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Iy(this.code,t):t.then(r=>Iy(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Ik=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),fM=xk({name:"sha2-256",code:18,encode:Ik("SHA-256")}),hM=xk({name:"sha2-512",code:19,encode:Ik("SHA-512")});var pM=Object.freeze({__proto__:null,sha256:fM,sha512:hM});const Ok=0,gM="identity",kk=wk,yM=e=>Iy(Ok,kk(e)),mM={code:Ok,name:gM,encode:kk,digest:yM};var bM=Object.freeze({__proto__:null,identity:mM});new TextEncoder,new TextDecoder;const m1={...d9,...h9,...g9,...m9,...v9,...R9,...N9,...L9,...F9,...W9};({...pM,...bM});function Ak(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const b1=Ak("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ip=Ak("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=mk(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Pk={utf8:b1,"utf-8":b1,hex:m1.base16,latin1:Ip,ascii:Ip,binary:Ip,...m1};function ih(e,t="utf8"){const r=Pk[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function Ka(e,t="utf8"){const r=Pk[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Hb(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function w1(e){return po(ih(Ka(e,rh),gk))}function ff(e){return ih(Ka(go(e),gk),rh)}function Rk(e){const t=Ka(Zj,f1),r=Qj+ih(bk([t,e]),f1);return[Gj,Yj,r].join(Wj)}function wM(e){return ih(e,rh)}function vM(e){return Ka(e,rh)}function EM(e){return Ka([ff(e.header),ff(e.payload)].join(df),yk)}function _M(e){return[ff(e.header),ff(e.payload),wM(e.signature)].join(df)}function Oy(e){const t=e.split(df),r=w1(t[0]),n=w1(t[1]),i=vM(t[2]),s=Ka(t.slice(0,2).join(df),yk);return{header:r,payload:n,signature:i,data:s}}function v1(e=ik(Xj)){const t=pk.getPublicKey(e);return{secretKey:bk([e,t]),publicKey:t}}async function SM(e,t,r,n,i=Z.fromMiliseconds(Date.now())){const s={alg:Vj,typ:Kj},o=Rk(n.publicKey),a=i+r,c={iss:o,sub:e,aud:t,iat:i,exp:a},l=EM({header:s,payload:c}),u=pk.sign(l,n.secretKey.slice(0,32));return _M({header:s,payload:c,signature:u})}function Vb(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Tk(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Vb(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Vc(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const r=Tk(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return Vb(r)}function xM(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var g=0,v=0,b=0,w=y.length;b!==w&&y[b]===0;)b++,g++;for(var _=(w-b)*u+1>>>0,I=new Uint8Array(_);b!==w;){for(var R=y[b],T=0,C=_-1;(R!==0||T<v)&&C!==-1;C--,T++)R+=256*I[C]>>>0,I[C]=R%a>>>0,R=R/a>>>0;if(R!==0)throw new Error("Non-zero carry");v=T,b++}for(var L=_-v;L!==_&&I[L]===0;)L++;for(var N=c.repeat(g);L<_;++L)N+=e.charAt(I[L]);return N}function f(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var g=0;if(y[g]!==" "){for(var v=0,b=0;y[g]===c;)v++,g++;for(var w=(y.length-g)*l+1>>>0,_=new Uint8Array(w);y[g];){var I=r[y.charCodeAt(g)];if(I===255)return;for(var R=0,T=w-1;(I!==0||R<b)&&T!==-1;T--,R++)I+=a*_[T]>>>0,_[T]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");b=R,g++}if(y[g]!==" "){for(var C=w-b;C!==w&&_[C]===0;)C++;for(var L=new Uint8Array(v+(w-C)),N=v;C!==w;)L[N++]=_[C++];return L}}}function h(y){var g=f(y);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var IM=xM,OM=IM;const kM=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},AM=e=>new TextEncoder().encode(e),PM=e=>new TextDecoder().decode(e);class RM{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class TM{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ck(this,t)}}class CM{constructor(t){this.decoders=t}or(t){return Ck(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ck=(e,t)=>new CM({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class NM{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new RM(t,r,n),this.decoder=new TM(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const sh=({name:e,prefix:t,encode:r,decode:n})=>new NM(e,t,r,n),Vl=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=OM(r,t);return sh({prefix:e,name:t,encode:n,decode:s=>kM(i(s))})},UM=(e,t,r,n)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},BM=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Mt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>sh({prefix:t,name:e,encode(i){return BM(i,n,r)},decode(i){return UM(i,n,r,e)}}),LM=sh({prefix:"\0",name:"identity",encode:e=>PM(e),decode:e=>AM(e)}),DM=Object.freeze(Object.defineProperty({__proto__:null,identity:LM},Symbol.toStringTag,{value:"Module"})),jM=Mt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),MM=Object.freeze(Object.defineProperty({__proto__:null,base2:jM},Symbol.toStringTag,{value:"Module"})),zM=Mt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),FM=Object.freeze(Object.defineProperty({__proto__:null,base8:zM},Symbol.toStringTag,{value:"Module"})),$M=Vl({prefix:"9",name:"base10",alphabet:"0123456789"}),qM=Object.freeze(Object.defineProperty({__proto__:null,base10:$M},Symbol.toStringTag,{value:"Module"})),HM=Mt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),VM=Mt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),KM=Object.freeze(Object.defineProperty({__proto__:null,base16:HM,base16upper:VM},Symbol.toStringTag,{value:"Module"})),WM=Mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),GM=Mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),YM=Mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),QM=Mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZM=Mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XM=Mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),JM=Mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),e7=Mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),t7=Mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),r7=Object.freeze(Object.defineProperty({__proto__:null,base32:WM,base32hex:ZM,base32hexpad:JM,base32hexpadupper:e7,base32hexupper:XM,base32pad:YM,base32padupper:QM,base32upper:GM,base32z:t7},Symbol.toStringTag,{value:"Module"})),n7=Vl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i7=Vl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),s7=Object.freeze(Object.defineProperty({__proto__:null,base36:n7,base36upper:i7},Symbol.toStringTag,{value:"Module"})),o7=Vl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),a7=Vl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),c7=Object.freeze(Object.defineProperty({__proto__:null,base58btc:o7,base58flickr:a7},Symbol.toStringTag,{value:"Module"})),l7=Mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),u7=Mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),d7=Mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),f7=Mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),h7=Object.freeze(Object.defineProperty({__proto__:null,base64:l7,base64pad:u7,base64url:d7,base64urlpad:f7},Symbol.toStringTag,{value:"Module"})),Nk=Array.from(""),p7=Nk.reduce((e,t,r)=>(e[r]=t,e),[]),g7=Nk.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function y7(e){return e.reduce((t,r)=>(t+=p7[r],t),"")}function m7(e){const t=[];for(const r of e){const n=g7[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const b7=sh({prefix:"",name:"base256emoji",encode:y7,decode:m7}),w7=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:b7},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const E1={...DM,...MM,...FM,...qM,...KM,...r7,...s7,...c7,...h7,...w7};function Uk(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const _1=Uk("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Op=Uk("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Tk(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Bk={utf8:_1,"utf-8":_1,hex:E1.base16,latin1:Op,ascii:Op,binary:Op,...E1};function rn(e,t="utf8"){const r=Bk[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Vb(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function _r(e,t="utf8"){const r=Bk[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const v7={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},E7="Input must be an string, Buffer or Uint8Array";function _7(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(E7);return t}function S7(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Cu(e){return(4294967296+e).toString(16).substring(1)}function x7(e,t,r){let n=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(r===32)n+=Cu(t[i]).toUpperCase(),n+=" ",n+=Cu(t[i+1]).toUpperCase();else if(r===64)n+=Cu(t[i+1]).toUpperCase(),n+=Cu(t[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(n+=" ")}console.log(n)}function I7(e,t,r){let n=new Date().getTime();const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=e(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Lk={normalizeInput:_7,toHex:S7,debugPrint:x7,testSpeed:I7};const vd=Lk;function Nu(e,t,r){const n=e[t]+e[r];let i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function S1(e,t,r,n){let i=e[t]+r;r<0&&(i+=4294967296);let s=e[t+1]+n;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function Dk(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function ji(e,t,r,n,i,s){const o=Pc[i],a=Pc[i+1],c=Pc[s],l=Pc[s+1];Nu(le,e,t),S1(le,e,o,a);let u=le[n]^le[e],d=le[n+1]^le[e+1];le[n]=d,le[n+1]=u,Nu(le,r,n),u=le[t]^le[r],d=le[t+1]^le[r+1],le[t]=u>>>24^d<<8,le[t+1]=d>>>24^u<<8,Nu(le,e,t),S1(le,e,c,l),u=le[n]^le[e],d=le[n+1]^le[e+1],le[n]=u>>>16^d<<16,le[n+1]=d>>>16^u<<16,Nu(le,r,n),u=le[t]^le[r],d=le[t+1]^le[r+1],le[t]=d>>>31^u<<1,le[t+1]=u>>>31^d<<1}const jk=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),O7=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],qt=new Uint8Array(O7.map(function(e){return e*2})),le=new Uint32Array(32),Pc=new Uint32Array(32);function Mk(e,t){let r=0;for(r=0;r<16;r++)le[r]=e.h[r],le[r+16]=jk[r];for(le[24]=le[24]^e.t,le[25]=le[25]^e.t/4294967296,t&&(le[28]=~le[28],le[29]=~le[29]),r=0;r<32;r++)Pc[r]=Dk(e.b,4*r);for(r=0;r<12;r++)ji(0,8,16,24,qt[r*16+0],qt[r*16+1]),ji(2,10,18,26,qt[r*16+2],qt[r*16+3]),ji(4,12,20,28,qt[r*16+4],qt[r*16+5]),ji(6,14,22,30,qt[r*16+6],qt[r*16+7]),ji(0,10,20,30,qt[r*16+8],qt[r*16+9]),ji(2,12,22,24,qt[r*16+10],qt[r*16+11]),ji(4,14,16,26,qt[r*16+12],qt[r*16+13]),ji(6,8,18,28,qt[r*16+14],qt[r*16+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^le[r]^le[r+16]}const Mi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function zk(e,t,r,n){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};Mi.fill(0),Mi[0]=e,t&&(Mi[1]=t.length),Mi[2]=1,Mi[3]=1,r&&Mi.set(r,32),n&&Mi.set(n,48);for(let s=0;s<16;s++)i.h[s]=jk[s]^Dk(Mi,s*4);return t&&(Kb(i,t),i.c=128),i}function Kb(e,t){for(let r=0;r<t.length;r++)e.c===128&&(e.t+=e.c,Mk(e,!1),e.c=0),e.b[e.c++]=t[r]}function Fk(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;Mk(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(r&3);return t}function $k(e,t,r,n,i){r=r||64,e=vd.normalizeInput(e),n&&(n=vd.normalizeInput(n)),i&&(i=vd.normalizeInput(i));const s=zk(r,t,n,i);return Kb(s,e),Fk(s)}function k7(e,t,r,n,i){const s=$k(e,t,r,n,i);return vd.toHex(s)}var A7={blake2b:$k,blake2bHex:k7,blake2bInit:zk,blake2bUpdate:Kb,blake2bFinal:Fk};const qk=Lk;function P7(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function zi(e,t,r,n,i,s){ve[e]=ve[e]+ve[t]+i,ve[n]=Uu(ve[n]^ve[e],16),ve[r]=ve[r]+ve[n],ve[t]=Uu(ve[t]^ve[r],12),ve[e]=ve[e]+ve[t]+s,ve[n]=Uu(ve[n]^ve[e],8),ve[r]=ve[r]+ve[n],ve[t]=Uu(ve[t]^ve[r],7)}function Uu(e,t){return e>>>t^e<<32-t}const Hk=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),ve=new Uint32Array(16),At=new Uint32Array(16);function Vk(e,t){let r=0;for(r=0;r<8;r++)ve[r]=e.h[r],ve[r+8]=Hk[r];for(ve[12]^=e.t,ve[13]^=e.t/4294967296,t&&(ve[14]=~ve[14]),r=0;r<16;r++)At[r]=P7(e.b,4*r);for(r=0;r<10;r++)zi(0,4,8,12,At[Ht[r*16+0]],At[Ht[r*16+1]]),zi(1,5,9,13,At[Ht[r*16+2]],At[Ht[r*16+3]]),zi(2,6,10,14,At[Ht[r*16+4]],At[Ht[r*16+5]]),zi(3,7,11,15,At[Ht[r*16+6]],At[Ht[r*16+7]]),zi(0,5,10,15,At[Ht[r*16+8]],At[Ht[r*16+9]]),zi(1,6,11,12,At[Ht[r*16+10]],At[Ht[r*16+11]]),zi(2,7,8,13,At[Ht[r*16+12]],At[Ht[r*16+13]]),zi(3,4,9,14,At[Ht[r*16+14]],At[Ht[r*16+15]]);for(r=0;r<8;r++)e.h[r]^=ve[r]^ve[r+8]}function Kk(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(Hk),b:new Uint8Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(Wb(n,t),n.c=64),n}function Wb(e,t){for(let r=0;r<t.length;r++)e.c===64&&(e.t+=e.c,Vk(e,!1),e.c=0),e.b[e.c++]=t[r]}function Wk(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Vk(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(r&3)&255;return t}function Gk(e,t,r){r=r||32,e=qk.normalizeInput(e);const n=Kk(r,t);return Wb(n,e),Wk(n)}function R7(e,t,r){const n=Gk(e,t,r);return qk.toHex(n)}var T7={blake2s:Gk,blake2sHex:R7,blake2sInit:Kk,blake2sUpdate:Wb,blake2sFinal:Wk};const hc=A7,pc=T7;var C7={blake2b:hc.blake2b,blake2bHex:hc.blake2bHex,blake2bInit:hc.blake2bInit,blake2bUpdate:hc.blake2bUpdate,blake2bFinal:hc.blake2bFinal,blake2s:pc.blake2s,blake2sHex:pc.blake2sHex,blake2sInit:pc.blake2sInit,blake2sUpdate:pc.blake2sUpdate,blake2sFinal:pc.blake2sFinal},Hn={exports:{}};function N7(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var U7=B7;function B7(e,t,r){var n=r&&r.stringify||N7,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var o=new Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(t[a]);return o.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",u=1-i,d=-1,f=e&&e.length||0,h=0;h<f;){if(e.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,e.charCodeAt(h+1)){case 100:case 102:if(u>=c||t[u]==null)break;d<h&&(l+=e.slice(d,h)),l+=Number(t[u]),d=h+2,h++;break;case 105:if(u>=c||t[u]==null)break;d<h&&(l+=e.slice(d,h)),l+=Math.floor(Number(t[u])),d=h+2,h++;break;case 79:case 111:case 106:if(u>=c||t[u]===void 0)break;d<h&&(l+=e.slice(d,h));var y=typeof t[u];if(y==="string"){l+="'"+t[u]+"'",d=h+2,h++;break}if(y==="function"){l+=t[u].name||"<anonymous>",d=h+2,h++;break}l+=n(t[u]),d=h+2,h++;break;case 115:if(u>=c)break;d<h&&(l+=e.slice(d,h)),l+=String(t[u]),d=h+2,h++;break;case 37:d<h&&(l+=e.slice(d,h)),l+="%",d=h+2,h++,u--;break}++u}++h}return d===-1?e:(d<f&&(l+=e.slice(d)),l)}const x1=U7;Hn.exports=_i;const _l=Q7().console||{},L7={mapHttpRequest:Bu,mapHttpResponse:Bu,wrapRequestSerializer:kp,wrapResponseSerializer:kp,wrapErrorSerializer:kp,req:Bu,res:Bu,err:O1,errWithCause:O1};function ss(e,t){return e==="silent"?1/0:t.levels.values[e]}const Gb=Symbol("pino.logFuncs"),ky=Symbol("pino.hierarchy"),D7={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function I1(e,t){const r={logger:t,parent:e[ky]};t[ky]=r}function j7(e,t,r){const n={};t.forEach(i=>{n[i]=r[i]?r[i]:_l[i]||_l[D7[i]||"log"]||wa}),e[Gb]=n}function M7(e,t){return Array.isArray(e)?e.filter(function(r){return r!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function _i(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const r=e.browser.write||_l;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},i=M7(e.browser.serialize,n);let s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=Object.keys(e.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof r=="function"&&a.forEach(function(g){r[g]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const c=e.level||"info",l=Object.create(r);l.log||(l.log=wa),j7(l,a,r),I1({},l),Object.defineProperty(l,"levelVal",{get:d}),Object.defineProperty(l,"level",{get:f,set:h});const u={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:a,timestamp:W7(e),messageKey:e.messageKey||"msg",onChild:e.onChild||wa};l.levels=z7(e),l.level=c,l.isLevelEnabled=function(g){return this.levels.values[g]?this.levels.values[g]>=this.levels.values[this.level]:!1},l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=wa,l.serializers=n,l._serialize=i,l._stdErrSerialize=s,l.child=function(...g){return y.call(this,u,...g)},t&&(l._logEvent=Ay());function d(){return ss(this.level,this)}function f(){return this._level}function h(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Ts(this,u,l,"error"),Ts(this,u,l,"fatal"),Ts(this,u,l,"warn"),Ts(this,u,l,"info"),Ts(this,u,l,"debug"),Ts(this,u,l,"trace"),o.forEach(v=>{Ts(this,u,l,v)})}function y(g,v,b){if(!v)throw new Error("missing bindings for child Pino");b=b||{},i&&v.serializers&&(b.serializers=v.serializers);const w=b.serializers;if(i&&w){var _=Object.assign({},n,w),I=e.browser.serialize===!0?Object.keys(_):i;delete v.serializers,Yb([v],I,_,this._stdErrSerialize)}function R(C){this._childLevel=(C._childLevel|0)+1,this.bindings=v,_&&(this.serializers=_,this._serialize=I),t&&(this._logEvent=Ay([].concat(C._logEvent.bindings,v)))}R.prototype=this;const T=new R(this);return I1(this,T),T.child=function(...C){return y.call(this,g,...C)},T.level=b.level||this.level,g.onChild(T),T}return l}function z7(e){const t=e.customLevels||{},r=Object.assign({},_i.levels.values,t),n=Object.assign({},_i.levels.labels,F7(t));return{values:r,labels:n}}function F7(e){const t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}_i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},_i.stdSerializers=L7,_i.stdTimeFunctions=Object.assign({},{nullTime:Yk,epochTime:Qk,unixTime:G7,isoTime:Y7});function $7(e){const t=[];e.bindings&&t.push(e.bindings);let r=e[ky];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Ts(e,t,r,n){if(Object.defineProperty(e,n,{value:ss(e.level,r)>ss(n,r)?wa:r[Gb][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===wa){if(!t.transmit)return;const s=t.transmit.level||e.level,o=ss(s,r);if(ss(n,r)<o)return}e[n]=H7(e,t,r,n);const i=$7(e);i.length!==0&&(e[n]=q7(i,e[n]))}function q7(e,t){return function(){return t.apply(this,[...e,...arguments])}}function H7(e,t,r,n){return function(i){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_l?_l:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];var l=!1;if(t.serialize&&(Yb(o,this._serialize,this.serializers,this._stdErrSerialize),l=!0),t.asObject||t.formatters?i.call(a,...V7(this,n,o,s,t)):i.apply(a,o),t.transmit){const u=t.transmit.level||e._level,d=ss(u,r),f=ss(n,r);if(f<d)return;K7(this,{ts:s,methodLevel:n,methodValue:f,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:ss(e._level,r)},o,l)}}}(e[Gb][n])}function V7(e,t,r,n,i){const{level:s,log:o=d=>d}=i.formatters||{},a=r.slice();let c=a[0];const l={};let u=(e._childLevel|0)+1;if(u<1&&(u=1),n&&(l.time=n),s){const d=s(t,e.levels.values[t]);Object.assign(l,d)}else l.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());return[o(l),...a]}else{if(c!==null&&typeof c=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());c=a.length?x1(a.shift(),a):void 0}else typeof c=="string"&&(c=x1(a.shift(),a));return c!==void 0&&(l[i.messageKey]=c),[o(l)]}}function Yb(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=_i.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i])&&t)for(const s in e[i])t.indexOf(s)>-1&&s in r&&(e[i][s]=r[s](e[i][s]))}function K7(e,t,r,n=!1){const i=t.send,s=t.ts,o=t.methodLevel,a=t.methodValue,c=t.val,l=e._logEvent.bindings;n||Yb(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=r.filter(function(u){return l.indexOf(u)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=a,i(o,e._logEvent,c),e._logEvent=Ay(l)}function Ay(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function O1(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)t[r]===void 0&&(t[r]=e[r]);return t}function W7(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Yk:Qk}function Bu(){return{}}function kp(e){return e}function wa(){}function Yk(){return!1}function Qk(){return Date.now()}function G7(){return Math.round(Date.now()/1e3)}function Y7(){return new Date(Date.now()).toISOString()}function Q7(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Hn.exports.default=_i;Hn.exports.pino=_i;const Z7={level:"info"},oh="custom_context",Qb=1e3*1024;var X7=Object.defineProperty,J7=(e,t,r)=>t in e?X7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,es=(e,t,r)=>J7(e,typeof t!="symbol"?t+"":t,r);let ez=class{constructor(e){es(this,"nodeValue"),es(this,"sizeInBytes"),es(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},k1=class{constructor(e){es(this,"lengthInNodes"),es(this,"sizeInBytes"),es(this,"head"),es(this,"tail"),es(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new ez(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}};const tz=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r);function A1(e){return typeof e=="string"?e:tz(e)||""}var rz=Object.defineProperty,nz=(e,t,r)=>t in e?rz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lu=(e,t,r)=>nz(e,typeof t!="symbol"?t+"":t,r);let Zk=class{constructor(e,t=Qb){Lu(this,"logs"),Lu(this,"level"),Lu(this,"levelValue"),Lu(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=Hn.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new k1(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Hn.exports.levels.values.error?console.error(e):t===Hn.exports.levels.values.warn?console.warn(e):t===Hn.exports.levels.values.debug?console.debug(e):t===Hn.exports.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(A1({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new k1(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(A1({extraMetadata:e})),new Blob(t,{type:"application/json"})}};var iz=Object.defineProperty,sz=(e,t,r)=>t in e?iz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oz=(e,t,r)=>sz(e,t+"",r);let az=class{constructor(e,t=Qb){oz(this,"baseChunkLogger"),this.baseChunkLogger=new Zk(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}};var cz=Object.defineProperty,lz=(e,t,r)=>t in e?cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uz=(e,t,r)=>lz(e,t+"",r);let dz=class{constructor(e,t=Qb){uz(this,"baseChunkLogger"),this.baseChunkLogger=new Zk(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var fz=Object.defineProperty,hz=Object.defineProperties,pz=Object.getOwnPropertyDescriptors,P1=Object.getOwnPropertySymbols,gz=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,R1=(e,t,r)=>t in e?fz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gs=(e,t)=>{for(var r in t||(t={}))gz.call(t,r)&&R1(e,r,t[r]);if(P1)for(var r of P1(t))yz.call(t,r)&&R1(e,r,t[r]);return e},ys=(e,t)=>hz(e,pz(t));function mz(e){return ys(gs({},e),{level:(e==null?void 0:e.level)||Z7.level})}function bz(e,t,r=oh){return e[r]=t,e}function Or(e,t=oh){return e[t]||""}function wz(e,t,r=oh){const n=Or(e,r);return n.trim()?`${n}/${t}`:t}function qr(e,t,r=oh){const n=wz(e,t,r),i=e.child({context:n});return bz(i,n,r)}function vz(e){var t,r;const n=new az((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Hn.exports(ys(gs({},e.opts),{level:"trace",browser:ys(gs({},(r=e.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function Ez(e){var t,r;const n=new dz((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:Hn.exports(ys(gs({},e.opts),{level:"trace",browser:ys(gs({},(r=e.opts)==null?void 0:r.browser),{write:i=>n.write(i)})}),n),chunkLoggerController:n}}function Xk(e){var t;if(typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string")return{logger:e.loggerOverride,chunkLoggerController:null};const r=ys(gs({},e.opts),{level:typeof e.loggerOverride=="string"?e.loggerOverride:(t=e.opts)==null?void 0:t.level});return typeof window<"u"?vz(ys(gs({},e),{opts:r})):Ez(ys(gs({},e),{opts:r}))}var _z={};const Sz=":";function Si(e){const[t,r]=e.split(Sz);return{namespace:t,reference:r}}function Jk(e,t){return e.includes(":")?[e]:t.chains||[]}var xz=Object.defineProperty,Iz=Object.defineProperties,Oz=Object.getOwnPropertyDescriptors,T1=Object.getOwnPropertySymbols,kz=Object.prototype.hasOwnProperty,Az=Object.prototype.propertyIsEnumerable,Py=(e,t,r)=>t in e?xz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C1=(e,t)=>{for(var r in t||(t={}))kz.call(t,r)&&Py(e,r,t[r]);if(T1)for(var r of T1(t))Az.call(t,r)&&Py(e,r,t[r]);return e},Pz=(e,t)=>Iz(e,Oz(t)),N1=(e,t,r)=>Py(e,typeof t!="symbol"?t+"":t,r);const Rz="ReactNative",jr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Tz="js";function hf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ks(){return!fo()&&!!kb()&&navigator.product===Rz}function Cz(){return ks()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Nz(){return ks()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Wa(){return!hf()&&!!kb()&&!!fo()}function Kl(){return ks()?jr.reactNative:hf()?jr.node:Wa()?jr.browser:jr.unknown}function U1(){var e;try{return ks()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Uz(e,t){const r=new URLSearchParams(e);return Object.entries(t).sort(([n],[i])=>n.localeCompare(i)).forEach(([n,i])=>{i!=null&&r.set(n,String(i))}),r.toString()}function Bz(e){var t,r;const n=eA();try{return e!=null&&e.url&&n.url&&new URL(e.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),e.url=n.url),(t=e==null?void 0:e.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),Pz(C1(C1({},n),e),{url:(e==null?void 0:e.url)||n.url,name:(e==null?void 0:e.name)||n.name,description:(e==null?void 0:e.description)||n.description,icons:(r=e==null?void 0:e.icons)!=null&&r.length&&e.icons.length>0?e.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),e||n}}function eA(){return aO()||{name:"",description:"",url:"",icons:[""]}}function Lz(){if(Kl()===jr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const e=rU();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Dz(){var e;const t=Kl();return t===jr.browser?[t,((e=oO())==null?void 0:e.host)||"unknown"].join(":"):t}function tA(e,t,r){const n=Lz(),i=Dz();return[[e,t].join("-"),[Tz,r].join("-"),n,i].join("/")}function jz({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=tA(e,t,n),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=Uz(l[1]||"",d);return l[0]+"?"+f}function Ys(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Ry(e){return Object.fromEntries(e.entries())}function Ty(e){return new Map(Object.entries(e))}function Fs(e=Z.FIVE_MINUTES,t){const r=Z.toMiliseconds(e||Z.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(t);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function Kn(e,t,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),t);try{const o=await e;n(o)}catch(o){i(o)}clearTimeout(s)})}function rA(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Mz(e){return rA("topic",e)}function zz(e){return rA("id",e)}function nA(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")n.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return n}function at(e,t){return Z.fromMiliseconds(Date.now()+Z.toMiliseconds(e))}function Fn(e){return Date.now()>=Z.toMiliseconds(e)}function Se(e,t){return`${e}${t?`:${t}`:""}`}function Qn(e=[],t=[]){return[...new Set([...e,...t])]}async function Fz({id:e,topic:t,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=$z(s,e,t),a=Kl();if(a===jr.browser){if(!((n=fo())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}qz(o)}else a===jr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function $z(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const s=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Wz(n,!0)}`}else i=`${i}/wc?${n}`;return i}function qz(e){let t="_self";Kz()?t="_top":(Vz()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Hz(e,t){let r="";try{if(Wa()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(n){console.error(n)}return r}function B1(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function L1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Zb(){return typeof process<"u"&&_z.IS_VITEST==="true"}function Vz(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Kz(){try{return window.self!==window.top}catch{return!1}}function Wz(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}function iA(e){return Buffer.from(e,"base64").toString("utf-8")}function Gz(e){return new Promise(t=>setTimeout(t,e))}let Yz=class{constructor({limit:e}){N1(this,"limit"),N1(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}has(e){return this.set.has(e)}};const Du=BigInt(2**32-1),D1=BigInt(32);function sA(e,t=!1){return t?{h:Number(e&Du),l:Number(e>>D1&Du)}:{h:Number(e>>D1&Du)|0,l:Number(e&Du)|0}}function oA(e,t=!1){const r=e.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=sA(e[s],t);[n[s],i[s]]=[o,a]}return[n,i]}const j1=(e,t,r)=>e>>>r,M1=(e,t,r)=>e<<32-r|t>>>r,Yi=(e,t,r)=>e>>>r|t<<32-r,Qi=(e,t,r)=>e<<32-r|t>>>r,Rc=(e,t,r)=>e<<64-r|t>>>r-32,Tc=(e,t,r)=>e>>>r-32|t<<64-r,Qz=(e,t)=>t,Zz=(e,t)=>e,Xz=(e,t,r)=>e<<r|t>>>32-r,Jz=(e,t,r)=>t<<r|e>>>32-r,eF=(e,t,r)=>t<<r-32|e>>>64-r,tF=(e,t,r)=>e<<r-32|t>>>64-r;function mn(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const Xb=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Jb=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,rF=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),nF=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,iF=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),sF=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,jo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ah(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ri(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function An(e,...t){if(!ah(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ch(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ri(e.outputLen),Ri(e.blockLen)}function Es(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function e0(e,t){An(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Sl(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function an(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Ap(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Cn(e,t){return e<<32-t|e>>>t}const aA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cA(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ci=aA?e=>e:e=>cA(e);function oF(e){for(let t=0;t<e.length;t++)e[t]=cA(e[t]);return e}const Zi=aA?e=>e:oF,lA=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",aF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function va(e){if(An(e),lA)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=aF[e[r]];return t}const si={_0:48,_9:57,A:65,F:70,a:97,f:102};function z1(e){if(e>=si._0&&e<=si._9)return e-si._0;if(e>=si.A&&e<=si.F)return e-(si.A-10);if(e>=si.a&&e<=si.f)return e-(si.a-10)}function pf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(lA)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=z1(e.charCodeAt(s)),a=z1(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function uA(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function On(e){return typeof e=="string"&&(e=uA(e)),An(e),e}function ts(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];An(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}let lh=class{};function Wl(e){const t=n=>e().update(On(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function cF(e){const t=(n,i)=>e(i).update(On(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function _o(e=32){if(jo&&typeof jo.getRandomValues=="function")return jo.getRandomValues(new Uint8Array(e));if(jo&&typeof jo.randomBytes=="function")return Uint8Array.from(jo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const lF=BigInt(0),gc=BigInt(1),uF=BigInt(2),dF=BigInt(7),fF=BigInt(256),hF=BigInt(113),dA=[],fA=[],hA=[];for(let e=0,t=gc,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],dA.push(2*(5*n+r)),fA.push((e+1)*(e+2)/2%64);let i=lF;for(let s=0;s<7;s++)t=(t<<gc^(t>>dF)*hF)%fF,t&uF&&(i^=gc<<(gc<<BigInt(s))-gc);hA.push(i)}const pA=oA(hA,!0),pF=pA[0],gF=pA[1],F1=(e,t,r)=>r>32?eF(e,t,r):Xz(e,t,r),$1=(e,t,r)=>r>32?tF(e,t,r):Jz(e,t,r);function yF(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=F1(l,u,1)^r[a],f=$1(l,u,1)^r[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=f}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=fA[o],c=F1(i,s,a),l=$1(i,s,a),u=dA[o];i=e[u],s=e[u+1],e[u]=c,e[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=pF[n],e[1]^=gF[n]}an(r)}let mF=class gA extends lh{constructor(t,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,Ri(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Sl(this.state)}clone(){return this._cloneInto()}keccak(){Zi(this.state32),yF(this.state32,this.rounds),Zi(this.state32),this.posOut=0,this.pos=0}update(t){Es(this),t=On(t),An(t);const{blockLen:r,state:n}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Es(this,!1),An(t),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=t.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);t.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ri(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(e0(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,an(this.state)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new gA(r,n,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}};const bF=(e,t,r)=>Wl(()=>new mF(t,e,r)),wF=bF(1,136,256/8);function vF(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}function EF(e,t,r){return e&t^~e&r}function _F(e,t,r){return e&t^e&r^t&r}let yA=class extends lh{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=Ap(this.buffer)}update(e){Es(this),e=On(e),An(e);const{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){const a=Ap(e);for(;n<=i-s;s+=n)this.process(a,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Es(this),e0(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,an(this.buffer.subarray(s)),this.padOffset>n-s&&(this.process(r,0),s=0);for(let u=s;u<n;u++)t[u]=0;vF(r,n-8,BigInt(this.length*8),i),this.process(r,0);const o=Ap(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=i,e.length=n,e.pos=o,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Fi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Kt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),SF=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$i=new Uint32Array(64);class xF extends yA{constructor(t=32){super(64,t,8,!1),this.A=Fi[0]|0,this.B=Fi[1]|0,this.C=Fi[2]|0,this.D=Fi[3]|0,this.E=Fi[4]|0,this.F=Fi[5]|0,this.G=Fi[6]|0,this.H=Fi[7]|0}get(){const{A:t,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[t,r,n,i,s,o,a,c]}set(t,r,n,i,s,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)$i[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){const f=$i[d-15],h=$i[d-2],y=Cn(f,7)^Cn(f,18)^f>>>3,g=Cn(h,17)^Cn(h,19)^h>>>10;$i[d]=g+$i[d-7]+y+$i[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Cn(a,6)^Cn(a,11)^Cn(a,25),h=u+f+EF(a,c,l)+SF[d]+$i[d]|0,y=(Cn(n,2)^Cn(n,13)^Cn(n,22))+_F(n,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=n,n=h+y|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){an($i)}destroy(){this.set(0,0,0,0,0,0,0,0),an(this.buffer)}}const mA=oA(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),IF=mA[0],OF=mA[1],qi=new Uint32Array(80),Hi=new Uint32Array(80);let t0=class extends yA{constructor(e=64){super(128,e,16,!1),this.Ah=Kt[0]|0,this.Al=Kt[1]|0,this.Bh=Kt[2]|0,this.Bl=Kt[3]|0,this.Ch=Kt[4]|0,this.Cl=Kt[5]|0,this.Dh=Kt[6]|0,this.Dl=Kt[7]|0,this.Eh=Kt[8]|0,this.El=Kt[9]|0,this.Fh=Kt[10]|0,this.Fl=Kt[11]|0,this.Gh=Kt[12]|0,this.Gl=Kt[13]|0,this.Hh=Kt[14]|0,this.Hl=Kt[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:d,Gh:f,Gl:h,Hh:y,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,l,u,d,f,h,y,g]}set(e,t,r,n,i,s,o,a,c,l,u,d,f,h,y,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=n|0,this.Ch=i|0,this.Cl=s|0,this.Dh=o|0,this.Dl=a|0,this.Eh=c|0,this.El=l|0,this.Fh=u|0,this.Fl=d|0,this.Gh=f|0,this.Gl=h|0,this.Hh=y|0,this.Hl=g|0}process(e,t){for(let w=0;w<16;w++,t+=4)qi[w]=e.getUint32(t),Hi[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const _=qi[w-15]|0,I=Hi[w-15]|0,R=Yi(_,I,1)^Yi(_,I,8)^j1(_,I,7),T=Qi(_,I,1)^Qi(_,I,8)^M1(_,I,7),C=qi[w-2]|0,L=Hi[w-2]|0,N=Yi(C,L,19)^Rc(C,L,61)^j1(C,L,6),F=Qi(C,L,19)^Tc(C,L,61)^M1(C,L,6),q=rF(T,F,Hi[w-7],Hi[w-16]),j=nF(q,R,N,qi[w-7],qi[w-16]);qi[w]=j|0,Hi[w]=q|0}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:d,Fh:f,Fl:h,Gh:y,Gl:g,Hh:v,Hl:b}=this;for(let w=0;w<80;w++){const _=Yi(u,d,14)^Yi(u,d,18)^Rc(u,d,41),I=Qi(u,d,14)^Qi(u,d,18)^Tc(u,d,41),R=u&f^~u&y,T=d&h^~d&g,C=iF(b,I,T,OF[w],Hi[w]),L=sF(C,v,_,R,IF[w],qi[w]),N=C|0,F=Yi(r,n,28)^Rc(r,n,34)^Rc(r,n,39),q=Qi(r,n,28)^Tc(r,n,34)^Tc(r,n,39),j=r&i^r&o^i&o,B=n&s^n&a^s&a;v=y|0,b=g|0,y=f|0,g=h|0,f=u|0,h=d|0,{h:u,l:d}=mn(c|0,l|0,L|0,N|0),c=o|0,l=a|0,o=i|0,a=s|0,i=r|0,s=n|0;const D=Xb(N,q,B);r=Jb(D,L,F,j),n=D|0}({h:r,l:n}=mn(this.Ah|0,this.Al|0,r|0,n|0)),{h:i,l:s}=mn(this.Bh|0,this.Bl|0,i|0,s|0),{h:o,l:a}=mn(this.Ch|0,this.Cl|0,o|0,a|0),{h:c,l}=mn(this.Dh|0,this.Dl|0,c|0,l|0),{h:u,l:d}=mn(this.Eh|0,this.El|0,u|0,d|0),{h:f,l:h}=mn(this.Fh|0,this.Fl|0,f|0,h|0),{h:y,l:g}=mn(this.Gh|0,this.Gl|0,y|0,g|0),{h:v,l:b}=mn(this.Hh|0,this.Hl|0,v|0,b|0),this.set(r,n,i,s,o,a,c,l,u,d,f,h,y,g,v,b)}roundClean(){an(qi,Hi)}destroy(){an(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class kF extends t0{constructor(){super(48),this.Ah=Vt[0]|0,this.Al=Vt[1]|0,this.Bh=Vt[2]|0,this.Bl=Vt[3]|0,this.Ch=Vt[4]|0,this.Cl=Vt[5]|0,this.Dh=Vt[6]|0,this.Dl=Vt[7]|0,this.Eh=Vt[8]|0,this.El=Vt[9]|0,this.Fh=Vt[10]|0,this.Fl=Vt[11]|0,this.Gh=Vt[12]|0,this.Gl=Vt[13]|0,this.Hh=Vt[14]|0,this.Hl=Vt[15]|0}}const Wt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class AF extends t0{constructor(){super(32),this.Ah=Wt[0]|0,this.Al=Wt[1]|0,this.Bh=Wt[2]|0,this.Bl=Wt[3]|0,this.Ch=Wt[4]|0,this.Cl=Wt[5]|0,this.Dh=Wt[6]|0,this.Dl=Wt[7]|0,this.Eh=Wt[8]|0,this.El=Wt[9]|0,this.Fh=Wt[10]|0,this.Fl=Wt[11]|0,this.Gh=Wt[12]|0,this.Gl=Wt[13]|0,this.Hh=Wt[14]|0,this.Hl=Wt[15]|0}}const uh=Wl(()=>new xF),PF=Wl(()=>new t0),RF=Wl(()=>new kF),TF=Wl(()=>new AF),CF=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),pt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),te=new Uint32Array(32);function Vi(e,t,r,n,i,s){const o=i[s],a=i[s+1];let c=te[2*e],l=te[2*e+1],u=te[2*t],d=te[2*t+1],f=te[2*r],h=te[2*r+1],y=te[2*n],g=te[2*n+1],v=Xb(c,u,o);l=Jb(v,l,d,a),c=v|0,{Dh:g,Dl:y}={Dh:g^l,Dl:y^c},{Dh:g,Dl:y}={Dh:Qz(g,y),Dl:Zz(g)},{h,l:f}=mn(h,f,g,y),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Yi(d,u,24),Bl:Qi(d,u,24)},te[2*e]=c,te[2*e+1]=l,te[2*t]=u,te[2*t+1]=d,te[2*r]=f,te[2*r+1]=h,te[2*n]=y,te[2*n+1]=g}function Ki(e,t,r,n,i,s){const o=i[s],a=i[s+1];let c=te[2*e],l=te[2*e+1],u=te[2*t],d=te[2*t+1],f=te[2*r],h=te[2*r+1],y=te[2*n],g=te[2*n+1],v=Xb(c,u,o);l=Jb(v,l,d,a),c=v|0,{Dh:g,Dl:y}={Dh:g^l,Dl:y^c},{Dh:g,Dl:y}={Dh:Yi(g,y,16),Dl:Qi(g,y,16)},{h,l:f}=mn(h,f,g,y),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Rc(d,u,63),Bl:Tc(d,u,63)},te[2*e]=c,te[2*e+1]=l,te[2*t]=u,te[2*t+1]=d,te[2*r]=f,te[2*r+1]=h,te[2*n]=y,te[2*n+1]=g}function NF(e,t={},r,n,i){if(Ri(r),e<0||e>r)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=t;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class UF extends lh{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ri(t),Ri(r),this.blockLen=t,this.outputLen=r,this.buffer=new Uint8Array(t),this.buffer32=Sl(this.buffer)}update(t){Es(this),t=On(t),An(t);const{blockLen:r,buffer:n,buffer32:i}=this,s=t.length,o=t.byteOffset,a=t.buffer;for(let c=0;c<s;){this.pos===r&&(Zi(i),this.compress(i,0,!1),Zi(i),this.pos=0);const l=Math.min(r-this.pos,s-c),u=o+c;if(l===r&&!(u%4)&&c+l<s){const d=new Uint32Array(a,u,Math.floor((s-c)/4));Zi(d);for(let f=0;c+r<s;f+=i.length,c+=r)this.length+=r,this.compress(d,f,!1);Zi(d);continue}n.set(t.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(t){Es(this),e0(t,this);const{pos:r,buffer32:n}=this;this.finished=!0,an(this.buffer.subarray(r)),Zi(n),this.compress(n,0,!0),Zi(n);const i=Sl(t);this.get().forEach((s,o)=>i[o]=ci(s))}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){const{buffer:r,length:n,finished:i,destroyed:s,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.buffer.set(r),t.destroyed=s,t.finished=i,t.length=n,t.pos=a,t.outputLen=o,t}clone(){return this._cloneInto()}}class BF extends UF{constructor(t={}){const r=t.dkLen===void 0?64:t.dkLen;super(128,r),this.v0l=pt[0]|0,this.v0h=pt[1]|0,this.v1l=pt[2]|0,this.v1h=pt[3]|0,this.v2l=pt[4]|0,this.v2h=pt[5]|0,this.v3l=pt[6]|0,this.v3h=pt[7]|0,this.v4l=pt[8]|0,this.v4h=pt[9]|0,this.v5l=pt[10]|0,this.v5h=pt[11]|0,this.v6l=pt[12]|0,this.v6h=pt[13]|0,this.v7l=pt[14]|0,this.v7h=pt[15]|0,NF(r,t,64,16,16);let{key:n,personalization:i,salt:s}=t,o=0;if(n!==void 0&&(n=On(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=On(s);const a=Sl(s);this.v4l^=ci(a[0]),this.v4h^=ci(a[1]),this.v5l^=ci(a[2]),this.v5h^=ci(a[3])}if(i!==void 0){i=On(i);const a=Sl(i);this.v6l^=ci(a[0]),this.v6h^=ci(a[1]),this.v7l^=ci(a[2]),this.v7h^=ci(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:f,v6l:h,v6h:y,v7l:g,v7h:v}=this;return[t,r,n,i,s,o,a,c,l,u,d,f,h,y,g,v]}set(t,r,n,i,s,o,a,c,l,u,d,f,h,y,g,v){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=y|0,this.v7l=g|0,this.v7h=v|0}compress(t,r,n){this.get().forEach((c,l)=>te[l]=c),te.set(pt,16);let{h:i,l:s}=sA(BigInt(this.length));te[24]=pt[8]^s,te[25]=pt[9]^i,n&&(te[28]=~te[28],te[29]=~te[29]);let o=0;const a=CF;for(let c=0;c<12;c++)Vi(0,4,8,12,t,r+2*a[o++]),Ki(0,4,8,12,t,r+2*a[o++]),Vi(1,5,9,13,t,r+2*a[o++]),Ki(1,5,9,13,t,r+2*a[o++]),Vi(2,6,10,14,t,r+2*a[o++]),Ki(2,6,10,14,t,r+2*a[o++]),Vi(3,7,11,15,t,r+2*a[o++]),Ki(3,7,11,15,t,r+2*a[o++]),Vi(0,5,10,15,t,r+2*a[o++]),Ki(0,5,10,15,t,r+2*a[o++]),Vi(1,6,11,12,t,r+2*a[o++]),Ki(1,6,11,12,t,r+2*a[o++]),Vi(2,7,8,13,t,r+2*a[o++]),Ki(2,7,8,13,t,r+2*a[o++]),Vi(3,4,9,14,t,r+2*a[o++]),Ki(3,4,9,14,t,r+2*a[o++]);this.v0l^=te[0]^te[16],this.v0h^=te[1]^te[17],this.v1l^=te[2]^te[18],this.v1h^=te[3]^te[19],this.v2l^=te[4]^te[20],this.v2h^=te[5]^te[21],this.v3l^=te[6]^te[22],this.v3h^=te[7]^te[23],this.v4l^=te[8]^te[24],this.v4h^=te[9]^te[25],this.v5l^=te[10]^te[26],this.v5h^=te[11]^te[27],this.v6l^=te[12]^te[28],this.v6h^=te[13]^te[29],this.v7l^=te[14]^te[30],this.v7h^=te[15]^te[31],an(te)}destroy(){this.destroyed=!0,an(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const LF=cF(e=>new BF(e)),DF="https://rpc.walletconnect.org/v1";function bA(e){const t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+Buffer.from(wF(r)).toString("hex")}async function jF(e,t,r,n,i,s){switch(r.t){case"eip191":return await MF(e,t,r.s);case"eip1271":return await zF(e,t,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function MF(e,t,r){const n=jL(r);return GL({payload:bA(t),signature:n}).toLowerCase()===e.toLowerCase()}async function zF(e,t,r,n,i,s){const o=Si(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=r.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(t.startsWith("0x")?t:bA(t)).substring(2),f=a+d+c+u+l,h=await fetch(`${s||DF}/?chainId=${n}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:FF(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:f},"latest"]})}),{result:y}=await h.json();return y?y.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function FF(){return Date.now()+Math.floor(Math.random()*1e3)}function $F(e){const t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return ql.encode(s)}function qF(e){const t=new Uint8Array(Buffer.from(e,"base64")),r=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+t.length);n.set(r),n.set(t,r.length);const i=LF(n,{dkLen:32});return ql.encode(i)}function q1(e){const t=new Uint8Array(uh(HF(e)));return ql.encode(t)}function HF(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function H1(e){const t=Buffer.from(e,"base64"),r=TD(t).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=_D(r),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(n)]),o=TF(s);return KL.encode(o).replace(/=+$/,"")}function Pp(e){const t=[];let r=BigInt(e);for(;r>=BigInt(128);)t.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return t.push(Number(r)),Buffer.from(t)}function VF(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),r=Buffer.from(e.signed.authInfoBytes,"base64"),n=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(Pp(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(Pp(r.length)),i.push(r),i.push(Buffer.from([26])),i.push(Pp(n.length)),i.push(n);const s=Buffer.concat(i),o=uh(s);return Buffer.from(o).toString("hex").toUpperCase()}function KF(e){var t,r;const n=[];try{if(typeof e=="string")return n.push(e),n;if(typeof e!="object")return n;e!=null&&e.id&&n.push(e.id);const i=(r=(t=e==null?void 0:e.capabilities)==null?void 0:t.caip345)==null?void 0:r.transactionHashes;i&&n.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return n}var WF=Object.defineProperty,GF=Object.defineProperties,YF=Object.getOwnPropertyDescriptors,V1=Object.getOwnPropertySymbols,QF=Object.prototype.hasOwnProperty,ZF=Object.prototype.propertyIsEnumerable,K1=(e,t,r)=>t in e?WF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,XF=(e,t)=>{for(var r in t||(t={}))QF.call(t,r)&&K1(e,r,t[r]);if(V1)for(var r of V1(t))ZF.call(t,r)&&K1(e,r,t[r]);return e},JF=(e,t)=>GF(e,YF(t));const wA="did:pkh:",e$={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},t$=e=>e?e$[e]||e:"",dh=e=>e==null?void 0:e.split(":"),r$=e=>{const t=e&&dh(e);if(t)return e.includes(wA)?t[3]:t[1]},n$=e=>{const t=e&&dh(e);if(t)return e.includes(wA)?t[2]:t[0]},Cy=e=>{const t=e&&dh(e);if(t)return t[2]+":"+t[3]},gf=e=>{const t=e&&dh(e);if(t)return t.pop()};async function W1(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=vA(i,i.iss),o=gf(i.iss);return await jF(o,s,n,Cy(i.iss),r)}const vA=(e,t)=>{const r=n$(t);if(!r)throw new Error("Invalid issuer: "+t);const n=`${e.domain} wants you to sign in with your ${t$(r)} account:`,i=gf(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,a=`Version: ${e.version}`,c=`Chain ID: ${r$(t)}`,l=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,d=e.exp?`Expiration Time: ${e.exp}`:void 0,f=e.nbf?`Not Before: ${e.nbf}`:void 0,h=e.requestId?`Request ID: ${e.requestId}`:void 0,y=e.resources?`Resources:${e.resources.map(v=>`
- ${v}`).join("")}`:void 0,g=Ed(e.resources);if(g){const v=xl(g);s=f$(s,v)}return[n,i,"",s,"",o,a,c,l,u,d,f,h,y].filter(v=>v!=null).join(`
`)};function i$(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function s$(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function yo(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(r=>{const n=e.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function o$(e,t,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[e]:a$(t,r,n)}}}function a$(e,t,r={}){t=t==null?void 0:t.sort((i,s)=>i.localeCompare(s));const n=t.map(i=>({[`${e}/${i}`]:[r]}));return Object.assign({},...n)}function EA(e){return yo(e),`urn:recap:${i$(e).replace(/=/g,"")}`}function xl(e){const t=s$(e.replace("urn:recap:",""));return yo(t),t}function c$(e,t,r){const n=o$(e,t,r);return EA(n)}function l$(e){return e&&e.includes("urn:recap:")}function u$(e,t){const r=xl(e),n=xl(t),i=d$(r,n);return EA(i)}function d$(e,t){yo(e),yo(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=e.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=t.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=JF(XF({},n.att[i]),{[a]:((c=e.att[i])==null?void 0:c[a])||((l=t.att[i])==null?void 0:l[a])})})}),n}function f$(e="",t){yo(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;Object.keys(t.att).forEach(a=>{const c=Object.keys(t.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}function G1(e){var t;const r=xl(e);yo(r);const n=(t=r.att)==null?void 0:t.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function Y1(e){const t=xl(e);yo(t);const r=[];return Object.values(t.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function Ed(e){if(!e)return;const t=e==null?void 0:e[e.length-1];return l$(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function _A(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ny(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Rp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function hr(e,...t){if(!_A(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Q1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function h$(e,t){hr(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function ms(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ba(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function p$(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const g$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function y$(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Uy(e){if(typeof e=="string")e=y$(e);else if(_A(e))e=By(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function m$(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function b$(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}const w$=(e,t)=>{function r(n,...i){if(hr(n),!g$)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");e.varSizeNonce?hr(l):hr(l,e.nonceLength)}const s=e.tagLength;s&&i[1]!==void 0&&hr(i[1]);const o=t(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");hr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,hr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(hr(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,e),r};function Z1(e,t,r=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!E$(t))throw new Error("invalid output, must be aligned");return t}function X1(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);e.setUint32(t+4,o,n),e.setUint32(t+0,a,n)}function v$(e,t,r){Ny(r);const n=new Uint8Array(16),i=p$(n);return X1(i,0,BigInt(t),r),X1(i,8,BigInt(e),r),n}function E$(e){return e.byteOffset%4===0}function By(e){return Uint8Array.from(e)}const SA=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),_$=SA("expand 16-byte k"),S$=SA("expand 32-byte k"),x$=ms(_$),I$=ms(S$);function we(e,t){return e<<t|e>>>32-t}function Ly(e){return e.byteOffset%4===0}const ju=64,O$=16,xA=2**32-1,J1=new Uint32Array;function k$(e,t,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(ju),u=ms(l),d=Ly(i)&&Ly(s),f=d?ms(i):J1,h=d?ms(s):J1;for(let y=0;y<c;o++){if(e(t,r,n,u,o,a),o>=xA)throw new Error("arx: counter overflow");const g=Math.min(ju,c-y);if(d&&g===ju){const v=y/4;if(y%4!==0)throw new Error("arx: invalid block position");for(let b=0,w;b<O$;b++)w=v+b,h[w]=f[w]^u[b];y+=ju;continue}for(let v=0,b;v<g;v++)b=y+v,s[b]=i[b]^l[v];y+=g}}function A$(e,t){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=m$({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Rp(i),Rp(o),Ny(s),Ny(r),(a,c,l,u,d=0)=>{hr(a),hr(c),hr(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),hr(u),Rp(d),d<0||d>=xA)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let y=a.length,g,v;if(y===32)h.push(g=By(a)),v=I$;else if(y===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),v=x$,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);Ly(c)||h.push(c=By(c));const b=ms(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(v,b,ms(c.subarray(0,16)),b),c=c.subarray(16)}const w=16-i;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const I=new Uint8Array(12);I.set(c,s?0:12-c.length),c=I,h.push(c)}const _=ms(c);return k$(e,v,b,_,l,u,d,o),Ba(...h),u}}const Pt=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class P${constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Uy(t),hr(t,32);const r=Pt(t,0),n=Pt(t,2),i=Pt(t,4),s=Pt(t,6),o=Pt(t,8),a=Pt(t,10),c=Pt(t,12),l=Pt(t,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Pt(t,16+2*u)}process(t,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],y=o[7],g=o[8],v=o[9],b=Pt(t,r+0),w=Pt(t,r+2),_=Pt(t,r+4),I=Pt(t,r+6),R=Pt(t,r+8),T=Pt(t,r+10),C=Pt(t,r+12),L=Pt(t,r+14);let N=s[0]+(b&8191),F=s[1]+((b>>>13|w<<3)&8191),q=s[2]+((w>>>10|_<<6)&8191),j=s[3]+((_>>>7|I<<9)&8191),B=s[4]+((I>>>4|R<<12)&8191),D=s[5]+(R>>>1&8191),m=s[6]+((R>>>14|T<<2)&8191),S=s[7]+((T>>>11|C<<5)&8191),P=s[8]+((C>>>8|L<<8)&8191),k=s[9]+(L>>>5|i),A=0,O=A+N*a+F*(5*v)+q*(5*g)+j*(5*y)+B*(5*h);A=O>>>13,O&=8191,O+=D*(5*f)+m*(5*d)+S*(5*u)+P*(5*l)+k*(5*c),A+=O>>>13,O&=8191;let M=A+N*c+F*a+q*(5*v)+j*(5*g)+B*(5*y);A=M>>>13,M&=8191,M+=D*(5*h)+m*(5*f)+S*(5*d)+P*(5*u)+k*(5*l),A+=M>>>13,M&=8191;let $=A+N*l+F*c+q*a+j*(5*v)+B*(5*g);A=$>>>13,$&=8191,$+=D*(5*y)+m*(5*h)+S*(5*f)+P*(5*d)+k*(5*u),A+=$>>>13,$&=8191;let Q=A+N*u+F*l+q*c+j*a+B*(5*v);A=Q>>>13,Q&=8191,Q+=D*(5*g)+m*(5*y)+S*(5*h)+P*(5*f)+k*(5*d),A+=Q>>>13,Q&=8191;let H=A+N*d+F*u+q*l+j*c+B*a;A=H>>>13,H&=8191,H+=D*(5*v)+m*(5*g)+S*(5*y)+P*(5*h)+k*(5*f),A+=H>>>13,H&=8191;let G=A+N*f+F*d+q*u+j*l+B*c;A=G>>>13,G&=8191,G+=D*a+m*(5*v)+S*(5*g)+P*(5*y)+k*(5*h),A+=G>>>13,G&=8191;let ee=A+N*h+F*f+q*d+j*u+B*l;A=ee>>>13,ee&=8191,ee+=D*c+m*a+S*(5*v)+P*(5*g)+k*(5*y),A+=ee>>>13,ee&=8191;let ie=A+N*y+F*h+q*f+j*d+B*u;A=ie>>>13,ie&=8191,ie+=D*l+m*c+S*a+P*(5*v)+k*(5*g),A+=ie>>>13,ie&=8191;let ce=A+N*g+F*y+q*h+j*f+B*d;A=ce>>>13,ce&=8191,ce+=D*u+m*l+S*c+P*a+k*(5*v),A+=ce>>>13,ce&=8191;let se=A+N*v+F*g+q*y+j*h+B*f;A=se>>>13,se&=8191,se+=D*d+m*u+S*l+P*c+k*a,A+=se>>>13,se&=8191,A=(A<<2)+A|0,A=A+O|0,O=A&8191,A=A>>>13,M+=A,s[0]=O,s[1]=M,s[2]=$,s[3]=Q,s[4]=H,s[5]=G,s[6]=ee,s[7]=ie,s[8]=ce,s[9]=se}finalize(){const{h:t,pad:r}=this,n=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=i,i=t[a]>>>13,t[a]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,n[0]=t[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=t[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)t[a]=t[a]&s|n[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let o=t[0]+r[0];t[0]=o&65535;for(let a=1;a<8;a++)o=(t[a]+r[a]|0)+(o>>>16)|0,t[a]=o&65535;Ba(n)}update(t){Q1(this),t=Uy(t),hr(t);const{buffer:r,blockLen:n}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Ba(this.h,this.r,this.buffer,this.pad)}digestInto(t){Q1(this),h$(t,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)t[s++]=n[o]>>>0,t[s++]=n[o]>>>8;return t}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}}function R$(e){const t=(n,i)=>e(i).update(Uy(n)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}const T$=R$(e=>new P$(e));function C$(e,t,r,n,i,s=20){let o=e[0],a=e[1],c=e[2],l=e[3],u=t[0],d=t[1],f=t[2],h=t[3],y=t[4],g=t[5],v=t[6],b=t[7],w=i,_=r[0],I=r[1],R=r[2],T=o,C=a,L=c,N=l,F=u,q=d,j=f,B=h,D=y,m=g,S=v,P=b,k=w,A=_,O=I,M=R;for(let Q=0;Q<s;Q+=2)T=T+F|0,k=we(k^T,16),D=D+k|0,F=we(F^D,12),T=T+F|0,k=we(k^T,8),D=D+k|0,F=we(F^D,7),C=C+q|0,A=we(A^C,16),m=m+A|0,q=we(q^m,12),C=C+q|0,A=we(A^C,8),m=m+A|0,q=we(q^m,7),L=L+j|0,O=we(O^L,16),S=S+O|0,j=we(j^S,12),L=L+j|0,O=we(O^L,8),S=S+O|0,j=we(j^S,7),N=N+B|0,M=we(M^N,16),P=P+M|0,B=we(B^P,12),N=N+B|0,M=we(M^N,8),P=P+M|0,B=we(B^P,7),T=T+q|0,M=we(M^T,16),S=S+M|0,q=we(q^S,12),T=T+q|0,M=we(M^T,8),S=S+M|0,q=we(q^S,7),C=C+j|0,k=we(k^C,16),P=P+k|0,j=we(j^P,12),C=C+j|0,k=we(k^C,8),P=P+k|0,j=we(j^P,7),L=L+B|0,A=we(A^L,16),D=D+A|0,B=we(B^D,12),L=L+B|0,A=we(A^L,8),D=D+A|0,B=we(B^D,7),N=N+F|0,O=we(O^N,16),m=m+O|0,F=we(F^m,12),N=N+F|0,O=we(O^N,8),m=m+O|0,F=we(F^m,7);let $=0;n[$++]=o+T|0,n[$++]=a+C|0,n[$++]=c+L|0,n[$++]=l+N|0,n[$++]=u+F|0,n[$++]=d+q|0,n[$++]=f+j|0,n[$++]=h+B|0,n[$++]=y+D|0,n[$++]=g+m|0,n[$++]=v+S|0,n[$++]=b+P|0,n[$++]=w+k|0,n[$++]=_+A|0,n[$++]=I+O|0,n[$++]=R+M|0}const N$=A$(C$,{counterRight:!1,counterLength:4,allowShortKeys:!1}),U$=new Uint8Array(16),eE=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(U$.subarray(r))},B$=new Uint8Array(32);function tE(e,t,r,n,i){const s=e(t,r,B$),o=T$.create(s);i&&eE(o,i),eE(o,n);const a=v$(n.length,i?i.length:0,!0);o.update(a);const c=o.digest();return Ba(s,a),c}const L$=e=>(t,r,n)=>({encrypt(i,s){const o=i.length;s=Z1(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);e(t,r,a,a,1);const c=tE(e,t,r,a,n);return s.set(c,o),Ba(c),s},decrypt(i,s){s=Z1(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=tE(e,t,r,o,n);if(!b$(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),e(t,r,s,s,1),Ba(c),s}}),IA=w$({blockSize:64,nonceLength:12,tagLength:16},L$(N$));let OA=class extends lh{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ch(e);const r=On(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),an(i)}update(e){return Es(this),this.iHash.update(e),this}digestInto(e){Es(this),An(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e=e,e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const fh=(e,t,r)=>new OA(e,t).update(r).digest();fh.create=(e,t)=>new OA(e,t);function D$(e,t,r){return ch(e),r===void 0&&(r=new Uint8Array(e.outputLen)),fh(e,On(r),On(t))}const Tp=Uint8Array.from([0]),rE=Uint8Array.of();function j$(e,t,r,n=32){ch(e),Ri(n);const i=e.outputLen;if(n>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/i);r===void 0&&(r=rE);const o=new Uint8Array(s*i),a=fh.create(e,t),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<s;u++)Tp[0]=u+1,c.update(u===0?rE:l).update(r).update(Tp).digestInto(l),o.set(l,i*u),a._cloneInto(c);return a.destroy(),c.destroy(),an(l,Tp),o.slice(0,n)}const M$=(e,t,r,n,i)=>j$(e,D$(e,t,r),n,i),hh=uh,r0=BigInt(0),Dy=BigInt(1);function yf(e,t=""){if(typeof e!="boolean"){const r=t&&`"${t}"`;throw new Error(r+"expected boolean, got type="+typeof e)}return e}function Qs(e,t,r=""){const n=ah(e),i=e==null?void 0:e.length,s=t!==void 0;if(!n||s&&i!==t){const o=r&&`"${r}" `,a=s?` of length ${t}`:"",c=n?`length=${i}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return e}function Mu(e){const t=e.toString(16);return t.length&1?"0"+t:t}function kA(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?r0:BigInt("0x"+e)}function ph(e){return kA(va(e))}function mf(e){return An(e),kA(va(Uint8Array.from(e).reverse()))}function n0(e,t){return pf(e.toString(16).padStart(t*2,"0"))}function i0(e,t){return n0(e,t).reverse()}function Yt(e,t,r){let n;if(typeof t=="string")try{n=pf(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(ah(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}const Cp=e=>typeof e=="bigint"&&r0<=e;function z$(e,t,r){return Cp(e)&&Cp(t)&&Cp(r)&&t<=e&&e<r}function jy(e,t,r,n){if(!z$(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function AA(e){let t;for(t=0;e>r0;e>>=Dy,t+=1);return t}const Gl=e=>(Dy<<BigInt(e))-Dy;function F$(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),i=f=>Uint8Array.of(f);let s=n(e),o=n(e),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...f)=>r(o,s,...f),u=(f=n(0))=>{o=l(i(0),f),s=l(),f.length!==0&&(o=l(i(1),f),s=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<t;){s=l();const y=s.slice();h.push(y),f+=s.length}return ts(...h)};return(f,h)=>{c(),u(f);let y;for(;!(y=h(d()));)u();return c(),y}}function gh(e,t,r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(i,s,o){const a=e[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(t).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function nE(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const s=e(r,...n);return t.set(r,s),s}}const br=BigInt(0),nr=BigInt(1),Zs=BigInt(2),PA=BigInt(3),RA=BigInt(4),TA=BigInt(5),$$=BigInt(7),CA=BigInt(8),q$=BigInt(9),NA=BigInt(16);function Nr(e,t){const r=e%t;return r>=br?r:t+r}function yn(e,t,r){let n=e;for(;t-- >br;)n*=n,n%=r;return n}function iE(e,t){if(e===br)throw new Error("invert: expected non-zero number");if(t<=br)throw new Error("invert: expected positive modulus, got "+t);let r=Nr(e,t),n=t,i=br,s=nr;for(;r!==br;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==nr)throw new Error("invert: does not exist");return Nr(i,t)}function s0(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function UA(e,t){const r=(e.ORDER+nr)/RA,n=e.pow(t,r);return s0(e,n,t),n}function H$(e,t){const r=(e.ORDER-TA)/CA,n=e.mul(t,Zs),i=e.pow(n,r),s=e.mul(t,i),o=e.mul(e.mul(s,Zs),i),a=e.mul(s,e.sub(o,e.ONE));return s0(e,a,t),a}function V$(e){const t=As(e),r=BA(e),n=r(t,t.neg(t.ONE)),i=r(t,n),s=r(t,t.neg(n)),o=(e+$$)/NA;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,n);const d=a.mul(l,i),f=a.mul(l,s),h=a.eql(a.sqr(u),c),y=a.eql(a.sqr(d),c);l=a.cmov(l,u,h),u=a.cmov(f,d,y);const g=a.eql(a.sqr(u),c),v=a.cmov(l,u,g);return s0(a,v,c),v}}function BA(e){if(e<PA)throw new Error("sqrt is not defined for small field");let t=e-nr,r=0;for(;t%Zs===br;)t/=Zs,r++;let n=Zs;const i=As(e);for(;sE(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return UA;let s=i.pow(n,t);const o=(t+nr)/Zs;return function(a,c){if(a.is0(c))return c;if(sE(a,c)!==1)throw new Error("Cannot find square root");let l=r,u=a.mul(a.ONE,s),d=a.pow(c,t),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,y=a.sqr(d);for(;!a.eql(y,a.ONE);)if(h++,y=a.sqr(y),h===l)throw new Error("Cannot find square root");const g=nr<<BigInt(l-h-1),v=a.pow(u,g);l=h,u=a.sqr(v),d=a.mul(d,u),f=a.mul(f,v)}return f}}function K$(e){return e%RA===PA?UA:e%CA===TA?H$:e%NA===q$?V$(e):BA(e)}const W$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function G$(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=W$.reduce((n,i)=>(n[i]="function",n),t);return gh(e,r),e}function Y$(e,t,r){if(r<br)throw new Error("invalid exponent, negatives unsupported");if(r===br)return e.ONE;if(r===nr)return t;let n=e.ONE,i=t;for(;r>br;)r&nr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=nr;return n}function LA(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((o,a,c)=>e.is0(a)?o:(n[c]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,c)=>e.is0(a)?o:(n[c]=e.mul(o,n[c]),e.mul(o,a)),s),n}function sE(e,t){const r=(e.ORDER-nr)/Zs,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),o=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function DA(e,t){t!==void 0&&Ri(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function As(e,t,r=!1,n={}){if(e<=br)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,s,o=!1,a;if(typeof t=="object"&&t!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=t;f.BITS&&(i=f.BITS),f.sqrt&&(s=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof t=="number"&&(i=t),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:l}=DA(e,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:e,isLE:r,BITS:c,BYTES:l,MASK:Gl(c),ZERO:br,ONE:nr,allowedLengths:a,create:f=>Nr(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return br<=f&&f<e},is0:f=>f===br,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&nr)===nr,neg:f=>Nr(-f,e),eql:(f,h)=>f===h,sqr:f=>Nr(f*f,e),add:(f,h)=>Nr(f+h,e),sub:(f,h)=>Nr(f-h,e),mul:(f,h)=>Nr(f*h,e),pow:(f,h)=>Y$(d,f,h),div:(f,h)=>Nr(f*iE(h,e),e),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>iE(f,e),sqrt:s||(f=>(u||(u=K$(e)),u(d,f))),toBytes:f=>r?i0(f,l):n0(f,l),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const g=new Uint8Array(l);g.set(f,r?0:g.length-f.length),f=g}if(f.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+f.length);let y=r?mf(f):ph(f);if(o&&(y=Nr(y,e)),!h&&!d.isValid(y))throw new Error("invalid field element: outside of range 0..ORDER");return y},invertBatch:f=>LA(d,f),cmov:(f,h,y)=>y?h:f});return Object.freeze(d)}function jA(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function MA(e){const t=jA(e);return t+Math.ceil(t/2)}function Q$(e,t,r=!1){const n=e.length,i=jA(t),s=MA(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?mf(e):ph(e),a=Nr(o,t-nr)+nr;return r?i0(a,i):n0(a,i)}const La=BigInt(0),Xs=BigInt(1);function bf(e,t){const r=t.negate();return e?r:t}function Np(e,t){const r=LA(e.Fp,t.map(n=>n.Z));return t.map((n,i)=>e.fromAffine(n.toAffine(r[i])))}function zA(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Up(e,t){zA(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e,s=Gl(e),o=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function oE(e,t,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(e&i),c=e>>o;a>n&&(a-=s,c+=Xs);const l=t*n,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=t%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function Z$(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function X$(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const Bp=new WeakMap,FA=new WeakMap;function Lp(e){return FA.get(e)||1}function aE(e){if(e!==La)throw new Error("invalid wNAF")}class J${constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let i=t;for(;r>La;)r&Xs&&(n=n.add(i)),i=i.double(),r>>=Xs;return n}precomputeWindow(t,r){const{windows:n,windowSize:i}=Up(r,this.bits),s=[];let o=t,a=o;for(let c=0;c<n;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=Up(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:f,offsetF:h}=oE(n,a,o);n=c,u?s=s.add(bf(f,r[h])):i=i.add(bf(d,r[l]))}return aE(n),{p:i,f:s}}wNAFUnsafe(t,r,n,i=this.ZERO){const s=Up(t,this.bits);for(let o=0;o<s.windows&&n!==La;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=oE(n,o,s);if(n=a,!l){const d=r[c];i=i.add(u?d.negate():d)}}return aE(n),i}getPrecomputes(t,r,n){let i=Bp.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(i=n(i)),Bp.set(r,i))),i}cached(t,r,n){const i=Lp(t);return this.wNAF(i,this.getPrecomputes(i,t,n),r)}unsafe(t,r,n,i){const s=Lp(t);return s===1?this._unsafeLadder(t,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,t,n),r,i)}createCache(t,r){zA(r,this.bits),FA.set(t,r),Bp.delete(t)}hasCache(t){return Lp(t)!==1}}function eq(e,t,r,n){let i=t,s=e.ZERO,o=e.ZERO;for(;r>La||n>La;)r&Xs&&(s=s.add(i)),n&Xs&&(o=o.add(i)),i=i.double(),r>>=Xs,n>>=Xs;return{p1:s,p2:o}}function tq(e,t,r,n){Z$(r,e),X$(n,t);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=AA(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Gl(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((t.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let g=0;g<s;g++){const v=n[g],b=Number(v>>BigInt(h)&l);u[b]=u[b].add(r[g])}let y=o;for(let g=u.length-1,v=o;g>0;g--)v=v.add(u[g]),y=y.add(v);if(f=f.add(y),h!==0)for(let g=0;g<c;g++)f=f.double()}return f}function cE(e,t,r){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return G$(t),t}else return As(e,{isLE:r})}function rq(e,t,r={},n){if(n===void 0&&(n=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const c=t[a];if(!(typeof c=="bigint"&&c>La))throw new Error(`CURVE.${a} must be positive bigint`)}const i=cE(t.p,r.Fp,n),s=cE(t.n,r.Fn,n),o=["Gx","Gy","a","b"];for(const a of o)if(!i.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),uA("HashToScalar-");const yc=BigInt(0),Mo=BigInt(1),zu=BigInt(2);function nq(e){return gh(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function iq(e){const t=nq(e),{P:r,type:n,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=t,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||_o,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?zu**BigInt(254):zu**BigInt(447),y=a?BigInt(8)*zu**BigInt(251)-Mo:BigInt(4)*zu**BigInt(445)-Mo,g=h+y+Mo,v=j=>Nr(j,r),b=w(d);function w(j){return i0(v(j),u)}function _(j){const B=Yt("u coordinate",j,u);return a&&(B[31]&=127),v(mf(B))}function I(j){return mf(i(Yt("scalar",j,u)))}function R(j,B){const D=L(_(B),I(j));if(D===yc)throw new Error("invalid private or public key received");return w(D)}function T(j){return R(j,b)}function C(j,B,D){const m=v(j*(B-D));return B=v(B-m),D=v(D+m),{x_2:B,x_3:D}}function L(j,B){jy("u",j,yc,r),jy("scalar",B,h,g);const D=B,m=j;let S=Mo,P=yc,k=j,A=Mo,O=yc;for(let $=BigInt(l-1);$>=yc;$--){const Q=D>>$&Mo;O^=Q,{x_2:S,x_3:k}=C(O,S,k),{x_2:P,x_3:A}=C(O,P,A),O=Q;const H=S+P,G=v(H*H),ee=S-P,ie=v(ee*ee),ce=G-ie,se=k+A,de=k-A,Te=v(de*H),Je=v(se*ee),qe=Te+Je,Ye=Te-Je;k=v(qe*qe),A=v(m*v(Ye*Ye)),S=v(G*ie),P=v(ce*(G+v(f*ce)))}({x_2:S,x_3:k}=C(O,S,k)),{x_2:P,x_3:A}=C(O,P,A);const M=s(P);return v(S*M)}const N={secretKey:u,publicKey:u,seed:u},F=(j=c(u))=>(An(j,N.seed),j);function q(j){const B=F(j);return{secretKey:B,publicKey:T(B)}}return{keygen:q,getSharedSecret:(j,B)=>R(j,B),getPublicKey:j=>T(j),scalarMult:R,scalarMultBase:T,utils:{randomSecretKey:F,randomPrivateKey:F},GuBytes:b.slice(),lengths:N}}const sq=BigInt(1),lE=BigInt(2),oq=BigInt(3),aq=BigInt(5);BigInt(8);const $A=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),cq={p:$A,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function lq(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=$A,o=e*e%s*e%s,a=yn(o,lE,s)*o%s,c=yn(a,sq,s)*e%s,l=yn(c,aq,s)*c%s,u=yn(l,t,s)*l%s,d=yn(u,r,s)*u%s,f=yn(d,n,s)*d%s,h=yn(f,i,s)*f%s,y=yn(h,i,s)*f%s,g=yn(y,t,s)*l%s;return{pow_p_5_8:yn(g,lE,s)*e%s,b2:o}}function uq(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const dq=As(cq.p,{isLE:!0}),My=(()=>{const e=dq.ORDER;return iq({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:r,b2:n}=lq(t);return Nr(yn(r,oq,e)*n,e)},adjustScalarBytes:uq})})(),uE=(e,t)=>(e+(e>=0?t:-t)/qA)/t;function fq(e,t,r){const[[n,i],[s,o]]=t,a=uE(o*e,r),c=uE(-i*e,r);let l=e-a*n-c*s,u=-a*i-c*o;const d=l<wi,f=u<wi;d&&(l=-l),f&&(u=-u);const h=Gl(Math.ceil(AA(r)/2))+Ea;if(l<wi||l>=h||u<wi||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:l,k2neg:f,k2:u}}function zy(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Dp(e,t){const r={};for(let n of Object.keys(t))r[n]=e[n]===void 0?t[n]:e[n];return yf(r.lowS,"lowS"),yf(r.prehash,"prehash"),r.format!==void 0&&zy(r.format),r}class hq extends Error{constructor(t=""){super(t)}}const pi={Err:hq,_tlv:{encode:(e,t)=>{const{Err:r}=pi;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=Mu(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Mu(i.length/2|128):"";return Mu(e)+s+i+t},decode(e,t){const{Err:r}=pi;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=t.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=pi;if(e<wi)throw new t("integer: negative integers are not allowed");let r=Mu(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=pi;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return ph(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=pi,i=Yt("signature",e),{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=pi,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),s=n+i;return t.encode(48,s)}},wi=BigInt(0),Ea=BigInt(1),qA=BigInt(2),Fu=BigInt(3),pq=BigInt(4);function ia(e,t){const{BYTES:r}=e;let n;if(typeof t=="bigint")n=t;else{let i=Yt("private key",t);try{n=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof t}`)}}if(!e.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function gq(e,t={}){const r=rq("weierstrass",e,t),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o,n:a}=s;gh(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=VA(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(j,B,D){const{x:m,y:S}=B.toAffine(),P=n.toBytes(m);if(yf(D,"isCompressed"),D){u();const k=!n.isOdd(S);return ts(HA(k),P)}else return ts(Uint8Array.of(4),P,n.toBytes(S))}function f(j){Qs(j,void 0,"Point");const{publicKey:B,publicKeyUncompressed:D}=l,m=j.length,S=j[0],P=j.subarray(1);if(m===B&&(S===2||S===3)){const k=n.fromBytes(P);if(!n.isValid(k))throw new Error("bad point: is not on curve, wrong x");const A=g(k);let O;try{O=n.sqrt(A)}catch($){const Q=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+Q)}u();const M=n.isOdd(O);return(S&1)===1!==M&&(O=n.neg(O)),{x:k,y:O}}else if(m===D&&S===4){const k=n.BYTES,A=n.fromBytes(P.subarray(0,k)),O=n.fromBytes(P.subarray(k,k*2));if(!v(A,O))throw new Error("bad point: is not on curve");return{x:A,y:O}}else throw new Error(`bad point: got length ${m}, expected compressed=${B} or uncompressed=${D}`)}const h=t.toBytes||d,y=t.fromBytes||f;function g(j){const B=n.sqr(j),D=n.mul(B,j);return n.add(n.add(D,n.mul(j,s.a)),s.b)}function v(j,B){const D=n.sqr(B),m=g(j);return n.eql(D,m)}if(!v(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const b=n.mul(n.pow(s.a,Fu),pq),w=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(b,w)))throw new Error("bad curve params: a or b");function _(j,B,D=!1){if(!n.isValid(B)||D&&n.is0(B))throw new Error(`bad point coordinate ${j}`);return B}function I(j){if(!(j instanceof N))throw new Error("ProjectivePoint expected")}function R(j){if(!c||!c.basises)throw new Error("no endo");return fq(j,c.basises,i.ORDER)}const T=nE((j,B)=>{const{X:D,Y:m,Z:S}=j;if(n.eql(S,n.ONE))return{x:D,y:m};const P=j.is0();B==null&&(B=P?n.ONE:n.inv(S));const k=n.mul(D,B),A=n.mul(m,B),O=n.mul(S,B);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:k,y:A}}),C=nE(j=>{if(j.is0()){if(t.allowInfinityPoint&&!n.is0(j.Y))return;throw new Error("bad point: ZERO")}const{x:B,y:D}=j.toAffine();if(!n.isValid(B)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!v(B,D))throw new Error("bad point: equation left != right");if(!j.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function L(j,B,D,m,S){return D=new N(n.mul(D.X,j),D.Y,D.Z),B=bf(m,B),D=bf(S,D),B.add(D)}class N{constructor(B,D,m){this.X=_("x",B),this.Y=_("y",D,!0),this.Z=_("z",m),Object.freeze(this)}static CURVE(){return s}static fromAffine(B){const{x:D,y:m}=B||{};if(!B||!n.isValid(D)||!n.isValid(m))throw new Error("invalid affine point");if(B instanceof N)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(m)?N.ZERO:new N(D,m,n.ONE)}static fromBytes(B){const D=N.fromAffine(y(Qs(B,void 0,"point")));return D.assertValidity(),D}static fromHex(B){return N.fromBytes(Yt("pointHex",B))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(B=8,D=!0){return q.createCache(this,B),D||this.multiply(Fu),this}assertValidity(){C(this)}hasEvenY(){const{y:B}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(B)}equals(B){I(B);const{X:D,Y:m,Z:S}=this,{X:P,Y:k,Z:A}=B,O=n.eql(n.mul(D,A),n.mul(P,S)),M=n.eql(n.mul(m,A),n.mul(k,S));return O&&M}negate(){return new N(this.X,n.neg(this.Y),this.Z)}double(){const{a:B,b:D}=s,m=n.mul(D,Fu),{X:S,Y:P,Z:k}=this;let A=n.ZERO,O=n.ZERO,M=n.ZERO,$=n.mul(S,S),Q=n.mul(P,P),H=n.mul(k,k),G=n.mul(S,P);return G=n.add(G,G),M=n.mul(S,k),M=n.add(M,M),A=n.mul(B,M),O=n.mul(m,H),O=n.add(A,O),A=n.sub(Q,O),O=n.add(Q,O),O=n.mul(A,O),A=n.mul(G,A),M=n.mul(m,M),H=n.mul(B,H),G=n.sub($,H),G=n.mul(B,G),G=n.add(G,M),M=n.add($,$),$=n.add(M,$),$=n.add($,H),$=n.mul($,G),O=n.add(O,$),H=n.mul(P,k),H=n.add(H,H),$=n.mul(H,G),A=n.sub(A,$),M=n.mul(H,Q),M=n.add(M,M),M=n.add(M,M),new N(A,O,M)}add(B){I(B);const{X:D,Y:m,Z:S}=this,{X:P,Y:k,Z:A}=B;let O=n.ZERO,M=n.ZERO,$=n.ZERO;const Q=s.a,H=n.mul(s.b,Fu);let G=n.mul(D,P),ee=n.mul(m,k),ie=n.mul(S,A),ce=n.add(D,m),se=n.add(P,k);ce=n.mul(ce,se),se=n.add(G,ee),ce=n.sub(ce,se),se=n.add(D,S);let de=n.add(P,A);return se=n.mul(se,de),de=n.add(G,ie),se=n.sub(se,de),de=n.add(m,S),O=n.add(k,A),de=n.mul(de,O),O=n.add(ee,ie),de=n.sub(de,O),$=n.mul(Q,se),O=n.mul(H,ie),$=n.add(O,$),O=n.sub(ee,$),$=n.add(ee,$),M=n.mul(O,$),ee=n.add(G,G),ee=n.add(ee,G),ie=n.mul(Q,ie),se=n.mul(H,se),ee=n.add(ee,ie),ie=n.sub(G,ie),ie=n.mul(Q,ie),se=n.add(se,ie),G=n.mul(ee,se),M=n.add(M,G),G=n.mul(de,se),O=n.mul(ce,O),O=n.sub(O,G),G=n.mul(ce,ee),$=n.mul(de,$),$=n.add($,G),new N(O,M,$)}subtract(B){return this.add(B.negate())}is0(){return this.equals(N.ZERO)}multiply(B){const{endo:D}=t;if(!i.isValidNot0(B))throw new Error("invalid scalar: out of range");let m,S;const P=k=>q.cached(this,k,A=>Np(N,A));if(D){const{k1neg:k,k1:A,k2neg:O,k2:M}=R(B),{p:$,f:Q}=P(A),{p:H,f:G}=P(M);S=Q.add(G),m=L(D.beta,$,H,k,O)}else{const{p:k,f:A}=P(B);m=k,S=A}return Np(N,[m,S])[0]}multiplyUnsafe(B){const{endo:D}=t,m=this;if(!i.isValid(B))throw new Error("invalid scalar: out of range");if(B===wi||m.is0())return N.ZERO;if(B===Ea)return m;if(q.hasCache(this))return this.multiply(B);if(D){const{k1neg:S,k1:P,k2neg:k,k2:A}=R(B),{p1:O,p2:M}=eq(N,m,P,A);return L(D.beta,O,M,S,k)}else return q.unsafe(m,B)}multiplyAndAddUnsafe(B,D,m){const S=this.multiplyUnsafe(D).add(B.multiplyUnsafe(m));return S.is0()?void 0:S}toAffine(B){return T(this,B)}isTorsionFree(){const{isTorsionFree:B}=t;return o===Ea?!0:B?B(N,this):q.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:B}=t;return o===Ea?this:B?B(N,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(B=!0){return yf(B,"isCompressed"),this.assertValidity(),h(N,this,B)}toHex(B=!0){return va(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(B=!0){return this.toBytes(B)}_setWindowSize(B){this.precompute(B)}static normalizeZ(B){return Np(N,B)}static msm(B,D){return tq(N,i,B,D)}static fromPrivateKey(B){return N.BASE.multiply(ia(i,B))}}N.BASE=new N(s.Gx,s.Gy,n.ONE),N.ZERO=new N(n.ZERO,n.ONE,n.ZERO),N.Fp=n,N.Fn=i;const F=i.BITS,q=new J$(N,t.endo?Math.ceil(F/2):F);return N.BASE.precompute(8),N}function HA(e){return Uint8Array.of(e?2:3)}function VA(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function yq(e,t={}){const{Fn:r}=e,n=t.randomBytes||_o,i=Object.assign(VA(e.Fp,r),{seed:MA(r.ORDER)});function s(f){try{return!!ia(r,f)}catch{return!1}}function o(f,h){const{publicKey:y,publicKeyUncompressed:g}=i;try{const v=f.length;return h===!0&&v!==y||h===!1&&v!==g?!1:!!e.fromBytes(f)}catch{return!1}}function a(f=n(i.seed)){return Q$(Qs(f,i.seed,"seed"),r.ORDER)}function c(f,h=!0){return e.BASE.multiply(ia(r,f)).toBytes(h)}function l(f){const h=a(f);return{secretKey:h,publicKey:c(h)}}function u(f){if(typeof f=="bigint")return!1;if(f instanceof e)return!0;const{secretKey:h,publicKey:y,publicKeyUncompressed:g}=i;if(r.allowedLengths||h===y)return;const v=Yt("key",f).length;return v===y||v===g}function d(f,h,y=!0){if(u(f)===!0)throw new Error("first arg must be private key");if(u(h)===!1)throw new Error("second arg must be public key");const g=ia(r,f);return e.fromHex(h).multiply(g).toBytes(y)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:l,Point:e,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:f=>ia(r,f),precompute(f=8,h=e.BASE){return h.precompute(f,!1)}},lengths:i})}function mq(e,t,r={}){ch(t),gh(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||_o,i=r.hmac||((D,...m)=>fh(t,D,ts(...m))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:f,lengths:h}=yq(e,r),y={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function v(D){const m=a>>Ea;return D>m}function b(D,m){if(!o.isValidNot0(m))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return m}function w(D,m){zy(m);const S=h.signature,P=m==="compact"?S:m==="recovered"?S+1:void 0;return Qs(D,P,`${m} signature`)}class _{constructor(m,S,P){this.r=b("r",m),this.s=b("s",S),P!=null&&(this.recovery=P),Object.freeze(this)}static fromBytes(m,S=g){w(m,S);let P;if(S==="der"){const{r:M,s:$}=pi.toSig(Qs(m));return new _(M,$)}S==="recovered"&&(P=m[0],S="compact",m=m.subarray(1));const k=o.BYTES,A=m.subarray(0,k),O=m.subarray(k,k*2);return new _(o.fromBytes(A),o.fromBytes(O),P)}static fromHex(m,S){return this.fromBytes(pf(m),S)}addRecoveryBit(m){return new _(this.r,this.s,m)}recoverPublicKey(m){const S=s.ORDER,{r:P,s:k,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(a*qA<S&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=A===2||A===3?P+a:P;if(!s.isValid(O))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(O),$=e.fromBytes(ts(HA((A&1)===0),M)),Q=o.inv(O),H=R(Yt("msgHash",m)),G=o.create(-H*Q),ee=o.create(k*Q),ie=e.BASE.multiplyUnsafe(G).add($.multiplyUnsafe(ee));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return v(this.s)}toBytes(m=g){if(zy(m),m==="der")return pf(pi.hexFromSig(this));const S=o.toBytes(this.r),P=o.toBytes(this.s);if(m==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ts(Uint8Array.of(this.recovery),S,P)}return ts(S,P)}toHex(m){return va(this.toBytes(m))}assertValidity(){}static fromCompact(m){return _.fromBytes(Yt("sig",m),"compact")}static fromDER(m){return _.fromBytes(Yt("sig",m),"der")}normalizeS(){return this.hasHighS()?new _(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return va(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return va(this.toBytes("compact"))}}const I=r.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const m=ph(D),S=D.length*8-c;return S>0?m>>BigInt(S):m},R=r.bits2int_modN||function(D){return o.create(I(D))},T=Gl(c);function C(D){return jy("num < 2^"+c,D,wi,T),o.toBytes(D)}function L(D,m){return Qs(D,void 0,"message"),m?Qs(t(D),void 0,"prehashed message"):D}function N(D,m,S){if(["recovered","canonical"].some(ee=>ee in S))throw new Error("sign() legacy options not supported");const{lowS:P,prehash:k,extraEntropy:A}=Dp(S,y);D=L(D,k);const O=R(D),M=ia(o,m),$=[C(M),C(O)];if(A!=null&&A!==!1){const ee=A===!0?n(h.secretKey):A;$.push(Yt("extraEntropy",ee))}const Q=ts(...$),H=O;function G(ee){const ie=I(ee);if(!o.isValidNot0(ie))return;const ce=o.inv(ie),se=e.BASE.multiply(ie).toAffine(),de=o.create(se.x);if(de===wi)return;const Te=o.create(ce*o.create(H+de*M));if(Te===wi)return;let Je=(se.x===de?0:2)|Number(se.y&Ea),qe=Te;return P&&v(Te)&&(qe=o.neg(Te),Je^=1),new _(de,qe,Je)}return{seed:Q,k2sig:G}}function F(D,m,S={}){D=Yt("message",D);const{seed:P,k2sig:k}=N(D,m,S);return F$(t.outputLen,o.BYTES,i)(P,k)}function q(D){let m;const S=typeof D=="string"||ah(D),P=!S&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!S&&!P)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(P)m=new _(D.r,D.s);else if(S){try{m=_.fromBytes(Yt("sig",D),"der")}catch(k){if(!(k instanceof pi.Err))throw k}if(!m)try{m=_.fromBytes(Yt("sig",D),"compact")}catch{return!1}}return m||!1}function j(D,m,S,P={}){const{lowS:k,prehash:A,format:O}=Dp(P,y);if(S=Yt("publicKey",S),m=L(Yt("message",m),A),"strict"in P)throw new Error("options.strict was renamed to lowS");const M=O===void 0?q(D):_.fromBytes(Yt("sig",D),O);if(M===!1)return!1;try{const $=e.fromBytes(S);if(k&&M.hasHighS())return!1;const{r:Q,s:H}=M,G=R(m),ee=o.inv(H),ie=o.create(G*ee),ce=o.create(Q*ee),se=e.BASE.multiplyUnsafe(ie).add($.multiplyUnsafe(ce));return se.is0()?!1:o.create(se.x)===Q}catch{return!1}}function B(D,m,S={}){const{prehash:P}=Dp(S,y);return m=L(m,P),_.fromBytes(D,"recovered").recoverPublicKey(m).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:f,lengths:h,Point:e,sign:F,verify:j,recoverPublicKey:B,Signature:_,hash:t})}function bq(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp;let n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=As(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function wq(e){const{CURVE:t,curveOpts:r}=bq(e),n={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:n}}function vq(e,t){const r=t.Point;return Object.assign({},t,{ProjectivePoint:r,CURVE:Object.assign({},e,DA(r.Fn.ORDER,r.Fn.BITS))})}function Eq(e){const{CURVE:t,curveOpts:r,hash:n,ecdsaOpts:i}=wq(e),s=gq(t,r),o=mq(s,n,i);return vq(e,o)}function Fy(e,t){const r=n=>Eq({...e,hash:n});return{...r(t),create:r}}const KA={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},WA={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},GA={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},_q=As(KA.p),Sq=As(WA.p),xq=As(GA.p),Iq=Fy({...KA,Fp:_q,lowS:!1},uh);Fy({...WA,Fp:Sq,lowS:!1},RF),Fy({...GA,Fp:xq,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},PF);const Oq=Iq,YA="base10",ir="base16",pr="base64pad",rs="base64url",Yl="utf8",QA=0,xi=1,Ql=2,kq=0,dE=1,Kc=12,o0=32;function Aq(){const e=My.utils.randomPrivateKey(),t=My.getPublicKey(e);return{privateKey:_r(e,ir),publicKey:_r(t,ir)}}function $y(){const e=_o(o0);return _r(e,ir)}function Pq(e,t){const r=My.getSharedSecret(rn(e,ir),rn(t,ir)),n=M$(hh,r,void 0,void 0,o0);return _r(n,ir)}function _d(e){const t=hh(rn(e,ir));return _r(t,ir)}function Zr(e){const t=hh(rn(e,Yl));return _r(t,ir)}function ZA(e){return rn(`${e}`,YA)}function mo(e){return Number(_r(e,YA))}function XA(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function JA(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function Rq(e){const t=ZA(typeof e.type<"u"?e.type:QA);if(mo(t)===xi&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?rn(e.senderPublicKey,ir):void 0,n=typeof e.iv<"u"?rn(e.iv,ir):_o(Kc),i=rn(e.symKey,ir),s=IA(i,n).encrypt(rn(e.message,Yl)),o=eP({type:t,sealed:s,iv:n,senderPublicKey:r});return e.encoding===rs?XA(o):o}function Tq(e){const t=rn(e.symKey,ir),{sealed:r,iv:n}=Il({encoded:e.encoded,encoding:e.encoding}),i=IA(t,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return _r(i,Yl)}function Cq(e,t){const r=ZA(Ql),n=_o(Kc),i=rn(e,Yl),s=eP({type:r,sealed:i,iv:n});return t===rs?XA(s):s}function Nq(e,t){const{sealed:r}=Il({encoded:e,encoding:t});return _r(r,Yl)}function eP(e){if(mo(e.type)===Ql)return _r(Vc([e.type,e.sealed]),pr);if(mo(e.type)===xi){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _r(Vc([e.type,e.senderPublicKey,e.iv,e.sealed]),pr)}return _r(Vc([e.type,e.iv,e.sealed]),pr)}function Il(e){const t=(e.encoding||pr)===rs?JA(e.encoded):e.encoded,r=rn(t,pr),n=r.slice(kq,dE),i=dE;if(mo(n)===xi){const c=i+o0,l=c+Kc,u=r.slice(i,c),d=r.slice(c,l),f=r.slice(l);return{type:n,sealed:f,iv:d,senderPublicKey:u}}if(mo(n)===Ql){const c=r.slice(i),l=_o(Kc);return{type:n,sealed:c,iv:l}}const s=i+Kc,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function Uq(e,t){const r=Il({encoded:e,encoding:t==null?void 0:t.encoding});return tP({type:mo(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?_r(r.senderPublicKey,ir):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function tP(e){const t=(e==null?void 0:e.type)||QA;if(t===xi){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function fE(e){return e.type===xi&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function hE(e){return e.type===Ql}function Bq(e){const t=Buffer.from(e.x,"base64"),r=Buffer.from(e.y,"base64");return Vc([new Uint8Array([4]),t,r])}function Lq(e,t){const[r,n,i]=e.split("."),s=Buffer.from(JA(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,l=hh(c),u=Bq(t);if(!Oq.verify(Vc([o,a]),l,u))throw new Error("Invalid signature");return Oy(e).payload}const Dq="irn";function wf(e){return(e==null?void 0:e.relay)||{protocol:Dq}}function sa(e){const t=v7[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var jq=Object.defineProperty,Mq=Object.defineProperties,zq=Object.getOwnPropertyDescriptors,pE=Object.getOwnPropertySymbols,Fq=Object.prototype.hasOwnProperty,$q=Object.prototype.propertyIsEnumerable,gE=(e,t,r)=>t in e?jq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jp=(e,t)=>{for(var r in t||(t={}))Fq.call(t,r)&&gE(e,r,t[r]);if(pE)for(var r of pE(t))$q.call(t,r)&&gE(e,r,t[r]);return e},qq=(e,t)=>Mq(e,zq(t));function Hq(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=e[i];r[s]=o}}),r}function yE(e){if(!e.includes("wc:")){const l=iA(e);l!=null&&l.includes("wc:")&&(e=l)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Vq(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Hq(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Vq(e){return e.startsWith("//")?e.substring(2):e}function Kq(e,t="-"){const r="relay",n={};return Object.keys(e).forEach(i=>{const s=i,o=r+t+s;e[s]&&(n[o]=e[s])}),n}function mE(e){const t=new URLSearchParams,r=jp(jp(qq(jp({},Kq(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(r).sort(([n],[i])=>n.localeCompare(i)).forEach(([n,i])=>{i!==void 0&&t.append(n,String(i))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function $u(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}var Wq=Object.defineProperty,Gq=Object.defineProperties,Yq=Object.getOwnPropertyDescriptors,bE=Object.getOwnPropertySymbols,Qq=Object.prototype.hasOwnProperty,Zq=Object.prototype.propertyIsEnumerable,wE=(e,t,r)=>t in e?Wq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xq=(e,t)=>{for(var r in t||(t={}))Qq.call(t,r)&&wE(e,r,t[r]);if(bE)for(var r of bE(t))Zq.call(t,r)&&wE(e,r,t[r]);return e},Jq=(e,t)=>Gq(e,Yq(t));function Ga(e){const t=[];return e.forEach(r=>{const[n,i]=r.split(":");t.push(`${n}:${i}`)}),t}function rP(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Ga(r.accounts))}),[...new Set(t)]}function eH(e){const t=[];return Object.values(e).forEach(r=>{t.push(...r.methods)}),[...new Set(t)]}function tH(e){const t=[];return Object.values(e).forEach(r=>{t.push(...r.events)}),[...new Set(t)]}function rH(e,t){const r=[];return Object.values(e).forEach(n=>{Ga(n.accounts).includes(t)&&r.push(...n.methods)}),r}function nH(e,t){const r=[];return Object.values(e).forEach(n=>{Ga(n.accounts).includes(t)&&r.push(...n.events)}),r}function yh(e){return e.includes(":")}function oa(e){return yh(e)?e.split(":")[0]:e}function vE(e){var t,r,n;const i={};if(!Zn(e))return i;for(const[s,o]of Object.entries(e)){const a=yh(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=oa(s);i[u]=Jq(Xq({},i[u]),{chains:Qn(a,(t=i[u])==null?void 0:t.chains),methods:Qn(c,(r=i[u])==null?void 0:r.methods),events:Qn(l,(n=i[u])==null?void 0:n.events)})}return i}function iH(e){const t={};return e==null||e.forEach(r=>{var n;const[i,s]=r.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(r),(n=t[i].chains)==null||n.push(`${i}:${s}`)}),t}function EE(e,t){t=t.map(n=>n.replace("did:pkh:",""));const r=iH(t);for(const[n,i]of Object.entries(r))i.methods?i.methods=Qn(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}function sH(e,t){var r,n,i,s,o,a;const c=vE(e),l=vE(t),u={},d=Object.keys(c).concat(Object.keys(l));for(const f of d)u[f]={chains:Qn((r=c[f])==null?void 0:r.chains,(n=l[f])==null?void 0:n.chains),methods:Qn((i=c[f])==null?void 0:i.methods,(s=l[f])==null?void 0:s.methods),events:Qn((o=c[f])==null?void 0:o.events,(a=l[f])==null?void 0:a.events)};return u}const oH={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},aH={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(e,t){const{message:r,code:n}=aH[e];return{message:t?`${r} ${t}`:r,code:n}}function Ve(e,t){const{message:r,code:n}=oH[e];return{message:t?`${r} ${t}`:r,code:n}}function Ii(e,t){return!!Array.isArray(e)}function Zn(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function xt(e){return typeof e>"u"}function ct(e,t){return t&&xt(e)?!0:typeof e=="string"&&!!e.trim().length}function a0(e,t){return typeof e=="number"&&!isNaN(e)}function cH(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return Ys(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=e.namespaces[o],u=Ga(a),d=r[o];(!Ys(Jk(o,d),u)||!Ys(d.methods,c)||!Ys(d.events,l))&&(s=!1)}),s):!1}function vf(e){return ct(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function lH(e){if(ct(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&vf(r)}}return!1}function uH(e){function t(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(ct(e,!1)){if(t(e))return!0;const r=iA(e);return t(r)}}catch{}return!1}function dH(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function fH(e){return e==null?void 0:e.topic}function hH(e,t){let r=null;return ct(e==null?void 0:e.publicKey,!1)||(r=J("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function _E(e){let t=!0;return Ii(e)?e.length&&(t=e.every(r=>ct(r,!1))):t=!1,t}function pH(e,t,r){let n=null;return Ii(t)&&t.length?t.forEach(i=>{n||vf(i)||(n=Ve("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):vf(e)||(n=Ve("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function gH(e,t,r){let n=null;return Object.entries(e).forEach(([i,s])=>{if(n)return;const o=pH(i,Jk(i,s),`${t} ${r}`);o&&(n=o)}),n}function yH(e,t){let r=null;return Ii(e)?e.forEach(n=>{r||lH(n)||(r=Ve("UNSUPPORTED_ACCOUNTS",`${t}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Ve("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function mH(e,t){let r=null;return Object.values(e).forEach(n=>{if(r)return;const i=yH(n==null?void 0:n.accounts,`${t} namespace`);i&&(r=i)}),r}function bH(e,t){let r=null;return _E(e==null?void 0:e.methods)?_E(e==null?void 0:e.events)||(r=Ve("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Ve("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function nP(e,t){let r=null;return Object.values(e).forEach(n=>{if(r)return;const i=bH(n,`${t}, namespace`);i&&(r=i)}),r}function wH(e,t,r){let n=null;if(e&&Zn(e)){const i=nP(e,t);i&&(n=i);const s=gH(e,t,r);s&&(n=s)}else n=J("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}function Mp(e,t){let r=null;if(e&&Zn(e)){const n=nP(e,t);n&&(r=n);const i=mH(e,t);i&&(r=i)}else r=J("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function iP(e){return ct(e.protocol,!0)}function vH(e,t){let r=!1;return e?e&&Ii(e)&&e.length&&e.forEach(n=>{r=iP(n)}):r=!0,r}function EH(e){return typeof e=="number"}function dr(e){return typeof e<"u"&&typeof e!==null}function _H(e){return!(!e||typeof e!="object"||!e.code||!a0(e.code)||!e.message||!ct(e.message,!1))}function SH(e){return!(xt(e)||!ct(e.method,!1))}function xH(e){return!(xt(e)||xt(e.result)&&xt(e.error)||!a0(e.id)||!ct(e.jsonrpc,!1))}function IH(e){return!(xt(e)||!ct(e.name,!1))}function SE(e,t){return!(!vf(t)||!rP(e).includes(t))}function OH(e,t,r){return ct(r,!1)?rH(e,t).includes(r):!1}function kH(e,t,r){return ct(r,!1)?nH(e,t).includes(r):!1}function xE(e,t,r){let n=null;const i=AH(e),s=PH(t),o=Object.keys(i),a=Object.keys(s),c=IE(Object.keys(e)),l=IE(Object.keys(t)),u=c.filter(d=>!l.includes(d));return u.length&&(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),Ys(o,a)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(d=>{if(!d.includes(":")||n)return;const f=Ga(t[d].accounts);f.includes(d)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{n||(Ys(i[d].methods,s[d].methods)?Ys(i[d].events,s[d].events)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function AH(e){const t={};return Object.keys(e).forEach(r=>{var n;r.includes(":")?t[r]=e[r]:(n=e[r].chains)==null||n.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}function IE(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function PH(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const n=Ga(e[r].accounts);n==null||n.forEach(i=>{t[i]={accounts:e[r].accounts.filter(s=>s.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function RH(e,t){return a0(e)&&e<=t.max&&e>=t.min}function OE(){const e=Kl();return new Promise(t=>{switch(e){case jr.browser:t(TH());break;case jr.reactNative:t(CH());break;case jr.node:t(NH());break;default:t(!0)}})}function TH(){return Wa()&&(navigator==null?void 0:navigator.onLine)}async function CH(){if(ks()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e==null?void 0:e.isConnected}return!0}function NH(){return!0}function UH(e){switch(Kl()){case jr.browser:BH(e);break;case jr.reactNative:LH(e);break}}function BH(e){!ks()&&Wa()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function LH(e){ks()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(t=>e(t==null?void 0:t.isConnected)))}function DH(){var e;return Wa()&&fo()?((e=fo())==null?void 0:e.visibilityState)==="visible":!0}const zp={};class mc{static get(t){return zp[t]}static set(t,r){zp[t]=r}static delete(t){delete zp[t]}}function jH(e){const t=ql.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function MH({publicKey:e,signature:t,payload:r}){var n;const i=qy(r.method),s=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=$H(r.address),a=r.era==="00"?new Uint8Array([0]):qy(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${FH(r.tip)}`),d=HH(u),f=new Uint8Array([0,...e,o,...t,...a,...l,...d,...i]),h=qH(f.length+1);return new Uint8Array([...h,s,...f])}function zH(e){const t=qy(e),r=C7.blake2b(t,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function qy(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function FH(e){return e.startsWith("0x")?e.slice(2):e}function $H(e){const t=ql.decode(e)[0];return t===42?0:t===60?2:1}function qH(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function HH(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function VH(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),r=jH(e.transaction.address),n=MH({publicKey:r,signature:t,payload:e.transaction}),i=Buffer.from(n).toString("hex");return zH(i)}function c0({logger:e,name:t}){const r=typeof e=="string"?Xk({opts:{level:e,name:t}}).logger:e;return r.level=typeof e=="string"?e:e.level,r}var mh,De,sP,qs,kE,oP,aP,cP,l0,Hy,Vy,Ef={},_f=[],KH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bh=Array.isArray;function vi(e,t){for(var r in t)e[r]=t[r];return e}function u0(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function WH(e,t,r){var n,i,s,o={};for(s in t)s=="key"?n=t[s]:s=="ref"?i=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?mh.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return Sd(e,o,n,i,null)}function Sd(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++sP,__i:-1,__u:0};return i==null&&De.vnode!=null&&De.vnode(s),s}function wh(e){return e.children}function xd(e,t){this.props=e,this.context=t}function Da(e,t){if(t==null)return e.__?Da(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Da(e):null}function GH(e){if(e.__P&&e.__d){var t=e.__v,r=t.__e,n=[],i=[],s=vi({},t);s.__v=t.__v+1,De.vnode&&De.vnode(s),d0(e.__P,s,t,e.__n,e.__P.namespaceURI,32&t.__u?[r]:null,n,r??Da(t),!!(32&t.__u),i),s.__v=t.__v,s.__.__k[s.__i]=s,fP(n,s,i),t.__e=t.__=null,s.__e!=r&&lP(s)}}function lP(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(t){if(t!=null&&t.__e!=null)return e.__e=e.__c.base=t.__e}),lP(e)}function AE(e){(!e.__d&&(e.__d=!0)&&qs.push(e)&&!Sf.__r++||kE!=De.debounceRendering)&&((kE=De.debounceRendering)||oP)(Sf)}function Sf(){for(var e,t=1;qs.length;)qs.length>t&&qs.sort(aP),e=qs.shift(),t=qs.length,GH(e);Sf.__r=0}function uP(e,t,r,n,i,s,o,a,c,l,u){var d,f,h,y,g,v,b,w=n&&n.__k||_f,_=t.length;for(c=YH(r,t,w,c,_),d=0;d<_;d++)(h=r.__k[d])!=null&&(f=h.__i!=-1&&w[h.__i]||Ef,h.__i=d,v=d0(e,h,f,i,s,o,a,c,l,u),y=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&f0(f.ref,null,h),u.push(h.ref,h.__c||y,h)),g==null&&y!=null&&(g=y),(b=!!(4&h.__u))||f.__k===h.__k?c=dP(h,c,e,b):typeof h.type=="function"&&v!==void 0?c=v:y&&(c=y.nextSibling),h.__u&=-7);return r.__e=g,c}function YH(e,t,r,n,i){var s,o,a,c,l,u=r.length,d=u,f=0;for(e.__k=new Array(i),s=0;s<i;s++)(o=t[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[s]=Sd(null,o,null,null,null):bh(o)?o=e.__k[s]=Sd(wh,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=e.__k[s]=Sd(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[s]=o,c=s+f,o.__=e,o.__b=e.__b+1,a=null,(l=o.__i=QH(o,r,c,d))!=-1&&(d--,(a=r[l])&&(a.__u|=2)),a==null||a.__v==null?(l==-1&&(i>u?f--:i<u&&f++),typeof o.type!="function"&&(o.__u|=4)):l!=c&&(l==c-1?f--:l==c+1?f++:(l>c?f--:f++,o.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<u;s++)(a=r[s])!=null&&!(2&a.__u)&&(a.__e==n&&(n=Da(a)),pP(a,a));return n}function dP(e,t,r,n){var i,s;if(typeof e.type=="function"){for(i=e.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=e,t=dP(i[s],t,r,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=Da(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function QH(e,t,r,n){var i,s,o,a=e.key,c=e.type,l=t[r],u=l!=null&&(2&l.__u)==0;if(l===null&&a==null||u&&a==l.key&&c==l.type)return r;if(n>(u?1:0)){for(i=r-1,s=r+1;i>=0||s<t.length;)if((l=t[o=i>=0?i--:s++])!=null&&!(2&l.__u)&&a==l.key&&c==l.type)return o}return-1}function PE(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||KH.test(t)?r:r+"px"}function qu(e,t,r,n,i){var s,o;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||PE(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||PE(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(cP,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=l0,e.addEventListener(t,s?Vy:Hy,s)):e.removeEventListener(t,s?Vy:Hy,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function RE(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=l0++;else if(t.t<r.u)return;return r(De.event?De.event(t):t)}}}function d0(e,t,r,n,i,s,o,a,c,l){var u,d,f,h,y,g,v,b,w,_,I,R,T,C,L,N=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(c=!!(32&r.__u),s=[a=t.__e=r.__e]),(u=De.__b)&&u(t);e:if(typeof N=="function")try{if(b=t.props,w="prototype"in N&&N.prototype.render,_=(u=N.contextType)&&n[u.__c],I=u?_?_.props.value:u.__:n,r.__c?v=(d=t.__c=r.__c).__=d.__E:(w?t.__c=d=new N(b,I):(t.__c=d=new xd(b,I),d.constructor=N,d.render=XH),_&&_.sub(d),d.state||(d.state={}),d.__n=n,f=d.__d=!0,d.__h=[],d._sb=[]),w&&d.__s==null&&(d.__s=d.state),w&&N.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=vi({},d.__s)),vi(d.__s,N.getDerivedStateFromProps(b,d.__s))),h=d.props,y=d.state,d.__v=t,f)w&&N.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),w&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(w&&N.getDerivedStateFromProps==null&&b!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,I),t.__v==r.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,I)===!1){t.__v!=r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(F){F&&(F.__=t)}),_f.push.apply(d.__h,d._sb),d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,I),w&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,y,g)})}if(d.context=I,d.props=b,d.__P=e,d.__e=!1,R=De.__r,T=0,w)d.state=d.__s,d.__d=!1,R&&R(t),u=d.render(d.props,d.state,d.context),_f.push.apply(d.__h,d._sb),d._sb=[];else do d.__d=!1,R&&R(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++T<25);d.state=d.__s,d.getChildContext!=null&&(n=vi(vi({},n),d.getChildContext())),w&&!f&&d.getSnapshotBeforeUpdate!=null&&(g=d.getSnapshotBeforeUpdate(h,y)),C=u!=null&&u.type===wh&&u.key==null?hP(u.props.children):u,a=uP(e,bh(C)?C:[C],t,r,n,i,s,o,a,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),v&&(d.__E=d.__=null)}catch(F){if(t.__v=null,c||s!=null)if(F.then){for(t.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,t.__e=a}else{for(L=s.length;L--;)u0(s[L]);Ky(t)}else t.__e=r.__e,t.__k=r.__k,F.then||Ky(t);De.__e(F,t,r)}else s==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):a=t.__e=ZH(r.__e,t,r,n,i,s,o,c,l);return(u=De.diffed)&&u(t),128&t.__u?void 0:a}function Ky(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(Ky))}function fP(e,t,r){for(var n=0;n<r.length;n++)f0(r[n],r[++n],r[++n]);De.__c&&De.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){De.__e(s,i.__v)}})}function hP(e){return typeof e!="object"||e==null||e.__b>0?e:bh(e)?e.map(hP):vi({},e)}function ZH(e,t,r,n,i,s,o,a,c){var l,u,d,f,h,y,g,v=r.props||Ef,b=t.props,w=t.type;if(w=="svg"?i="http://www.w3.org/2000/svg":w=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((h=s[l])&&"setAttribute"in h==!!w&&(w?h.localName==w:h.nodeType==3)){e=h,s[l]=null;break}}if(e==null){if(w==null)return document.createTextNode(b);e=document.createElementNS(i,w,b.is&&b),a&&(De.__m&&De.__m(t,s),a=!1),s=null}if(w==null)v===b||a&&e.data==b||(e.data=b);else{if(s=s&&mh.call(e.childNodes),!a&&s!=null)for(v={},l=0;l<e.attributes.length;l++)v[(h=e.attributes[l]).name]=h.value;for(l in v)h=v[l],l=="dangerouslySetInnerHTML"?d=h:l=="children"||l in b||l=="value"&&"defaultValue"in b||l=="checked"&&"defaultChecked"in b||qu(e,l,null,h,i);for(l in b)h=b[l],l=="children"?f=h:l=="dangerouslySetInnerHTML"?u=h:l=="value"?y=h:l=="checked"?g=h:a&&typeof h!="function"||v[l]===h||qu(e,l,h,v[l],i);if(u)a||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),uP(t.type=="template"?e.content:e,bh(f)?f:[f],t,r,n,w=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:r.__k&&Da(r,0),a,c),s!=null)for(l=s.length;l--;)u0(s[l]);a||(l="value",w=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[l]||w=="progress"&&!y||w=="option"&&y!=v[l])&&qu(e,l,y,v[l],i),l="checked",g!=null&&g!=e[l]&&qu(e,l,g,v[l],i))}return e}function f0(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(i){De.__e(i,r)}}function pP(e,t,r){var n,i;if(De.unmount&&De.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||f0(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){De.__e(s,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&pP(n[i],t,r||typeof e.type!="function");r||u0(e.__e),e.__c=e.__=e.__e=void 0}function XH(e,t,r){return this.constructor(e,r)}function TE(e,t,r){var n,i,s,o;t==document&&(t=document.documentElement),De.__&&De.__(e,t),i=(n=!1)?null:t.__k,s=[],o=[],d0(t,e=t.__k=WH(wh,null,[e]),i||Ef,Ef,t.namespaceURI,i?null:t.firstChild?mh.call(t.childNodes):null,s,i?i.__e:t.firstChild,n,o),fP(s,e,o)}mh=_f.slice,De={__e:function(e,t,r,n){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},sP=0,xd.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=vi({},this.state),typeof e=="function"&&(e=e(vi({},r),this.props)),e&&vi(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),AE(this))},xd.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),AE(this))},xd.prototype.render=wh,qs=[],oP=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,aP=function(e,t){return e.__v.__b-t.__v.__b},Sf.__r=0,cP=/(PointerCapture)$|Capture$/i,l0=0,Hy=RE(!1),Vy=RE(!0);var JH=0;function Bn(e,t,r,n,i,s){t||(t={});var o,a,c=t;if("ref"in c)for(a in c={},t)a=="ref"?o=t[a]:c[a]=t[a];var l={type:e,props:c,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--JH,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return De.vnode&&De.vnode(l),l}class So{}let eV=class extends So{constructor(e){super()}};const CE=Z.FIVE_SECONDS,xo={pulse:"heartbeat_pulse"};let tV=class gP extends eV{constructor(t){super(t),this.events=new Sr.EventEmitter,this.interval=CE,this.interval=(t==null?void 0:t.interval)||CE}static async init(t){const r=new gP(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Z.toMiliseconds(this.interval))}pulse(){this.events.emit(xo.pulse)}};const rV=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,nV=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,iV=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function sV(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){oV(e);return}return t}function oV(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Hu(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!iV.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(rV.test(e)||nV.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,sV)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function aV(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function Et(e,...t){try{return aV(e(...t))}catch(r){return Promise.reject(r)}}function cV(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function lV(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Id(e){if(cV(e))return String(e);if(lV(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Id(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Wy="base64:";function uV(e){return typeof e=="string"?e:Wy+hV(e)}function dV(e){return typeof e!="string"||!e.startsWith(Wy)?e:fV(e.slice(Wy.length))}function fV(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function hV(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function ur(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function pV(...e){return ur(e.join(":"))}function Vu(e){return e=ur(e),e?e+":":""}function gV(e,t){if(t===void 0)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}function yV(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const mV="memory",bV=()=>{const e=new Map;return{name:mV,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function wV(e={}){const t={mounts:{"":e.driver||bV()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of t.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:t.mounts[u]};return{base:"",relativeKey:l,driver:t.mounts[""]}},n=(l,u)=>t.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:t.mounts[d]})),i=(l,u)=>{if(t.watching){u=ur(u);for(const d of t.watchListeners)d(l,u)}},s=async()=>{if(!t.watching){t.watching=!0;for(const l in t.mounts)t.unwatch[l]=await NE(t.mounts[l],i,l)}},o=async()=>{if(t.watching){for(const l in t.unwatch)await t.unwatch[l]();t.unwatch={},t.watching=!1}},a=(l,u,d)=>{const f=new Map,h=y=>{let g=f.get(y.base);return g||(g={driver:y.driver,base:y.base,items:[]},f.set(y.base,g)),g};for(const y of l){const g=typeof y=="string",v=ur(g?y:y.key),b=g?void 0:y.value,w=g||!y.options?u:{...u,...y.options},_=r(v);h(_).items.push({key:v,value:b,relativeKey:_.relativeKey,options:w})}return Promise.all([...f.values()].map(y=>d(y))).then(y=>y.flat())},c={hasItem(l,u={}){l=ur(l);const{relativeKey:d,driver:f}=r(l);return Et(f.hasItem,d,u)},getItem(l,u={}){l=ur(l);const{relativeKey:d,driver:f}=r(l);return Et(f.getItem,d,u).then(h=>Hu(h))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Et(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),u).then(f=>f.map(h=>({key:pV(d.base,h.key),value:Hu(h.value)}))):Promise.all(d.items.map(f=>Et(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Hu(h)})))))},getItemRaw(l,u={}){l=ur(l);const{relativeKey:d,driver:f}=r(l);return f.getItemRaw?Et(f.getItemRaw,d,u):Et(f.getItem,d,u).then(h=>dV(h))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=ur(l);const{relativeKey:f,driver:h}=r(l);h.setItem&&(await Et(h.setItem,f,Id(u),d),h.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Et(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:Id(f.value),options:f.options})),u);d.driver.setItem&&await Promise.all(d.items.map(f=>Et(d.driver.setItem,f.relativeKey,Id(f.value),f.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=ur(l);const{relativeKey:f,driver:h}=r(l);if(h.setItemRaw)await Et(h.setItemRaw,f,u,d);else if(h.setItem)await Et(h.setItem,f,uV(u),d);else return;h.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ur(l);const{relativeKey:d,driver:f}=r(l);f.removeItem&&(await Et(f.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Et(f.removeItem,d+"$",u),f.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ur(l);const{relativeKey:d,driver:f}=r(l),h=Object.create(null);if(f.getMeta&&Object.assign(h,await Et(f.getMeta,d,u)),!u.nativeOnly){const y=await Et(f.getItem,d+"$",u).then(g=>Hu(g));y&&typeof y=="object"&&(typeof y.atime=="string"&&(y.atime=new Date(y.atime)),typeof y.mtime=="string"&&(y.mtime=new Date(y.mtime)),Object.assign(h,y))}return h},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var d;l=Vu(l);const f=n(l,!0);let h=[];const y=[];let g=!0;for(const b of f){(d=b.driver.flags)!=null&&d.maxDepth||(g=!1);const w=await Et(b.driver.getKeys,b.relativeBase,u);for(const _ of w){const I=b.mountpoint+ur(_);h.some(R=>I.startsWith(R))||y.push(I)}h=[b.mountpoint,...h.filter(_=>!_.startsWith(b.mountpoint))]}const v=u.maxDepth!==void 0&&!g;return y.filter(b=>(!v||gV(b,u.maxDepth))&&yV(b,l))},async clear(l,u={}){l=Vu(l),await Promise.all(n(l,!1).map(async d=>{if(d.driver.clear)return Et(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(f.map(h=>d.driver.removeItem(h,u)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(l=>UE(l)))},async watch(l){return await s(),t.watchListeners.push(l),async()=>{t.watchListeners=t.watchListeners.filter(u=>u!==l),t.watchListeners.length===0&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(l,u){if(l=Vu(l),l&&t.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(t.mountpoints.push(l),t.mountpoints.sort((d,f)=>f.length-d.length)),t.mounts[l]=u,t.watching&&Promise.resolve(NE(u,i,l)).then(d=>{t.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,f;l=Vu(l),!(!l||!t.mounts[l])&&(t.watching&&l in t.unwatch&&((f=(d=t.unwatch)[l])==null||f.call(d),delete t.unwatch[l]),u&&await UE(t.mounts[l]),t.mountpoints=t.mountpoints.filter(h=>h!==l),delete t.mounts[l])},getMount(l=""){l=ur(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ur(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function NE(e,t,r){return e.watch?e.watch((n,i)=>t(n,r+i)):()=>{}}async function UE(e){typeof e.dispose=="function"&&await Et(e.dispose)}function Io(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function yP(e,t){let r;const n=()=>{if(r)return r;const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),r=Io(i),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(i,s)=>n().then(o=>s(o.transaction(t,i).objectStore(t)))}let Fp;function Zl(){return Fp||(Fp=yP("keyval-store","keyval")),Fp}function BE(e,t=Zl()){return t("readonly",r=>Io(r.get(e)))}function vV(e,t,r=Zl()){return r("readwrite",n=>(n.put(t,e),Io(n.transaction)))}function EV(e,t=Zl()){return t("readwrite",r=>(r.delete(e),Io(r.transaction)))}function _V(e=Zl()){return e("readwrite",t=>(t.clear(),Io(t.transaction)))}function SV(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Io(e.transaction)}function xV(e=Zl()){return e("readonly",t=>{if(t.getAllKeys)return Io(t.getAllKeys());const r=[];return SV(t,n=>r.push(n.key)).then(()=>r)})}const IV="idb-keyval";var OV=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=i=>t+i;let n;return e.dbName&&e.storeName&&(n=yP(e.dbName,e.storeName)),{name:IV,options:e,async hasItem(i){return!(typeof await BE(r(i),n)>"u")},async getItem(i){return await BE(r(i),n)??null},setItem(i,s){return vV(r(i),s,n)},removeItem(i){return EV(r(i),n)},getKeys(){return xV(n)},clear(){return _V(n)}}};const kV="WALLET_CONNECT_V2_INDEXED_DB",AV="keyvaluestorage";let PV=class{constructor(){this.indexedDb=wV({driver:OV({dbName:kV,storeName:AV})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,go(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var $p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Od={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,n){this[r]=String(n)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof $p<"u"&&$p.localStorage?Od.exports=$p.localStorage:typeof window<"u"&&window.localStorage?Od.exports=window.localStorage:Od.exports=new t})();function RV(e){var t;return[e[0],po((t=e[1])!=null?t:"")]}let TV=class{constructor(){this.localStorage=Od.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(RV)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return po(t)}async setItem(e,t){this.localStorage.setItem(e,go(t))}async removeItem(e){this.localStorage.removeItem(e)}};const CV="wc_storage_version",LE=1,NV=async(e,t,r)=>{const n=CV,i=await t.getItem(n);if(i&&i>=LE){r(t);return}const s=await e.getKeys();if(!s.length){r(t);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await e.getItem(a);await t.setItem(a,l),o.push(a)}}await t.setItem(n,LE),r(t),UV(e,o)},UV=async(e,t)=>{t.length&&t.forEach(async r=>{await e.removeItem(r)})};let BV=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new TV;this.storage=e;try{const t=new PV;NV(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var LV=Object.defineProperty,DV=(e,t,r)=>t in e?LV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,DE=(e,t,r)=>DV(e,typeof t!="symbol"?t+"":t,r);let jV=class extends So{constructor(e){super(),this.opts=e,DE(this,"protocol","wc"),DE(this,"version",2)}};var MV=Object.defineProperty,zV=(e,t,r)=>t in e?MV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,FV=(e,t,r)=>zV(e,t+"",r);class $V extends So{constructor(t,r){super(),this.core=t,this.logger=r,FV(this,"records",new Map)}}let qV=class{constructor(e,t){this.logger=e,this.core=t}};class HV extends So{constructor(t,r){super(),this.relayer=t,this.logger=r}}let VV=class extends So{constructor(e){super()}},KV=class{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}},WV=class extends So{constructor(e,t){super(),this.relayer=e,this.logger=t}},GV=class extends So{constructor(e,t){super(),this.core=e,this.logger=t}},YV=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},QV=class{constructor(e,t){this.projectId=e,this.logger=t}};class ZV{constructor(t,r,n){this.core=t,this.logger=r,this.telemetryEnabled=n}}var XV=Object.defineProperty,JV=(e,t,r)=>t in e?XV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jE=(e,t,r)=>JV(e,typeof t!="symbol"?t+"":t,r);let eK=class{constructor(e){this.opts=e,jE(this,"protocol","wc"),jE(this,"version",2)}},tK=class{constructor(e){this.client=e}};const rK="PARSE_ERROR",nK="INVALID_REQUEST",iK="METHOD_NOT_FOUND",sK="INVALID_PARAMS",mP="INTERNAL_ERROR",h0="SERVER_ERROR",oK=[-32700,-32600,-32601,-32602,-32603],Wc={[rK]:{code:-32700,message:"Parse error"},[nK]:{code:-32600,message:"Invalid Request"},[iK]:{code:-32601,message:"Method not found"},[sK]:{code:-32602,message:"Invalid params"},[mP]:{code:-32603,message:"Internal error"},[h0]:{code:-32e3,message:"Server error"}},bP=h0;function aK(e){return oK.includes(e)}function ME(e){return Object.keys(Wc).includes(e)?Wc[e]:Wc[bP]}function cK(e){return Object.values(Wc).find(r=>r.code===e)||Wc[bP]}function wP(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var vP={},oi={},zE;function lK(){if(zE)return oi;zE=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.isBrowserCryptoAvailable=oi.getSubtleCrypto=oi.getBrowerCrypto=void 0;function e(){return(Lr==null?void 0:Lr.crypto)||(Lr==null?void 0:Lr.msCrypto)||{}}oi.getBrowerCrypto=e;function t(){const n=e();return n.subtle||n.webkitSubtle}oi.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return oi.isBrowserCryptoAvailable=r,oi}var ai={},FE;function uK(){if(FE)return ai;FE=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.isBrowser=ai.isNode=ai.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ai.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ai.isNode=t;function r(){return!e()&&!t()}return ai.isBrowser=r,ai}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ml;t.__exportStar(lK(),e),t.__exportStar(uK(),e)})(vP);function jn(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function os(e=6){return BigInt(jn(e))}function _n(e,t,r){return{id:r||jn(),jsonrpc:"2.0",method:e,params:t}}function Ol(e,t){return{id:e,jsonrpc:"2.0",result:t}}function vh(e,t,r){return{id:e,jsonrpc:"2.0",error:dK(t)}}function dK(e,t){return typeof e>"u"?ME(mP):(typeof e=="string"&&(e=Object.assign(Object.assign({},ME(h0)),{message:e})),aK(e.code)&&(e=cK(e.code)),e)}class fK{}class hK extends fK{constructor(){super()}}class pK extends hK{constructor(t){super()}}const gK="^https?:",yK="^wss?:";function mK(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function EP(e,t){const r=mK(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function $E(e){return EP(e,gK)}function qE(e){return EP(e,yK)}function bK(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function _P(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function p0(e){return _P(e)&&"method"in e}function Eh(e){return _P(e)&&(Mn(e)||Xr(e))}function Mn(e){return"result"in e}function Xr(e){return"error"in e}let g0=class extends pK{constructor(e){super(e),this.events=new Sr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(_n(e.method,e.params||[],e.id||os().toString()),t)}async requestStrict(e,t){return new Promise(async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(i){n(i)}this.events.on(`${e.id}`,i=>{Xr(i)?n(i.error):r(i.result)});try{await this.connection.send(e,t)}catch(i){n(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Eh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const wK=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),vK=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",HE=e=>e.split("?")[0],VE=10,EK=wK();let _K=class{constructor(e){if(this.url=e,this.events=new Sr.EventEmitter,this.registering=!1,!qE(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(go(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!qE(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,n)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),n(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const n=vP.isReactNative()?void 0:{rejectUnauthorized:!bK(e)},i=new EK(e,[],n);vK()?i.onerror=s=>{const o=s;r(this.emitError(o.error))}:i.on("error",s=>{r(this.emitError(s))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?po(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=r.message||r.toString(),i=vh(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return wP(e,HE(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>VE&&this.events.setMaxListeners(VE)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${HE(this.url)}`));return this.events.emit("register_error",t),t}};var SK={};const SP="wc",xP=2,Gy="core",ei=`${SP}@2:${Gy}:`,xK={logger:"error"},IK={database:":memory:"},OK="crypto",KE="client_ed25519_seed",kK=Z.ONE_DAY,AK="keychain",PK="0.3",RK="messages",TK="0.3",CK=Z.SIX_HOURS,NK="publisher",IP="irn",UK="error",OP="wss://relay.walletconnect.org",BK="relayer",rt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},LK="_subscription",Vr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},DK=.1,Yy="2.23.6",ze={link_mode:"link_mode",relay:"relay"},kd={inbound:"inbound",outbound:"outbound"},jK="0.3",MK="WALLETCONNECT_CLIENT_ID",WE="WALLETCONNECT_LINK_MODE_APPS",Rr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},zK="subscription",FK="0.3",$K="pairing",qK="0.3",bc={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},Hs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},hn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},HK="history",VK="0.3",KK="expirer",Gr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},WK="0.3",GK="verify-api",YK="https://verify.walletconnect.com",kP="https://verify.walletconnect.org",Gc=kP,QK=`${Gc}/v3`,ZK=[YK,kP],XK="echo",JK="https://echo.walletconnect.com",Ln={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},li={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},pn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Cs={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Ns={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},wc={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},eW=.1,tW="event-client",rW=86400,nW="https://pulse.walletconnect.org/batch";function iW(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var g=0,v=0,b=0,w=y.length;b!==w&&y[b]===0;)b++,g++;for(var _=(w-b)*u+1>>>0,I=new Uint8Array(_);b!==w;){for(var R=y[b],T=0,C=_-1;(R!==0||T<v)&&C!==-1;C--,T++)R+=256*I[C]>>>0,I[C]=R%a>>>0,R=R/a>>>0;if(R!==0)throw new Error("Non-zero carry");v=T,b++}for(var L=_-v;L!==_&&I[L]===0;)L++;for(var N=c.repeat(g);L<_;++L)N+=e.charAt(I[L]);return N}function f(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var g=0;if(y[g]!==" "){for(var v=0,b=0;y[g]===c;)v++,g++;for(var w=(y.length-g)*l+1>>>0,_=new Uint8Array(w);y[g];){var I=r[y.charCodeAt(g)];if(I===255)return;for(var R=0,T=w-1;(I!==0||R<b)&&T!==-1;T--,R++)I+=a*_[T]>>>0,_[T]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");b=R,g++}if(y[g]!==" "){for(var C=w-b;C!==w&&_[C]===0;)C++;for(var L=new Uint8Array(v+(w-C)),N=v;C!==w;)L[N++]=_[C++];return L}}}function h(y){var g=f(y);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var sW=iW,oW=sW;const AP=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},aW=e=>new TextEncoder().encode(e),cW=e=>new TextDecoder().decode(e);class lW{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class uW{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return PP(this,t)}}class dW{constructor(t){this.decoders=t}or(t){return PP(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const PP=(e,t)=>new dW({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class fW{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new lW(t,r,n),this.decoder=new uW(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const _h=({name:e,prefix:t,encode:r,decode:n})=>new fW(e,t,r,n),Xl=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=oW(r,t);return _h({prefix:e,name:t,encode:n,decode:s=>AP(i(s))})},hW=(e,t,r,n)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},pW=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},zt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>_h({prefix:t,name:e,encode(i){return pW(i,n,r)},decode(i){return hW(i,n,r,e)}}),gW=_h({prefix:"\0",name:"identity",encode:e=>cW(e),decode:e=>aW(e)});var yW=Object.freeze({__proto__:null,identity:gW});const mW=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bW=Object.freeze({__proto__:null,base2:mW});const wW=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var vW=Object.freeze({__proto__:null,base8:wW});const EW=Xl({prefix:"9",name:"base10",alphabet:"0123456789"});var _W=Object.freeze({__proto__:null,base10:EW});const SW=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xW=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var IW=Object.freeze({__proto__:null,base16:SW,base16upper:xW});const OW=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kW=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AW=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PW=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),RW=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),TW=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),CW=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),NW=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UW=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var BW=Object.freeze({__proto__:null,base32:OW,base32upper:kW,base32pad:AW,base32padupper:PW,base32hex:RW,base32hexupper:TW,base32hexpad:CW,base32hexpadupper:NW,base32z:UW});const LW=Xl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),DW=Xl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jW=Object.freeze({__proto__:null,base36:LW,base36upper:DW});const MW=Xl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zW=Xl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var FW=Object.freeze({__proto__:null,base58btc:MW,base58flickr:zW});const $W=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qW=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),HW=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),VW=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var KW=Object.freeze({__proto__:null,base64:$W,base64pad:qW,base64url:HW,base64urlpad:VW});const RP=Array.from(""),WW=RP.reduce((e,t,r)=>(e[r]=t,e),[]),GW=RP.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function YW(e){return e.reduce((t,r)=>(t+=WW[r],t),"")}function QW(e){const t=[];for(const r of e){const n=GW[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const ZW=_h({prefix:"",name:"base256emoji",encode:YW,decode:QW});var XW=Object.freeze({__proto__:null,base256emoji:ZW}),JW=TP,GE=128,eG=-128,tG=Math.pow(2,31);function TP(e,t,r){t=t||[],r=r||0;for(var n=r;e>=tG;)t[r++]=e&255|GE,e/=128;for(;e&eG;)t[r++]=e&255|GE,e>>>=7;return t[r]=e|0,TP.bytes=r-n+1,t}var rG=Qy,nG=128,YE=127;function Qy(e,n){var r=0,n=n||0,i=0,s=n,o,a=e.length;do{if(s>=a)throw Qy.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=i<28?(o&YE)<<i:(o&YE)*Math.pow(2,i),i+=7}while(o>=nG);return Qy.bytes=s-n,r}var iG=Math.pow(2,7),sG=Math.pow(2,14),oG=Math.pow(2,21),aG=Math.pow(2,28),cG=Math.pow(2,35),lG=Math.pow(2,42),uG=Math.pow(2,49),dG=Math.pow(2,56),fG=Math.pow(2,63),hG=function(e){return e<iG?1:e<sG?2:e<oG?3:e<aG?4:e<cG?5:e<lG?6:e<uG?7:e<dG?8:e<fG?9:10},pG={encode:JW,decode:rG,encodingLength:hG},CP=pG;const QE=(e,t,r=0)=>(CP.encode(e,t,r),t),ZE=e=>CP.encodingLength(e),Zy=(e,t)=>{const r=t.byteLength,n=ZE(e),i=n+ZE(r),s=new Uint8Array(i+r);return QE(e,s,0),QE(r,s,n),s.set(t,i),new gG(e,r,t,s)};class gG{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}const NP=({name:e,code:t,encode:r})=>new yG(e,t,r);class yG{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Zy(this.code,r):r.then(n=>Zy(this.code,n))}else throw Error("Unknown type, must be binary type")}}const UP=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),mG=NP({name:"sha2-256",code:18,encode:UP("SHA-256")}),bG=NP({name:"sha2-512",code:19,encode:UP("SHA-512")});var wG=Object.freeze({__proto__:null,sha256:mG,sha512:bG});const BP=0,vG="identity",LP=AP,EG=e=>Zy(BP,LP(e)),_G={code:BP,name:vG,encode:LP,digest:EG};var SG=Object.freeze({__proto__:null,identity:_G});new TextEncoder,new TextDecoder;const XE={...yW,...bW,...vW,..._W,...IW,...BW,...jW,...FW,...KW,...XW};({...wG,...SG});function DP(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function xG(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?DP(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function jP(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const JE=jP("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),qp=jP("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=xG(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),IG={utf8:JE,"utf-8":JE,hex:XE.base16,latin1:qp,ascii:qp,binary:qp,...XE};function OG(e,t="utf8"){const r=IG[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?DP(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}var kG=Object.defineProperty,AG=(e,t,r)=>t in e?kG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nn=(e,t,r)=>AG(e,typeof t!="symbol"?t+"":t,r);class PG{constructor(t,r){this.core=t,this.logger=r,Nn(this,"keychain",new Map),Nn(this,"name",AK),Nn(this,"version",PK),Nn(this,"initialized",!1),Nn(this,"storagePrefix",ei),Nn(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Nn(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Nn(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),Nn(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=J("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),Nn(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=t,this.logger=qr(r,this.name)}get context(){return Or(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Ry(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Ty(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var RG=Object.defineProperty,TG=(e,t,r)=>t in e?RG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wt=(e,t,r)=>TG(e,typeof t!="symbol"?t+"":t,r);class CG{constructor(t,r,n){this.core=t,this.logger=r,wt(this,"name",OK),wt(this,"keychain"),wt(this,"randomSessionIdentifier",$y()),wt(this,"initialized",!1),wt(this,"clientId"),wt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),wt(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),wt(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const i=await this.getClientSeed(),s=v1(i),o=Rk(s.publicKey);return this.clientId=o,o}),wt(this,"generateKeyPair",()=>{this.isInitialized();const i=Aq();return this.setPrivateKey(i.publicKey,i.privateKey)}),wt(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=v1(s),a=this.randomSessionIdentifier;return await SM(a,i,kK,o)}),wt(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Pq(a,s);return this.setSymKey(c,o)}),wt(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||_d(i);return await this.keychain.set(o,i),o}),wt(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),wt(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),wt(this,"encode",async(i,s,o)=>{this.isInitialized();const a=tP(o),c=go(s);if(hE(a))return Cq(c,o==null?void 0:o.encoding);if(fE(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;i=await this.generateSharedKey(f,h)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return Rq({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),wt(this,"decode",async(i,s,o)=>{this.isInitialized();const a=Uq(s,o);if(hE(a)){const c=Nq(s,o==null?void 0:o.encoding);return po(c)}if(fE(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Tq({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return po(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),wt(this,"getPayloadType",(i,s=pr)=>{const o=Il({encoded:i,encoding:s});return mo(o.type)}),wt(this,"getPayloadSenderPublicKey",(i,s=pr)=>{const o=Il({encoded:i,encoding:s});return o.senderPublicKey?_r(o.senderPublicKey,ir):void 0}),this.core=t,this.logger=qr(r,this.name),this.keychain=n||new PG(this.core,this.logger)}get context(){return Or(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(KE)}catch{t=$y(),await this.keychain.set(KE,t)}return OG(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var NG=Object.defineProperty,UG=Object.defineProperties,BG=Object.getOwnPropertyDescriptors,e2=Object.getOwnPropertySymbols,LG=Object.prototype.hasOwnProperty,DG=Object.prototype.propertyIsEnumerable,Xy=(e,t,r)=>t in e?NG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jG=(e,t)=>{for(var r in t||(t={}))LG.call(t,r)&&Xy(e,r,t[r]);if(e2)for(var r of e2(t))DG.call(t,r)&&Xy(e,r,t[r]);return e},MG=(e,t)=>UG(e,BG(t)),Ar=(e,t,r)=>Xy(e,typeof t!="symbol"?t+"":t,r);class zG extends qV{constructor(t,r){super(t,r),this.logger=t,this.core=r,Ar(this,"messages",new Map),Ar(this,"messagesWithoutClientAck",new Map),Ar(this,"name",RK),Ar(this,"version",TK),Ar(this,"initialized",!1),Ar(this,"storagePrefix",ei),Ar(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Ar(this,"set",async(n,i,s)=>{this.isInitialized();const o=Zr(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===kd.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,MG(jG({},c),{[o]:i}))}return await this.persist(),o}),Ar(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),Ar(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Ar(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=Zr(i);return typeof s[o]<"u"}),Ar(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=Zr(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),Ar(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=qr(t,this.name),this.core=r}get context(){return Or(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Ry(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Ry(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Ty(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?Ty(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var FG=Object.defineProperty,$G=Object.defineProperties,qG=Object.getOwnPropertyDescriptors,t2=Object.getOwnPropertySymbols,HG=Object.prototype.hasOwnProperty,VG=Object.prototype.propertyIsEnumerable,Jy=(e,t,r)=>t in e?FG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zo=(e,t)=>{for(var r in t||(t={}))HG.call(t,r)&&Jy(e,r,t[r]);if(t2)for(var r of t2(t))VG.call(t,r)&&Jy(e,r,t[r]);return e},r2=(e,t)=>$G(e,qG(t)),Kr=(e,t,r)=>Jy(e,typeof t!="symbol"?t+"":t,r);class KG extends HV{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,Kr(this,"events",new Sr.EventEmitter),Kr(this,"name",NK),Kr(this,"queue",new Map),Kr(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Kr(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Kr(this,"needsTransportRestart",!1),Kr(this,"publish",async(n,i,s)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const d=(s==null?void 0:s.ttl)||CK,f=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,y=(s==null?void 0:s.id)||os().toString(),g=sa(wf().protocol),v={id:y,method:(s==null?void 0:s.publishMethod)||g.publish,params:zo({topic:n,message:i,ttl:d,prompt:f,tag:h,attestation:s==null?void 0:s.attestation},s==null?void 0:s.tvf)},b=`Failed to publish payload, please try again. id:${y} tag:${h}`;try{xt((o=v.params)==null?void 0:o.prompt)&&((a=v.params)==null||delete a.prompt),xt((c=v.params)==null?void 0:c.tag)&&((l=v.params)==null||delete l.tag);const w=new Promise(async _=>{const I=({id:T})=>{var C;((C=v.id)==null?void 0:C.toString())===T.toString()&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(rt.publish,I),_())};this.relayer.events.on(rt.publish,I);const R=Kn(new Promise((T,C)=>{this.rpcPublish(v,s).then(T).catch(L=>{this.logger.warn(L,L==null?void 0:L.message),C(L)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${y} tag:${h}`);try{await R,this.events.removeListener(rt.publish,I)}catch(T){this.queue.set(y,{request:v,opts:s,attempt:1}),this.logger.warn(T,T==null?void 0:T.message)}});this.logger.trace({type:"method",method:"publish",params:{id:y,topic:n,message:i,opts:s}}),await Kn(w,this.publishTimeout,b)}catch(w){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(w),(u=s==null?void 0:s.internal)!=null&&u.throwOnFailedPublish)throw w}finally{this.queue.delete(y)}}),Kr(this,"publishCustom",async n=>{var i,s,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:l,opts:u={}}=n,{attestation:d,tvf:f,publishMethod:h,prompt:y,tag:g,ttl:v=Z.FIVE_MINUTES}=u,b=u.id||os().toString(),w=sa(wf().protocol),_=h||w.publish,I={id:b,method:_,params:zo(r2(zo({},l),{ttl:v,prompt:y,tag:g,attestation:d}),f)},R=`Failed to publish custom payload, please try again. id:${b} tag:${g}`;try{xt((i=I.params)==null?void 0:i.prompt)&&((s=I.params)==null||delete s.prompt),xt((o=I.params)==null?void 0:o.tag)&&((a=I.params)==null||delete a.tag);const T=new Promise(async C=>{const L=({id:F})=>{var q;((q=I.id)==null?void 0:q.toString())===F.toString()&&(this.removeRequestFromQueue(F),this.relayer.events.removeListener(rt.publish,L),C())};this.relayer.events.on(rt.publish,L);const N=Kn(new Promise((F,q)=>{this.rpcPublish(I,u).then(F).catch(j=>{this.logger.warn(j,j==null?void 0:j.message),q(j)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${_} id:${b} tag:${g}`);try{await N,this.events.removeListener(rt.publish,L)}catch(F){this.queue.set(b,{request:I,opts:u,attempt:1}),this.logger.warn(F,F==null?void 0:F.message)}});this.logger.trace({type:"method",method:"publish",params:{id:b,payload:l,opts:u}}),await Kn(T,this.publishTimeout,R)}catch(T){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(T),(c=u==null?void 0:u.internal)!=null&&c.throwOnFailedPublish)throw T}finally{this.queue.delete(b)}}),Kr(this,"on",(n,i)=>{this.events.on(n,i)}),Kr(this,"once",(n,i)=>{this.events.once(n,i)}),Kr(this,"off",(n,i)=>{this.events.off(n,i)}),Kr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=t,this.logger=qr(r,this.name),this.registerEventListeners()}get context(){return Or(this.logger)}async rpcPublish(t,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:t});const n=await this.relayer.request(t);return this.relayer.events.emit(rt.publish,zo(zo({},t),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,r)=>{var n;const i=t.attempt+1;this.queue.set(r,r2(zo({},t),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${t.request.id}, tag: ${(n=t.request.params)==null?void 0:n.tag}, attempt: ${i}`),await this.rpcPublish(t.request,t.opts),this.logger.warn({},`Publisher: queue->published: ${t.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(xo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(rt.connection_stalled);return}this.checkQueue()}),this.relayer.on(rt.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var WG=Object.defineProperty,GG=(e,t,r)=>t in e?WG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fo=(e,t,r)=>GG(e,typeof t!="symbol"?t+"":t,r);class YG{constructor(){Fo(this,"map",new Map),Fo(this,"set",(t,r)=>{const n=this.get(t);this.exists(t,r)||this.map.set(t,[...n,r])}),Fo(this,"get",t=>this.map.get(t)||[]),Fo(this,"exists",(t,r)=>this.get(t).includes(r)),Fo(this,"delete",(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const n=this.get(t);if(!this.exists(t,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(t);return}this.map.set(t,i)}),Fo(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var QG=Object.defineProperty,ZG=Object.defineProperties,XG=Object.getOwnPropertyDescriptors,n2=Object.getOwnPropertySymbols,JG=Object.prototype.hasOwnProperty,eY=Object.prototype.propertyIsEnumerable,em=(e,t,r)=>t in e?QG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vc=(e,t)=>{for(var r in t||(t={}))JG.call(t,r)&&em(e,r,t[r]);if(n2)for(var r of n2(t))eY.call(t,r)&&em(e,r,t[r]);return e},Hp=(e,t)=>ZG(e,XG(t)),Ae=(e,t,r)=>em(e,typeof t!="symbol"?t+"":t,r);class tY extends WV{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,Ae(this,"subscriptions",new Map),Ae(this,"topicMap",new YG),Ae(this,"events",new Sr.EventEmitter),Ae(this,"name",zK),Ae(this,"version",FK),Ae(this,"pending",new Map),Ae(this,"cached",[]),Ae(this,"initialized",!1),Ae(this,"storagePrefix",ei),Ae(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Ae(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Ae(this,"clientId"),Ae(this,"batchSubscribeTopicsLimit",500),Ae(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ae(this,"subscribe",async(n,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=wf(i),a={topic:n,relay:o,transportType:i==null?void 0:i.transportType};(s=i==null?void 0:i.internal)!=null&&s.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,i);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Ae(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),Ae(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),Ae(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),Ae(this,"on",(n,i)=>{this.events.on(n,i)}),Ae(this,"once",(n,i)=>{this.events.once(n,i)}),Ae(this,"off",(n,i)=>{this.events.off(n,i)}),Ae(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),Ae(this,"start",async()=>{await this.onConnect()}),Ae(this,"stop",async()=>{await this.onDisconnect()}),Ae(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ae(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),Ae(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(xo.pulse,async()=>{await this.checkPending()}),this.events.on(Rr.created,async n=>{const i=Rr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Rr.deleted,async n=>{const i=Rr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=t,this.logger=qr(r,this.name),this.clientId=""}get context(){return Or(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,r){let n=!1;try{n=this.getSubscription(t).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const n=this.topicMap.get(t);await Promise.all(n.map(async i=>await this.unsubscribeById(t,i,r)))}async unsubscribeById(t,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}});try{const i=wf(n);await this.restartToComplete({topic:t,id:r,relay:i}),await this.rpcUnsubscribe(t,r,i);const s=Ve("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,r,n){var i,s;const o=await this.getSubscriptionId(t);if((i=n==null?void 0:n.internal)!=null&&i.skipSubscribe)return o;(!n||(n==null?void 0:n.transportType)===ze.relay)&&await this.restartToComplete({topic:t,id:t,relay:r});const a={method:sa(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{if((n==null?void 0:n.transportType)===ze.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Z.toMiliseconds(Z.ONE_SECOND)),o;const l=new Promise(async d=>{const f=h=>{h.topic===t&&(this.events.removeListener(Rr.created,f),d(h.id))};this.events.on(Rr.created,f);try{const h=await Kn(new Promise((y,g)=>{this.relayer.request(a).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),g(v)}).then(y)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(Rr.created,f),d(h)}catch{}}),u=await Kn(l,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${t} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(rt.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(t){if(!t.length)return!0;const r=t[0].relay,n={method:sa(r.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await Kn(new Promise((i,s)=>{this.relayer.request(n).then(i).catch(o=>{this.logger.warn(o),s(o)})}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again"),!0}catch{return this.relayer.events.emit(rt.connection_stalled),!1}}async rpcBatchFetchMessages(t){if(!t.length)return;const r=t[0].relay,n={method:sa(r.protocol).batchFetchMessages,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Kn(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(rt.connection_stalled)}return i}rpcUnsubscribe(t,r,n){const i={method:sa(n.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,r){this.setSubscription(t,Hp(vc({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,vc({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,n),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r)}addSubscription(t,r){this.subscriptions.set(t,vc({},r)),this.topicMap.set(r.topic,t),this.events.emit(Rr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const n=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(n.topic,t),this.events.emit(Rr.deleted,Hp(vc({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Rr.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Rr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size&&!t.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(t.length){if(!await this.rpcBatchSubscribe(t)){this.logger.warn(`Batch subscribe failed for ${t.length} topics, adding to pending for retry`),t.forEach(r=>{this.pending.set(r.topic,r)});return}this.onBatchSubscribe(await Promise.all(t.map(async r=>Hp(vc({},r),{id:await this.getSubscriptionId(r.topic)}))))}}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const r=await this.rpcBatchFetchMessages(t);r&&r.messages&&(await Gz(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return Zr(t+await this.getClientId())}}var rY=Object.defineProperty,i2=Object.getOwnPropertySymbols,nY=Object.prototype.hasOwnProperty,iY=Object.prototype.propertyIsEnumerable,tm=(e,t,r)=>t in e?rY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s2=(e,t)=>{for(var r in t||(t={}))nY.call(t,r)&&tm(e,r,t[r]);if(i2)for(var r of i2(t))iY.call(t,r)&&tm(e,r,t[r]);return e},he=(e,t,r)=>tm(e,typeof t!="symbol"?t+"":t,r);class sY extends VV{constructor(t){var r;super(t),he(this,"protocol","wc"),he(this,"version",2),he(this,"core"),he(this,"logger"),he(this,"events",new Sr.EventEmitter),he(this,"provider"),he(this,"messages"),he(this,"subscriber"),he(this,"publisher"),he(this,"name",BK),he(this,"transportExplicitlyClosed",!1),he(this,"initialized",!1),he(this,"connectionAttemptInProgress",!1),he(this,"relayUrl"),he(this,"projectId"),he(this,"packageName"),he(this,"bundleId"),he(this,"hasExperiencedNetworkDisruption",!1),he(this,"pingTimeout"),he(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),he(this,"reconnectTimeout"),he(this,"connectPromise"),he(this,"reconnectInProgress",!1),he(this,"requestsInFlight",[]),he(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),he(this,"stalledRestartInProgress",!1),he(this,"stalledRestartTimeout"),he(this,"stalledRestartBackoff",0),he(this,"stalledRestartBaseInterval",Z.toMiliseconds(Z.ONE_SECOND*2)),he(this,"stalledRestartMaxInterval",Z.toMiliseconds(Z.THIRTY_SECONDS)),he(this,"request",async n=>{var i,s;this.logger.debug("Publishing Request Payload");const o=n.id||os().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:n.method,topic:(i=n.params)==null?void 0:i.topic},"relayer.request - publishing...");const a=`${o}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(l=>l!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),he(this,"resetPingTimeout",()=>{hf()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,i,s,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null?void 0:s.terminate)==null||o.call(s)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),he(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),he(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(rt.connect)}),he(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),he(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(rt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportExplicitlyClosed=!0,clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0,this.reconnectInProgress=!1,this.transportClose().catch(i=>this.logger.warn(i))}),he(this,"registerProviderListeners",()=>{this.provider.on(Vr.payload,this.onPayloadHandler),this.provider.on(Vr.connect,this.onConnectHandler),this.provider.on(Vr.disconnect,this.onDisconnectHandler),this.provider.on(Vr.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=c0({logger:(r=t.logger)!=null?r:UK,name:this.name}),this.messages=new zG(this.logger,t.core),this.subscriber=new tY(this,this.logger),this.publisher=new KG(this,this.logger),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||OP,Cz()?this.packageName=U1():Nz()&&(this.bundleId=U1()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t==null?void 0:t.message))}get context(){return Or(this.logger)}get connected(){var t,r,n;return((n=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var t,r,n;return((n=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,r,n){this.isInitialized(),await this.publisher.publish(t,r,n),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now(),transportType:ze.relay},kd.outbound)}async publishCustom(t){this.isInitialized(),await this.publisher.publishCustom(t)}async subscribe(t,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"",c;const l=u=>{u.topic===t&&(this.subscriber.off(Rr.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Rr.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(t,s2({internal:{throwOnFailedPublish:o}},r)).catch(f=>{o&&d(f)})||a,u()})]),a}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Kn(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,clearTimeout(this.stalledRestartTimeout),this.stalledRestartInProgress=!1,this.stalledRestartBackoff=0,await this.resetTransport()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(t).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.resetTransport(),await this.transportOpen())}async resetTransport(){this.reconnectInProgress=!0,clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0,await this.transportDisconnect(),await this.subscriber.stop(),this.reconnectInProgress=!1}async confirmOnlineStateOrThrow(){if(!await OE())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=t.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(t,r){const{topic:n}=t;if(!r.sessionExists){const i=at(Z.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(rt.message,t),await this.recordMessageEvent(t,kd.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(Vr.disconnect,s),await Kn(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Vr.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Vr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Vr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,Z.toMiliseconds(r*1))),r++}}startPingTimeout(){var t,r,n,i,s;if(hf())try{(r=(t=this.provider)==null?void 0:t.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new g0(new _K(jz({sdkVersion:Yy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,r){const{topic:n,message:i}=t;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(t){const{topic:r,message:n}=t;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),p0(t)){if(!t.method.endsWith(LK))return;const r=t.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:ze.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(s2({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(t),await this.onMessageEvent(a)}else Eh(t)&&this.events.emit(rt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,kd.inbound),this.events.emit(rt.message,t))}async acknowledgePayload(t){const r=Ol(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Vr.payload,this.onPayloadHandler),this.provider.off(Vr.connect,this.onConnectHandler),this.provider.off(Vr.disconnect,this.onDisconnectHandler),this.provider.off(Vr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await OE();UH(async r=>{t!==r&&(t=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(xo.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&DH())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r==null?void 0:r.message)}}),this.events.on(rt.connection_stalled,()=>{if(this.transportExplicitlyClosed||this.stalledRestartInProgress)return;this.stalledRestartInProgress=!0;const r=this.stalledRestartBackoff===0?0:Math.min(Math.pow(2,this.stalledRestartBackoff-1)*this.stalledRestartBaseInterval,this.stalledRestartMaxInterval);this.stalledRestartBackoff++,this.logger.warn(`Connection stalled, restarting transport${r?` in ${r}ms`:""}...`),this.stalledRestartTimeout=setTimeout(async()=>{try{if(this.transportExplicitlyClosed)return;await this.restartTransport()}catch(n){this.logger.error(n,n==null?void 0:n.message)}finally{this.stalledRestartInProgress=!1}},r)})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(rt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t==null?void 0:t.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds(DK)))))}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function oY(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function o2(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function a2(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const aY="[object RegExp]",cY="[object String]",lY="[object Number]",uY="[object Boolean]",c2="[object Arguments]",dY="[object Symbol]",fY="[object Date]",hY="[object Map]",pY="[object Set]",gY="[object Array]",yY="[object Function]",mY="[object ArrayBuffer]",Vp="[object Object]",bY="[object Error]",wY="[object DataView]",vY="[object Uint8Array]",EY="[object Uint8ClampedArray]",_Y="[object Uint16Array]",SY="[object Uint32Array]",xY="[object BigUint64Array]",IY="[object Int8Array]",OY="[object Int16Array]",kY="[object Int32Array]",AY="[object BigInt64Array]",PY="[object Float32Array]",RY="[object Float64Array]";function l2(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function TY(e,t,r){return Cc(e,t,void 0,void 0,void 0,void 0,r)}function Cc(e,t,r,n,i,s,o){const a=o(e,t,r,n,i,s);if(a!==void 0)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return Yc(e,t,s,o)}return Yc(e,t,s,o)}function Yc(e,t,r,n){if(Object.is(e,t))return!0;let i=a2(e),s=a2(t);if(i===c2&&(i=Vp),s===c2&&(s=Vp),i!==s)return!1;switch(i){case cY:return e.toString()===t.toString();case lY:{const c=e.valueOf(),l=t.valueOf();return oY(c,l)}case uY:case fY:case dY:return Object.is(e.valueOf(),t.valueOf());case aY:return e.source===t.source&&e.flags===t.flags;case yY:return e===t}r=r??new Map;const o=r.get(e),a=r.get(t);if(o!=null&&a!=null)return o===t;r.set(e,t),r.set(t,e);try{switch(i){case hY:{if(e.size!==t.size)return!1;for(const[c,l]of e.entries())if(!t.has(c)||!Cc(l,t.get(c),c,e,t,r,n))return!1;return!0}case pY:{if(e.size!==t.size)return!1;const c=Array.from(e.values()),l=Array.from(t.values());for(let u=0;u<c.length;u++){const d=c[u],f=l.findIndex(h=>Cc(d,h,void 0,e,t,r,n));if(f===-1)return!1;l.splice(f,1)}return!0}case gY:case vY:case EY:case _Y:case SY:case xY:case IY:case OY:case kY:case AY:case PY:case RY:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let c=0;c<e.length;c++)if(!Cc(e[c],t[c],c,e,t,r,n))return!1;return!0}case mY:return e.byteLength!==t.byteLength?!1:Yc(new Uint8Array(e),new Uint8Array(t),r,n);case wY:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:Yc(new Uint8Array(e),new Uint8Array(t),r,n);case bY:return e.name===t.name&&e.message===t.message;case Vp:{if(!(Yc(e.constructor,t.constructor,r,n)||l2(e)&&l2(t)))return!1;const c=[...Object.keys(e),...o2(e)],l=[...Object.keys(t),...o2(t)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],f=e[d];if(!Object.hasOwn(t,d))return!1;const h=t[d];if(!Cc(f,h,d,e,t,r,n))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}function CY(){}function NY(e,t){return TY(e,t,CY)}var UY=Object.defineProperty,u2=Object.getOwnPropertySymbols,BY=Object.prototype.hasOwnProperty,LY=Object.prototype.propertyIsEnumerable,rm=(e,t,r)=>t in e?UY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d2=(e,t)=>{for(var r in t||(t={}))BY.call(t,r)&&rm(e,r,t[r]);if(u2)for(var r of u2(t))LY.call(t,r)&&rm(e,r,t[r]);return e},lr=(e,t,r)=>rm(e,typeof t!="symbol"?t+"":t,r);class Oo extends KV{constructor(t,r,n,i=ei,s=void 0){super(t,r,n,i),this.core=t,this.logger=r,this.name=n,lr(this,"map",new Map),lr(this,"version",jK),lr(this,"cached",[]),lr(this,"initialized",!1),lr(this,"getKey"),lr(this,"storagePrefix",ei),lr(this,"recentlyDeleted",[]),lr(this,"recentlyDeletedLimit",200),lr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!xt(o)?this.map.set(this.getKey(o),o):dH(o)?this.map.set(o.id,o):fH(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),lr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),lr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),lr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>NY(a[c],o[c]))):this.values)),lr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=d2(d2({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),lr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=qr(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Or(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){if(this.recentlyDeleted.includes(t)){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var DY=Object.defineProperty,jY=(e,t,r)=>t in e?DY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ge=(e,t,r)=>jY(e,typeof t!="symbol"?t+"":t,r);class MY{constructor(t,r){this.core=t,this.logger=r,ge(this,"name",$K),ge(this,"version",qK),ge(this,"events",new Hf),ge(this,"pairings"),ge(this,"initialized",!1),ge(this,"storagePrefix",ei),ge(this,"ignoredPayloadTypes",[xi]),ge(this,"registeredMethods",[]),ge(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ge(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),ge(this,"create",async n=>{this.isInitialized();const i=$y(),s=await this.core.crypto.setSymKey(i),o=at(Z.FIVE_MINUTES),a={protocol:IP},c={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=mE({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Hs.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType,internal:n==null?void 0:n.internal}),{topic:s,uri:l}}),ge(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Ln.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=yE(n.uri);i.props.properties.topic=s,i.addTrace(Ln.pairing_uri_validation_success),i.addTrace(Ln.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Ln.existing_pairing),u.active)throw i.setError(li.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Ln.pairing_not_expired)}const d=c||at(Z.FIVE_MINUTES),f={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,f),i.addTrace(Ln.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Hs.create,f),i.addTrace(Ln.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Ln.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(li.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(h){throw i.setError(li.subscribe_pairing_topic_failure),h}return i.addTrace(Ln.subscribe_pairing_topic_success),f}),ge(this,"activate",async({topic:n})=>{this.isInitialized();const i=at(Z.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),ge(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Fs();this.events.once(Se("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),ge(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),ge(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),ge(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ge(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ve("USER_DISCONNECTED")),await this.deletePairing(i))}),ge(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return mE({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),ge(this,"sendRequest",async(n,i,s)=>{const o=_n(i,s),a=await this.core.crypto.encode(n,o),c=bc[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),ge(this,"sendResult",async(n,i,s)=>{const o=Ol(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=bc[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ge(this,"sendError",async(n,i,s)=>{const o=vh(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=bc[c]?bc[c].res:bc.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ge(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Ve("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),ge(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Fn(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),ge(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),ge(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),ge(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Hs.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),ge(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Mn(i)?this.events.emit(Se("pairing_ping",s),{}):Xr(i)&&this.events.emit(Se("pairing_ping",s),{error:i.error})},500)}),ge(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Hs.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),ge(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Ve("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),ge(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Ve("WC_METHOD_UNSUPPORTED",n))}),ge(this,"isValidPair",(n,i)=>{var s;if(!dr(n)){const{message:a}=J("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(li.malformed_pairing_uri),new Error(a)}if(!uH(n.uri)){const{message:a}=J("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(li.malformed_pairing_uri),new Error(a)}const o=yE(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(li.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(li.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(li.pairing_expired);const{message:a}=J("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ge(this,"isValidPing",async n=>{if(!dr(n)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),ge(this,"isValidDisconnect",async n=>{if(!dr(n)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),ge(this,"isValidPairingTopic",async n=>{if(!ct(n,!1)){const{message:i}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Fn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=J("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=t,this.logger=qr(r,this.name),this.pairings=new Oo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Or(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(rt.message,async t=>{const{topic:r,message:n,transportType:i}=t;if(this.pairings.keys.includes(r)&&i!==ze.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);p0(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):Eh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Gr.expired,async t=>{const{topic:r}=nA(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Hs.expire,{topic:r}))})}}var zY=Object.defineProperty,FY=(e,t,r)=>t in e?zY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rt=(e,t,r)=>FY(e,typeof t!="symbol"?t+"":t,r);class $Y extends $V{constructor(t,r){super(t,r),this.core=t,this.logger=r,Rt(this,"records",new Map),Rt(this,"events",new Sr.EventEmitter),Rt(this,"name",HK),Rt(this,"version",VK),Rt(this,"cached",[]),Rt(this,"initialized",!1),Rt(this,"storagePrefix",ei),Rt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Rt(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:at(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(hn.created,o)}),Rt(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Xr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(hn.updated,i))}),Rt(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),Rt(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(hn.deleted,s)}}),this.persist()}),Rt(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),Rt(this,"on",(n,i)=>{this.events.on(n,i)}),Rt(this,"once",(n,i)=>{this.events.once(n,i)}),Rt(this,"off",(n,i)=>{this.events.off(n,i)}),Rt(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=qr(r,this.name)}get context(){return Or(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:_n(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(n)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(hn.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(hn.created,t=>{const r=hn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.events.on(hn.updated,t=>{const r=hn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.events.on(hn.deleted,t=>{const r=hn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.core.heartbeat.on(xo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(r=>{Z.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(hn.deleted,r,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var qY=Object.defineProperty,HY=(e,t,r)=>t in e?qY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gt=(e,t,r)=>HY(e,typeof t!="symbol"?t+"":t,r);class VY extends GV{constructor(t,r){super(t,r),this.core=t,this.logger=r,Gt(this,"expirations",new Map),Gt(this,"events",new Sr.EventEmitter),Gt(this,"name",KK),Gt(this,"version",WK),Gt(this,"cached",[]),Gt(this,"initialized",!1),Gt(this,"storagePrefix",ei),Gt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Gt(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Gt(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Gr.created,{target:s,expiration:o})}),Gt(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Gt(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Gr.deleted,{target:i,expiration:s})}}),Gt(this,"on",(n,i)=>{this.events.on(n,i)}),Gt(this,"once",(n,i)=>{this.events.once(n,i)}),Gt(this,"off",(n,i)=>{this.events.off(n,i)}),Gt(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=qr(r,this.name)}get context(){return Or(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Mz(t);if(typeof t=="number")return zz(t);const{message:r}=J("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Gr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(t,r){const{expiry:n}=r;Z.toMiliseconds(n)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Gr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(xo.pulse,()=>this.checkExpirations()),this.events.on(Gr.created,t=>{const r=Gr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Gr.expired,t=>{const r=Gr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Gr.deleted,t=>{const r=Gr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var KY=Object.defineProperty,WY=(e,t,r)=>t in e?KY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ot=(e,t,r)=>WY(e,typeof t!="symbol"?t+"":t,r);class GY extends YV{constructor(t,r,n){super(t,r,n),this.core=t,this.logger=r,this.store=n,ot(this,"name",GK),ot(this,"abortController"),ot(this,"isDevEnv"),ot(this,"verifyUrlV3",QK),ot(this,"storagePrefix",ei),ot(this,"version",xP),ot(this,"publicKey"),ot(this,"fetchPromise"),ot(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ot(this,"register",async i=>{if(!Wa()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=fo(),u=this.startAbortTimer(Z.ONE_SECOND*5),d=await new Promise((f,h)=>{const y=()=>{window.removeEventListener("message",v),l.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",y);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",y,{signal:this.abortController.signal});const v=b=>{if(b.data&&typeof b.data=="string")try{const w=JSON.parse(b.data);if(w.type==="verify_attestation"){if(Oy(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",y),window.removeEventListener("message",v),f(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(l){this.logger.warn(l)}return""}),ot(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Oy(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),ot(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ot(this,"getVerifyUrl",i=>{let s=i||Gc;return ZK.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Gc}`),s=Gc),s}),ot(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),ot(this,"persistPublicKey",async i=>{this.logger.debug(i,"persisting public key to local storage"),await this.store.setItem(this.storeKey,i),this.publicKey=i}),ot(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ot(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ot(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ot(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),ot(this,"validateAttestation",(i,s)=>{const o=Lq(i,s.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=qr(r,this.name),this.abortController=new AbortController,this.isDevEnv=Zb(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Or(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(t))}}var YY=Object.defineProperty,QY=(e,t,r)=>t in e?YY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f2=(e,t,r)=>QY(e,typeof t!="symbol"?t+"":t,r);class ZY extends QV{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,f2(this,"context",XK),f2(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${JK}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=qr(r,this.context)}}var XY=Object.defineProperty,h2=Object.getOwnPropertySymbols,JY=Object.prototype.hasOwnProperty,eQ=Object.prototype.propertyIsEnumerable,nm=(e,t,r)=>t in e?XY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ec=(e,t)=>{for(var r in t||(t={}))JY.call(t,r)&&nm(e,r,t[r]);if(h2)for(var r of h2(t))eQ.call(t,r)&&nm(e,r,t[r]);return e},vt=(e,t,r)=>nm(e,typeof t!="symbol"?t+"":t,r);class tQ extends ZV{constructor(t,r,n=!0){super(t,r,n),this.core=t,this.logger=r,vt(this,"context",tW),vt(this,"storagePrefix",ei),vt(this,"storageVersion",eW),vt(this,"events",new Map),vt(this,"shouldPersist",!1),vt(this,"init",async()=>{if(!Zb())try{const i={eventId:L1(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:tA(this.core.relayer.protocol,this.core.relayer.version,Yy)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),vt(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=L1(),u=this.core.projectId||"",d=Date.now(),f=Ec({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,f),this.shouldPersist=!0),f}),vt(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Ec(Ec({},a),this.setMethods(a.eventId))}),vt(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),vt(this,"setEventListeners",()=>{this.core.heartbeat.on(xo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(i.timestamp)>rW&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),vt(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),vt(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),vt(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),vt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),vt(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Ec(Ec({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),vt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),vt(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${nW}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Yy}${s}`,{method:"POST",body:JSON.stringify(i)})}),vt(this,"getAppDomain",()=>eA().url),this.logger=qr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var rQ=Object.defineProperty,p2=Object.getOwnPropertySymbols,nQ=Object.prototype.hasOwnProperty,iQ=Object.prototype.propertyIsEnumerable,im=(e,t,r)=>t in e?rQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g2=(e,t)=>{for(var r in t||(t={}))nQ.call(t,r)&&im(e,r,t[r]);if(p2)for(var r of p2(t))iQ.call(t,r)&&im(e,r,t[r]);return e},Ne=(e,t,r)=>im(e,typeof t!="symbol"?t+"":t,r);let sQ=class MP extends jV{constructor(t){var r;super(t),Ne(this,"protocol",SP),Ne(this,"version",xP),Ne(this,"name",Gy),Ne(this,"relayUrl"),Ne(this,"projectId"),Ne(this,"customStoragePrefix"),Ne(this,"events",new Sr.EventEmitter),Ne(this,"logger"),Ne(this,"heartbeat"),Ne(this,"relayer"),Ne(this,"crypto"),Ne(this,"storage"),Ne(this,"history"),Ne(this,"expirer"),Ne(this,"pairing"),Ne(this,"verify"),Ne(this,"echoClient"),Ne(this,"linkModeSupportedApps"),Ne(this,"eventClient"),Ne(this,"initialized",!1),Ne(this,"logChunkController"),Ne(this,"on",(a,c)=>this.events.on(a,c)),Ne(this,"once",(a,c)=>this.events.once(a,c)),Ne(this,"off",(a,c)=>this.events.off(a,c)),Ne(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ne(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:ze.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(t==null?void 0:t.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||OP,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=mz({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:xK.logger,name:Gy}),{logger:s,chunkLoggerController:o}=Xk({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=qr(s,this.name),this.heartbeat=new tV,this.crypto=new CG(this,this.logger,t==null?void 0:t.keychain),this.history=new $Y(this,this.logger),this.expirer=new VY(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new BV(g2(g2({},IK),t==null?void 0:t.storageOptions)),this.relayer=new sY({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new MY(this,this.logger),this.verify=new GY(this,this.logger,this.storage),this.echoClient=new ZY(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new tQ(this,this.logger,t==null?void 0:t.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const r=new MP(t);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(MK,n),r}get context(){return Or(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(WE,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(WE)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(t,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${t}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(t){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=t.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=t}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&SK.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const oQ=sQ,zP="wc",FP=2,$P="client",y0=`${zP}@${FP}:${$P}:`,Kp={name:$P,logger:"error"},y2="WALLETCONNECT_DEEPLINK_CHOICE",aQ="proposal",m2="Proposal expired",cQ="session",$o=Z.SEVEN_DAYS,lQ="engine",Tt={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},Wp={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},Un={idle:"IDLE",active:"ACTIVE"},uQ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},dQ="request",fQ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],hQ="wc",pQ="auth",gQ="authKeys",yQ="pairingTopics",mQ="requests",Sh=`${hQ}@${1.5}:${pQ}:`,Ad=`${Sh}:PUB_KEY`;var bQ=Object.defineProperty,wQ=Object.defineProperties,vQ=Object.getOwnPropertyDescriptors,b2=Object.getOwnPropertySymbols,EQ=Object.prototype.hasOwnProperty,_Q=Object.prototype.propertyIsEnumerable,sm=(e,t,r)=>t in e?bQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))EQ.call(t,r)&&sm(e,r,t[r]);if(b2)for(var r of b2(t))_Q.call(t,r)&&sm(e,r,t[r]);return e},Ct=(e,t)=>wQ(e,vQ(t)),W=(e,t,r)=>sm(e,typeof t!="symbol"?t+"":t,r);class SQ extends tK{constructor(t){super(t),W(this,"name",lQ),W(this,"events",new Hf),W(this,"initialized",!1),W(this,"requestQueue",{state:Un.idle,queue:[]}),W(this,"sessionRequestQueue",{state:Un.idle,queue:[]}),W(this,"emittedSessionRequests",new Yz({limit:500})),W(this,"requestQueueDelay",Z.ONE_SECOND),W(this,"expectedPairingMethodMap",new Map),W(this,"recentlyDeletedMap",new Map),W(this,"recentlyDeletedLimit",200),W(this,"relayMessageCache",[]),W(this,"pendingSessions",new Map),W(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Tt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),W(this,"connect",async r=>{var n;this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Ct(_e({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i),i.optionalNamespaces=sH(i.requiredNamespaces,i.optionalNamespaces),i.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:l,relays:u,authentication:d,walletPay:f}=i,h=((n=d==null?void 0:d[0])==null?void 0:n.ttl)||Tt.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES;this.validateRequestExpiry(h);let y=s,g,v=!1;try{if(y){const N=this.client.core.pairing.pairings.get(y);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),v=N.active}}catch(N){throw this.client.logger.error(`connect() -> pairing.get(${y}) failed`),N}if(!y||!v){const{topic:N,uri:F}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});y=N,g=F}if(!y){const{message:N}=J("NO_MATCHING_KEY",`connect() pairing topic: ${y}`);throw new Error(N)}const b=await this.client.core.crypto.generateKeyPair(),w=at(h),_=_e(Ct(_e(_e({requiredNamespaces:o,optionalNamespaces:a,relays:u??[{protocol:IP}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:w,pairingTopic:y},c&&{sessionProperties:c}),l&&{scopedProperties:l}),{id:jn()}),(d||f)&&{requests:{authentication:d==null?void 0:d.map(N=>{const{domain:F,chains:q,nonce:j,uri:B,exp:D,nbf:m,type:S,statement:P,requestId:k,resources:A,signatureTypes:O}=N;return{domain:F,chains:q,nonce:j,type:S??"caip122",aud:B,version:"1",iat:new Date().toISOString(),exp:D,nbf:m,statement:P,requestId:k,resources:A,signatureTypes:O}}),walletPay:f}}),I=Se("session_connect",_.id),{reject:R,resolve:T,done:C}=Fs(h,m2),L=({id:N})=>{N===_.id&&(this.client.events.off("proposal_expire",L),this.pendingSessions.delete(_.id),this.events.emit(I,{error:{message:m2,code:0}}))};return this.client.events.on("proposal_expire",L),this.events.once(I,({error:N,session:F})=>{this.client.events.off("proposal_expire",L),N?R(N):F&&T(F)}),await this.setProposal(_.id,_),await this.sendProposeSession({proposal:_,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:_.id}}}).catch(N=>{throw this.deleteProposal(_.id),N}),{uri:g,approval:C}}),W(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),W(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[pn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(F){throw o.setError(Cs.no_internet_connection),F}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(F){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Cs.proposal_not_found),F}try{await this.isValidApprove(r)}catch(F){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Cs.session_approve_namespace_validation_failure),F}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:h}=r,y=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:v,requiredNamespaces:b,optionalNamespaces:w}=y;let _=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});_||(_=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:pn.session_approve_started,properties:{topic:g,trace:[pn.session_approve_started,pn.session_namespaces_validation_success]}}));const I=await this.client.core.crypto.generateKeyPair(),R=v.publicKey,T=await this.client.core.crypto.generateSharedKey(I,R),C=Ct(_e(_e(_e({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:I,metadata:this.client.metadata},expiry:at($o)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{proposalRequestsResponses:h}),L=ze.relay;_.addTrace(pn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:L,internal:{skipSubscribe:!0}})}catch(F){throw _.setError(Cs.subscribe_session_topic_failure),F}_.addTrace(pn.subscribe_session_topic_success);const N=Ct(_e({},C),{topic:T,requiredNamespaces:b,optionalNamespaces:w,pairingTopic:g,acknowledged:!1,self:C.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:I,transportType:ze.relay,authentication:h==null?void 0:h.authentication,walletPayResult:h==null?void 0:h.walletPay});await this.client.session.set(T,N),_.addTrace(pn.store_session);try{await this.sendApproveSession({sessionTopic:T,proposal:y,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:I},sessionSettleRequest:C,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:_e({correlationId:a},this.getTVFApproveParams(N))}}),_.addTrace(pn.session_approve_publish_success)}catch(F){throw this.client.logger.error(F),this.client.session.delete(T,Ve("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),F}return this.client.core.eventClient.deleteEvent({eventId:_.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:v.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(T,at($o)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),W(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&await this.sendError({id:n,topic:s,error:i,rpcOpts:Tt.wc_sessionPropose.reject}),await this.deleteProposal(n)}),W(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=Fs(Z.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=jn(),l=os().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Se("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:u}),a(d)}),{acknowledged:s}}),W(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=jn(),{done:s,resolve:o,reject:a}=Fs(Z.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(Se("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,at($o)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),W(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(v){throw this.client.logger.error("request() -> isValidRequest() failed"),v}const{chainId:n,request:i,topic:s,expiry:o=Tt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===ze.relay&&await this.confirmOnlineStateOrThrow();const c=jn(),l=os().toString(),{done:u,resolve:d,reject:f}=Fs(o,"Request expired. Please try again.");this.events.once(Se("session_request",c),({error:v,result:b})=>{v?f(v):d(b)});const h="wc_sessionRequest",y=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(y)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:h,params:{request:Ct(_e({},i),{expiryTimestamp:at(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:y}).catch(v=>f(v)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const g={request:Ct(_e({},i),{expiryTimestamp:at(o)}),chainId:n};return await Promise.all([new Promise(async v=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(b=>f(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),v()}),new Promise(async v=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const w=await Hz(this.client.core.storage,y2);await Fz({id:c,topic:s,wcDeepLink:w})}v()}),u()]).then(v=>v[2])}),W(this,"respond",async r=>{var n,i;this.isInitialized();const s=this.client.core.eventClient.createEvent({properties:{topic:(r==null?void 0:r.topic)||((i=(n=r==null?void 0:r.response)==null?void 0:n.id)==null?void 0:i.toString()),trace:[pn.session_request_response_started]}});try{await this.isValidRespond(r)}catch(d){throw s.addTrace(d==null?void 0:d.message),s.setError(Cs.session_request_response_validation_failure),d}s.addTrace(pn.session_request_response_validation_success);const{topic:o,response:a}=r,{id:c}=a,l=this.client.session.get(o);l.transportType===ze.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);try{s.addTrace(pn.session_request_response_publish_started),Mn(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:u}):Xr(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:u}),this.cleanupAfterResponse(r)}catch(d){throw s.addTrace(d==null?void 0:d.message),s.setError(Cs.session_request_response_publish_failure),d}}),W(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=jn(),s=os().toString(),{done:o,resolve:a,reject:c}=Fs(Z.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(Se("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),W(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=os().toString(),a=jn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),W(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Ve("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=J("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),W(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>cH(n,r)))),W(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),W(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?ze.link_mode:ze.relay;o===ze.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:f,exp:h,nbf:y,methods:g=[],expiry:v}=r,b=[...r.resources||[]],{topic:w,uri:_}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:_}});const I=await this.client.core.crypto.generateKeyPair(),R=_d(I);if(await Promise.all([this.client.auth.authKeys.set(Ad,{responseTopic:R,publicKey:I}),this.client.auth.pairingTopics.set(R,{topic:R,pairingTopic:w})]),await this.client.core.relayer.subscribe(R,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:A}=Si(a[0]);let O=c$(A,"request",g);Ed(b)&&(O=u$(O,b.pop())),b.push(O)}const T=v&&v>Tt.wc_sessionAuthenticate.req.ttl?v:Tt.wc_sessionAuthenticate.req.ttl,C={authPayload:{type:f??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:y,resources:b},requester:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:at(T)},L={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},N={requiredNamespaces:{},optionalNamespaces:L,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:at(Tt.wc_sessionPropose.req.ttl),id:jn()},{done:F,resolve:q,reject:j}=Fs(T,"Request expired"),B=jn(),D=Se("session_connect",N.id),m=Se("session_request",B),S=async({error:A,session:O})=>{this.events.off(m,P),A?j(A):O&&q({session:O})},P=async A=>{var O,M,$;if(await this.deletePendingAuthRequest(B,{message:"fulfilled",code:0}),A.error){const se=Ve("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return A.error.code===se.code?void 0:(this.events.off(D,S),j(A.error.message))}await this.deleteProposal(N.id),this.events.off(D,S);const{cacaos:Q,responder:H}=A.result,G=[],ee=[];for(const se of Q){await W1({cacao:se,projectId:this.client.core.projectId})||(this.client.logger.error(se,"Signature verification failed"),j(Ve("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:de}=se,Te=Ed(de.resources),Je=[Cy(de.iss)],qe=gf(de.iss);if(Te){const Ye=G1(Te),ln=Y1(Te);G.push(...Ye),Je.push(...ln)}for(const Ye of Je)ee.push(`${Ye}:${qe}`)}const ie=await this.client.core.crypto.generateSharedKey(I,H.publicKey);let ce;G.length>0&&(ce={topic:ie,acknowledged:!0,self:{publicKey:I,metadata:this.client.metadata},peer:H,controller:H.publicKey,expiry:at($o),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:EE([...new Set(G)],[...new Set(ee)]),transportType:o},await this.client.core.relayer.subscribe(ie,{transportType:o}),await this.client.session.set(ie,ce),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:H.metadata}),ce=this.client.session.get(ie)),(O=this.client.metadata.redirect)!=null&&O.linkMode&&(M=H.metadata.redirect)!=null&&M.linkMode&&($=H.metadata.redirect)!=null&&$.universal&&n&&(this.client.core.addLinkModeSupportedApp(H.metadata.redirect.universal),this.client.session.update(ie,{transportType:ze.link_mode})),q({auths:Q,session:ce})};this.events.once(D,S),this.events.once(m,P);let k;try{if(s){const A=_n("wc_sessionAuthenticate",C,B);this.client.core.history.set(w,A);const O=await this.client.core.crypto.encode("",A,{type:Ql,encoding:rs});k=$u(n,w,O)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:C,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:B}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:N,expiry:Tt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:N.id})])}catch(A){throw this.events.off(D,S),this.events.off(m,P),A}return await this.setProposal(N.id,N),await this.setAuthRequest(B,{request:Ct(_e({},C),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:k??_,response:F}}),W(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Ns.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw s.setError(wc.no_internet_connection),v}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(wc.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||ze.relay;a===ze.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=_d(c),d={type:xi,receiverPublicKey:c,senderPublicKey:l},f=[],h=[];for(const v of i){if(!await W1({cacao:v,projectId:this.client.core.projectId})){s.setError(wc.invalid_cacao);const R=Ve("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:R,encodeOpts:d}),new Error(R.message)}s.addTrace(Ns.cacaos_verified);const{p:b}=v,w=Ed(b.resources),_=[Cy(b.iss)],I=gf(b.iss);if(w){const R=G1(w),T=Y1(w);f.push(...R),_.push(...T)}for(const R of _)h.push(`${R}:${I}`)}const y=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Ns.create_authenticated_session_topic);let g;if((f==null?void 0:f.length)>0){g={topic:y,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:at($o),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:EE([...new Set(f)],[...new Set(h)]),transportType:a},s.addTrace(Ns.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(y,{transportType:a})}catch(v){throw s.setError(wc.subscribe_authenticated_session_topic_failure),v}s.addTrace(Ns.subscribe_authenticated_session_topic_success),await this.client.session.set(y,g),s.addTrace(Ns.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Ns.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(v){throw s.setError(wc.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),W(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===ze.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=_d(o),l={type:xi,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:Tt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),W(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return vA(n,i)}),W(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),W(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),W(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Ve("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(y2).catch(l=>this.client.logger.warn(l)),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Un.idle),await Promise.all(this.getPendingSessionRequests().filter(l=>l.topic===i).map(l=>this.deletePendingSessionRequest(l.id,Ve("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),W(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Cs.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Ve("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),W(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Un.idle,this.client.events.emit("session_request_expire",{id:r}))}),W(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),W(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),W(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,at(Tt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),W(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=ze.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),W(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||at(Tt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),W(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:f={}}=r,h=_n(i,s,c);let y;const g=!!u;try{const w=g?rs:pr;y=await this.client.core.crypto.encode(n,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),w}let v;if(fQ.includes(i)){const w=Zr(JSON.stringify(h)),_=Zr(y);v=await this.client.core.verify.register({id:_,decryptedId:w})}const b=_e(_e({},Tt[i].req),f);if(b.attestation=v,o&&(b.ttl=o),a&&(b.id=a),this.client.core.history.set(n,h),g){const w=$u(u,n,y);await global.Linking.openURL(w,this.client.name)}else b.tvf=Ct(_e({},d),{correlationId:h.id}),l?(b.internal=Ct(_e({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,y,b)):this.client.core.relayer.publish(n,y,b).catch(w=>this.client.logger.error(w));return h.id}),W(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:i}=r,s=_n("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,s);const o=await this.client.core.crypto.encode(n.pairingTopic,s,{encoding:pr}),a=Zr(JSON.stringify(s)),c=Zr(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:Ct(_e({},i),{publishMethod:"wc_proposeSession",attestation:l})})}),W(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:a}=r,c=Ol(s.id,i),l=await this.client.core.crypto.encode(s.pairingTopic,c,{encoding:pr}),u=_n("wc_sessionSettle",o,a==null?void 0:a.id),d=await this.client.core.crypto.encode(n,u,{encoding:pr});this.client.core.history.set(n,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:s.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:Ct(_e({},a),{publishMethod:"wc_approveSession"})})}),W(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=Ol(n,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const y=d?rs:pr;u=await this.client.core.crypto.encode(i,l,Ct(_e({},a||{}),{encoding:y}))}catch(y){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),y}let f,h;try{f=await this.client.core.history.get(i,n);const y=f.request;try{h=this.getTVFParams(n,y.params,s)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(y){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),y}if(d){const y=$u(c,i,u);await global.Linking.openURL(y,this.client.name)}else{const y=f.request.method,g=Tt[y].res;g.tvf=Ct(_e({},h),{correlationId:n}),o?(g.internal=Ct(_e({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(l)}),W(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=vh(n,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?rs:pr;u=await this.client.core.crypto.encode(i,l,Ct(_e({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),h}let f;try{f=await this.client.core.history.get(i,n)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),h}if(d){const h=$u(c,i,u);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,y=a||Tt[h].res;this.client.core.relayer.publish(i,u,y)}await this.client.core.history.resolve(l)}),W(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Fn(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Fn(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),W(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),W(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),W(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Un.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Un.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Un.idle}),W(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),W(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),W(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=J("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),W(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),W(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(li.proposal_listener_not_found)),this.isValidConnect(_e({},i.params));const u=a.expiryTimestamp||at(Tt.wc_sessionPropose.req.ttl),d=_e({id:c,pairingTopic:n,expiryTimestamp:u,attestation:s,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:s,hash:Zr(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Ln.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:Tt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),W(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Mn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(Xr(n)){await this.deleteProposal(s);const o=Se("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),W(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:h}=n.params,y=[...this.pendingSessions.values()].find(b=>b.sessionTopic===r);if(!y)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(y.proposalId),v=Ct(_e(_e(_e({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:y.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:y.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:ze.relay,authentication:h==null?void 0:h.authentication,walletPayResult:h==null?void 0:h.walletPay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:y.pairingTopic,metadata:v.peer.metadata}),this.pendingSessions.delete(y.proposalId),this.deleteProposal(y.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:n.id,topic:r,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:v}),this.events.emit(Se("session_connect",y.proposalId),{session:v})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),W(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Mn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Se("session_approve",i),{})):Xr(n)&&(await this.client.session.delete(r,Ve("USER_DISCONNECTED")),this.events.emit(Se("session_approve",i),{error:n.error}))}),W(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=mc.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:Ve("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(_e({topic:r},i));try{mc.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0})}catch(c){throw mc.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),W(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),W(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Se("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Mn(n)?this.events.emit(Se("session_update",i),{}):Xr(n)&&this.events.emit(Se("session_update",i),{error:n.error})}),W(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,at($o)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),W(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Se("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Mn(n)?this.events.emit(Se("session_extend",i),{}):Xr(n)&&this.events.emit(Se("session_extend",i),{error:n.error})}),W(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),W(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Se("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Mn(n)?this.events.emit(Se("session_ping",i),{}):Xr(n)&&this.events.emit(Se("session_ping",i),{error:n.error})},500)}),W(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{await this.isValidDisconnect({topic:r,reason:n.params}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Ve("USER_DISCONNECTED")}),await this.deleteSession({topic:r,id:i})}catch(s){this.client.logger.error(s)}}),W(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:d,params:f}=a;try{await this.isValidRequest(_e({topic:o},f));const h=this.client.session.get(o),y=await this.getVerifyContext({attestationId:c,hash:Zr(JSON.stringify(_n("wc_sessionRequest",f,d))),encryptedId:l,metadata:h.peer.metadata,transportType:u}),g={id:d,topic:o,params:f,verifyContext:y};await this.setPendingSessionRequest(g),u===ze.link_mode&&(n=h.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=h.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),W(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Se("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Mn(n)?this.events.emit(Se("session_request",i),{result:n.result}):Xr(n)&&this.events.emit(Se("session_request",i),{error:n.error})}),W(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=mc.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(_e({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),mc.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),W(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Mn(n)?this.events.emit(Se("session_request",i),{result:n.result}):Xr(n)&&this.events.emit(Se("session_request",i),{error:n.error})}),W(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,f=await this.getVerifyContext({attestationId:o,hash:Zr(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),h={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:h,pairingTopic:i,transportType:c}),c===ze.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:f})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(s.params.requester.metadata,c),h={type:xi,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:h,rpcOpts:Tt.wc_sessionAuthenticate.autoReject,appLink:f})}}),W(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),W(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Un.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),W(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{this.events.emit(Se("session_request",s.request.id),{error:n})})}),W(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Un.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),W(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=Un.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),W(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:_n("wc_sessionPropose",Ct(_e({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),W(this,"isValidConnect",async r=>{if(!dr(r)){const{message:l}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(xt(n)||await this.isValidPairingTopic(n),!vH(c)){const{message:l}=J("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(i&&!xt(i)&&Zn(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(s&&!xt(s)&&Zn(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),o&&!xt(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!xt(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),W(this,"validateNamespaces",(r,n)=>{const i=wH(r,"connect()",n);if(i)throw new Error(i.message)}),W(this,"isValidApprove",async r=>{if(!dr(r))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=Mp(i,"approve()");if(l)throw new Error(l.message);const u=xE(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!ct(s,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(o&&!xt(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!xt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),W(this,"isValidReject",async r=>{if(!dr(r)){const{message:s}=J("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!_H(i)){const{message:s}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),W(this,"isValidSessionSettleRequest",r=>{if(!dr(r)){const{message:l}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!iP(n)){const{message:l}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=hH(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Mp(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Fn(o)){const{message:l}=J("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),W(this,"isValidUpdate",async r=>{if(!dr(r)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Mp(i,"update()");if(o)throw new Error(o.message);const a=xE(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),W(this,"isValidExtend",async r=>{if(!dr(r)){const{message:i}=J("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),W(this,"isValidRequest",async r=>{if(!dr(r)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!SE(a,s)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!SH(i)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!OH(a,s,i.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),W(this,"isValidRespond",async r=>{var n;if(!dr(r)){const{message:a}=J("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(a)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(a){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),a}if(!xH(s)){const{message:a}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}const o=this.client.pendingRequest.get(s.id);if(o.topic!==i){const{message:a}=J("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${s.id}, expected topic: ${o.topic}, received topic: ${i}`);throw new Error(a)}}),W(this,"isValidPing",async r=>{if(!dr(r)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),W(this,"isValidEmit",async r=>{if(!dr(r)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!SE(o,s)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!IH(i)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!kH(o,s,i.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),W(this,"isValidDisconnect",async r=>{if(!dr(r)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),W(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!ct(i,!1))throw new Error("uri is required parameter");if(!ct(s,!1))throw new Error("domain is required parameter");if(!ct(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Si(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Si(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),W(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Gc,validation:"UNKNOWN",origin:o.url||""}};try{if(a===ze.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),W(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=J("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),W(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),W(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),W(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),W(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,d,f;return!r||n!==ze.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((d=r==null?void 0:r.redirect)==null?void 0:d.universal)!==""&&((f=r==null?void 0:r.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),W(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),W(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=B1(r,"topic")||"",i=decodeURIComponent(B1(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:ze.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),W(this,"registerLinkModeListeners",async()=>{var r;if(Zb()||ks()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),W(this,"getTVFApproveParams",r=>{try{const n=rP(r.namespaces),i=eH(r.namespaces),s=tH(r.namespaces),o=r.sessionProperties,a=r.scopedProperties;return{approvedChains:n,approvedMethods:i,approvedEvents:s,sessionProperties:o,scopedProperties:a}}catch(n){return this.client.logger.warn(n,"Error getting TVF approve params"),{}}}),W(this,"getTVFParams",(r,n,i)=>{var s,o,a;if(!((s=n.request)!=null&&s.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const l=this.extractTxHashesFromResult(n.request,i);c.txHashes=l,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn(l,"Error getting TVF params")}return c}),W(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),W(this,"extractTxHashesFromResult",(r,n)=>{var i;try{if(!n)return[];const s=r.method,o=uQ[s];if(s==="sui_signTransaction")return[qF(n.transactionBytes)];if(s==="near_signTransaction")return[q1(n)];if(s==="near_signTransactions")return n.map(c=>q1(c));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=n.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[VH({transaction:r.params.transactionPayload,signature:n.signature})];if(s==="algo_signTxn")return Ii(n)?n.map(c=>H1(c)):[H1(n)];if(s==="cosmos_signDirect")return[VF(n)];if(s==="wallet_sendCalls")return KF(n);if(typeof n=="string")return[n];const a=n[o.key];if(Ii(a))return s==="solana_signAllTransactions"?a.map(c=>$F(c)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn(s,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(t);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(t){this.client.logger.warn(t,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(rt.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:r,message:n,attestation:i,transportType:s}=t,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ad)?this.client.auth.authKeys.get(Ad):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===ze.link_mode?rs:pr});p0(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Zr(n)})):Eh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${n}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Gr.expired,async t=>{const{topic:r,id:n}=nA(t.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,J("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,J("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Hs.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Hs.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!ct(t,!1)){const{message:r}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Fn(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=J("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!ct(t,!1)){const{message:r}=J("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:r}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Fn(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:r}=J("EXPIRED",`session topic: ${t}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(t)){const{message:r}=J("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(ct(t,!1)){const{message:r}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!EH(t)){const{message:r}=J("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Fn(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:r}=J("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}validateRequestExpiry(t){if(t&&!RH(t,Wp)){const{message:r}=J("MISSING_OR_INVALID",`request() expiry: ${t}. Expiry must be a number (in seconds) between ${Wp.min} and ${Wp.max}`);throw new Error(r)}}}class xQ extends Oo{constructor(t,r){super(t,r,aQ,y0),this.core=t,this.logger=r}}let IQ=class extends Oo{constructor(e,t){super(e,t,cQ,y0),this.core=e,this.logger=t}};class OQ extends Oo{constructor(t,r){super(t,r,dQ,y0,n=>n.id),this.core=t,this.logger=r}}class kQ extends Oo{constructor(t,r){super(t,r,gQ,Sh,()=>Ad),this.core=t,this.logger=r}}class AQ extends Oo{constructor(t,r){super(t,r,yQ,Sh),this.core=t,this.logger=r}}class PQ extends Oo{constructor(t,r){super(t,r,mQ,Sh,n=>n.id),this.core=t,this.logger=r}}var RQ=Object.defineProperty,TQ=(e,t,r)=>t in e?RQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gp=(e,t,r)=>TQ(e,typeof t!="symbol"?t+"":t,r);class CQ{constructor(t,r){this.core=t,this.logger=r,Gp(this,"authKeys"),Gp(this,"pairingTopics"),Gp(this,"requests"),this.authKeys=new kQ(this.core,this.logger),this.pairingTopics=new AQ(this.core,this.logger),this.requests=new PQ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var NQ=Object.defineProperty,UQ=(e,t,r)=>t in e?NQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ye=(e,t,r)=>UQ(e,typeof t!="symbol"?t+"":t,r);class m0 extends eK{constructor(t){super(t),ye(this,"protocol",zP),ye(this,"version",FP),ye(this,"name",Kp.name),ye(this,"metadata"),ye(this,"core"),ye(this,"logger"),ye(this,"events",new Sr.EventEmitter),ye(this,"engine"),ye(this,"session"),ye(this,"proposal"),ye(this,"pendingRequest"),ye(this,"auth"),ye(this,"signConfig"),ye(this,"on",(n,i)=>this.events.on(n,i)),ye(this,"once",(n,i)=>this.events.once(n,i)),ye(this,"off",(n,i)=>this.events.off(n,i)),ye(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),ye(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),ye(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),ye(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),ye(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),ye(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(t==null?void 0:t.name)||Kp.name,this.metadata=Bz(t==null?void 0:t.metadata),this.signConfig=t==null?void 0:t.signConfig;const r=c0({logger:(t==null?void 0:t.logger)||Kp.logger,name:this.name});this.logger=r,this.core=(t==null?void 0:t.core)||new oQ(t),this.session=new IQ(this.core,this.logger),this.proposal=new xQ(this.core,this.logger),this.pendingRequest=new OQ(this.core,this.logger),this.engine=new SQ(this),this.auth=new CQ(this.core,this.logger)}static async init(t){const r=new m0(t);return await r.initialize(),r}get context(){return Or(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const BQ=m0;var om={exports:{}};(function(e,t){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Lr<"u"&&Lr,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Lr<"u"&&Lr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(m){return m&&DataView.prototype.isPrototypeOf(m)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(m){return m&&u.indexOf(Object.prototype.toString.call(m))>-1};function f(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(m)||m==="")throw new TypeError('Invalid character in header field name: "'+m+'"');return m.toLowerCase()}function h(m){return typeof m!="string"&&(m=String(m)),m}function y(m){var S={next:function(){var P=m.shift();return{done:P===void 0,value:P}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(m){this.map={},m instanceof g?m.forEach(function(S,P){this.append(P,S)},this):Array.isArray(m)?m.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(S){this.append(S,m[S])},this)}g.prototype.append=function(m,S){m=f(m),S=h(S);var P=this.map[m];this.map[m]=P?P+", "+S:S},g.prototype.delete=function(m){delete this.map[f(m)]},g.prototype.get=function(m){return m=f(m),this.has(m)?this.map[m]:null},g.prototype.has=function(m){return this.map.hasOwnProperty(f(m))},g.prototype.set=function(m,S){this.map[f(m)]=h(S)},g.prototype.forEach=function(m,S){for(var P in this.map)this.map.hasOwnProperty(P)&&m.call(S,this.map[P],P,this)},g.prototype.keys=function(){var m=[];return this.forEach(function(S,P){m.push(P)}),y(m)},g.prototype.values=function(){var m=[];return this.forEach(function(S){m.push(S)}),y(m)},g.prototype.entries=function(){var m=[];return this.forEach(function(S,P){m.push([P,S])}),y(m)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(m){if(!m._noBody){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}}function b(m){return new Promise(function(S,P){m.onload=function(){S(m.result)},m.onerror=function(){P(m.error)}})}function w(m){var S=new FileReader,P=b(S);return S.readAsArrayBuffer(m),P}function _(m){var S=new FileReader,P=b(S),k=/charset=([A-Za-z0-9_-]+)/.exec(m.type),A=k?k[1]:"utf-8";return S.readAsText(m,A),P}function I(m){for(var S=new Uint8Array(m),P=new Array(S.length),k=0;k<S.length;k++)P[k]=String.fromCharCode(S[k]);return P.join("")}function R(m){if(m.slice)return m.slice(0);var S=new Uint8Array(m.byteLength);return S.set(new Uint8Array(m)),S.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(m){this.bodyUsed=this.bodyUsed,this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:c.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:c.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():c.arrayBuffer&&c.blob&&l(m)?(this._bodyArrayBuffer=R(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||d(m))?this._bodyArrayBuffer=R(m):this._bodyText=m=Object.prototype.toString.call(m):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var m=v(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var m=v(this);return m||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var m=v(this);if(m)return m;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var C=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(m){var S=m.toUpperCase();return C.indexOf(S)>-1?S:m}function N(m,S){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var P=S.body;if(m instanceof N){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,S.headers||(this.headers=new g(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!P&&m._bodyInit!=null&&(P=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=L(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var O=new AbortController;return O.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var A=/\?/;this.url+=(A.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function F(m){var S=new FormData;return m.trim().split("&").forEach(function(P){if(P){var k=P.split("="),A=k.shift().replace(/\+/g," "),O=k.join("=").replace(/\+/g," ");S.append(decodeURIComponent(A),decodeURIComponent(O))}}),S}function q(m){var S=new g,P=m.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var A=k.split(":"),O=A.shift().trim();if(O){var M=A.join(":").trim();try{S.append(O,M)}catch($){console.warn("Response "+$.message)}}}),S}T.call(N.prototype);function j(m,S){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(m)}T.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var m=new j(null,{status:200,statusText:""});return m.ok=!1,m.status=0,m.type="error",m};var B=[301,302,303,307,308];j.redirect=function(m,S){if(B.indexOf(S)===-1)throw new RangeError("Invalid status code");return new j(null,{status:S,headers:{location:m}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,S){this.message=m,this.name=S;var P=Error(m);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function D(m,S){return new Promise(function(P,k){var A=new N(m,S);if(A.signal&&A.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function M(){O.abort()}O.onload=function(){var H={statusText:O.statusText,headers:q(O.getAllResponseHeaders()||"")};A.url.indexOf("file://")===0&&(O.status<200||O.status>599)?H.status=200:H.status=O.status,H.url="responseURL"in O?O.responseURL:H.headers.get("X-Request-URL");var G="response"in O?O.response:O.responseText;setTimeout(function(){P(new j(G,H))},0)},O.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},O.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},O.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function $(H){try{return H===""&&a.location.href?a.location.href:H}catch{return H}}if(O.open(A.method,$(A.url),!0),A.credentials==="include"?O.withCredentials=!0:A.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&(c.blob?O.responseType="blob":c.arrayBuffer&&(O.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(S.headers).forEach(function(H){Q.push(f(H)),O.setRequestHeader(H,h(S.headers[H]))}),A.headers.forEach(function(H,G){Q.indexOf(G)===-1&&O.setRequestHeader(G,H)})}else A.headers.forEach(function(H,G){O.setRequestHeader(G,H)});A.signal&&(A.signal.addEventListener("abort",M),O.onreadystatechange=function(){O.readyState===4&&A.signal.removeEventListener("abort",M)}),O.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return D.polyfill=!0,a.fetch||(a.fetch=D,a.Headers=g,a.Request=N,a.Response=j),o.Headers=g,o.Request=N,o.Response=j,o.fetch=D,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(om,om.exports);var LQ=om.exports;const w2=xf(LQ);var DQ=Object.defineProperty,jQ=Object.defineProperties,MQ=Object.getOwnPropertyDescriptors,v2=Object.getOwnPropertySymbols,zQ=Object.prototype.hasOwnProperty,FQ=Object.prototype.propertyIsEnumerable,E2=(e,t,r)=>t in e?DQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_2=(e,t)=>{for(var r in t||(t={}))zQ.call(t,r)&&E2(e,r,t[r]);if(v2)for(var r of v2(t))FQ.call(t,r)&&E2(e,r,t[r]);return e},S2=(e,t)=>jQ(e,MQ(t));const $Q={Accept:"application/json","Content-Type":"application/json"},qQ="POST",x2={headers:$Q,method:qQ},I2=10;let qP=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Sr.EventEmitter,this.isAvailable=!1,this.registering=!1,!$E(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=go(e),r=await(await w2(this.url,S2(_2({},x2),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!$E(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,n)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),n(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=go({id:1,jsonrpc:"2.0",method:"test",params:[]});await w2(e,S2(_2({},x2),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?po(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=r.message||r.toString(),i=vh(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return wP(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>I2&&this.events.setMaxListeners(I2)}};function HQ(e){return Number.isSafeInteger(e)&&e>=0}function VQ(e){return e!=null&&typeof e!="function"&&HQ(e.length)}function KQ(e){return e==="__proto__"}function b0(e){return e==null||typeof e!="object"&&typeof e!="function"}function HP(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function w0(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const WQ="[object RegExp]",VP="[object String]",KP="[object Number]",WP="[object Boolean]",GP="[object Arguments]",GQ="[object Symbol]",YQ="[object Date]",QQ="[object Map]",ZQ="[object Set]",XQ="[object Array]",JQ="[object ArrayBuffer]",YP="[object Object]",eZ="[object DataView]",tZ="[object Uint8Array]",rZ="[object Uint8ClampedArray]",nZ="[object Uint16Array]",iZ="[object Uint32Array]",sZ="[object Int8Array]",oZ="[object Int16Array]",aZ="[object Int32Array]",cZ="[object Float32Array]",lZ="[object Float64Array]";function v0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uZ(e,t){return aa(e,void 0,e,new Map,t)}function aa(e,t,r,n=new Map,i=void 0){const s=i==null?void 0:i(e,t,r,n);if(s!==void 0)return s;if(b0(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const o=new Array(e.length);n.set(e,o);for(let a=0;a<e.length;a++)o[a]=aa(e[a],a,r,n,i);return Object.hasOwn(e,"index")&&(o.index=e.index),Object.hasOwn(e,"input")&&(o.input=e.input),o}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const o=new RegExp(e.source,e.flags);return o.lastIndex=e.lastIndex,o}if(e instanceof Map){const o=new Map;n.set(e,o);for(const[a,c]of e)o.set(a,aa(c,a,r,n,i));return o}if(e instanceof Set){const o=new Set;n.set(e,o);for(const a of e)o.add(aa(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(v0(e)){const o=new(Object.getPrototypeOf(e)).constructor(e.length);n.set(e,o);for(let a=0;a<e.length;a++)o[a]=aa(e[a],a,r,n,i);return o}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const o=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,o),wn(o,e,r,n,i),o}if(typeof File<"u"&&e instanceof File){const o=new File([e],e.name,{type:e.type});return n.set(e,o),wn(o,e,r,n,i),o}if(typeof Blob<"u"&&e instanceof Blob){const o=new Blob([e],{type:e.type});return n.set(e,o),wn(o,e,r,n,i),o}if(e instanceof Error){const o=new e.constructor;return n.set(e,o),o.message=e.message,o.name=e.name,o.stack=e.stack,o.cause=e.cause,wn(o,e,r,n,i),o}if(e instanceof Boolean){const o=new Boolean(e.valueOf());return n.set(e,o),wn(o,e,r,n,i),o}if(e instanceof Number){const o=new Number(e.valueOf());return n.set(e,o),wn(o,e,r,n,i),o}if(e instanceof String){const o=new String(e.valueOf());return n.set(e,o),wn(o,e,r,n,i),o}if(typeof e=="object"&&dZ(e)){const o=Object.create(Object.getPrototypeOf(e));return n.set(e,o),wn(o,e,r,n,i),o}return e}function wn(e,t,r=e,n,i){const s=[...Object.keys(t),...HP(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(c==null||c.writable)&&(e[a]=aa(t[a],a,r,n,i))}}function dZ(e){switch(w0(e)){case GP:case XQ:case JQ:case eZ:case WP:case YQ:case cZ:case lZ:case sZ:case oZ:case aZ:case QQ:case KP:case YP:case WQ:case ZQ:case VP:case GQ:case tZ:case rZ:case nZ:case iZ:return!0;default:return!1}}function fZ(e,t){return uZ(e,(r,n,i,s)=>{if(typeof e=="object"){if(w0(e)===YP&&typeof e.constructor!="function"){const o={};return s.set(e,o),wn(o,e,i,s),o}switch(Object.prototype.toString.call(e)){case KP:case VP:case WP:{const o=new e.constructor(e==null?void 0:e.valueOf());return wn(o,e),o}case GP:{const o={};return wn(o,e),o.length=e.length,o[Symbol.iterator]=e[Symbol.iterator],o}default:return}}})}function O2(e){return fZ(e)}function k2(e){return e!==null&&typeof e=="object"&&w0(e)==="[object Arguments]"}function am(e){return typeof e=="object"&&e!==null}function hZ(e){return am(e)&&VQ(e)}function pZ(){}function Yp(e){return v0(e)}function Qp(e){var t;if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const n=e[Symbol.toStringTag];return n==null||!((t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))!=null&&t.writable)?!1:e.toString()===`[object ${n}]`}let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function gZ(e){if(b0(e))return e;if(Array.isArray(e)||v0(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e);if(t==null)return Object.assign(Object.create(t),e);const r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){const n=new r(e);return n.lastIndex=e.lastIndex,n}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){let n;return e instanceof AggregateError?n=new r(e.errors,e.message,{cause:e.cause}):n=new r(e.message,{cause:e.cause}),n.stack=e.stack,Object.assign(n,e),n}if(typeof File<"u"&&e instanceof File)return new r([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const n=Object.create(t);return Object.assign(n,e)}return e}function yZ(e,...t){const r=t.slice(0,-1),n=t[t.length-1];let i=e;for(let s=0;s<r.length;s++){const o=r[s];i=cm(i,o,n,new Map)}return i}function cm(e,t,r,n){if(b0(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(n.has(t))return gZ(n.get(t));if(n.set(t,e),Array.isArray(t)){t=t.slice();for(let s=0;s<t.length;s++)t[s]=t[s]??void 0}const i=[...Object.keys(t),...HP(t)];for(let s=0;s<i.length;s++){const o=i[s];if(KQ(o))continue;let a=t[o],c=e[o];if(k2(a)&&(a={...a}),k2(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=O2(a)),Array.isArray(a))if(Array.isArray(c)){const u=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];u[h]=c[h]}c=u}else if(hZ(c)){const u=[];for(let d=0;d<c.length;d++)u[d]=c[d];c=u}else c=[];const l=r(c,a,o,e,t,n);l!==void 0?e[o]=l:Array.isArray(a)||am(c)&&am(a)&&(Qp(c)||Qp(a)||Yp(c)||Yp(a))?e[o]=cm(c,a,r,n):c==null&&Qp(a)?e[o]=cm({},a,r,n):c==null&&Yp(a)?e[o]=O2(a):(c===void 0||a!==void 0)&&(e[o]=a)}return e}function mZ(e,...t){return yZ(e,...t,pZ)}const A2="error",bZ="wss://relay.walletconnect.org",wZ="wc",QP="universal_provider",Ku=`${wZ}@2:${QP}:`,ZP="https://rpc.walletconnect.org/v1/",XP="generic",vZ=`${ZP}bundler`,_a="call_status",EZ=86400,E0={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var _Z=Object.defineProperty,SZ=Object.defineProperties,xZ=Object.getOwnPropertyDescriptors,P2=Object.getOwnPropertySymbols,IZ=Object.prototype.hasOwnProperty,OZ=Object.prototype.propertyIsEnumerable,R2=(e,t,r)=>t in e?_Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wu=(e,t)=>{for(var r in t||(t={}))IZ.call(t,r)&&R2(e,r,t[r]);if(P2)for(var r of P2(t))OZ.call(t,r)&&R2(e,r,t[r]);return e},kZ=(e,t)=>SZ(e,xZ(t));function JP(e,t,r){var n;const i=Si(e);return((n=t.rpcMap)==null?void 0:n[i.reference])||`${ZP}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function AZ(e){return e.includes(":")?e.split(":")[1]:e}function eR(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function PZ(e,t){const r=Object.keys(t.namespaces).filter(i=>i.includes(e));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=t.namespaces[i].accounts;n.push(...s)}),n}function T2(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>{var n,i;return((n=r==null?void 0:r.chains)==null?void 0:n.length)&&((i=r==null?void 0:r.chains)==null?void 0:i.length)>0}))}function Gu(e={},t={}){const r=T2(C2(e)),n=T2(C2(t));return mZ(r,n)}function C2(e){var t,r,n,i,s;const o={};if(!Zn(e))return o;for(const[a,c]of Object.entries(e)){const l=yh(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=oa(a);o[h]=kZ(Wu(Wu({},o[h]),c),{chains:Qn(l,(t=o[h])==null?void 0:t.chains),methods:Qn(u,(r=o[h])==null?void 0:r.methods),events:Qn(d,(n=o[h])==null?void 0:n.events)}),(Zn(f)||Zn(((i=o[h])==null?void 0:i.rpcMap)||{}))&&(o[h].rpcMap=Wu(Wu({},f),(s=o[h])==null?void 0:s.rpcMap))}return o}function N2(e){return e.includes(":")?e.split(":")[2]:e}function U2(e){const t={};for(const[r,n]of Object.entries(e)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=yh(r)?[r]:n.chains?n.chains:eR(n.accounts);t[r]={chains:a,methods:i,events:s,accounts:o}}return t}function Zp(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}function RZ(e){try{const t=JSON.parse(e);return typeof t=="object"&&t!==null&&!Array.isArray(t)}catch{return!1}}const tR={},Sa=e=>tR[e],Xp=(e,t)=>{tR[e]=t};var TZ=Object.defineProperty,B2=Object.getOwnPropertySymbols,CZ=Object.prototype.hasOwnProperty,NZ=Object.prototype.propertyIsEnumerable,L2=(e,t,r)=>t in e?TZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D2=(e,t)=>{for(var r in t||(t={}))CZ.call(t,r)&&L2(e,r,t[r]);if(B2)for(var r of B2(t))NZ.call(t,r)&&L2(e,r,t[r]);return e};const j2="eip155",UZ=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],BZ=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,Jp=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,M2=e=>Object.keys(e).filter(t=>UZ.includes(t)).reduce((t,r)=>(t[r]=LZ(e[r]),t),{}),LZ=e=>typeof e=="string"&&RZ(e)?JSON.parse(e):e,DZ=(e,t,r)=>{const{sessionProperties:n={},scopedProperties:i={}}=e,s={};if(!Zn(i)&&!Zn(n))return;const o=M2(n);for(const a of r){const c=BZ(a);if(!c)continue;s[Jp(c)]=o;const l=i==null?void 0:i[`${j2}:${c}`];if(l){const u=l==null?void 0:l[`${j2}:${c}:${t}`];s[Jp(c)]=D2(D2({},s[Jp(c)]),M2(u||l))}}for(const[a,c]of Object.entries(s))Object.keys(c).length===0&&delete s[a];return Object.keys(s).length>0?s:void 0};var jZ=Object.defineProperty,MZ=(e,t,r)=>t in e?jZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zZ=(e,t,r)=>MZ(e,t+"",r);let eg;class _0{constructor(t){zZ(this,"storage"),this.storage=t}async getItem(t){return await this.storage.getItem(t)}async setItem(t,r){return await this.storage.setItem(t,r)}async removeItem(t){return await this.storage.removeItem(t)}static getStorage(t){return eg||(eg=new _0(t)),eg}}var FZ=Object.defineProperty,$Z=Object.defineProperties,qZ=Object.getOwnPropertyDescriptors,z2=Object.getOwnPropertySymbols,HZ=Object.prototype.hasOwnProperty,VZ=Object.prototype.propertyIsEnumerable,F2=(e,t,r)=>t in e?FZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KZ=(e,t)=>{for(var r in t||(t={}))HZ.call(t,r)&&F2(e,r,t[r]);if(z2)for(var r of z2(t))VZ.call(t,r)&&F2(e,r,t[r]);return e},WZ=(e,t)=>$Z(e,qZ(t));async function GZ(e,t){const r=Si(e.result.capabilities.caip345.caip2),n=e.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(n.map(d=>YZ(r.reference,d,t))),s=i.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);i.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!s.length||s.some(d=>!d),a=s.every(d=>(d==null?void 0:d.status)==="0x1"),c=s.every(d=>(d==null?void 0:d.status)==="0x0"),l=s.some(d=>(d==null?void 0:d.status)==="0x0");let u;return o?u=100:a?u=200:c?u=500:l&&(u=600),{id:e.result.id,version:e.request.version,atomic:e.request.atomicRequired,chainId:e.request.chainId,capabilities:e.result.capabilities,receipts:s,status:u}}async function YZ(e,t,r){return await r(parseInt(e)).request(_n("eth_getTransactionReceipt",[t]))}async function QZ({sendCalls:e,storage:t}){const r=await t.getItem(_a);await t.setItem(_a,WZ(KZ({},r),{[e.result.id]:{request:e.request,result:e.result,expiry:at(EZ)}}))}async function ZZ({resultId:e,storage:t}){const r=await t.getItem(_a);if(r){delete r[e],await t.setItem(_a,r);for(const n in r)Fn(r[n].expiry)&&delete r[n];await t.setItem(_a,r)}}async function XZ({resultId:e,storage:t}){const r=await t.getItem(_a),n=r==null?void 0:r[e];if(n&&!Fn(n.expiry))return n;await ZZ({resultId:e,storage:t})}var JZ=Object.defineProperty,eX=Object.defineProperties,tX=Object.getOwnPropertyDescriptors,$2=Object.getOwnPropertySymbols,rX=Object.prototype.hasOwnProperty,nX=Object.prototype.propertyIsEnumerable,lm=(e,t,r)=>t in e?JZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tg=(e,t)=>{for(var r in t||(t={}))rX.call(t,r)&&lm(e,r,t[r]);if($2)for(var r of $2(t))nX.call(t,r)&&lm(e,r,t[r]);return e},rg=(e,t)=>eX(e,tX(t)),Us=(e,t,r)=>lm(e,typeof t!="symbol"?t+"":t,r);class iX{constructor(t){Us(this,"name","eip155"),Us(this,"client"),Us(this,"chainId"),Us(this,"namespace"),Us(this,"httpProviders"),Us(this,"events"),Us(this,"storage"),this.namespace=t.namespace,this.events=Sa("events"),this.client=Sa("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=_0.getStorage(this.client.core.storage)}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t);case"wallet_sendCalls":return await this.sendCalls(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r);const n=this.chainId;this.chainId=parseInt(t),this.events.emit(E0.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${t}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const n=r||JP(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new g0(new qP(n,Sa("disableProviderPing")))}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(AZ(r));t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(t){const r=t||this.chainId;return this.httpProviders[r]||(this.httpProviders=rg(tg({},this.httpProviders),{[r]:this.createHttpProvider(r)}),this.httpProviders[r])}async handleSwitchChain(t){var r,n;let i=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var r,n,i,s,o;const a=(n=(r=t.request)==null?void 0:r.params)==null?void 0:n[0],c=((s=(i=t.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(t.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=c.length>0?c.join(","):`0x${this.chainId.toString(16)}`,f=`${a}${d}`,h=u==null?void 0:u[f];if(h)return h;let y;try{y=DZ(l,a,c)}catch(v){console.warn("Failed to extract capabilities from session",v)}if(y)return y;const g=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:rg(tg({},l.sessionProperties||{}),{capabilities:rg(tg({},u||{}),{[f]:g})})})}catch(v){console.warn("Failed to update session with capabilities",v)}return g}async getCallStatus(t){var r,n,i;const s=this.client.session.get(t.topic),o=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(o){const l=this.getBundlerUrl(t.chainId,o);try{return await this.getUserOperationReceipt(l,t)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const a=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,t)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,a)}const c=await XZ({resultId:(i=t.request.params)==null?void 0:i[0],storage:this.storage});if(c)try{return await GZ(c,this.getHttpProvider.bind(this))}catch(l){console.warn("Failed to fetch call status from stored send calls",l,c)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,r){var n;const i=new URL(t),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_n("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(t,r){return`${vZ}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${r}`}async sendCalls(t){var r,n,i;const s=await this.client.request(t),o=(r=t.request.params)==null?void 0:r[0],a=s==null?void 0:s.id,c=(s==null?void 0:s.capabilities)||{},l=(n=c==null?void 0:c.caip345)==null?void 0:n.caip2,u=(i=c==null?void 0:c.caip345)==null?void 0:i.transactionHashes;return!a||!l||!(u!=null&&u.length)||await QZ({sendCalls:{request:o,result:s},storage:this.storage}),s}}var sX=Object.defineProperty,oX=(e,t,r)=>t in e?sX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qo=(e,t,r)=>oX(e,typeof t!="symbol"?t+"":t,r);class aX{constructor(t){qo(this,"name",XP),qo(this,"client"),qo(this,"httpProviders"),qo(this,"events"),qo(this,"namespace"),qo(this,"chainId"),this.namespace=t.namespace,this.events=Sa("events"),this.client=Sa("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r);const n=this.chainId;this.chainId=t,this.events.emit(E0.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${t}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getNamespaceName(){const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return Si(t).namespace}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var t,r;const n={};return(r=(t=this.namespace)==null?void 0:t.accounts)==null||r.forEach(i=>{var s,o;const a=Si(i),c=(o=(s=this.namespace)==null?void 0:s.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];n[a.reference]=this.createHttpProvider(i,c)}),n}getHttpProvider(t){const r=Si(t).reference,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||JP(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new g0(new qP(n,Sa("disableProviderPing")))}}var cX=Object.defineProperty,lX=Object.defineProperties,uX=Object.getOwnPropertyDescriptors,q2=Object.getOwnPropertySymbols,dX=Object.prototype.hasOwnProperty,fX=Object.prototype.propertyIsEnumerable,um=(e,t,r)=>t in e?cX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_c=(e,t)=>{for(var r in t||(t={}))dX.call(t,r)&&um(e,r,t[r]);if(q2)for(var r of q2(t))fX.call(t,r)&&um(e,r,t[r]);return e},Yu=(e,t)=>lX(e,uX(t)),Pr=(e,t,r)=>um(e,typeof t!="symbol"?t+"":t,r);class S0{constructor(t){Pr(this,"client"),Pr(this,"namespaces"),Pr(this,"optionalNamespaces"),Pr(this,"sessionProperties"),Pr(this,"scopedProperties"),Pr(this,"events",new Hf),Pr(this,"rpcProviders",{}),Pr(this,"session"),Pr(this,"providerOpts"),Pr(this,"logger"),Pr(this,"uri"),Pr(this,"disableProviderPing",!1),Pr(this,"connectParams");var r,n;this.providerOpts=t,this.logger=c0({logger:(r=t.logger)!=null?r:A2,name:(n=this.providerOpts.name)!=null?n:QP}),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new S0(t);return await r.initialize(),r}async request(t,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:_c({},t),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(t,r,n,i){const s=new Date().getTime();this.request(t,n,i).then(o=>r(null,Ol(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Ve("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=t,this.setNamespaces(t),this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(t,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=U2(this.session.namespaces);this.namespaces=Gu(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){var r,n;const{uri:i,approval:s}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(r=this.connectParams)==null?void 0:r.authentication,walletPay:(n=this.connectParams)==null?void 0:n.walletPay});i&&(this.uri=i,this.events.emit("display_uri",i));const o=await s();this.session=o;const a=U2(o.namespaces);return this.namespaces=Gu(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[n,i]=this.validateChain(t),s=this.getProvider(n);s?s.setDefaultChain(i,r):this.session&&this.logger.warn(`Provider for namespace '${n}' not found in setDefaultChain`)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(t={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Ii(r))return;for(const n of r)t.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn(r,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,r;if(this.client=this.providerOpts.client||await BQ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||A2,relayUrl:this.providerOpts.relayUrl||bZ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error(n,"Failed to get session"),new Error(`The provided session: ${(r=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>oa(r)))];Xp("client",this.client),Xp("events",this.events),Xp("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const n=PZ(r,this.session);if((n==null?void 0:n.length)===0)return;const i=eR(n),s=Gu(this.namespaces,this.optionalNamespaces),o=Yu(_c({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new iX({namespace:o});break;default:this.rpcProviders[r]=new aX({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var r;const{topic:n}=t;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var r;const{params:n,topic:i}=t;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Ii(o)&&this.events.emit("accountsChanged",o.map(N2))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=oa(o),l=Zp(o)!==Zp(a)?`${c}:${Zp(a)}`:o;this.onChainChanged({currentCaipChainId:l})}else this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var n,i;if(t!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(t);this.session=Yu(_c({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{var r;t.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Yu(_c({},Ve("USER_DISCONNECTED")),{data:t.topic})))}),this.on(E0.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(Yu(_c({},t),{internal:!0}))})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[XP]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:i,scopedProperties:s}=t;this.optionalNamespaces=Gu(r,n),this.sessionProperties=i,this.scopedProperties=s}validateChain(t){const[r,n]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>oa(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=oa(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged({currentCaipChainId:t,previousCaipChainId:r,internal:n=!1}){if(!this.namespaces)return;const[i,s]=this.validateChain(t);if(s){if(this.updateNamespaceChain(i,s),n)this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:i,currentCaipChainId:t,previousCaipChainId:r});else{const o=this.getProvider(i);o?o.setDefaultChain(s):this.session&&this.logger.warn(`Provider for namespace '${i}' not found during chain change`)}await this.persist("namespaces",this.namespaces)}}emitAccountsChangedOnChainChange({namespace:t,currentCaipChainId:r,previousCaipChainId:n}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[t])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(N2);if(!Ii(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(t,r){if(!this.namespaces)return;const n=this.namespaces[t]?t:`${t}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Ku}/${t}${i}`,r)}async getFromStore(t){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Ku}/${t}${n}`)}async deleteFromStore(t){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Ku}/${t}${n}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Ku)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn(r,"Failed to cleanup storage")}}}const hX=S0;let Wn=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),rR=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const nR="fcl-plugin-service-walletconnect",iR="WC/RPC",pX="pre-authz";function gX(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function yX(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function mX(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function bX(){return yX()||mX()}function kl(){return gX()||bX()}function x0(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function wX(e){var t;let{service:r,user:n}=e;return!(!kl()||r.endpoint===Wn.FLOW_AUTHN||r.endpoint===Wn.FLOW_AUTHZ&&(t=n==null?void 0:n.services)!=null&&t.find(i=>i.method===iR&&i.type===pX))}function vX(e){if(!e)return;const t=new Image;t.src=e}async function sR(e){let{provider:t,existingPairing:r,network:n}=e;const i=n||await HI(),s={flow:{methods:[Wn.FLOW_AUTHN,Wn.FLOW_PRE_AUTHZ,Wn.FLOW_AUTHZ,Wn.FLOW_USER_SIGN],chains:[`flow:${i}`],events:["chainChanged","accountsChanged"]}};let o;const a=new Promise((l,u)=>{const d=f=>{l(f)};t.on("display_uri",d),o=()=>{t.removeListener("display_uri",d),u(new Error("WalletConnect Session Request aborted"))}}),c=t.connect({pairingTopic:r==null?void 0:r.topic,namespaces:s}).finally(()=>{o()});return{uri:await a,approval:()=>c}}const oR=async e=>{var t,r,n,i,s,o,a;let{method:c,body:l,session:u,provider:d,isExternal:f,abortSignal:h,disableNotifications:y}=e;const[g,v,b]=EX(u),w=JSON.stringify({...l,addr:v,address:b}),_=await Promise.race([d.client.request({request:{method:c,params:[w]},chainId:g,topic:(t=d.session)==null?void 0:t.topic}),new Promise((I,R)=>{h!=null&&h.aborted&&R(new Error("WalletConnect Request aborted")),h==null||h.addEventListener("abort",()=>{R(new Error("WalletConnect Request aborted"))})})]);if(!(typeof _!="object"||_==null))switch(_.status){case"APPROVED":let I=function(R){return R.method==="WC/RPC"?{...R,params:{...R.params,...f?{externalProvider:u.topic}:{},...y?{disableNotifications:y}:{}}}:R};if(c===Wn.FLOW_AUTHN){const R=(((r=_==null?void 0:_.data)==null?void 0:r.services)??[]).map(I);return{..._.data?_.data:{},services:R}}return c===Wn.FLOW_PRE_AUTHZ?{..._.data,...(n=_.data)!=null&&n.proposer?{proposer:I(_.data.proposer)}:{},payer:[...(s=(i=_.data)==null?void 0:i.payer)==null?void 0:s.map(I)],authorization:[...(a=(o=_.data)==null?void 0:o.authorization)==null?void 0:a.map(I)]}:_.data;case"DECLINED":throw new Error(`Declined: ${_.reason||"No reason supplied"}`);case"REDIRECT":return _.data;default:throw new Error("Declined: No reason supplied")}};function EX(e){const[t,r,n]=Object.values(e.namespaces).map(i=>i.accounts).flat().filter(i=>i.startsWith("flow:"))[0].split(":");return[`${t}:${r}`,n,n]}var _X='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity,1))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity,1))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity,1))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity,1))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity,1))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function SX(e){let{title:t,message:r,icon:n,onClick:i,onDismiss:s,animate:o}=e;return Bn("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${o?"animate-slideUp":""}`,role:"alert",onClick:a=>{i&&(a.stopPropagation(),i==null||i())},children:[n&&Bn("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:n,alt:t}),Bn("div",{className:"ml-3 grow",children:[Bn("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),Bn("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:r})]}),Bn("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${kl()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:a=>{a.stopPropagation(),s==null||s()},children:[Bn("span",{className:"sr-only",children:"Close"}),Bn("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Bn("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let Sc=null,xX=0,Ho=null;function IX(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=document.createElement("div");t.appendChild(r),document.body.appendChild(e);const n=document.createElement("style");n.textContent=_X,t.appendChild(n);const i=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{r.classList.toggle("dark",i.matches)};return i.addEventListener("change",s),s(),r}function OX(e){let{title:t,message:r,icon:n,onClick:i,onDismiss:s,debounceDelay:o=0}=e;Sc||(Sc=IX());const a=!Ho;Ho&&(clearTimeout(Ho),Ho=null),TE(Bn(SX,{title:t,message:r,icon:n,onClick:i,onDismiss:()=>{s==null||s(),c()},animate:a},xX++),Sc);function c(){Sc&&TE(null,Sc)}return{dismiss:()=>{Ho=setTimeout(()=>{Ho=null,c()},o)}}}var kX="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function AX(e){const t=new Set;let r=e;return{subscribe:n=>(t.add(n),()=>{t.delete(n)}),setState:n=>{r=n,t.forEach(i=>i(r))},getState:()=>r}}let Qu=AX({});const PX=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{name:nR,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:iR,exec:RX(e,t,W5(()=>hR(()=>import("./index-n6suXE_2-mC7NOQ2K.js"),[]).then(r=>r.i),[]).then(r=>r.WalletConnectModal))},services:[]}},RX=(e,t,r)=>async n=>{var i,s,o,a,c,l;let{service:u,body:d,opts:f,abortSignal:h,user:y,config:g}=n;vX((i=u.provider)==null?void 0:i.icon);const{wcRequestHook:v,pairingModalOverride:b,disableNotifications:w}=g,_=((s=u.params)==null?void 0:s.disableNotifications)??w,I=await NX({provider:e,externalProviderOrTopic:(o=u.params)==null?void 0:o.externalProvider});V(!!I,"WalletConnect is not initialized");const{provider:R,isExternal:T}=I;let C=R.session??null,L;const N=u.endpoint,F=B(u);if(C!=null&&C.topic&&(C==null?void 0:C.topic)===((a=u.params)==null?void 0:a.externalProvider)&&N===Wn.FLOW_AUTHN)return y;C==null&&(C=await new Promise((D,m)=>{function S(){m("Declined: Externally Halted")}TX(r)({service:u,onClose:S,appLink:F,provider:R,method:N,pairing:L,wcRequestHook:v,pairingModalOverride:b,abortSignal:h,network:g.client.network}).then(D,m)})),v&&v instanceof Function&&v({type:rR.SIGNING_REQUEST,method:N,service:u,session:C??null,pairing:null,uri:null}),wX({service:u,user:y})&&x0(F);const q=((c=C==null?void 0:C.sessionProperties)==null?void 0:c["fclWc.disableNotificationsOnMobile"])==="true",j=!_&&!q?CX({user:y,service:u}):null;return await oR({method:N,body:d,session:C,provider:R,abortSignal:h,isExternal:T,disableNotifications:(l=u.params)==null?void 0:l.disableNotifications}).finally(()=>j==null?void 0:j.dismiss());function B(D){let{uid:m}=D;return m&&/^(ftp|http|https):\/\/[^ "]+$/.test(m)||be({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${m}`,level:Re.warn}),m}};function TX(e){return async t=>{let{service:r,onClose:n,appLink:i,provider:s,method:o,pairing:a,wcRequestHook:c,pairingModalOverride:l,abortSignal:u,network:d}=t;const f=s.providerOpts.projectId;V(!!f,"Cannot establish connection, WalletConnect projectId is undefined");let h=null,y=null;try{const{uri:g,approval:v}=await sR({provider:s,existingPairing:a,network:d});if(c&&c instanceof Function&&c({type:rR.SESSION_REQUEST,method:o,service:r,session:null,pairing:a??null,uri:g??null}),kl()){const w=new URLSearchParams({uri:g}).toString();let _=a==null?i+"?"+w:i;x0(_)}else if(!a)if(l)l(g,n);else{y=new(await e)({projectId:f}),y.openModal({uri:g,onClose:n});const w=y.subscribeModal(_=>{_.open===!1&&(n==null||n(),w())})}const b=await Promise.race([v(),new Promise((w,_)=>{u!=null&&u.aborted&&_(new Error("Session request aborted")),u==null||u.addEventListener("abort",()=>{_(new Error("Session request aborted"))})})]);if(b==null)throw new Error("Session request failed");return b}catch(g){throw g instanceof Error&&be({title:`${g.name} Error establishing WalletConnect session`,message:`
          ${g.message}
          uri: ${h}
        `,level:Re.error}),n(),g}finally{y==null||y.closeModal()}}}function CX(e){var t;let{service:r,user:n}=e;const i=(t=n==null?void 0:n.services)==null?void 0:t.find(o=>o.type==="authn"),s=(i==null?void 0:i.provider)||r.provider;return OX({title:(s==null?void 0:s.name)||"Mobile Wallet",message:kl()?"Tap to view request in app":"Pending request on your mobile device",icon:(s==null?void 0:s.icon)||kX,onClick:kl()&&r.uid?()=>x0(r.uid):void 0,debounceDelay:r.type==="pre-authz"?500:0})}async function NX(e){var t;let{provider:r,externalProviderOrTopic:n}=e;if(!n){const o=await r;return o?{provider:o,isExternal:!1}:null}if(typeof n!="string"){const o=(t=n.session)==null?void 0:t.topic;if(!o)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return Qu.setState({[o]:n}),{provider:n,isExternal:!0}}const i=n;if(i){let o=Qu.getState()[i];if(!o){let a,c;o=await new Promise((l,u)=>{a=Qu.subscribe(()=>{const d=Qu.getState()[i];d&&l(d)}),c=setTimeout(()=>{u(new Error(`Provider for external topic ${i} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(c),a()})}return{provider:o,isExternal:!0}}const s=await r;return s?{provider:s,isExternal:!1}:null}const UX="wss://relay.walletconnect.com",BX="debug";let Nc=Promise.resolve(null);const LX=async e=>{let{projectId:t,metadata:r}=e;V(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return hX.init({logger:BX,relayUrl:UX,projectId:t,metadata:r})}catch(n){throw n instanceof Error&&be({title:`${n.name} fcl-wc Init Client`,message:n.message,level:Re.error}),n}},DX=e=>{const{FclWcServicePlugin:t,providerPromise:r}=jX(e);return i5.authn.update(),{FclWcServicePlugin:t,providerPromise:r}},jX=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return Nc=Nc.catch(()=>null).then(t=>t||LX({projectId:e.projectId,metadata:e.metadata})).catch(t=>{throw be({title:"WalletConnect Client Initialization Error",message:t.message?t.message:t,level:Re.error}),t}),{FclWcServicePlugin:PX(Nc,e),providerPromise:Nc}};async function aR(){return Nc.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}let H2=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class V2 extends Error{constructor(t,r,n){super(r),this.code=t,this.message=r,this.data=n}}var dm=function(e){return e.HELLO="rpc_hello",e}(dm||{});class MX{constructor(t){oe(this,"id",0),oe(this,"setSend",()=>{}),oe(this,"_send",new Promise(n=>{this.setSend=n})),oe(this,"peerInfo",new Promise((n,i)=>{this.resolvePeerInfo=n,this.rejectPeerInfo=i})),oe(this,"enabledNotifications",[]),oe(this,"requestHandlers",{}),oe(this,"subscriptions",{}),oe(this,"messageListeners",[]);let{notifications:r}=t;this.enabledNotifications=r||[],this.on(dm.HELLO,n=>(this.resolvePeerInfo(n),this.ownInfo()))}connect(t){let{send:r}=t;this.setSend(r),this.requestWithoutConnection(dm.HELLO,this.ownInfo()).then(n=>{this.resolvePeerInfo(n)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){(t==null?void 0:t.jsonrpc)==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(r=>r(t)))}async handleRequest(t){const r=this.requestHandlers[t.method];if(r)try{const n=await r(t.params);this.send({jsonrpc:"2.0",id:t.id,result:n})}catch(n){n instanceof V2?this.send({jsonrpc:"2.0",id:t.id,error:{code:n.code,message:n.message,data:n.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:H2.INTERNAL_ERROR,message:n==null?void 0:n.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:H2.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(r=>r(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(r=>r!==t)}}async notify(t,r){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:r})}async request(t,r){return await this.onceConnected(),this.requestWithoutConnection(t,r)}async requestWithoutConnection(t,r){const n=this.id++;let i=()=>{};const s=new Promise((o,a)=>{i=this.onMessage(c=>{if(c.id===n&&("result"in c||"error"in c)){if(c.error){const l=new V2(c.error.code,c.error.message,c.error.data);a(l)}o(c.result)}})}).finally(i);return this.send({jsonrpc:"2.0",method:t,params:r,id:n}),s}on(t,r){this.requestHandlers[t]=r}subscribe(t,r){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(r)}unsubscribe(t,r){var n;(n=this.subscriptions[t])==null||n.delete(r)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const zX=globalThis.AbortController||require("abort-controller");function FX(e){const t=new zX;return e!=null&&e.aborted&&t.abort(),e==null||e.addEventListener("abort",()=>t.abort()),t}let ng=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),K2=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const W2="APPROVED",$X=e=>{let{onExecResult:t,execStrategyOpts:r,execStrategyArgs:n,abortSignal:i}=e;return async s=>{var o;let{service:a}=s;try{const c=await Qf({...r,service:a,config:r.config,abortSignal:i},...n.slice(1));if((((o=Jn(c))==null?void 0:o.status)||W2)===W2)return t(c),null;throw new Error((c==null?void 0:c.reason)||"Service was declined")}catch(c){throw new Error((c==null?void 0:c.message)||"Service execution failed")}}},qX=e=>{let{rpc:t,network:r,onExecResult:n,authnBody:i,abortSignal:s}=e;const o=HX({rpc:t,authnBody:i});return async a=>{if(s.aborted)throw new Error("Handler has been terminated");const c=await aR(),{uri:l,approval:u}=await sR({provider:c,network:r});return o({uri:l,approval:u,onExecResult:n}),{uri:l}}};function HX(e){let{rpc:t,authnBody:r}=e;return n=>{let{uri:i,approval:s,onExecResult:o}=n;setTimeout(async()=>{try{const a=await aR(),c=await s();t.notify(ng.NOTIFY_QRCODE_CONNECTING,{uri:i});const l=await oR({method:Wn.FLOW_AUTHN,body:r,session:c,provider:a});t.notify(ng.NOTIFY_QRCODE_CONNECTED,{uri:i}),o(l)}catch(a){t.notify(ng.NOTIFY_QRCODE_ERROR,{uri:i,error:a==null?void 0:a.message})}},0)}}function VX(e){let{onExecResult:t,body:r,opts:n,args:i,abortSignal:s}=e;const o=new MX({notifications:[]});return o.on(K2.REQUEST_WALLETCONNECT_QRCODE,qX({network:n.config.client.network,rpc:o,onExecResult:t,authnBody:r,abortSignal:s})),o.on(K2.EXEC_SERVICE,$X({onExecResult:t,execStrategyOpts:n,execStrategyArgs:i,abortSignal:s})),{connect:o.connect.bind(o),receive:o.receive.bind(o)}}async function KX(e){let{customRpc:t,opts:r,args:n,abortSignal:i}=e;const s={...r.config,client:{...r.config.client,discoveryRpcEnabled:!0}};return Qf({...r,config:s,customRpc:t,abortSignal:i},...n.slice(1))}const G2="authn";async function WX(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[n]=t,{body:i,abortSignal:s,service:o}=n;if((o==null?void 0:o.type)!==G2)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${G2}" but got "${o==null?void 0:o.type}"`),Qf(...t);const a=FX(s);let c;const l=new Promise(async(u,d)=>{const f=VX({onExecResult:u,body:i,opts:n,args:t,abortSignal:a.signal});c=KX({customRpc:f,opts:n,args:t,abortSignal:a.signal}).then(u,d)});return await l.catch(()=>{}),await Promise.race([new Promise(u=>setTimeout(u,1e3)),c]).catch(()=>{}),a.abort(),l}const GX=typeof window>"u",YX=e=>{const t=e.appDetailTitle,r=e.appDetailIcon,n=e.appDetailDescription,i=e.appDetailUrl;return{name:t??document.title,description:n??"",url:i??window.location.origin,icons:r?[r]:[]}};let Zu=null,Xu=!1;function QX(){$e.subscribe(async e=>{const t={walletConnectProjectId:e["walletconnect.projectId"],walletConnectDisableNotifications:e["walletconnect.disableNotifications"],appDetailTitle:e["app.detail.title"],appDetailIcon:e["app.detail.icon"],appDetailDescription:e["app.detail.description"],appDetailUrl:e["app.detail.url"]};ZX(t)})}function ZX(e){if(GX)return;const t=e.walletConnectProjectId,r=e.walletConnectDisableNotifications,n=Zu;if(Zu=JSON.stringify(e,null,2),Xu){n!==Zu&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${n}

Current configuration:
${Zu}`);return}if(!t)return;if(V(!!t,"FCL Configuration value for 'walletconnect.projectId' is required"),dv.getPlugins().has(nR)){Xu||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),Xu=!0;return}Xu=!0;const{FclWcServicePlugin:i}=DX({projectId:t,metadata:YX(e),disableNotifications:r??void 0});dv.add([i])}const XX={execStrategy:WX},Ju="FCL_IFRAME",JX=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function cR(e){V(!document.getElementById(Ju),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Ju,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=JX,document.body.append(t);const r=()=>{document.getElementById(Ju)&&document.getElementById(Ju).remove()};return[t.contentWindow,r]}const eJ="FCL_POP";let gn=null,Y2=null;function tJ(e,t,r,n,i){const s=r.top.outerHeight/2+r.top.screenY-i/2,o=r.top.outerWidth/2+r.top.screenX-n/2,a=r.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${n}, height=${i}, top=${s}, left=${o}`);if(!a)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return a}function lR(e){return gn==null||gn!=null&&gn.closed?gn=tJ(e,eJ,window,640,770):(Y2!==e&&gn.location.replace(e),gn.focus()),Y2=e,[gn,()=>{gn&&!gn.closed&&gn.close(),gn=null}]}let Wr=null,Q2=null;function uR(e){if(Wr==null||Wr!=null&&Wr.closed){if(Wr=window.open(e,"_blank"),!Wr)throw new Error("Tab failed to open (was it blocked by the browser?)")}else Q2!==e&&Wr.location.replace(e),Wr.focus();return Q2=e,[Wr,()=>{Wr&&!Wr.closed&&Wr.close(),Wr=null}]}const rJ=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),Bs=()=>{};function nJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Bs,close:Bs};const r=t.onClose||Bs,n=t.onMessage||Bs,i=t.onReady||Bs,s=t.onResponse||Bs,o=t.onCustomRpc||Bs;let a,c;const l=Xf({close:u,send:d,onReady:i,onResponse:s,onMessage:n,onCustomRpc:o,getSource:()=>a});return window.addEventListener("message",l),[a,c]=cR(jl(e)),{send:d,close:u};function u(){try{window.removeEventListener("message",l),c(),r()}catch(f){console.error("Frame Close Error",f)}}function d(f){try{a.postMessage(JSON.parse(JSON.stringify(f||{})),"*")}catch(h){console.error("Frame Send Error",f,h)}}}const bo="1.21.9";function iJ(e){let{service:t,body:r,config:n,customRpc:i,abortSignal:s,opts:o}=e;return new Promise((a,c)=>{const l=Ob(),u=o.includeOlderJsonRpcCall,{close:d}=nJ(t,{async onReady(f,h){let{send:y}=h;try{y({type:"FCL:VIEW:READY:RESPONSE",fclVersion:bo,body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),y({fclVersion:bo,type:"FCL:FRAME:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),u&&y({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[r,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),i==null||i.connect({send:g=>{y({type:"FCL:VIEW:CUSTOM_RPC",payload:g})}})}catch(g){throw g}},onResponse(f,h){let{close:y}=h;try{if(typeof f.data!="object")return;const g=Jn(f.data);switch(g.status){case"APPROVED":a(g.data),y();break;case"DECLINED":c(`Declined: ${g.reason||"No reason supplied"}`),y();break;case"REDIRECT":a(g),y();break;default:c("Declined: No reason supplied"),y();break}}catch(g){throw console.error("execIframeRPC onResponse error",g),g}},onMessage(f,h){let{close:y}=h;try{if(typeof f.data!="object"||f.data.jsonrpc!=="2.0"||f.data.id!==l)return;const g=Jn(f.data.result);switch(g.status){case"APPROVED":a(g.data),y();break;case"DECLINED":c(`Declined: ${g.reason||"No reason supplied"}`),y();break;case"REDIRECT":a(g),y();break;default:c("Declined: No reason supplied"),y();break}}catch(g){throw console.error("execIframeRPC onMessage error",g),g}},onClose(){c("Declined: Externally Halted")},onCustomRpc(f){i==null||i.receive(f)}});s&&(s.aborted&&(c("Declined: Aborted"),d()),s.addEventListener("abort",()=>{c("Declined: Aborted"),d()}))})}const Ls=()=>{};function sJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Ls,close:Ls};const r=t.onClose||Ls,n=t.onMessage||Ls,i=t.onReady||Ls,s=t.onResponse||Ls,o=t.onCustomRpc||Ls;let a,c;const l=Xf({close:d,send:f,onReady:i,onResponse:s,onMessage:n,onCustomRpc:o,getSource:()=>a});window.addEventListener("message",l),[a,c]=lR(jl(e));const u=setInterval(function(){a&&a.closed&&d()},500);return{send:f,close:d};function d(){try{window.removeEventListener("message",l),clearInterval(u),c(),r()}catch(h){console.error("Popup Close Error",h)}}function f(h){try{a.postMessage(JSON.parse(JSON.stringify(h||{})),"*")}catch(y){console.error("Popup Send Error",h,y)}}}function oJ(e){let{service:t,body:r,config:n,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const l=Ob(),{redir:u,includeOlderJsonRpcCall:d}=o,{close:f}=sJ(t,{customRpc:s,async onReady(h,y){let{send:g}=y;try{g({fclVersion:bo,type:"FCL:VIEW:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),g({fclVersion:bo,type:"FCL:FRAME:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),d&&g({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[r,t.params]}),s==null||s.connect({send:v=>{g({type:"FCL:VIEW:CUSTOM_RPC",payload:v})}})}catch(v){throw v}},onResponse(h,y){let{close:g}=y;try{if(typeof h.data!="object")return;const v=Jn(h.data);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onResponse error",v),v}},onMessage(h,y){let{close:g}=y;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==l)return;const v=Jn(h.data.result);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onMessage error",v),v}},onClose(){c("Declined: Externally Halted")},onCustomRpc(h){s==null||s.receive(h)}});i&&(i.aborted&&(c("Declined: Aborted"),f()),i.addEventListener("abort",()=>{c("Declined: Aborted"),f()}))})}const Ds=()=>{};function aJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Ds,close:Ds};const r=t.onClose||Ds,n=t.onMessage||Ds,i=t.onReady||Ds,s=t.onResponse||Ds,o=t.onCustomRpc||Ds;let a,c;const l=Xf({close:d,send:f,onReady:i,onResponse:s,onMessage:n,onCustomRpc:o,getSource:()=>a});window.addEventListener("message",l),[a,c]=uR(jl(e));const u=setInterval(function(){a&&a.closed&&d()},500);return{send:f,close:d};function d(){try{window.removeEventListener("message",l),clearInterval(u),c(),r()}catch(h){console.error("Tab Close Error",h)}}function f(h){try{a.postMessage(JSON.parse(JSON.stringify(h||{})),"*")}catch(y){console.error("Tab Send Error",h,y)}}}function cJ(e){let{service:t,body:r,config:n,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const l=Ob(),{redir:u,includeOlderJsonRpcCall:d}=o,{close:f}=aJ(t,{customRpc:s,async onReady(h,y){let{send:g}=y;try{g({fclVersion:bo,type:"FCL:VIEW:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),g({fclVersion:bo,type:"FCL:FRAME:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),d&&g({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[r,t.params]}),s==null||s.connect({send:v=>{g({type:"FCL:VIEW:CUSTOM_RPC",payload:v})}})}catch(v){throw v}},onResponse(h,y){let{close:g}=y;try{if(typeof h.data!="object")return;const v=Jn(h.data);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onResponse error",v),v}},onMessage(h,y){let{close:g}=y;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==l)return;const v=Jn(h.data.result);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onMessage error",v),v}},onClose(){c("Declined: Externally Halted")},onCustomRpc(h){s==null||s.receive(h)}});i&&(i.aborted&&(f(),c("Declined: Aborted")),i.addEventListener("abort",()=>{f(),c("Declined: Aborted")}))})}const js=()=>{};function lJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:js,close:js};const r=t.onClose||js,n=t.onMessage||js,i=t.onReady||js,s=t.onResponse||js,o=t.onCustomRpc||js,a=Xf({close:c,send:l,onReady:i,onResponse:s,onMessage:n,onCustomRpc:o});return window.addEventListener("message",a),l({service:e}),{send:l,close:c};function c(){try{window.removeEventListener("message",a),r()}catch(u){console.error("Ext Close Error",u)}}function l(u){try{window&&window.postMessage(JSON.parse(JSON.stringify(u||{})),"*")}catch(d){console.error("Ext Send Error",u,d)}}}function uJ(e){let{service:t,body:r,config:n,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const{close:l}=lJ(t,{async onReady(u,d){let{send:f}=d;try{f({fclVersion:bo,type:"FCL:VIEW:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),s==null||s.connect({send:h=>{f({type:"FCL:VIEW:CUSTOM_RPC",body:h})}})}catch(h){throw h}},onResponse(u,d){let{close:f}=d;try{if(typeof u.data!="object")return;const h=Jn(u.data);switch(h.status){case"APPROVED":a(h.data),f();break;case"DECLINED":c(`Declined: ${h.reason||"No reason supplied"}`),f();break;case"REDIRECT":a(h),f();break;default:c("Declined: No reason supplied"),f();break}}catch(h){throw console.error("execExtRPC onResponse error",h),h}},onClose(){c("Declined: Externally Halted")},onCustomRpc(u){s==null||s.receive(u)}});i&&(i.aborted&&(l(),c("Declined: Aborted")),i.addEventListener("abort",()=>{l(),c("Declined: Aborted")}))})}const Z2=()=>{throw new Error("Strategy util has not been implemented on this platform")},dJ={"VIEW/IFRAME":cR,"VIEW/POP":lR,"VIEW/TAB":uR,"VIEW/MOBILE_BROWSER":Z2,"VIEW/DEEPLINK":Z2};async function X2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:r}=t;try{return dJ[e.method](r(e),t)}catch(n){throw console.error("execLocal({service, opts = {}})",n,{service:e,opts:t}),n}}const fJ={[Br["HTTP/RPC"]]:gv(X2),[Br["HTTP/POST"]]:gv(X2),[Br["IFRAME/RPC"]]:iJ,[Br["POP/RPC"]]:oJ,[Br["TAB/RPC"]]:cJ,[Br["EXT/RPC"]]:uJ},hJ=()=>typeof window>"u",pJ=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},gJ={can:!hJ()&&!!window.localStorage,get:async e=>pJ(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},Jl=z5({platform:"web",discovery:XX,getStorageProvider:async()=>await $e.get("fcl.storage")||gJ}),yJ=o5(Jl),mJ=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Jl().authenticate(e)},bJ=()=>Jl().unauthenticate(),ig=Jl().authorization;$e(rJ());YI({coreStrategies:fJ});QX();function wJ({user:e}){return ne.jsx("div",{className:"wallet-connect",children:e!=null&&e.addr?ne.jsxs("div",{className:"user-info",children:[ne.jsxs("span",{className:"address",children:[e.addr.substring(0,6),"...",e.addr.slice(-4)]}),ne.jsx("button",{onClick:()=>bJ(),className:"logout-btn",children:"Disconnect"})]}):ne.jsx("button",{onClick:()=>mJ(),className:"connect-btn",children:"Connect Wallet"})})}function vJ({prices:e}){const t=Object.entries(e).sort();return ne.jsx("div",{className:"price-viewer",children:t.length===0?ne.jsx("p",{className:"empty-state",children:"No prices available. Submit prices from oracle nodes."}):ne.jsx("div",{className:"price-grid",children:t.map(([r,n])=>ne.jsxs("div",{className:"price-card",children:[ne.jsx("h3",{children:r}),ne.jsxs("div",{className:"price-value",children:["$",n.toFixed(8)]}),ne.jsx("p",{className:"updated-at",children:"Updated now"})]},r))})})}function EJ({user:e,oracleAddress:t,onUpdate:r}){const[n,i]=Qt.useState(""),[s,o]=Qt.useState("1.0"),[a,c]=Qt.useState(!1),[l,u]=Qt.useState(""),d=async()=>{if(!n||!s){u("Please fill in all fields");return}c(!0);try{const f=await yJ({cadence:`
          import FlowOracle from ${t}
          
          transaction(nodeAddress: Address, weight: UFix64) {
            let oracleRef: &FlowOracle
            
            prepare(signer: AuthAccount) {
              self.oracleRef = signer.borrow<&FlowOracle>(from: /storage/FlowOracle)
                ?? panic("No FlowOracle found")
            }
            
            execute {
              self.oracleRef.addPriceNode(address: nodeAddress, weight: weight)
            }
          }
        `,args:(h,y)=>[h(n,y.Address),h(s,y.UFix64)],payer:ig,proposer:ig,authorizations:[ig],limit:100});u(`Transaction submitted: ${f}`),i(""),o("1.0"),r()}catch(f){u(`Error: ${f.message}`)}finally{c(!1)}};return ne.jsxs("div",{className:"node-management",children:[ne.jsx("h2",{children:"Add Price Node"}),ne.jsxs("div",{className:"form-group",children:[ne.jsx("label",{children:"Node Address"}),ne.jsx("input",{type:"text",placeholder:"0x...",value:n,onChange:f=>i(f.target.value),className:"form-input"})]}),ne.jsxs("div",{className:"form-group",children:[ne.jsx("label",{children:"Weight"}),ne.jsx("input",{type:"number",placeholder:"1.0",value:s,onChange:f=>o(f.target.value),step:"0.1",className:"form-input"})]}),ne.jsx("button",{onClick:d,disabled:a,className:"submit-btn",children:a?"Adding Node...":"Add Node"}),l&&ne.jsx("p",{className:"message",children:l})]})}function _J({oracleAddress:e}){const[t,r]=Qt.useState("FLOW/USDC"),[n,i]=Qt.useState([]),[s,o]=Qt.useState(!1),a=async c=>{o(!0);try{const l=await iy({cadence:`
          import FlowOracle from ${e}
          
          pub fun main(pair: String): [FlowOracle.PricePoint] {
            return FlowOracle.getPriceHistory(pair: pair, limit: 20)
          }
        `,args:(u,d)=>[u(t,d.String)]});i(l||[])}catch(l){console.error("Error fetching history:",l)}finally{o(!1)}};return ne.jsxs("div",{className:"price-history",children:[ne.jsxs("div",{className:"history-controls",children:[ne.jsx("input",{type:"text",placeholder:"Enter pair (e.g., FLOW/USDC)",value:t,onChange:c=>r(c.target.value),className:"pair-input"}),ne.jsx("button",{onClick:()=>a(),className:"fetch-btn",disabled:s,children:s?"Loading...":"Load History"})]}),n.length===0?ne.jsx("p",{className:"empty-state",children:"Enter a pair and click Load History"}):ne.jsx("div",{className:"history-table",children:ne.jsxs("table",{children:[ne.jsx("thead",{children:ne.jsxs("tr",{children:[ne.jsx("th",{children:"Price"}),ne.jsx("th",{children:"Timestamp"})]})}),ne.jsx("tbody",{children:n.map((c,l)=>ne.jsxs("tr",{children:[ne.jsxs("td",{children:["$",c.price.toFixed(8)]}),ne.jsx("td",{children:new Date(c.timestamp*1e3).toLocaleString()})]},l))})]})})]})}$e().put("accessNode.api","https://rest-testnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/testnet/authn");const ed="0x791e03a1b0a978ff";function SJ(){const[e,t]=Qt.useState(null),[r,n]=Qt.useState({}),[i,s]=Qt.useState({quorumSize:0,nodeCount:0}),[o,a]=Qt.useState("prices");Qt.useEffect(()=>{Jl.subscribe(t)},[]),Qt.useEffect(()=>{c(),l();const u=setInterval(()=>{c(),l()},15e3);return()=>clearInterval(u)},[]);const c=async()=>{try{const u=await iy({cadence:`
          import FlowOracle from ${ed}
          
          pub fun main(): {String: UFix64} {
            return FlowOracle.getAllPrices()
          }
        `});n(u||{})}catch(u){console.error("Error fetching prices:",u)}},l=async()=>{try{const u=await iy({cadence:`
          import FlowOracle from ${ed}
          
          pub fun main(): {String: UInt64} {
            return {
              "quorumSize": FlowOracle.getQuorumSize(),
              "nodeCount": FlowOracle.getNodeCount()
            }
          }
        `});s(u||{})}catch(u){console.error("Error fetching oracle stats:",u)}};return ne.jsxs("div",{className:"App",children:[ne.jsx("header",{className:"header",children:ne.jsxs("div",{className:"container",children:[ne.jsx("h1",{children:"FlowOracle"}),ne.jsx("p",{className:"subtitle",children:"Decentralized Price Feed for Flow DeFi"}),ne.jsx(wJ,{user:e})]})}),ne.jsxs("main",{className:"container",children:[ne.jsxs("div",{className:"oracle-stats",children:[ne.jsxs("div",{className:"stat-card",children:[ne.jsx("h3",{children:"Quorum Size"}),ne.jsx("p",{className:"stat-value",children:i.quorumSize||0})]}),ne.jsxs("div",{className:"stat-card",children:[ne.jsx("h3",{children:"Price Nodes"}),ne.jsx("p",{className:"stat-value",children:i.nodeCount||0})]}),ne.jsxs("div",{className:"stat-card",children:[ne.jsx("h3",{children:"Active Prices"}),ne.jsx("p",{className:"stat-value",children:Object.keys(r).length})]})]}),ne.jsxs("div",{className:"tabs",children:[ne.jsx("button",{className:`tab ${o==="prices"?"active":""}`,onClick:()=>a("prices"),children:"Current Prices"}),ne.jsx("button",{className:`tab ${o==="history"?"active":""}`,onClick:()=>a("history"),children:"Price History"}),(e==null?void 0:e.addr)&&ne.jsx("button",{className:`tab ${o==="nodes"?"active":""}`,onClick:()=>a("nodes"),children:"Manage Nodes"})]}),ne.jsxs("div",{className:"tab-content",children:[o==="prices"&&ne.jsx(vJ,{prices:r}),o==="history"&&ne.jsx(_J,{oracleAddress:ed}),o==="nodes"&&(e==null?void 0:e.addr)&&ne.jsx(EJ,{user:e,oracleAddress:ed,onUpdate:l})]})]}),ne.jsx("footer",{className:"footer",children:ne.jsx("p",{children:"FlowOracle  Real-time Price Feed | Testnet Beta"})})]})}const xJ=sg.createRoot(document.getElementById("root"));xJ.render(ne.jsx(CR.StrictMode,{children:ne.jsx(SJ,{})}));export{W5 as V,hR as _};
